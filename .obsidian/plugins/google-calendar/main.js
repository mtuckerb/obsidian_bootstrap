/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var X3=Object.create;var Xl=Object.defineProperty,J3=Object.defineProperties,Z3=Object.getOwnPropertyDescriptor,$3=Object.getOwnPropertyDescriptors,eO=Object.getOwnPropertyNames,x1=Object.getOwnPropertySymbols,tO=Object.getPrototypeOf,S1=Object.prototype.hasOwnProperty,rO=Object.prototype.propertyIsEnumerable;var T1=(e,t,r)=>t in e?Xl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Zr=(e,t)=>{for(var r in t||(t={}))S1.call(t,r)&&T1(e,r,t[r]);if(x1)for(var r of x1(t))rO.call(t,r)&&T1(e,r,t[r]);return e},on=(e,t)=>J3(e,$3(t)),A1=e=>Xl(e,"__esModule",{value:!0});var SG=typeof require!="undefined"?require:e=>{throw new Error('Dynamic require of "'+e+'" is not supported')};var ue=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),nO=(e,t)=>{A1(e);for(var r in t)Xl(e,r,{get:t[r],enumerable:!0})},iO=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of eO(t))!S1.call(e,n)&&n!=="default"&&Xl(e,n,{get:()=>t[n],enumerable:!(r=Z3(t,n))||r.enumerable});return e},mt=e=>iO(A1(Xl(e!=null?X3(tO(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var M=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{l(r.next(c))}catch(f){i(f)}},s=c=>{try{l(r.throw(c))}catch(f){i(f)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,s);l((r=r.apply(e,t)).next())});var Mp=ue((BG,L1)=>{"use strict";var rf=Object.prototype.hasOwnProperty,I1=Object.prototype.toString,k1=Object.defineProperty,R1=Object.getOwnPropertyDescriptor,B1=function(t){return typeof Array.isArray=="function"?Array.isArray(t):I1.call(t)==="[object Array]"},N1=function(t){if(!t||I1.call(t)!=="[object Object]")return!1;var r=rf.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&rf.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var i;for(i in t);return typeof i=="undefined"||rf.call(t,i)},D1=function(t,r){k1&&r.name==="__proto__"?k1(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},O1=function(t,r){if(r==="__proto__")if(rf.call(t,r)){if(R1)return R1(t,r).value}else return;return t[r]};L1.exports=function e(){var t,r,n,i,a,s,l=arguments[0],c=1,f=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<f;++c)if(t=arguments[c],t!=null)for(r in t)n=O1(l,r),i=O1(t,r),l!==i&&(d&&i&&(N1(i)||(a=B1(i)))?(a?(a=!1,s=n&&B1(n)?n:[]):s=n&&N1(n)?n:{},D1(l,{name:r,newValue:e(d,s,i)})):typeof i!="undefined"&&D1(l,{name:r,newValue:i}));return l}});var Fp=ue((ko,P1)=>{"use strict";var aO=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof fa!="undefined")return fa;throw new Error("unable to locate global object")},fa=aO();P1.exports=ko=fa.fetch;fa.fetch&&(ko.default=fa.fetch.bind(fa));ko.Headers=fa.Headers;ko.Request=fa.Request;ko.Response=fa.Response});var qp=ue((NG,U1)=>{"use strict";var Di=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";Di.writable=e=>Di(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";Di.readable=e=>Di(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";Di.duplex=e=>Di.writable(e)&&Di.readable(e);Di.transform=e=>Di.duplex(e)&&typeof e._transform=="function";U1.exports=Di});var Gp=ue(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.GaxiosError=void 0;var M1=class extends Error{constructor(t,r,n){super(t);this.response=n,this.config=r,this.code=n.status.toString()}};nf.GaxiosError=M1});var q1=ue(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.getRetryConfig=void 0;function sO(e){return M(this,null,function*(){var t;let r=F1(e);if(!e||!e.config||!r&&!e.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,e.config.retryConfig=r,!(yield(r.shouldRetry||oO)(e)))return{shouldRetry:!1,config:e.config};let s=(r.currentRetryAttempt?0:(t=r.retryDelay)!==null&&t!==void 0?t:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;e.config.retryConfig.currentRetryAttempt+=1;let l=new Promise(c=>{setTimeout(c,s)});return r.onRetryAttempt&&r.onRetryAttempt(e),yield l,{shouldRetry:!0,config:e.config}})}af.getRetryConfig=sO;function oO(e){let t=F1(e);if(e.name==="AbortError"||!t||t.retry===0||!e.response&&(t.currentRetryAttempt||0)>=t.noResponseRetries||!e.config.method||t.httpMethodsToRetry.indexOf(e.config.method.toUpperCase())<0)return!1;if(e.response&&e.response.status){let r=!1;for(let[n,i]of t.statusCodesToRetry){let a=e.response.status;if(a>=n&&a<=i){r=!0;break}}if(!r)return!1}return t.currentRetryAttempt=t.currentRetryAttempt||0,!(t.currentRetryAttempt>=t.retry)}function F1(e){if(e&&e.config&&e.config.retryConfig)return e.config.retryConfig}});var V1=ue((LG,G1)=>{var Ro=1e3,Bo=Ro*60,No=Bo*60,Ss=No*24,lO=Ss*7,uO=Ss*365.25;G1.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return cO(e);if(r==="number"&&isFinite(e))return t.long?dO(e):fO(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function cO(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*uO;case"weeks":case"week":case"w":return r*lO;case"days":case"day":case"d":return r*Ss;case"hours":case"hour":case"hrs":case"hr":case"h":return r*No;case"minutes":case"minute":case"mins":case"min":case"m":return r*Bo;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ro;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fO(e){var t=Math.abs(e);return t>=Ss?Math.round(e/Ss)+"d":t>=No?Math.round(e/No)+"h":t>=Bo?Math.round(e/Bo)+"m":t>=Ro?Math.round(e/Ro)+"s":e+"ms"}function dO(e){var t=Math.abs(e);return t>=Ss?sf(e,t,Ss,"day"):t>=No?sf(e,t,No,"hour"):t>=Bo?sf(e,t,Bo,"minute"):t>=Ro?sf(e,t,Ro,"second"):e+" ms"}function sf(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var j1=ue((PG,K1)=>{function hO(e){r.debug=r,r.default=r,r.coerce=c,r.disable=a,r.enable=i,r.enabled=s,r.humanize=V1(),r.destroy=f,Object.keys(e).forEach(d=>{r[d]=e[d]}),r.names=[],r.skips=[],r.formatters={};function t(d){let h=0;for(let g=0;g<d.length;g++)h=(h<<5)-h+d.charCodeAt(g),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=t;function r(d){let h,g=null,y,m;function _(...E){if(!_.enabled)return;let w=_,S=Number(new Date),R=S-(h||S);w.diff=R,w.prev=h,w.curr=S,h=S,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let B=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(N,ee)=>{if(N==="%%")return"%";B++;let q=r.formatters[ee];if(typeof q=="function"){let F=E[B];N=q.call(w,F),E.splice(B,1),B--}return N}),r.formatArgs.call(w,E),(w.log||r.log).apply(w,E)}return _.namespace=d,_.useColors=r.useColors(),_.color=r.selectColor(d),_.extend=n,_.destroy=r.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(y!==r.namespaces&&(y=r.namespaces,m=r.enabled(d)),m),set:E=>{g=E}}),typeof r.init=="function"&&r.init(_),_}function n(d,h){let g=r(this.namespace+(typeof h=="undefined"?":":h)+d);return g.log=this.log,g}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let h,g=(typeof d=="string"?d:"").split(/[\s,]+/),y=g.length;for(h=0;h<y;h++)!g[h]||(d=g[h].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function a(){let d=[...r.names.map(l),...r.skips.map(l).map(h=>"-"+h)].join(",");return r.enable(""),d}function s(d){if(d[d.length-1]==="*")return!0;let h,g;for(h=0,g=r.skips.length;h<g;h++)if(r.skips[h].test(d))return!1;for(h=0,g=r.names.length;h<g;h++)if(r.names[h].test(d))return!0;return!1}function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function c(d){return d instanceof Error?d.stack||d.message:d}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}K1.exports=hO});var lf=ue((Ln,of)=>{Ln.formatArgs=gO;Ln.save=mO;Ln.load=yO;Ln.useColors=pO;Ln.storage=vO();Ln.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ln.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function pO(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function gO(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+of.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}Ln.log=console.debug||console.log||(()=>{});function mO(e){try{e?Ln.storage.setItem("debug",e):Ln.storage.removeItem("debug")}catch(t){}}function yO(){let e;try{e=Ln.storage.getItem("debug")}catch(t){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function vO(){try{return localStorage}catch(e){}}of.exports=j1()(Ln);var{formatters:_O}=of.exports;_O.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var H1=ue(Vp=>{"use strict";Object.defineProperty(Vp,"__esModule",{value:!0});function EO(e){return function(t,r){return new Promise((n,i)=>{e.call(this,t,r,(a,s)=>{a?i(a):n(s)})})}}Vp.default=EO});var z1=ue((jp,Y1)=>{"use strict";var W1=jp&&jp.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},wO=require("events"),CO=W1(lf()),bO=W1(H1()),Zl=CO.default("agent-base");function xO(e){return Boolean(e)&&typeof e.addRequest=="function"}function Kp(){let{stack:e}=new Error;return typeof e!="string"?!1:e.split(`
`).some(t=>t.indexOf("(https.js:")!==-1||t.indexOf("node:https:")!==-1)}function uf(e,t){return new uf.Agent(e,t)}(function(e){class t extends wO.EventEmitter{constructor(n,i){super();let a=i;typeof n=="function"?this.callback=n:n&&(a=n),this.timeout=null,a&&typeof a.timeout=="number"&&(this.timeout=a.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:Kp()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:Kp()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,a){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let a=Object.assign({},i);typeof a.secureEndpoint!="boolean"&&(a.secureEndpoint=Kp()),a.host==null&&(a.host="localhost"),a.port==null&&(a.port=a.secureEndpoint?443:80),a.protocol==null&&(a.protocol=a.secureEndpoint?"https:":"http:"),a.host&&a.path&&delete a.path,delete a.agent,delete a.hostname,delete a._defaultAgent,delete a.defaultPort,delete a.createConnection,n._last=!0,n.shouldKeepAlive=!1;let s=!1,l=null,c=a.timeout||this.timeout,f=y=>{n._hadError||(n.emit("error",y),n._hadError=!0)},d=()=>{l=null,s=!0;let y=new Error(`A "socket" was not created for HTTP request before ${c}ms`);y.code="ETIMEOUT",f(y)},h=y=>{s||(l!==null&&(clearTimeout(l),l=null),f(y))},g=y=>{if(s)return;if(l!=null&&(clearTimeout(l),l=null),xO(y)){Zl("Callback returned another Agent instance %o",y.constructor.name),y.addRequest(n,a);return}if(y){y.once("free",()=>{this.freeSocket(y,a)}),n.onSocket(y);return}let m=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);f(m)};if(typeof this.callback!="function"){f(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(Zl("Converting legacy callback function to promise"),this.promisifiedCallback=bO.default(this.callback)):this.promisifiedCallback=this.callback),typeof c=="number"&&c>0&&(l=setTimeout(d,c)),"port"in a&&typeof a.port!="number"&&(a.port=Number(a.port));try{Zl("Resolving socket for %o request: %o",a.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,a)).then(g,h)}catch(y){Promise.reject(y).catch(h)}}freeSocket(n,i){Zl("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){Zl("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype})(uf||(uf={}));Y1.exports=uf});var Q1=ue(eu=>{"use strict";var SO=eu&&eu.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eu,"__esModule",{value:!0});var TO=SO(lf()),$l=TO.default("https-proxy-agent:parse-proxy-response");function AO(e){return new Promise((t,r)=>{let n=0,i=[];function a(){let h=e.read();h?d(h):e.once("readable",a)}function s(){e.removeListener("end",c),e.removeListener("error",f),e.removeListener("close",l),e.removeListener("readable",a)}function l(h){$l("onclose had error %o",h)}function c(){$l("onend")}function f(h){s(),$l("onerror %o",h),r(h)}function d(h){i.push(h),n+=h.length;let g=Buffer.concat(i,n);if(g.indexOf(`\r
\r
`)===-1){$l("have not received end of HTTP headers yet..."),a();return}let m=g.toString("ascii",0,g.indexOf(`\r
`)),_=+m.split(" ")[1];$l("got proxy server response: %o",m),t({statusCode:_,buffered:g})}e.on("error",f),e.on("close",l),e.on("end",c),a()})}eu.default=AO});var $1=ue(Ts=>{"use strict";var IO=Ts&&Ts.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function l(d){try{f(n.next(d))}catch(h){s(h)}}function c(d){try{f(n.throw(d))}catch(h){s(h)}}function f(d){d.done?a(d.value):i(d.value).then(l,c)}f((n=n.apply(e,t||[])).next())})},Do=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ts,"__esModule",{value:!0});var X1=Do(require("net")),J1=Do(require("tls")),kO=Do(require("url")),RO=Do(require("assert")),BO=Do(lf()),NO=z1(),DO=Do(Q1()),tu=BO.default("https-proxy-agent:agent"),Z1=class extends NO.Agent{constructor(t){let r;if(typeof t=="string"?r=kO.default.parse(t):r=t,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");tu("creating new HttpsProxyAgent instance: %o",r);super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||PO(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(t,r){return IO(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,a;i?(tu("Creating `tls.Socket`: %o",n),a=J1.default.connect(n)):(tu("Creating `net.Socket`: %o",n),a=X1.default.connect(n));let s=Object.assign({},n.headers),c=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:f,port:d,secureEndpoint:h}=r;LO(d,h)||(f+=`:${d}`),s.Host=f,s.Connection="close";for(let E of Object.keys(s))c+=`${E}: ${s[E]}\r
`;let g=DO.default(a);a.write(`${c}\r
`);let{statusCode:y,buffered:m}=yield g;if(y===200){if(t.once("socket",OO),r.secureEndpoint){tu("Upgrading socket connection to TLS");let E=r.servername||r.host;return J1.default.connect(Object.assign(Object.assign({},UO(r,"host","hostname","path","port")),{socket:a,servername:E}))}return a}a.destroy();let _=new X1.default.Socket({writable:!1});return _.readable=!0,t.once("socket",E=>{tu("replaying proxy buffer for failed request"),RO.default(E.listenerCount("data")>0),E.push(m),E.push(null)}),_})}};Ts.default=Z1;function OO(e){e.resume()}function LO(e,t){return Boolean(!t&&e===80||t&&e===443)}function PO(e){return typeof e=="string"?/^https:?$/i.test(e):!1}function UO(e,...t){let r={},n;for(n in e)t.includes(n)||(r[n]=e[n]);return r}});var zp=ue((Yp,e_)=>{"use strict";var MO=Yp&&Yp.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Hp=MO($1());function Wp(e){return new Hp.default(e)}(function(e){e.HttpsProxyAgent=Hp.default,e.prototype=Hp.default.prototype})(Wp||(Wp={}));e_.exports=Wp});var s_=ue(Oo=>{"use strict";var cf=Oo&&Oo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.Gaxios=void 0;var FO=cf(Mp()),qO=require("https"),GO=cf(Fp()),VO=cf(require("querystring")),KO=cf(qp()),t_=require("url"),jO=Gp(),HO=q1(),WO=zO()?window.fetch:GO.default;function YO(){return typeof window!="undefined"&&!!window}function zO(){return YO()&&!!window.fetch}function QO(){return typeof Buffer!="undefined"}function r_(e,t){return!!n_(e,t)}function n_(e,t){t=t.toLowerCase();for(let r of Object.keys((e==null?void 0:e.headers)||{}))if(t===r.toLowerCase())return e.headers[r]}var Qp;function i_(){var e,t,r,n;let i=((e=process==null?void 0:process.env)===null||e===void 0?void 0:e.HTTPS_PROXY)||((t=process==null?void 0:process.env)===null||t===void 0?void 0:t.https_proxy)||((r=process==null?void 0:process.env)===null||r===void 0?void 0:r.HTTP_PROXY)||((n=process==null?void 0:process.env)===null||n===void 0?void 0:n.http_proxy);return i&&(Qp=zp()),i}i_();function XO(e){var t;let r=(t=process.env.NO_PROXY)!==null&&t!==void 0?t:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new t_.URL(e);return!!n.find(a=>a.startsWith("*.")||a.startsWith(".")?(a=a.replace(/^\*\./,"."),i.hostname.endsWith(a)):a===i.origin||a===i.hostname)}function JO(e){if(!XO(e))return i_()}var a_=class{constructor(t){this.agentCache=new Map,this.defaults=t||{}}request(){return M(this,arguments,function*(t={}){return t=this.validateOpts(t),this._request(t)})}_defaultAdapter(t){return M(this,null,function*(){let n=yield(t.fetchImplementation||WO)(t.url,t),i=yield this.getResponseData(t,n);return this.translateResponse(t,n,i)})}_request(){return M(this,arguments,function*(t={}){try{let r;if(t.adapter?r=yield t.adapter(t,this._defaultAdapter.bind(this)):r=yield this._defaultAdapter(t),!t.validateStatus(r.status))throw new jO.GaxiosError(`Request failed with status code ${r.status}`,t,r);return r}catch(r){let n=r;n.config=t;let{shouldRetry:i,config:a}=yield(0,HO.getRetryConfig)(n);if(i&&a)return n.config.retryConfig.currentRetryAttempt=a.retryConfig.currentRetryAttempt,this._request(n.config);throw n}})}getResponseData(t,r){return M(this,null,function*(){switch(t.responseType){case"stream":return r.body;case"json":{let n=yield r.text();try{n=JSON.parse(n)}catch(i){}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}})}validateOpts(t){let r=(0,FO.default)(!0,{},this.defaults,t);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let a=r.paramsSerializer(r.params);a.startsWith("?")&&(a=a.slice(1));let s=r.url.includes("?")?"&":"?";r.url=r.url+s+a}if(typeof t.maxContentLength=="number"&&(r.size=t.maxContentLength),typeof t.maxRedirects=="number"&&(r.follow=t.maxRedirects),r.headers=r.headers||{},r.data){let a=typeof FormData=="undefined"?!1:(r==null?void 0:r.data)instanceof FormData;KO.default.readable(r.data)?r.body=r.data:QO()&&Buffer.isBuffer(r.data)?(r.body=r.data,r_(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?a||(n_(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(r_(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=JO(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let a=new t_.URL(i);r.agent=new Qp({port:a.port,host:a.host,protocol:a.protocol,cert:r.cert,key:r.key})}else r.agent=new Qp(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new qO.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(t){return t>=200&&t<300}paramsSerializer(t){return VO.default.stringify(t)}translateResponse(t,r,n){let i={};return r.headers.forEach((a,s)=>{i[s]=a}),{config:t,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};Oo.Gaxios=a_});var Lo=ue(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});mi.request=mi.instance=mi.Gaxios=mi.GaxiosError=void 0;var o_=s_();Object.defineProperty(mi,"Gaxios",{enumerable:!0,get:function(){return o_.Gaxios}});var ZO=Gp();Object.defineProperty(mi,"GaxiosError",{enumerable:!0,get:function(){return ZO.GaxiosError}});mi.instance=new o_.Gaxios;function $O(e){return M(this,null,function*(){return mi.instance.request(e)})}mi.request=$O});var Xp=ue((l_,ff)=>{(function(e){"use strict";var t,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,a="[BigNumber Error] ",s=a+"Number primitive has more than 15 significant digits: ",l=1e14,c=14,f=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,g=1e9;function y(O){var N,ee,q,F=fe.prototype={constructor:fe,toString:null,valueOf:null},ce=new fe(1),se=20,ve=4,Ie=-7,Be=21,Se=-1e7,Te=1e7,_e=!1,Xe=1,Ve=0,yt={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},ht="0123456789abcdefghijklmnopqrstuvwxyz",ze=!0;function fe(A,D){var L,W,V,Q,J,H,X,ne,Z=this;if(!(Z instanceof fe))return new fe(A,D);if(D==null){if(A&&A._isBigNumber===!0){Z.s=A.s,!A.c||A.e>Te?Z.c=Z.e=null:A.e<Se?Z.c=[Z.e=0]:(Z.e=A.e,Z.c=A.c.slice());return}if((H=typeof A=="number")&&A*0==0){if(Z.s=1/A<0?(A=-A,-1):1,A===~~A){for(Q=0,J=A;J>=10;J/=10,Q++);Q>Te?Z.c=Z.e=null:(Z.e=Q,Z.c=[A]);return}ne=String(A)}else{if(!r.test(ne=String(A)))return q(Z,ne,H);Z.s=ne.charCodeAt(0)==45?(ne=ne.slice(1),-1):1}(Q=ne.indexOf("."))>-1&&(ne=ne.replace(".","")),(J=ne.search(/e/i))>0?(Q<0&&(Q=J),Q+=+ne.slice(J+1),ne=ne.substring(0,J)):Q<0&&(Q=ne.length)}else{if(w(D,2,ht.length,"Base"),D==10&&ze)return Z=new fe(A),Je(Z,se+Z.e+1,ve);if(ne=String(A),H=typeof A=="number"){if(A*0!=0)return q(Z,ne,H,D);if(Z.s=1/A<0?(ne=ne.slice(1),-1):1,fe.DEBUG&&ne.replace(/^0\.0*|\./,"").length>15)throw Error(s+A)}else Z.s=ne.charCodeAt(0)===45?(ne=ne.slice(1),-1):1;for(L=ht.slice(0,D),Q=J=0,X=ne.length;J<X;J++)if(L.indexOf(W=ne.charAt(J))<0){if(W=="."){if(J>Q){Q=X;continue}}else if(!V&&(ne==ne.toUpperCase()&&(ne=ne.toLowerCase())||ne==ne.toLowerCase()&&(ne=ne.toUpperCase()))){V=!0,J=-1,Q=0;continue}return q(Z,String(A),H,D)}H=!1,ne=ee(ne,D,10,Z.s),(Q=ne.indexOf("."))>-1?ne=ne.replace(".",""):Q=ne.length}for(J=0;ne.charCodeAt(J)===48;J++);for(X=ne.length;ne.charCodeAt(--X)===48;);if(ne=ne.slice(J,++X)){if(X-=J,H&&fe.DEBUG&&X>15&&(A>f||A!==i(A)))throw Error(s+Z.s*A);if((Q=Q-J-1)>Te)Z.c=Z.e=null;else if(Q<Se)Z.c=[Z.e=0];else{if(Z.e=Q,Z.c=[],J=(Q+1)%c,Q<0&&(J+=c),J<X){for(J&&Z.c.push(+ne.slice(0,J)),X-=c;J<X;)Z.c.push(+ne.slice(J,J+=c));J=c-(ne=ne.slice(J)).length}else J-=X;for(;J--;ne+="0");Z.c.push(+ne)}}else Z.c=[Z.e=0]}fe.clone=y,fe.ROUND_UP=0,fe.ROUND_DOWN=1,fe.ROUND_CEIL=2,fe.ROUND_FLOOR=3,fe.ROUND_HALF_UP=4,fe.ROUND_HALF_DOWN=5,fe.ROUND_HALF_EVEN=6,fe.ROUND_HALF_CEIL=7,fe.ROUND_HALF_FLOOR=8,fe.EUCLID=9,fe.config=fe.set=function(A){var D,L;if(A!=null)if(typeof A=="object"){if(A.hasOwnProperty(D="DECIMAL_PLACES")&&(L=A[D],w(L,0,g,D),se=L),A.hasOwnProperty(D="ROUNDING_MODE")&&(L=A[D],w(L,0,8,D),ve=L),A.hasOwnProperty(D="EXPONENTIAL_AT")&&(L=A[D],L&&L.pop?(w(L[0],-g,0,D),w(L[1],0,g,D),Ie=L[0],Be=L[1]):(w(L,-g,g,D),Ie=-(Be=L<0?-L:L))),A.hasOwnProperty(D="RANGE"))if(L=A[D],L&&L.pop)w(L[0],-g,-1,D),w(L[1],1,g,D),Se=L[0],Te=L[1];else if(w(L,-g,g,D),L)Se=-(Te=L<0?-L:L);else throw Error(a+D+" cannot be zero: "+L);if(A.hasOwnProperty(D="CRYPTO"))if(L=A[D],L===!!L)if(L)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))_e=L;else throw _e=!L,Error(a+"crypto unavailable");else _e=L;else throw Error(a+D+" not true or false: "+L);if(A.hasOwnProperty(D="MODULO_MODE")&&(L=A[D],w(L,0,9,D),Xe=L),A.hasOwnProperty(D="POW_PRECISION")&&(L=A[D],w(L,0,g,D),Ve=L),A.hasOwnProperty(D="FORMAT"))if(L=A[D],typeof L=="object")yt=L;else throw Error(a+D+" not an object: "+L);if(A.hasOwnProperty(D="ALPHABET"))if(L=A[D],typeof L=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(L))ze=L.slice(0,10)=="0123456789",ht=L;else throw Error(a+D+" invalid: "+L)}else throw Error(a+"Object expected: "+A);return{DECIMAL_PLACES:se,ROUNDING_MODE:ve,EXPONENTIAL_AT:[Ie,Be],RANGE:[Se,Te],CRYPTO:_e,MODULO_MODE:Xe,POW_PRECISION:Ve,FORMAT:yt,ALPHABET:ht}},fe.isBigNumber=function(A){if(!A||A._isBigNumber!==!0)return!1;if(!fe.DEBUG)return!0;var D,L,W=A.c,V=A.e,Q=A.s;e:if({}.toString.call(W)=="[object Array]"){if((Q===1||Q===-1)&&V>=-g&&V<=g&&V===i(V)){if(W[0]===0){if(V===0&&W.length===1)return!0;break e}if(D=(V+1)%c,D<1&&(D+=c),String(W[0]).length==D){for(D=0;D<W.length;D++)if(L=W[D],L<0||L>=l||L!==i(L))break e;if(L!==0)return!0}}}else if(W===null&&V===null&&(Q===null||Q===1||Q===-1))return!0;throw Error(a+"Invalid BigNumber: "+A)},fe.maximum=fe.max=function(){return tt(arguments,F.lt)},fe.minimum=fe.min=function(){return tt(arguments,F.gt)},fe.random=function(){var A=9007199254740992,D=Math.random()*A&2097151?function(){return i(Math.random()*A)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(L){var W,V,Q,J,H,X=0,ne=[],Z=new fe(ce);if(L==null?L=se:w(L,0,g),J=n(L/c),_e)if(crypto.getRandomValues){for(W=crypto.getRandomValues(new Uint32Array(J*=2));X<J;)H=W[X]*131072+(W[X+1]>>>11),H>=9e15?(V=crypto.getRandomValues(new Uint32Array(2)),W[X]=V[0],W[X+1]=V[1]):(ne.push(H%1e14),X+=2);X=J/2}else if(crypto.randomBytes){for(W=crypto.randomBytes(J*=7);X<J;)H=(W[X]&31)*281474976710656+W[X+1]*1099511627776+W[X+2]*4294967296+W[X+3]*16777216+(W[X+4]<<16)+(W[X+5]<<8)+W[X+6],H>=9e15?crypto.randomBytes(7).copy(W,X):(ne.push(H%1e14),X+=7);X=J/7}else throw _e=!1,Error(a+"crypto unavailable");if(!_e)for(;X<J;)H=D(),H<9e15&&(ne[X++]=H%1e14);for(J=ne[--X],L%=c,J&&L&&(H=d[c-L],ne[X]=i(J/H)*H);ne[X]===0;ne.pop(),X--);if(X<0)ne=[Q=0];else{for(Q=-1;ne[0]===0;ne.splice(0,1),Q-=c);for(X=1,H=ne[0];H>=10;H/=10,X++);X<c&&(Q-=c-X)}return Z.e=Q,Z.c=ne,Z}}(),fe.sum=function(){for(var A=1,D=arguments,L=new fe(D[0]);A<D.length;)L=L.plus(D[A++]);return L},ee=function(){var A="0123456789";function D(L,W,V,Q){for(var J,H=[0],X,ne=0,Z=L.length;ne<Z;){for(X=H.length;X--;H[X]*=W);for(H[0]+=Q.indexOf(L.charAt(ne++)),J=0;J<H.length;J++)H[J]>V-1&&(H[J+1]==null&&(H[J+1]=0),H[J+1]+=H[J]/V|0,H[J]%=V)}return H.reverse()}return function(L,W,V,Q,J){var H,X,ne,Z,de,Ue,Fe,ot,Vt=L.indexOf("."),Kt=se,rt=ve;for(Vt>=0&&(Z=Ve,Ve=0,L=L.replace(".",""),ot=new fe(W),Ue=ot.pow(L.length-Vt),Ve=Z,ot.c=D(B(_(Ue.c),Ue.e,"0"),10,V,A),ot.e=ot.c.length),Fe=D(L,W,V,J?(H=ht,A):(H=A,ht)),ne=Z=Fe.length;Fe[--Z]==0;Fe.pop());if(!Fe[0])return H.charAt(0);if(Vt<0?--ne:(Ue.c=Fe,Ue.e=ne,Ue.s=Q,Ue=N(Ue,ot,Kt,rt,V),Fe=Ue.c,de=Ue.r,ne=Ue.e),X=ne+Kt+1,Vt=Fe[X],Z=V/2,de=de||X<0||Fe[X+1]!=null,de=rt<4?(Vt!=null||de)&&(rt==0||rt==(Ue.s<0?3:2)):Vt>Z||Vt==Z&&(rt==4||de||rt==6&&Fe[X-1]&1||rt==(Ue.s<0?8:7)),X<1||!Fe[0])L=de?B(H.charAt(1),-Kt,H.charAt(0)):H.charAt(0);else{if(Fe.length=X,de)for(--V;++Fe[--X]>V;)Fe[X]=0,X||(++ne,Fe=[1].concat(Fe));for(Z=Fe.length;!Fe[--Z];);for(Vt=0,L="";Vt<=Z;L+=H.charAt(Fe[Vt++]));L=B(L,ne,H.charAt(0))}return L}}(),N=function(){function A(W,V,Q){var J,H,X,ne,Z=0,de=W.length,Ue=V%h,Fe=V/h|0;for(W=W.slice();de--;)X=W[de]%h,ne=W[de]/h|0,J=Fe*X+ne*Ue,H=Ue*X+J%h*h+Z,Z=(H/Q|0)+(J/h|0)+Fe*ne,W[de]=H%Q;return Z&&(W=[Z].concat(W)),W}function D(W,V,Q,J){var H,X;if(Q!=J)X=Q>J?1:-1;else for(H=X=0;H<Q;H++)if(W[H]!=V[H]){X=W[H]>V[H]?1:-1;break}return X}function L(W,V,Q,J){for(var H=0;Q--;)W[Q]-=H,H=W[Q]<V[Q]?1:0,W[Q]=H*J+W[Q]-V[Q];for(;!W[0]&&W.length>1;W.splice(0,1));}return function(W,V,Q,J,H){var X,ne,Z,de,Ue,Fe,ot,Vt,Kt,rt,At,ur,ka,hs,ps,yn,ea,Qr=W.s==V.s?1:-1,Sr=W.c,ir=V.c;if(!Sr||!Sr[0]||!ir||!ir[0])return new fe(!W.s||!V.s||(Sr?ir&&Sr[0]==ir[0]:!ir)?NaN:Sr&&Sr[0]==0||!ir?Qr*0:Qr/0);for(Vt=new fe(Qr),Kt=Vt.c=[],ne=W.e-V.e,Qr=Q+ne+1,H||(H=l,ne=m(W.e/c)-m(V.e/c),Qr=Qr/c|0),Z=0;ir[Z]==(Sr[Z]||0);Z++);if(ir[Z]>(Sr[Z]||0)&&ne--,Qr<0)Kt.push(1),de=!0;else{for(hs=Sr.length,yn=ir.length,Z=0,Qr+=2,Ue=i(H/(ir[0]+1)),Ue>1&&(ir=A(ir,Ue,H),Sr=A(Sr,Ue,H),yn=ir.length,hs=Sr.length),ka=yn,rt=Sr.slice(0,yn),At=rt.length;At<yn;rt[At++]=0);ea=ir.slice(),ea=[0].concat(ea),ps=ir[0],ir[1]>=H/2&&ps++;do{if(Ue=0,X=D(ir,rt,yn,At),X<0){if(ur=rt[0],yn!=At&&(ur=ur*H+(rt[1]||0)),Ue=i(ur/ps),Ue>1)for(Ue>=H&&(Ue=H-1),Fe=A(ir,Ue,H),ot=Fe.length,At=rt.length;D(Fe,rt,ot,At)==1;)Ue--,L(Fe,yn<ot?ea:ir,ot,H),ot=Fe.length,X=1;else Ue==0&&(X=Ue=1),Fe=ir.slice(),ot=Fe.length;if(ot<At&&(Fe=[0].concat(Fe)),L(rt,Fe,At,H),At=rt.length,X==-1)for(;D(ir,rt,yn,At)<1;)Ue++,L(rt,yn<At?ea:ir,At,H),At=rt.length}else X===0&&(Ue++,rt=[0]);Kt[Z++]=Ue,rt[0]?rt[At++]=Sr[ka]||0:(rt=[Sr[ka]],At=1)}while((ka++<hs||rt[0]!=null)&&Qr--);de=rt[0]!=null,Kt[0]||Kt.splice(0,1)}if(H==l){for(Z=1,Qr=Kt[0];Qr>=10;Qr/=10,Z++);Je(Vt,Q+(Vt.e=Z+ne*c-1)+1,J,de)}else Vt.e=ne,Vt.r=+de;return Vt}}();function pt(A,D,L,W){var V,Q,J,H,X;if(L==null?L=ve:w(L,0,8),!A.c)return A.toString();if(V=A.c[0],J=A.e,D==null)X=_(A.c),X=W==1||W==2&&(J<=Ie||J>=Be)?R(X,J):B(X,J,"0");else if(A=Je(new fe(A),D,L),Q=A.e,X=_(A.c),H=X.length,W==1||W==2&&(D<=Q||Q<=Ie)){for(;H<D;X+="0",H++);X=R(X,Q)}else if(D-=J,X=B(X,Q,"0"),Q+1>H){if(--D>0)for(X+=".";D--;X+="0");}else if(D+=Q-H,D>0)for(Q+1==H&&(X+=".");D--;X+="0");return A.s<0&&V?"-"+X:X}function tt(A,D){for(var L,W=1,V=new fe(A[0]);W<A.length;W++)if(L=new fe(A[W]),L.s)D.call(V,L)&&(V=L);else{V=L;break}return V}function vt(A,D,L){for(var W=1,V=D.length;!D[--V];D.pop());for(V=D[0];V>=10;V/=10,W++);return(L=W+L*c-1)>Te?A.c=A.e=null:L<Se?A.c=[A.e=0]:(A.e=L,A.c=D),A}q=function(){var A=/^(-?)0([xbo])(?=\w[\w.]*$)/i,D=/^([^.]+)\.$/,L=/^\.([^.]+)$/,W=/^-?(Infinity|NaN)$/,V=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Q,J,H,X){var ne,Z=H?J:J.replace(V,"");if(W.test(Z))Q.s=isNaN(Z)?null:Z<0?-1:1;else{if(!H&&(Z=Z.replace(A,function(de,Ue,Fe){return ne=(Fe=Fe.toLowerCase())=="x"?16:Fe=="b"?2:8,!X||X==ne?Ue:de}),X&&(ne=X,Z=Z.replace(D,"$1").replace(L,"0.$1")),J!=Z))return new fe(Z,ne);if(fe.DEBUG)throw Error(a+"Not a"+(X?" base "+X:"")+" number: "+J);Q.s=null}Q.c=Q.e=null}}();function Je(A,D,L,W){var V,Q,J,H,X,ne,Z,de=A.c,Ue=d;if(de){e:{for(V=1,H=de[0];H>=10;H/=10,V++);if(Q=D-V,Q<0)Q+=c,J=D,X=de[ne=0],Z=X/Ue[V-J-1]%10|0;else if(ne=n((Q+1)/c),ne>=de.length)if(W){for(;de.length<=ne;de.push(0));X=Z=0,V=1,Q%=c,J=Q-c+1}else break e;else{for(X=H=de[ne],V=1;H>=10;H/=10,V++);Q%=c,J=Q-c+V,Z=J<0?0:X/Ue[V-J-1]%10|0}if(W=W||D<0||de[ne+1]!=null||(J<0?X:X%Ue[V-J-1]),W=L<4?(Z||W)&&(L==0||L==(A.s<0?3:2)):Z>5||Z==5&&(L==4||W||L==6&&(Q>0?J>0?X/Ue[V-J]:0:de[ne-1])%10&1||L==(A.s<0?8:7)),D<1||!de[0])return de.length=0,W?(D-=A.e+1,de[0]=Ue[(c-D%c)%c],A.e=-D||0):de[0]=A.e=0,A;if(Q==0?(de.length=ne,H=1,ne--):(de.length=ne+1,H=Ue[c-Q],de[ne]=J>0?i(X/Ue[V-J]%Ue[J])*H:0),W)for(;;)if(ne==0){for(Q=1,J=de[0];J>=10;J/=10,Q++);for(J=de[0]+=H,H=1;J>=10;J/=10,H++);Q!=H&&(A.e++,de[0]==l&&(de[0]=1));break}else{if(de[ne]+=H,de[ne]!=l)break;de[ne--]=0,H=1}for(Q=de.length;de[--Q]===0;de.pop());}A.e>Te?A.c=A.e=null:A.e<Se&&(A.c=[A.e=0])}return A}function we(A){var D,L=A.e;return L===null?A.toString():(D=_(A.c),D=L<=Ie||L>=Be?R(D,L):B(D,L,"0"),A.s<0?"-"+D:D)}return F.absoluteValue=F.abs=function(){var A=new fe(this);return A.s<0&&(A.s=1),A},F.comparedTo=function(A,D){return E(this,new fe(A,D))},F.decimalPlaces=F.dp=function(A,D){var L,W,V,Q=this;if(A!=null)return w(A,0,g),D==null?D=ve:w(D,0,8),Je(new fe(Q),A+Q.e+1,D);if(!(L=Q.c))return null;if(W=((V=L.length-1)-m(this.e/c))*c,V=L[V])for(;V%10==0;V/=10,W--);return W<0&&(W=0),W},F.dividedBy=F.div=function(A,D){return N(this,new fe(A,D),se,ve)},F.dividedToIntegerBy=F.idiv=function(A,D){return N(this,new fe(A,D),0,1)},F.exponentiatedBy=F.pow=function(A,D){var L,W,V,Q,J,H,X,ne,Z,de=this;if(A=new fe(A),A.c&&!A.isInteger())throw Error(a+"Exponent not an integer: "+we(A));if(D!=null&&(D=new fe(D)),H=A.e>14,!de.c||!de.c[0]||de.c[0]==1&&!de.e&&de.c.length==1||!A.c||!A.c[0])return Z=new fe(Math.pow(+we(de),H?2-S(A):+we(A))),D?Z.mod(D):Z;if(X=A.s<0,D){if(D.c?!D.c[0]:!D.s)return new fe(NaN);W=!X&&de.isInteger()&&D.isInteger(),W&&(de=de.mod(D))}else{if(A.e>9&&(de.e>0||de.e<-1||(de.e==0?de.c[0]>1||H&&de.c[1]>=24e7:de.c[0]<8e13||H&&de.c[0]<=9999975e7)))return Q=de.s<0&&S(A)?-0:0,de.e>-1&&(Q=1/Q),new fe(X?1/Q:Q);Ve&&(Q=n(Ve/c+2))}for(H?(L=new fe(.5),X&&(A.s=1),ne=S(A)):(V=Math.abs(+we(A)),ne=V%2),Z=new fe(ce);;){if(ne){if(Z=Z.times(de),!Z.c)break;Q?Z.c.length>Q&&(Z.c.length=Q):W&&(Z=Z.mod(D))}if(V){if(V=i(V/2),V===0)break;ne=V%2}else if(A=A.times(L),Je(A,A.e+1,1),A.e>14)ne=S(A);else{if(V=+we(A),V===0)break;ne=V%2}de=de.times(de),Q?de.c&&de.c.length>Q&&(de.c.length=Q):W&&(de=de.mod(D))}return W?Z:(X&&(Z=ce.div(Z)),D?Z.mod(D):Q?Je(Z,Ve,ve,J):Z)},F.integerValue=function(A){var D=new fe(this);return A==null?A=ve:w(A,0,8),Je(D,D.e+1,A)},F.isEqualTo=F.eq=function(A,D){return E(this,new fe(A,D))===0},F.isFinite=function(){return!!this.c},F.isGreaterThan=F.gt=function(A,D){return E(this,new fe(A,D))>0},F.isGreaterThanOrEqualTo=F.gte=function(A,D){return(D=E(this,new fe(A,D)))===1||D===0},F.isInteger=function(){return!!this.c&&m(this.e/c)>this.c.length-2},F.isLessThan=F.lt=function(A,D){return E(this,new fe(A,D))<0},F.isLessThanOrEqualTo=F.lte=function(A,D){return(D=E(this,new fe(A,D)))===-1||D===0},F.isNaN=function(){return!this.s},F.isNegative=function(){return this.s<0},F.isPositive=function(){return this.s>0},F.isZero=function(){return!!this.c&&this.c[0]==0},F.minus=function(A,D){var L,W,V,Q,J=this,H=J.s;if(A=new fe(A,D),D=A.s,!H||!D)return new fe(NaN);if(H!=D)return A.s=-D,J.plus(A);var X=J.e/c,ne=A.e/c,Z=J.c,de=A.c;if(!X||!ne){if(!Z||!de)return Z?(A.s=-D,A):new fe(de?J:NaN);if(!Z[0]||!de[0])return de[0]?(A.s=-D,A):new fe(Z[0]?J:ve==3?-0:0)}if(X=m(X),ne=m(ne),Z=Z.slice(),H=X-ne){for((Q=H<0)?(H=-H,V=Z):(ne=X,V=de),V.reverse(),D=H;D--;V.push(0));V.reverse()}else for(W=(Q=(H=Z.length)<(D=de.length))?H:D,H=D=0;D<W;D++)if(Z[D]!=de[D]){Q=Z[D]<de[D];break}if(Q&&(V=Z,Z=de,de=V,A.s=-A.s),D=(W=de.length)-(L=Z.length),D>0)for(;D--;Z[L++]=0);for(D=l-1;W>H;){if(Z[--W]<de[W]){for(L=W;L&&!Z[--L];Z[L]=D);--Z[L],Z[W]+=l}Z[W]-=de[W]}for(;Z[0]==0;Z.splice(0,1),--ne);return Z[0]?vt(A,Z,ne):(A.s=ve==3?-1:1,A.c=[A.e=0],A)},F.modulo=F.mod=function(A,D){var L,W,V=this;return A=new fe(A,D),!V.c||!A.s||A.c&&!A.c[0]?new fe(NaN):!A.c||V.c&&!V.c[0]?new fe(V):(Xe==9?(W=A.s,A.s=1,L=N(V,A,0,3),A.s=W,L.s*=W):L=N(V,A,0,Xe),A=V.minus(L.times(A)),!A.c[0]&&Xe==1&&(A.s=V.s),A)},F.multipliedBy=F.times=function(A,D){var L,W,V,Q,J,H,X,ne,Z,de,Ue,Fe,ot,Vt,Kt,rt=this,At=rt.c,ur=(A=new fe(A,D)).c;if(!At||!ur||!At[0]||!ur[0])return!rt.s||!A.s||At&&!At[0]&&!ur||ur&&!ur[0]&&!At?A.c=A.e=A.s=null:(A.s*=rt.s,!At||!ur?A.c=A.e=null:(A.c=[0],A.e=0)),A;for(W=m(rt.e/c)+m(A.e/c),A.s*=rt.s,X=At.length,de=ur.length,X<de&&(ot=At,At=ur,ur=ot,V=X,X=de,de=V),V=X+de,ot=[];V--;ot.push(0));for(Vt=l,Kt=h,V=de;--V>=0;){for(L=0,Ue=ur[V]%Kt,Fe=ur[V]/Kt|0,J=X,Q=V+J;Q>V;)ne=At[--J]%Kt,Z=At[J]/Kt|0,H=Fe*ne+Z*Ue,ne=Ue*ne+H%Kt*Kt+ot[Q]+L,L=(ne/Vt|0)+(H/Kt|0)+Fe*Z,ot[Q--]=ne%Vt;ot[Q]=L}return L?++W:ot.splice(0,1),vt(A,ot,W)},F.negated=function(){var A=new fe(this);return A.s=-A.s||null,A},F.plus=function(A,D){var L,W=this,V=W.s;if(A=new fe(A,D),D=A.s,!V||!D)return new fe(NaN);if(V!=D)return A.s=-D,W.minus(A);var Q=W.e/c,J=A.e/c,H=W.c,X=A.c;if(!Q||!J){if(!H||!X)return new fe(V/0);if(!H[0]||!X[0])return X[0]?A:new fe(H[0]?W:V*0)}if(Q=m(Q),J=m(J),H=H.slice(),V=Q-J){for(V>0?(J=Q,L=X):(V=-V,L=H),L.reverse();V--;L.push(0));L.reverse()}for(V=H.length,D=X.length,V-D<0&&(L=X,X=H,H=L,D=V),V=0;D;)V=(H[--D]=H[D]+X[D]+V)/l|0,H[D]=l===H[D]?0:H[D]%l;return V&&(H=[V].concat(H),++J),vt(A,H,J)},F.precision=F.sd=function(A,D){var L,W,V,Q=this;if(A!=null&&A!==!!A)return w(A,1,g),D==null?D=ve:w(D,0,8),Je(new fe(Q),A,D);if(!(L=Q.c))return null;if(V=L.length-1,W=V*c+1,V=L[V]){for(;V%10==0;V/=10,W--);for(V=L[0];V>=10;V/=10,W++);}return A&&Q.e+1>W&&(W=Q.e+1),W},F.shiftedBy=function(A){return w(A,-f,f),this.times("1e"+A)},F.squareRoot=F.sqrt=function(){var A,D,L,W,V,Q=this,J=Q.c,H=Q.s,X=Q.e,ne=se+4,Z=new fe("0.5");if(H!==1||!J||!J[0])return new fe(!H||H<0&&(!J||J[0])?NaN:J?Q:1/0);if(H=Math.sqrt(+we(Q)),H==0||H==1/0?(D=_(J),(D.length+X)%2==0&&(D+="0"),H=Math.sqrt(+D),X=m((X+1)/2)-(X<0||X%2),H==1/0?D="5e"+X:(D=H.toExponential(),D=D.slice(0,D.indexOf("e")+1)+X),L=new fe(D)):L=new fe(H+""),L.c[0]){for(X=L.e,H=X+ne,H<3&&(H=0);;)if(V=L,L=Z.times(V.plus(N(Q,V,ne,1))),_(V.c).slice(0,H)===(D=_(L.c)).slice(0,H))if(L.e<X&&--H,D=D.slice(H-3,H+1),D=="9999"||!W&&D=="4999"){if(!W&&(Je(V,V.e+se+2,0),V.times(V).eq(Q))){L=V;break}ne+=4,H+=4,W=1}else{(!+D||!+D.slice(1)&&D.charAt(0)=="5")&&(Je(L,L.e+se+2,1),A=!L.times(L).eq(Q));break}}return Je(L,L.e+se+1,ve,A)},F.toExponential=function(A,D){return A!=null&&(w(A,0,g),A++),pt(this,A,D,1)},F.toFixed=function(A,D){return A!=null&&(w(A,0,g),A=A+this.e+1),pt(this,A,D)},F.toFormat=function(A,D,L){var W,V=this;if(L==null)A!=null&&D&&typeof D=="object"?(L=D,D=null):A&&typeof A=="object"?(L=A,A=D=null):L=yt;else if(typeof L!="object")throw Error(a+"Argument not an object: "+L);if(W=V.toFixed(A,D),V.c){var Q,J=W.split("."),H=+L.groupSize,X=+L.secondaryGroupSize,ne=L.groupSeparator||"",Z=J[0],de=J[1],Ue=V.s<0,Fe=Ue?Z.slice(1):Z,ot=Fe.length;if(X&&(Q=H,H=X,X=Q,ot-=Q),H>0&&ot>0){for(Q=ot%H||H,Z=Fe.substr(0,Q);Q<ot;Q+=H)Z+=ne+Fe.substr(Q,H);X>0&&(Z+=ne+Fe.slice(Q)),Ue&&(Z="-"+Z)}W=de?Z+(L.decimalSeparator||"")+((X=+L.fractionGroupSize)?de.replace(new RegExp("\\d{"+X+"}\\B","g"),"$&"+(L.fractionGroupSeparator||"")):de):Z}return(L.prefix||"")+W+(L.suffix||"")},F.toFraction=function(A){var D,L,W,V,Q,J,H,X,ne,Z,de,Ue,Fe=this,ot=Fe.c;if(A!=null&&(H=new fe(A),!H.isInteger()&&(H.c||H.s!==1)||H.lt(ce)))throw Error(a+"Argument "+(H.isInteger()?"out of range: ":"not an integer: ")+we(H));if(!ot)return new fe(Fe);for(D=new fe(ce),ne=L=new fe(ce),W=X=new fe(ce),Ue=_(ot),Q=D.e=Ue.length-Fe.e-1,D.c[0]=d[(J=Q%c)<0?c+J:J],A=!A||H.comparedTo(D)>0?Q>0?D:ne:H,J=Te,Te=1/0,H=new fe(Ue),X.c[0]=0;Z=N(H,D,0,1),V=L.plus(Z.times(W)),V.comparedTo(A)!=1;)L=W,W=V,ne=X.plus(Z.times(V=ne)),X=V,D=H.minus(Z.times(V=D)),H=V;return V=N(A.minus(L),W,0,1),X=X.plus(V.times(ne)),L=L.plus(V.times(W)),X.s=ne.s=Fe.s,Q=Q*2,de=N(ne,W,Q,ve).minus(Fe).abs().comparedTo(N(X,L,Q,ve).minus(Fe).abs())<1?[ne,W]:[X,L],Te=J,de},F.toNumber=function(){return+we(this)},F.toPrecision=function(A,D){return A!=null&&w(A,1,g),pt(this,A,D,2)},F.toString=function(A){var D,L=this,W=L.s,V=L.e;return V===null?W?(D="Infinity",W<0&&(D="-"+D)):D="NaN":(A==null?D=V<=Ie||V>=Be?R(_(L.c),V):B(_(L.c),V,"0"):A===10&&ze?(L=Je(new fe(L),se+V+1,ve),D=B(_(L.c),L.e,"0")):(w(A,2,ht.length,"Base"),D=ee(B(_(L.c),V,"0"),10,A,W,!0)),W<0&&L.c[0]&&(D="-"+D)),D},F.valueOf=F.toJSON=function(){return we(this)},F._isBigNumber=!0,O!=null&&fe.set(O),fe}function m(O){var N=O|0;return O>0||O===N?N:N-1}function _(O){for(var N,ee,q=1,F=O.length,ce=O[0]+"";q<F;){for(N=O[q++]+"",ee=c-N.length;ee--;N="0"+N);ce+=N}for(F=ce.length;ce.charCodeAt(--F)===48;);return ce.slice(0,F+1||1)}function E(O,N){var ee,q,F=O.c,ce=N.c,se=O.s,ve=N.s,Ie=O.e,Be=N.e;if(!se||!ve)return null;if(ee=F&&!F[0],q=ce&&!ce[0],ee||q)return ee?q?0:-ve:se;if(se!=ve)return se;if(ee=se<0,q=Ie==Be,!F||!ce)return q?0:!F^ee?1:-1;if(!q)return Ie>Be^ee?1:-1;for(ve=(Ie=F.length)<(Be=ce.length)?Ie:Be,se=0;se<ve;se++)if(F[se]!=ce[se])return F[se]>ce[se]^ee?1:-1;return Ie==Be?0:Ie>Be^ee?1:-1}function w(O,N,ee,q){if(O<N||O>ee||O!==i(O))throw Error(a+(q||"Argument")+(typeof O=="number"?O<N||O>ee?" out of range: ":" not an integer: ":" not a primitive number: ")+String(O))}function S(O){var N=O.c.length-1;return m(O.e/c)==N&&O.c[N]%2!=0}function R(O,N){return(O.length>1?O.charAt(0)+"."+O.slice(1):O)+(N<0?"e":"e+")+N}function B(O,N,ee){var q,F;if(N<0){for(F=ee+".";++N;F+=ee);O=F+O}else if(q=O.length,++N>q){for(F=ee,N-=q;--N;F+=ee);O+=F}else N<q&&(O=O.slice(0,N)+"."+O.slice(N));return O}t=y(),t.default=t.BigNumber=t,typeof define=="function"&&define.amd?define(function(){return t}):typeof ff!="undefined"&&ff.exports?ff.exports=t:(e||(e=typeof self!="undefined"&&self?self:window),e.BigNumber=t)})(l_)});var d_=ue((VG,f_)=>{var u_=Xp(),c_=f_.exports;(function(){"use strict";function e(f){return f<10?"0"+f:f}var t=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,i,a={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;function l(f){return r.lastIndex=0,r.test(f)?'"'+f.replace(r,function(d){var h=a[d];return typeof h=="string"?h:"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function c(f,d){var h,g,y,m,_=n,E,w=d[f],S=w!=null&&(w instanceof u_||u_.isBigNumber(w));switch(w&&typeof w=="object"&&typeof w.toJSON=="function"&&(w=w.toJSON(f)),typeof s=="function"&&(w=s.call(d,f,w)),typeof w){case"string":return S?w:l(w);case"number":return isFinite(w)?String(w):"null";case"boolean":case"null":case"bigint":return String(w);case"object":if(!w)return"null";if(n+=i,E=[],Object.prototype.toString.apply(w)==="[object Array]"){for(m=w.length,h=0;h<m;h+=1)E[h]=c(h,w)||"null";return y=E.length===0?"[]":n?`[
`+n+E.join(`,
`+n)+`
`+_+"]":"["+E.join(",")+"]",n=_,y}if(s&&typeof s=="object")for(m=s.length,h=0;h<m;h+=1)typeof s[h]=="string"&&(g=s[h],y=c(g,w),y&&E.push(l(g)+(n?": ":":")+y));else Object.keys(w).forEach(function(R){var B=c(R,w);B&&E.push(l(R)+(n?": ":":")+B)});return y=E.length===0?"{}":n?`{
`+n+E.join(`,
`+n)+`
`+_+"}":"{"+E.join(",")+"}",n=_,y}}typeof c_.stringify!="function"&&(c_.stringify=function(f,d,h){var g;if(n="",i="",typeof h=="number")for(g=0;g<h;g+=1)i+=" ";else typeof h=="string"&&(i=h);if(s=d,d&&typeof d!="function"&&(typeof d!="object"||typeof d.length!="number"))throw new Error("JSON.stringify");return c("",{"":f})})})()});var p_=ue((KG,h_)=>{var df=null,eL=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,tL=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,rL=function(e){"use strict";var t={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(e!=null){if(e.strict===!0&&(t.strict=!0),e.storeAsString===!0&&(t.storeAsString=!0),t.alwaysParseAsBig=e.alwaysParseAsBig===!0?e.alwaysParseAsBig:!1,t.useNativeBigInt=e.useNativeBigInt===!0?e.useNativeBigInt:!1,typeof e.constructorAction!="undefined")if(e.constructorAction==="error"||e.constructorAction==="ignore"||e.constructorAction==="preserve")t.constructorAction=e.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${e.constructorAction}`);if(typeof e.protoAction!="undefined")if(e.protoAction==="error"||e.protoAction==="ignore"||e.protoAction==="preserve")t.protoAction=e.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${e.protoAction}`)}var r,n,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},a,s=function(_){throw{name:"SyntaxError",message:_,at:r,text:a}},l=function(_){return _&&_!==n&&s("Expected '"+_+"' instead of '"+n+"'"),n=a.charAt(r),r+=1,n},c=function(){var _,E="";for(n==="-"&&(E="-",l("-"));n>="0"&&n<="9";)E+=n,l();if(n===".")for(E+=".";l()&&n>="0"&&n<="9";)E+=n;if(n==="e"||n==="E")for(E+=n,l(),(n==="-"||n==="+")&&(E+=n,l());n>="0"&&n<="9";)E+=n,l();if(_=+E,!isFinite(_))s("Bad number");else return df==null&&(df=Xp()),E.length>15?t.storeAsString?E:t.useNativeBigInt?BigInt(E):new df(E):t.alwaysParseAsBig?t.useNativeBigInt?BigInt(_):new df(_):_},f=function(){var _,E,w="",S;if(n==='"')for(var R=r;l();){if(n==='"')return r-1>R&&(w+=a.substring(R,r-1)),l(),w;if(n==="\\"){if(r-1>R&&(w+=a.substring(R,r-1)),l(),n==="u"){for(S=0,E=0;E<4&&(_=parseInt(l(),16),!!isFinite(_));E+=1)S=S*16+_;w+=String.fromCharCode(S)}else if(typeof i[n]=="string")w+=i[n];else break;R=r}}s("Bad string")},d=function(){for(;n&&n<=" ";)l()},h=function(){switch(n){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}s("Unexpected '"+n+"'")},g,y=function(){var _=[];if(n==="["){if(l("["),d(),n==="]")return l("]"),_;for(;n;){if(_.push(g()),d(),n==="]")return l("]"),_;l(","),d()}}s("Bad array")},m=function(){var _,E=Object.create(null);if(n==="{"){if(l("{"),d(),n==="}")return l("}"),E;for(;n;){if(_=f(),d(),l(":"),t.strict===!0&&Object.hasOwnProperty.call(E,_)&&s('Duplicate key "'+_+'"'),eL.test(_)===!0?t.protoAction==="error"?s("Object contains forbidden prototype property"):t.protoAction==="ignore"?g():E[_]=g():tL.test(_)===!0?t.constructorAction==="error"?s("Object contains forbidden constructor property"):t.constructorAction==="ignore"?g():E[_]=g():E[_]=g(),d(),n==="}")return l("}"),E;l(","),d()}}s("Bad object")};return g=function(){switch(d(),n){case"{":return m();case"[":return y();case'"':return f();case"-":return c();default:return n>="0"&&n<="9"?c():h()}},function(_,E){var w;return a=_+"",r=0,n=" ",w=g(),d(),n&&s("Syntax error"),typeof E=="function"?function S(R,B){var O,N,ee=R[B];return ee&&typeof ee=="object"&&Object.keys(ee).forEach(function(q){N=S(ee,q),N!==void 0?ee[q]=N:delete ee[q]}),E.call(R,B,ee)}({"":w},""):w}};h_.exports=rL});var y_=ue((jG,hf)=>{var g_=d_().stringify,m_=p_();hf.exports=function(e){return{parse:m_(e),stringify:g_}};hf.exports.parse=m_();hf.exports.stringify=g_});var gf=ue(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.requestTimeout=Dt.resetIsAvailableCache=Dt.isAvailable=Dt.project=Dt.instance=Dt.HEADERS=Dt.HEADER_VALUE=Dt.HEADER_NAME=Dt.SECONDARY_HOST_ADDRESS=Dt.HOST_ADDRESS=Dt.BASE_PATH=void 0;var Jp=Lo(),nL=y_();Dt.BASE_PATH="/computeMetadata/v1";Dt.HOST_ADDRESS="http://169.254.169.254";Dt.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";Dt.HEADER_NAME="Metadata-Flavor";Dt.HEADER_VALUE="Google";Dt.HEADERS=Object.freeze({[Dt.HEADER_NAME]:Dt.HEADER_VALUE});function Zp(e){return e||(e=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||Dt.HOST_ADDRESS),/^https?:\/\//.test(e)||(e=`http://${e}`),new URL(Dt.BASE_PATH,e).href}function iL(e){Object.keys(e).forEach(t=>{switch(t){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${t}' is not a valid configuration option.`)}})}function $p(e,t,r=3,n=!1){return M(this,null,function*(){t=t||{},typeof t=="string"&&(t={property:t});let i="";typeof t=="object"&&t.property&&(i="/"+t.property),iL(t);try{let s=yield(n?aL:Jp.request)({url:`${Zp()}/${e}${i}`,headers:Object.assign({},Dt.HEADERS,t.headers),retryConfig:{noResponseRetries:r},params:t.params,responseType:"text",timeout:v_()});if(s.headers[Dt.HEADER_NAME.toLowerCase()]!==Dt.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${Dt.HEADER_NAME} header.`);if(!s.data)throw new Error("Invalid response from the metadata service");if(typeof s.data=="string")try{return nL.parse(s.data)}catch(l){}return s.data}catch(a){let s=a;throw s.response&&s.response.status!==200&&(s.message=`Unsuccessful response status code. ${s.message}`),a}})}function aL(e){return M(this,null,function*(){let t=on(Zr({},e),{url:e.url.replace(Zp(),Zp(Dt.SECONDARY_HOST_ADDRESS))}),r=!1,n=(0,Jp.request)(e).then(a=>(r=!0,a)).catch(a=>{if(r)return i;throw r=!0,a}),i=(0,Jp.request)(t).then(a=>(r=!0,a)).catch(a=>{if(r)return n;throw r=!0,a});return Promise.race([n,i])})}function sL(e){return $p("instance",e)}Dt.instance=sL;function oL(e){return $p("project",e)}Dt.project=oL;function lL(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var pf;function uL(){return M(this,null,function*(){try{return pf===void 0&&(pf=$p("instance",void 0,lL(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),yield pf,!0}catch(e){let t=e;if(process.env.DEBUG_AUTH&&console.info(t),t.type==="request-timeout"||t.response&&t.response.status===404)return!1;if(!(t.response&&t.response.status===404)&&(!t.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(t.code))){let r="UNKNOWN";t.code&&(r=t.code),process.emitWarning(`received unexpected error = ${t.message} code = ${r}`,"MetadataLookupWarning")}return!1}})}Dt.isAvailable=uL;function cL(){pf=void 0}Dt.resetIsAvailableCache=cL;function v_(){return process.env.K_SERVICE||process.env.FUNCTION_NAME?0:3e3}Dt.requestTimeout=v_});var w_=ue(mf=>{"use strict";mf.byteLength=dL;mf.toByteArray=pL;mf.fromByteArray=yL;var Oi=[],Qn=[],fL=typeof Uint8Array!="undefined"?Uint8Array:Array,e0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(As=0,__=e0.length;As<__;++As)Oi[As]=e0[As],Qn[e0.charCodeAt(As)]=As;var As,__;Qn["-".charCodeAt(0)]=62;Qn["_".charCodeAt(0)]=63;function E_(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function dL(e){var t=E_(e),r=t[0],n=t[1];return(r+n)*3/4-n}function hL(e,t,r){return(t+r)*3/4-r}function pL(e){var t,r=E_(e),n=r[0],i=r[1],a=new fL(hL(e,n,i)),s=0,l=i>0?n-4:n,c;for(c=0;c<l;c+=4)t=Qn[e.charCodeAt(c)]<<18|Qn[e.charCodeAt(c+1)]<<12|Qn[e.charCodeAt(c+2)]<<6|Qn[e.charCodeAt(c+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=t&255;return i===2&&(t=Qn[e.charCodeAt(c)]<<2|Qn[e.charCodeAt(c+1)]>>4,a[s++]=t&255),i===1&&(t=Qn[e.charCodeAt(c)]<<10|Qn[e.charCodeAt(c+1)]<<4|Qn[e.charCodeAt(c+2)]>>2,a[s++]=t>>8&255,a[s++]=t&255),a}function gL(e){return Oi[e>>18&63]+Oi[e>>12&63]+Oi[e>>6&63]+Oi[e&63]}function mL(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),i.push(gL(n));return i.join("")}function yL(e){for(var t,r=e.length,n=r%3,i=[],a=16383,s=0,l=r-n;s<l;s+=a)i.push(mL(e,s,s+a>l?l:s+a));return n===1?(t=e[r-1],i.push(Oi[t>>2]+Oi[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],i.push(Oi[t>>10]+Oi[t>>4&63]+Oi[t<<2&63]+"=")),i.join("")}});var b_=ue(C_=>{(function(e){function t(){}function r(c,f){if(c=c===void 0?"utf-8":c,f=f===void 0?{fatal:!1}:f,s.indexOf(c.toLowerCase())===-1)throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+c+"') is invalid.");if(f.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function n(c){return Buffer.from(c.buffer,c.byteOffset,c.byteLength).toString("utf-8")}function i(c){var f=URL.createObjectURL(new Blob([c],{type:"text/plain;charset=UTF-8"}));try{var d=new XMLHttpRequest;return d.open("GET",f,!1),d.send(),d.responseText}catch(h){return a(c)}finally{URL.revokeObjectURL(f)}}function a(c){for(var f=0,d=Math.min(65536,c.length+1),h=new Uint16Array(d),g=[],y=0;;){var m=f<c.length;if(!m||y>=d-1){if(g.push(String.fromCharCode.apply(null,h.subarray(0,y))),!m)return g.join("");c=c.subarray(f),y=f=0}if(m=c[f++],(m&128)==0)h[y++]=m;else if((m&224)==192){var _=c[f++]&63;h[y++]=(m&31)<<6|_}else if((m&240)==224){_=c[f++]&63;var E=c[f++]&63;h[y++]=(m&31)<<12|_<<6|E}else if((m&248)==240){_=c[f++]&63,E=c[f++]&63;var w=c[f++]&63;m=(m&7)<<18|_<<12|E<<6|w,65535<m&&(m-=65536,h[y++]=m>>>10&1023|55296,m=56320|m&1023),h[y++]=m}}}if(e.TextEncoder&&e.TextDecoder)return!1;var s=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),t.prototype.encode=function(c,f){if(f=f===void 0?{stream:!1}:f,f.stream)throw Error("Failed to encode: the 'stream' option is unsupported.");f=0;for(var d=c.length,h=0,g=Math.max(32,d+(d>>>1)+7),y=new Uint8Array(g>>>3<<3);f<d;){var m=c.charCodeAt(f++);if(55296<=m&&56319>=m){if(f<d){var _=c.charCodeAt(f);(_&64512)==56320&&(++f,m=((m&1023)<<10)+(_&1023)+65536)}if(55296<=m&&56319>=m)continue}if(h+4>y.length&&(g+=8,g*=1+f/c.length*2,g=g>>>3<<3,_=new Uint8Array(g),_.set(y),y=_),(m&4294967168)==0)y[h++]=m;else{if((m&4294965248)==0)y[h++]=m>>>6&31|192;else if((m&4294901760)==0)y[h++]=m>>>12&15|224,y[h++]=m>>>6&63|128;else if((m&4292870144)==0)y[h++]=m>>>18&7|240,y[h++]=m>>>12&63|128,y[h++]=m>>>6&63|128;else continue;y[h++]=m&63|128}}return y.slice?y.slice(0,h):y.subarray(0,h)},Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1});var l=a;typeof Buffer=="function"&&Buffer.from?l=n:typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&(l=i),r.prototype.decode=function(c,f){if(f=f===void 0?{stream:!1}:f,f.stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return c=c instanceof Uint8Array?c:c.buffer instanceof ArrayBuffer?new Uint8Array(c.buffer):new Uint8Array(c),l(c)},e.TextEncoder=t,e.TextDecoder=r})(typeof window!="undefined"?window:typeof global!="undefined"?global:C_)});var x_=ue(yf=>{"use strict";Object.defineProperty(yf,"__esModule",{value:!0});yf.BrowserCrypto=void 0;var Po=w_();typeof process=="undefined"&&typeof TextEncoder=="undefined"&&b_();var vL=Uo(),ru=class{constructor(){if(typeof window=="undefined"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}sha256DigestBase64(t){return M(this,null,function*(){let r=new TextEncoder().encode(t),n=yield window.crypto.subtle.digest("SHA-256",r);return Po.fromByteArray(new Uint8Array(n))})}randomBytesBase64(t){let r=new Uint8Array(t);return window.crypto.getRandomValues(r),Po.fromByteArray(r)}static padBase64(t){for(;t.length%4!=0;)t+="=";return t}verify(t,r,n){return M(this,null,function*(){let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},a=new TextEncoder().encode(r),s=Po.toByteArray(ru.padBase64(n)),l=yield window.crypto.subtle.importKey("jwk",t,i,!0,["verify"]);return yield window.crypto.subtle.verify(i,l,s,a)})}sign(t,r){return M(this,null,function*(){let n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=new TextEncoder().encode(r),a=yield window.crypto.subtle.importKey("jwk",t,n,!0,["sign"]),s=yield window.crypto.subtle.sign(n,a,i);return Po.fromByteArray(new Uint8Array(s))})}decodeBase64StringUtf8(t){let r=Po.toByteArray(ru.padBase64(t));return new TextDecoder().decode(r)}encodeBase64StringUtf8(t){let r=new TextEncoder().encode(t);return Po.fromByteArray(r)}sha256DigestHex(t){return M(this,null,function*(){let r=new TextEncoder().encode(t),n=yield window.crypto.subtle.digest("SHA-256",r);return(0,vL.fromArrayBufferToHex)(n)})}signWithHmacSha256(t,r){return M(this,null,function*(){let n=typeof t=="string"?t:String.fromCharCode(...new Uint16Array(t)),i=new TextEncoder,a=yield window.crypto.subtle.importKey("raw",i.encode(n),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",a,i.encode(r))})}};yf.BrowserCrypto=ru});var T_=ue(vf=>{"use strict";Object.defineProperty(vf,"__esModule",{value:!0});vf.NodeCrypto=void 0;var Mo=require("crypto"),S_=class{sha256DigestBase64(t){return M(this,null,function*(){return Mo.createHash("sha256").update(t).digest("base64")})}randomBytesBase64(t){return Mo.randomBytes(t).toString("base64")}verify(t,r,n){return M(this,null,function*(){let i=Mo.createVerify("sha256");return i.update(r),i.end(),i.verify(t,n,"base64")})}sign(t,r){return M(this,null,function*(){let n=Mo.createSign("RSA-SHA256");return n.update(r),n.end(),n.sign(t,"base64")})}decodeBase64StringUtf8(t){return Buffer.from(t,"base64").toString("utf-8")}encodeBase64StringUtf8(t){return Buffer.from(t,"utf-8").toString("base64")}sha256DigestHex(t){return M(this,null,function*(){return Mo.createHash("sha256").update(t).digest("hex")})}signWithHmacSha256(t,r){return M(this,null,function*(){let n=typeof t=="string"?t:EL(t);return _L(Mo.createHmac("sha256",n).update(r).digest())})}};vf.NodeCrypto=S_;function _L(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function EL(e){return Buffer.from(e)}});var Uo=ue(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.fromArrayBufferToHex=Va.hasBrowserCrypto=Va.createCrypto=void 0;var wL=x_(),CL=T_();function bL(){return A_()?new wL.BrowserCrypto:new CL.NodeCrypto}Va.createCrypto=bL;function A_(){return typeof window!="undefined"&&typeof window.crypto!="undefined"&&typeof window.crypto.subtle!="undefined"}Va.hasBrowserCrypto=A_;function xL(e){return Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join("")}Va.fromArrayBufferToHex=xL});var I_=ue(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});_f.validate=void 0;function SL(e){let t=[{invalid:"uri",expected:"url"},{invalid:"json",expected:"data"},{invalid:"qs",expected:"params"}];for(let r of t)if(e[r.invalid]){let n=`'${r.invalid}' is not a valid configuration option. Please use '${r.expected}' instead. This library is using Axios for requests. Please see https://github.com/axios/axios to learn more about the valid request options.`;throw new Error(n)}}_f.validate=SL});var k_=ue((ZG,TL)=>{TL.exports={_args:[["google-auth-library@8.0.2","/home/runner/work/obsidian-google-calendar/obsidian-google-calendar"]],_from:"google-auth-library@8.0.2",_id:"google-auth-library@8.0.2",_inBundle:!1,_integrity:"sha512-HoG+nWFAThLovKpvcbYzxgn+nBJPTfAwtq0GxPN821nOO+21+8oP7MoEHfd1sbDulUFFGfcjJr2CnJ4YssHcyg==",_location:"/google-auth-library",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"google-auth-library@8.0.2",name:"google-auth-library",escapedName:"google-auth-library",rawSpec:"8.0.2",saveSpec:null,fetchSpec:"8.0.2"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/google-auth-library/-/google-auth-library-8.0.2.tgz",_spec:"8.0.2",_where:"/home/runner/work/obsidian-google-calendar/obsidian-google-calendar",author:{name:"Google Inc."},bugs:{url:"https://github.com/googleapis/google-auth-library-nodejs/issues"},dependencies:{arrify:"^2.0.0","base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11","fast-text-encoding":"^1.0.0",gaxios:"^5.0.0","gcp-metadata":"^5.0.0",gtoken:"^5.3.2",jws:"^4.0.0","lru-cache":"^6.0.0"},description:"Google APIs Authentication Client Library for Node.js",devDependencies:{"@compodoc/compodoc":"^1.1.7","@types/base64-js":"^1.2.5","@types/chai":"^4.1.7","@types/jws":"^3.1.0","@types/lru-cache":"^5.0.0","@types/mocha":"^8.0.0","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^16.0.0","@types/sinon":"^10.0.0","@types/tmp":"^0.2.0","assert-rejects":"^1.0.0",c8:"^7.0.0",chai:"^4.2.0",codecov:"^3.0.2",execa:"^5.0.0",gts:"^3.1.0","is-docker":"^2.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^5.0.0",keypair:"^1.0.4",linkinator:"^3.0.3",mocha:"^9.2.2",mv:"^2.1.1",ncp:"^2.0.0",nock:"^13.0.0","null-loader":"^4.0.0",puppeteer:"^13.0.0",sinon:"^13.0.0",tmp:"^0.2.0","ts-loader":"^8.0.0",typescript:"^4.6.3",webpack:"^5.21.2","webpack-cli":"^4.0.0"},engines:{node:">=12"},files:["build/src","!build/src/**/*.map"],homepage:"https://github.com/googleapis/google-auth-library-nodejs#readme",keywords:["google","api","google apis","client","client library"],license:"Apache-2.0",main:"./build/src/index.js",name:"google-auth-library",repository:{type:"git",url:"git+https://github.com/googleapis/google-auth-library-nodejs.git"},scripts:{"browser-test":"karma start",clean:"gts clean",compile:"tsc -p .",docs:"compodoc src/","docs-test":"linkinator docs",fix:"gts fix",lint:"gts check",precompile:"gts clean","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install",prepare:"npm run compile","presystem-test":"npm run compile",pretest:"npm run compile","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000",test:"c8 mocha build/test",webpack:"webpack"},types:"./build/src/index.d.ts",version:"8.0.2"}});var nu=ue(Ef=>{"use strict";Object.defineProperty(Ef,"__esModule",{value:!0});Ef.DefaultTransporter=void 0;var R_=Lo(),AL=I_(),B_=k_(),N_="google-api-nodejs-client",Fo=class{configure(t={}){if(t.headers=t.headers||{},typeof window=="undefined"){let r=t.headers["User-Agent"];r?r.includes(`${N_}/`)||(t.headers["User-Agent"]=`${r} ${Fo.USER_AGENT}`):t.headers["User-Agent"]=Fo.USER_AGENT;let n=`auth/${B_.version}`;if(t.headers["x-goog-api-client"]&&!t.headers["x-goog-api-client"].includes(n))t.headers["x-goog-api-client"]=`${t.headers["x-goog-api-client"]} ${n}`;else if(!t.headers["x-goog-api-client"]){let i=process.version.replace(/^v/,"");t.headers["x-goog-api-client"]=`gl-node/${i} ${n}`}}return t}request(t,r){t=this.configure(t);try{(0,AL.validate)(t)}catch(n){if(r)return r(n);throw n}if(r)(0,R_.request)(t).then(n=>{r(null,n)},n=>{r(this.processError(n))});else return(0,R_.request)(t).catch(n=>{throw this.processError(n)})}processError(t){let r=t.response,n=t,i=r?r.data:null;return r&&i&&i.error&&r.status!==200?typeof i.error=="string"?(n.message=i.error,n.code=r.status.toString()):Array.isArray(i.error.errors)?(n.message=i.error.errors.map(a=>a.message).join(`
`),n.code=i.error.code,n.errors=i.error.errors):(n.message=i.error.message,n.code=i.error.code||r.status):r&&r.status>=400&&(n.message=i,n.code=r.status.toString()),n}};Ef.DefaultTransporter=Fo;Fo.USER_AGENT=`${N_}/${B_.version}`});var O_=ue((e9,D_)=>{"use strict";var IL=e=>e==null?[]:Array.isArray(e)?e:typeof e=="string"?[e]:typeof e[Symbol.iterator]=="function"?[...e]:[e];D_.exports=IL});var qo=ue((t0,P_)=>{var wf=require("buffer"),Li=wf.Buffer;function L_(e,t){for(var r in e)t[r]=e[r]}Li.from&&Li.alloc&&Li.allocUnsafe&&Li.allocUnsafeSlow?P_.exports=wf:(L_(wf,t0),t0.Buffer=Is);function Is(e,t,r){return Li(e,t,r)}Is.prototype=Object.create(Li.prototype);L_(Li,Is);Is.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Li(e,t,r)};Is.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Li(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};Is.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Li(e)};Is.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return wf.SlowBuffer(e)}});var M_=ue((t9,U_)=>{"use strict";function r0(e){var t=(e/8|0)+(e%8==0?0:1);return t}var kL={ES256:r0(256),ES384:r0(384),ES512:r0(521)};function RL(e){var t=kL[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}U_.exports=RL});var n0=ue((r9,j_)=>{"use strict";var Cf=qo().Buffer,F_=M_(),bf=128,q_=0,BL=32,NL=16,DL=2,G_=NL|BL|q_<<6,xf=DL|q_<<6;function OL(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function V_(e){if(Cf.isBuffer(e))return e;if(typeof e=="string")return Cf.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function LL(e,t){e=V_(e);var r=F_(t),n=r+1,i=e.length,a=0;if(e[a++]!==G_)throw new Error('Could not find expected "seq"');var s=e[a++];if(s===(bf|1)&&(s=e[a++]),i-a<s)throw new Error('"seq" specified length of "'+s+'", only "'+(i-a)+'" remaining');if(e[a++]!==xf)throw new Error('Could not find expected "int" for "r"');var l=e[a++];if(i-a-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(i-a-2)+'" available');if(n<l)throw new Error('"r" specified length of "'+l+'", max of "'+n+'" is acceptable');var c=a;if(a+=l,e[a++]!==xf)throw new Error('Could not find expected "int" for "s"');var f=e[a++];if(i-a!==f)throw new Error('"s" specified length of "'+f+'", expected "'+(i-a)+'"');if(n<f)throw new Error('"s" specified length of "'+f+'", max of "'+n+'" is acceptable');var d=a;if(a+=f,a!==i)throw new Error('Expected to consume entire buffer, but "'+(i-a)+'" bytes remain');var h=r-l,g=r-f,y=Cf.allocUnsafe(h+l+g+f);for(a=0;a<h;++a)y[a]=0;e.copy(y,a,c+Math.max(-h,0),c+l),a=r;for(var m=a;a<m+g;++a)y[a]=0;return e.copy(y,a,d+Math.max(-g,0),d+f),y=y.toString("base64"),y=OL(y),y}function K_(e,t,r){for(var n=0;t+n<r&&e[t+n]===0;)++n;var i=e[t+n]>=bf;return i&&--n,n}function PL(e,t){e=V_(e);var r=F_(t),n=e.length;if(n!==r*2)throw new TypeError('"'+t+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=K_(e,0,r),a=K_(e,r,e.length),s=r-i,l=r-a,c=1+1+s+1+1+l,f=c<bf,d=Cf.allocUnsafe((f?2:3)+c),h=0;return d[h++]=G_,f?d[h++]=c:(d[h++]=bf|1,d[h++]=c&255),d[h++]=xf,d[h++]=s,i<0?(d[h++]=0,h+=e.copy(d,h,0,r)):h+=e.copy(d,h,i,r),d[h++]=xf,d[h++]=l,a<0?(d[h++]=0,e.copy(d,h,r)):e.copy(d,h,r+a),d}j_.exports={derToJose:LL,joseToDer:PL}});var iu=ue(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});Sf.AuthClient=void 0;var UL=require("events"),ML=nu(),H_=class extends UL.EventEmitter{constructor(){super(...arguments);this.transporter=new ML.DefaultTransporter,this.credentials={},this.eagerRefreshThresholdMillis=5*60*1e3,this.forceRefreshOnFailure=!1}setCredentials(t){this.credentials=t}addSharedMetadataHeaders(t){return!t["x-goog-user-project"]&&this.quotaProjectId&&(t["x-goog-user-project"]=this.quotaProjectId),t}};Sf.AuthClient=H_});var i0=ue(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});Tf.LoginTicket=void 0;var W_=class{constructor(t,r){this.envelope=t,this.payload=r}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let t=this.getPayload();return t&&t.sub?t.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}};Tf.LoginTicket=W_});var ks=ue(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.OAuth2Client=Pi.CertificateFormat=Pi.CodeChallengeMethod=void 0;var Af=require("querystring"),FL=require("stream"),qL=n0(),a0=Uo(),GL=iu(),VL=i0(),KL;(function(e){e.Plain="plain",e.S256="S256"})(KL=Pi.CodeChallengeMethod||(Pi.CodeChallengeMethod={}));var Ka;(function(e){e.PEM="PEM",e.JWK="JWK"})(Ka=Pi.CertificateFormat||(Pi.CertificateFormat={}));var Xt=class extends GL.AuthClient{constructor(t,r,n){super();this.certificateCache={},this.certificateExpiry=null,this.certificateCacheFormat=Ka.PEM,this.refreshTokenPromises=new Map;let i=t&&typeof t=="object"?t:{clientId:t,clientSecret:r,redirectUri:n};this._clientId=i.clientId,this._clientSecret=i.clientSecret,this.redirectUri=i.redirectUri,this.eagerRefreshThresholdMillis=i.eagerRefreshThresholdMillis||5*60*1e3,this.forceRefreshOnFailure=!!i.forceRefreshOnFailure}generateAuthUrl(t={}){if(t.code_challenge_method&&!t.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return t.response_type=t.response_type||"code",t.client_id=t.client_id||this._clientId,t.redirect_uri=t.redirect_uri||this.redirectUri,t.scope instanceof Array&&(t.scope=t.scope.join(" ")),Xt.GOOGLE_OAUTH2_AUTH_BASE_URL_+"?"+Af.stringify(t)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}generateCodeVerifierAsync(){return M(this,null,function*(){let t=(0,a0.createCrypto)(),n=t.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),a=(yield t.sha256DigestBase64(n)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:n,codeChallenge:a}})}getToken(t,r){let n=typeof t=="string"?{code:t}:t;if(r)this.getTokenAsync(n).then(i=>r(null,i.tokens,i.res),i=>r(i,null,i.response));else return this.getTokenAsync(n)}getTokenAsync(t){return M(this,null,function*(){let r=Xt.GOOGLE_OAUTH2_TOKEN_URL_,n={code:t.code,client_id:t.client_id||this._clientId,client_secret:this._clientSecret,redirect_uri:t.redirect_uri||this.redirectUri,grant_type:"authorization_code",code_verifier:t.codeVerifier},i=yield this.transporter.request({method:"POST",url:r,data:Af.stringify(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshToken(t){return M(this,null,function*(){if(!t)return this.refreshTokenNoCache(t);if(this.refreshTokenPromises.has(t))return this.refreshTokenPromises.get(t);let r=this.refreshTokenNoCache(t).then(n=>(this.refreshTokenPromises.delete(t),n),n=>{throw this.refreshTokenPromises.delete(t),n});return this.refreshTokenPromises.set(t,r),r})}refreshTokenNoCache(t){return M(this,null,function*(){if(!t)throw new Error("No refresh token is set.");let r=Xt.GOOGLE_OAUTH2_TOKEN_URL_,n={refresh_token:t,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},i=yield this.transporter.request({method:"POST",url:r,data:Af.stringify(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshAccessToken(t){if(t)this.refreshAccessTokenAsync().then(r=>t(null,r.credentials,r.res),t);else return this.refreshAccessTokenAsync()}refreshAccessTokenAsync(){return M(this,null,function*(){let t=yield this.refreshToken(this.credentials.refresh_token),r=t.tokens;return r.refresh_token=this.credentials.refresh_token,this.credentials=r,{credentials:this.credentials,res:t.res}})}getAccessToken(t){if(t)this.getAccessTokenAsync().then(r=>t(null,r.token,r.res),t);else return this.getAccessTokenAsync()}getAccessTokenAsync(){return M(this,null,function*(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){let n=yield this.processAndValidateRefreshHandler();if(n==null?void 0:n.access_token)return this.setCredentials(n),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");let r=yield this.refreshAccessTokenAsync();if(!r.credentials||r.credentials&&!r.credentials.access_token)throw new Error("Could not refresh access token.");return{token:r.credentials.access_token,res:r.res}}else return{token:this.credentials.access_token}})}getRequestHeaders(t){return M(this,null,function*(){return(yield this.getRequestMetadataAsync(t)).headers})}getRequestMetadataAsync(t){return M(this,null,function*(){let r=this.credentials;if(!r.access_token&&!r.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(r.access_token&&!this.isTokenExpiring()){r.token_type=r.token_type||"Bearer";let l={Authorization:r.token_type+" "+r.access_token};return{headers:this.addSharedMetadataHeaders(l)}}if(this.refreshHandler){let l=yield this.processAndValidateRefreshHandler();if(l==null?void 0:l.access_token){this.setCredentials(l);let c={Authorization:"Bearer "+this.credentials.access_token};return{headers:this.addSharedMetadataHeaders(c)}}}if(this.apiKey)return{headers:{"X-Goog-Api-Key":this.apiKey}};let n=null,i=null;try{n=yield this.refreshToken(r.refresh_token),i=n.tokens}catch(l){let c=l;throw c.response&&(c.response.status===403||c.response.status===404)&&(c.message=`Could not refresh access token: ${c.message}`),c}let a=this.credentials;a.token_type=a.token_type||"Bearer",i.refresh_token=a.refresh_token,this.credentials=i;let s={Authorization:a.token_type+" "+i.access_token};return{headers:this.addSharedMetadataHeaders(s),res:n.res}})}static getRevokeTokenUrl(t){let r=Af.stringify({token:t});return`${Xt.GOOGLE_OAUTH2_REVOKE_URL_}?${r}`}revokeToken(t,r){let n={url:Xt.getRevokeTokenUrl(t),method:"POST"};if(r)this.transporter.request(n).then(i=>r(null,i),r);else return this.transporter.request(n)}revokeCredentials(t){if(t)this.revokeCredentialsAsync().then(r=>t(null,r),t);else return this.revokeCredentialsAsync()}revokeCredentialsAsync(){return M(this,null,function*(){let t=this.credentials.access_token;if(this.credentials={},t)return this.revokeToken(t);throw new Error("No access token to revoke.")})}request(t,r){if(r)this.requestAsync(t).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(t)}requestAsync(t,r=!1){return M(this,null,function*(){let n;try{let i=yield this.getRequestMetadataAsync(t.url);t.headers=t.headers||{},i.headers&&i.headers["x-goog-user-project"]&&(t.headers["x-goog-user-project"]=i.headers["x-goog-user-project"]),i.headers&&i.headers.Authorization&&(t.headers.Authorization=i.headers.Authorization),this.apiKey&&(t.headers["X-Goog-Api-Key"]=this.apiKey),n=yield this.transporter.request(t)}catch(i){let a=i.response;if(a){let s=a.status,l=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),c=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,f=a.config.data instanceof FL.Readable,d=s===401||s===403;if(!r&&d&&!f&&l)return yield this.refreshAccessTokenAsync(),this.requestAsync(t,!0);if(!r&&d&&!f&&c){let h=yield this.processAndValidateRefreshHandler();return(h==null?void 0:h.access_token)&&this.setCredentials(h),this.requestAsync(t,!0)}}throw i}return n})}verifyIdToken(t,r){if(r&&typeof r!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(r)this.verifyIdTokenAsync(t).then(n=>r(null,n),r);else return this.verifyIdTokenAsync(t)}verifyIdTokenAsync(t){return M(this,null,function*(){if(!t.idToken)throw new Error("The verifyIdToken method requires an ID Token");let r=yield this.getFederatedSignonCertsAsync();return yield this.verifySignedJwtWithCertsAsync(t.idToken,r.certs,t.audience,Xt.ISSUERS_,t.maxExpiry)})}getTokenInfo(t){return M(this,null,function*(){let{data:r}=yield this.transporter.request({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${t}`},url:Xt.GOOGLE_TOKEN_INFO_URL}),n=Object.assign({expiry_date:new Date().getTime()+r.expires_in*1e3,scopes:r.scope.split(" ")},r);return delete n.expires_in,delete n.scope,n})}getFederatedSignonCerts(t){if(t)this.getFederatedSignonCertsAsync().then(r=>t(null,r.certs,r.res),t);else return this.getFederatedSignonCertsAsync()}getFederatedSignonCertsAsync(){return M(this,null,function*(){let t=new Date().getTime(),r=(0,a0.hasBrowserCrypto)()?Ka.JWK:Ka.PEM;if(this.certificateExpiry&&t<this.certificateExpiry.getTime()&&this.certificateCacheFormat===r)return{certs:this.certificateCache,format:r};let n,i;switch(r){case Ka.PEM:i=Xt.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_;break;case Ka.JWK:i=Xt.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_;break;default:throw new Error(`Unsupported certificate format ${r}`)}try{n=yield this.transporter.request({url:i})}catch(f){throw f instanceof Error&&(f.message=`Failed to retrieve verification certificates: ${f.message}`),f}let a=n?n.headers["cache-control"]:void 0,s=-1;if(a){let d=new RegExp("max-age=([0-9]*)").exec(a);d&&d.length===2&&(s=Number(d[1])*1e3)}let l={};switch(r){case Ka.PEM:l=n.data;break;case Ka.JWK:for(let f of n.data.keys)l[f.kid]=f;break;default:throw new Error(`Unsupported certificate format ${r}`)}let c=new Date;return this.certificateExpiry=s===-1?null:new Date(c.getTime()+s),this.certificateCache=l,this.certificateCacheFormat=r,{certs:l,format:r,res:n}})}getIapPublicKeys(t){if(t)this.getIapPublicKeysAsync().then(r=>t(null,r.pubkeys,r.res),t);else return this.getIapPublicKeysAsync()}getIapPublicKeysAsync(){return M(this,null,function*(){let t,r=Xt.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_;try{t=yield this.transporter.request({url:r})}catch(n){throw n instanceof Error&&(n.message=`Failed to retrieve verification certificates: ${n.message}`),n}return{pubkeys:t.data,res:t}})}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}verifySignedJwtWithCertsAsync(t,r,n,i,a){return M(this,null,function*(){let s=(0,a0.createCrypto)();a||(a=Xt.MAX_TOKEN_LIFETIME_SECS_);let l=t.split(".");if(l.length!==3)throw new Error("Wrong number of segments in token: "+t);let c=l[0]+"."+l[1],f=l[2],d,h;try{d=JSON.parse(s.decodeBase64StringUtf8(l[0]))}catch(R){throw R instanceof Error&&(R.message=`Can't parse token envelope: ${l[0]}': ${R.message}`),R}if(!d)throw new Error("Can't parse token envelope: "+l[0]);try{h=JSON.parse(s.decodeBase64StringUtf8(l[1]))}catch(R){throw R instanceof Error&&(R.message=`Can't parse token payload '${l[0]}`),R}if(!h)throw new Error("Can't parse token payload: "+l[1]);if(!Object.prototype.hasOwnProperty.call(r,d.kid))throw new Error("No pem found for envelope: "+JSON.stringify(d));let g=r[d.kid];if(d.alg==="ES256"&&(f=qL.joseToDer(f,"ES256").toString("base64")),!(yield s.verify(g,c,f)))throw new Error("Invalid token signature: "+t);if(!h.iat)throw new Error("No issue time in token: "+JSON.stringify(h));if(!h.exp)throw new Error("No expiration time in token: "+JSON.stringify(h));let m=Number(h.iat);if(isNaN(m))throw new Error("iat field using invalid format");let _=Number(h.exp);if(isNaN(_))throw new Error("exp field using invalid format");let E=new Date().getTime()/1e3;if(_>=E+a)throw new Error("Expiration time too far in future: "+JSON.stringify(h));let w=m-Xt.CLOCK_SKEW_SECS_,S=_+Xt.CLOCK_SKEW_SECS_;if(E<w)throw new Error("Token used too early, "+E+" < "+w+": "+JSON.stringify(h));if(E>S)throw new Error("Token used too late, "+E+" > "+S+": "+JSON.stringify(h));if(i&&i.indexOf(h.iss)<0)throw new Error("Invalid issuer, expected one of ["+i+"], but got "+h.iss);if(typeof n!="undefined"&&n!==null){let R=h.aud,B=!1;if(n.constructor===Array?B=n.indexOf(R)>-1:B=R===n,!B)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new VL.LoginTicket(d,h)})}processAndValidateRefreshHandler(){return M(this,null,function*(){if(this.refreshHandler){let t=yield this.refreshHandler();if(!t.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return t}})}isTokenExpiring(){let t=this.credentials.expiry_date;return t?t<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}};Pi.OAuth2Client=Xt;Xt.GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";Xt.GOOGLE_OAUTH2_AUTH_BASE_URL_="https://accounts.google.com/o/oauth2/v2/auth";Xt.GOOGLE_OAUTH2_TOKEN_URL_="https://oauth2.googleapis.com/token";Xt.GOOGLE_OAUTH2_REVOKE_URL_="https://oauth2.googleapis.com/revoke";Xt.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_="https://www.googleapis.com/oauth2/v1/certs";Xt.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_="https://www.googleapis.com/oauth2/v3/certs";Xt.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_="https://www.gstatic.com/iap/verify/public_key";Xt.CLOCK_SKEW_SECS_=300;Xt.MAX_TOKEN_LIFETIME_SECS_=86400;Xt.ISSUERS_=["accounts.google.com","https://accounts.google.com"]});var s0=ue(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.Compute=void 0;var jL=O_(),HL=Lo(),Y_=gf(),WL=ks(),z_=class extends WL.OAuth2Client{constructor(t={}){super(t);this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=t.serviceAccountEmail||"default",this.scopes=jL(t.scopes)}refreshTokenNoCache(t){return M(this,null,function*(){let r=`service-accounts/${this.serviceAccountEmail}/token`,n;try{let a={property:r};this.scopes.length>0&&(a.params={scopes:this.scopes.join(",")}),n=yield Y_.instance(a)}catch(a){throw a instanceof HL.GaxiosError&&(a.message=`Could not refresh access token: ${a.message}`,this.wrapError(a)),a}let i=n;return n&&n.expires_in&&(i.expiry_date=new Date().getTime()+n.expires_in*1e3,delete i.expires_in),this.emit("tokens",i),{tokens:i,res:null}})}fetchIdToken(t){return M(this,null,function*(){let r=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${t}`,n;try{let i={property:r};n=yield Y_.instance(i)}catch(i){throw i instanceof Error&&(i.message=`Could not fetch ID token: ${i.message}`),i}return n})}wrapError(t){let r=t.response;r&&r.status&&(t.code=r.status.toString(),r.status===403?t.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+t.message:r.status===404&&(t.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+t.message))}};If.Compute=z_});var o0=ue(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});kf.IdTokenClient=void 0;var YL=ks(),Q_=class extends YL.OAuth2Client{constructor(t){super();this.targetAudience=t.targetAudience,this.idTokenProvider=t.idTokenProvider}getRequestMetadataAsync(t){return M(this,null,function*(){if(!this.credentials.id_token||(this.credentials.expiry_date||0)<Date.now()){let n=yield this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:n,expiry_date:this.getIdTokenExpiryDate(n)}}return{headers:{Authorization:"Bearer "+this.credentials.id_token}}})}getIdTokenExpiryDate(t){let r=t.split(".")[1];if(r)return JSON.parse(Buffer.from(r,"base64").toString("ascii")).exp*1e3}};kf.IdTokenClient=Q_});var l0=ue(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.getEnv=da.clear=da.GCPEnv=void 0;var X_=gf(),ja;(function(e){e.APP_ENGINE="APP_ENGINE",e.KUBERNETES_ENGINE="KUBERNETES_ENGINE",e.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",e.COMPUTE_ENGINE="COMPUTE_ENGINE",e.CLOUD_RUN="CLOUD_RUN",e.NONE="NONE"})(ja=da.GCPEnv||(da.GCPEnv={}));var au;function zL(){au=void 0}da.clear=zL;function QL(){return M(this,null,function*(){return au||(au=XL(),au)})}da.getEnv=QL;function XL(){return M(this,null,function*(){let e=ja.NONE;return JL()?e=ja.APP_ENGINE:ZL()?e=ja.CLOUD_FUNCTIONS:(yield t4())?(yield e4())?e=ja.KUBERNETES_ENGINE:$L()?e=ja.CLOUD_RUN:e=ja.COMPUTE_ENGINE:e=ja.NONE,e})}function JL(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function ZL(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function $L(){return!!process.env.K_CONFIGURATION}function e4(){return M(this,null,function*(){try{return yield X_.instance("attributes/cluster-name"),!0}catch(e){return!1}})}function t4(){return M(this,null,function*(){return X_.isAvailable()})}});var u0=ue(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});Rf.GaxiosError=void 0;var J_=class extends Error{constructor(t,r,n){super(t);this.response=n,this.config=r,this.code=n.status.toString()}};Rf.GaxiosError=J_});var $_=ue(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.getRetryConfig=void 0;function r4(e){return M(this,null,function*(){var t;let r=Z_(e);if(!e||!e.config||!r&&!e.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,e.config.retryConfig=r,!(yield(r.shouldRetry||n4)(e)))return{shouldRetry:!1,config:e.config};let s=(r.currentRetryAttempt?0:(t=r.retryDelay)!==null&&t!==void 0?t:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;e.config.retryConfig.currentRetryAttempt+=1;let l=new Promise(c=>{setTimeout(c,s)});return r.onRetryAttempt&&r.onRetryAttempt(e),yield l,{shouldRetry:!0,config:e.config}})}Bf.getRetryConfig=r4;function n4(e){let t=Z_(e);if(e.name==="AbortError"||!t||t.retry===0||!e.response&&(t.currentRetryAttempt||0)>=t.noResponseRetries||!e.config.method||t.httpMethodsToRetry.indexOf(e.config.method.toUpperCase())<0)return!1;if(e.response&&e.response.status){let r=!1;for(let[n,i]of t.statusCodesToRetry){let a=e.response.status;if(a>=n&&a<=i){r=!0;break}}if(!r)return!1}return t.currentRetryAttempt=t.currentRetryAttempt||0,!(t.currentRetryAttempt>=t.retry)}function Z_(e){if(e&&e.config&&e.config.retryConfig)return e.config.retryConfig}});var aE=ue(Go=>{"use strict";var Nf=Go&&Go.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Go,"__esModule",{value:!0});Go.Gaxios=void 0;var i4=Nf(Mp()),a4=require("https"),s4=Nf(Fp()),o4=Nf(require("querystring")),l4=Nf(qp()),eE=require("url"),u4=u0(),c4=$_(),f4=h4()?window.fetch:s4.default;function d4(){return typeof window!="undefined"&&!!window}function h4(){return d4()&&!!window.fetch}function p4(){return typeof Buffer!="undefined"}function tE(e,t){return!!rE(e,t)}function rE(e,t){t=t.toLowerCase();for(let r of Object.keys((e==null?void 0:e.headers)||{}))if(t===r.toLowerCase())return e.headers[r]}var c0;function nE(){let e=process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy;return e&&(c0=zp()),e}nE();function g4(e){var t;let r=(t=process.env.NO_PROXY)!==null&&t!==void 0?t:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new eE.URL(e);return!!n.find(a=>a.startsWith("*.")||a.startsWith(".")?(a=a.replace(/^\*\./,"."),i.hostname.endsWith(a)):a===i.origin||a===i.hostname)}function m4(e){if(!g4(e))return nE()}var iE=class{constructor(t){this.agentCache=new Map,this.defaults=t||{}}request(){return M(this,arguments,function*(t={}){return t=this.validateOpts(t),this._request(t)})}_defaultAdapter(t){return M(this,null,function*(){let n=yield(t.fetchImplementation||f4)(t.url,t),i=yield this.getResponseData(t,n);return this.translateResponse(t,n,i)})}_request(){return M(this,arguments,function*(t={}){try{let r;if(t.adapter?r=yield t.adapter(t,this._defaultAdapter.bind(this)):r=yield this._defaultAdapter(t),!t.validateStatus(r.status))throw new u4.GaxiosError(`Request failed with status code ${r.status}`,t,r);return r}catch(r){let n=r;n.config=t;let{shouldRetry:i,config:a}=yield c4.getRetryConfig(r);if(i&&a)return n.config.retryConfig.currentRetryAttempt=a.retryConfig.currentRetryAttempt,this._request(n.config);throw n}})}getResponseData(t,r){return M(this,null,function*(){switch(t.responseType){case"stream":return r.body;case"json":{let n=yield r.text();try{n=JSON.parse(n)}catch(i){}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}})}validateOpts(t){let r=i4.default(!0,{},this.defaults,t);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let a=r.paramsSerializer(r.params);a.startsWith("?")&&(a=a.slice(1));let s=r.url.includes("?")?"&":"?";r.url=r.url+s+a}if(typeof t.maxContentLength=="number"&&(r.size=t.maxContentLength),typeof t.maxRedirects=="number"&&(r.follow=t.maxRedirects),r.headers=r.headers||{},r.data){let a=typeof FormData=="undefined"?!1:(r==null?void 0:r.data)instanceof FormData;l4.default.readable(r.data)?r.body=r.data:p4()&&Buffer.isBuffer(r.data)?(r.body=r.data,tE(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?a||(rE(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(tE(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=m4(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let a=new eE.URL(i);r.agent=new c0({port:a.port,host:a.host,protocol:a.protocol,cert:r.cert,key:r.key})}else r.agent=new c0(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new a4.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(t){return t>=200&&t<300}paramsSerializer(t){return o4.default.stringify(t)}translateResponse(t,r,n){let i={};return r.headers.forEach((a,s)=>{i[s]=a}),{config:t,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};Go.Gaxios=iE});var oE=ue(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.request=Ui.instance=Ui.Gaxios=void 0;var sE=aE();Object.defineProperty(Ui,"Gaxios",{enumerable:!0,get:function(){return sE.Gaxios}});var y4=u0();Object.defineProperty(Ui,"GaxiosError",{enumerable:!0,get:function(){return y4.GaxiosError}});Ui.instance=new sE.Gaxios;function v4(e){return M(this,null,function*(){return Ui.instance.request(e)})}Ui.request=v4});var f0=ue((h9,lE)=>{var Df=qo().Buffer,_4=require("stream"),E4=require("util");function Of(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=Df.alloc(0),this;if(typeof e.pipe=="function")return this.buffer=Df.alloc(0),e.pipe(this),this;if(e.length||typeof e=="object")return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}E4.inherits(Of,_4);Of.prototype.write=function(t){this.buffer=Df.concat([this.buffer,Df.from(t)]),this.emit("data",t)};Of.prototype.end=function(t){t&&this.write(t),this.emit("end",t),this.emit("close"),this.writable=!1,this.readable=!1};lE.exports=Of});var cE=ue((p9,uE)=>{"use strict";var su=require("buffer").Buffer,d0=require("buffer").SlowBuffer;uE.exports=Lf;function Lf(e,t){if(!su.isBuffer(e)||!su.isBuffer(t)||e.length!==t.length)return!1;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}Lf.install=function(){su.prototype.equal=d0.prototype.equal=function(t){return Lf(this,t)}};var w4=su.prototype.equal,C4=d0.prototype.equal;Lf.restore=function(){su.prototype.equal=w4,d0.prototype.equal=C4}});var g0=ue((g9,_E)=>{var b4=cE(),Vo=qo().Buffer,Mi=require("crypto"),fE=n0(),dE=require("util"),x4=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,ou="secret must be a string or buffer",Ko="key must be a string or a buffer",S4="key must be a string, a buffer or an object",h0=typeof Mi.createPublicKey=="function";h0&&(Ko+=" or a KeyObject",ou+="or a KeyObject");function hE(e){if(!Vo.isBuffer(e)&&typeof e!="string"&&(!h0||typeof e!="object"||typeof e.type!="string"||typeof e.asymmetricKeyType!="string"||typeof e.export!="function"))throw yi(Ko)}function pE(e){if(!Vo.isBuffer(e)&&typeof e!="string"&&typeof e!="object")throw yi(S4)}function T4(e){if(!Vo.isBuffer(e)){if(typeof e=="string")return e;if(!h0||typeof e!="object"||e.type!=="secret"||typeof e.export!="function")throw yi(ou)}}function p0(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gE(e){e=e.toString();var t=4-e.length%4;if(t!==4)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function yi(e){var t=[].slice.call(arguments,1),r=dE.format.bind(dE,e).apply(null,t);return new TypeError(r)}function A4(e){return Vo.isBuffer(e)||typeof e=="string"}function lu(e){return A4(e)||(e=JSON.stringify(e)),e}function mE(e){return function(r,n){T4(n),r=lu(r);var i=Mi.createHmac("sha"+e,n),a=(i.update(r),i.digest("base64"));return p0(a)}}function I4(e){return function(r,n,i){var a=mE(e)(r,i);return b4(Vo.from(n),Vo.from(a))}}function yE(e){return function(r,n){pE(n),r=lu(r);var i=Mi.createSign("RSA-SHA"+e),a=(i.update(r),i.sign(n,"base64"));return p0(a)}}function vE(e){return function(r,n,i){hE(i),r=lu(r),n=gE(n);var a=Mi.createVerify("RSA-SHA"+e);return a.update(r),a.verify(i,n,"base64")}}function k4(e){return function(r,n){pE(n),r=lu(r);var i=Mi.createSign("RSA-SHA"+e),a=(i.update(r),i.sign({key:n,padding:Mi.constants.RSA_PKCS1_PSS_PADDING,saltLength:Mi.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return p0(a)}}function R4(e){return function(r,n,i){hE(i),r=lu(r),n=gE(n);var a=Mi.createVerify("RSA-SHA"+e);return a.update(r),a.verify({key:i,padding:Mi.constants.RSA_PKCS1_PSS_PADDING,saltLength:Mi.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function B4(e){var t=yE(e);return function(){var n=t.apply(null,arguments);return n=fE.derToJose(n,"ES"+e),n}}function N4(e){var t=vE(e);return function(n,i,a){i=fE.joseToDer(i,"ES"+e).toString("base64");var s=t(n,i,a);return s}}function D4(){return function(){return""}}function O4(){return function(t,r){return r===""}}_E.exports=function(t){var r={hs:mE,rs:yE,ps:k4,es:B4,none:D4},n={hs:I4,rs:vE,ps:R4,es:N4,none:O4},i=t.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!i)throw yi(x4,t);var a=(i[1]||i[3]).toLowerCase(),s=i[2];return{sign:r[a](s),verify:n[a](s)}}});var m0=ue((m9,EE)=>{var L4=require("buffer").Buffer;EE.exports=function(t){return typeof t=="string"?t:typeof t=="number"||L4.isBuffer(t)?t.toString():JSON.stringify(t)}});var TE=ue((y9,SE)=>{var P4=qo().Buffer,wE=f0(),U4=g0(),M4=require("stream"),CE=m0(),y0=require("util");function bE(e,t){return P4.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function F4(e,t,r){r=r||"utf8";var n=bE(CE(e),"binary"),i=bE(CE(t),r);return y0.format("%s.%s",n,i)}function xE(e){var t=e.header,r=e.payload,n=e.secret||e.privateKey,i=e.encoding,a=U4(t.alg),s=F4(t,r,i),l=a.sign(s,n);return y0.format("%s.%s",s,l)}function Pf(e){var t=e.secret||e.privateKey||e.key,r=new wE(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new wE(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}y0.inherits(Pf,M4);Pf.prototype.sign=function(){try{var t=xE({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",t),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};Pf.sign=xE;SE.exports=Pf});var PE=ue((v9,LE)=>{var AE=qo().Buffer,IE=f0(),q4=g0(),G4=require("stream"),kE=m0(),V4=require("util"),K4=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function j4(e){return Object.prototype.toString.call(e)==="[object Object]"}function H4(e){if(j4(e))return e;try{return JSON.parse(e)}catch(t){return}}function RE(e){var t=e.split(".",1)[0];return H4(AE.from(t,"base64").toString("binary"))}function W4(e){return e.split(".",2).join(".")}function BE(e){return e.split(".")[2]}function Y4(e,t){t=t||"utf8";var r=e.split(".")[1];return AE.from(r,"base64").toString(t)}function NE(e){return K4.test(e)&&!!RE(e)}function DE(e,t,r){if(!t){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}e=kE(e);var i=BE(e),a=W4(e),s=q4(t);return s.verify(a,i,r)}function OE(e,t){if(t=t||{},e=kE(e),!NE(e))return null;var r=RE(e);if(!r)return null;var n=Y4(e);return(r.typ==="JWT"||t.json)&&(n=JSON.parse(n,t.encoding)),{header:r,payload:n,signature:BE(e)}}function jo(e){e=e||{};var t=e.secret||e.publicKey||e.key,r=new IE(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new IE(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}V4.inherits(jo,G4);jo.prototype.verify=function(){try{var t=DE(this.signature.buffer,this.algorithm,this.key.buffer),r=OE(this.signature.buffer,this.encoding);return this.emit("done",t,r),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};jo.decode=OE;jo.isValid=NE;jo.verify=DE;LE.exports=jo});var v0=ue(Ha=>{var UE=TE(),Uf=PE(),z4=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Ha.ALGORITHMS=z4;Ha.sign=UE.sign;Ha.verify=Uf.verify;Ha.decode=Uf.decode;Ha.isValid=Uf.isValid;Ha.createSign=function(t){return new UE(t)};Ha.createVerify=function(t){return new Uf(t)}});var ft=ue((E9,ME)=>{ME.exports={options:{usePureJavaScript:!1}}});var GE=ue((w9,qE)=>{var _0={};qE.exports=_0;var FE={};_0.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=Q4(e,t);else{var i=0,a=t.length,s=t.charAt(0),l=[0];for(i=0;i<e.length;++i){for(var c=0,f=e[i];c<l.length;++c)f+=l[c]<<8,l[c]=f%a,f=f/a|0;for(;f>0;)l.push(f%a),f=f/a|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=s;for(i=l.length-1;i>=0;--i)n+=t[l[i]]}if(r){var d=new RegExp(".{1,"+r+"}","g");n=n.match(d).join(`\r
`)}return n};_0.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=FE[t];if(!r){r=FE[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,a=t.charAt(0),s=[0],n=0;n<e.length;n++){var l=r[e.charCodeAt(n)];if(l===void 0)return;for(var c=0,f=l;c<s.length;++c)f+=s[c]*i,s[c]=f&255,f>>=8;for(;f>0;)s.push(f&255),f>>=8}for(var d=0;e[d]===a&&d<e.length-1;++d)s.push(0);return typeof Buffer!="undefined"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function Q4(e,t){var r=0,n=t.length,i=t.charAt(0),a=[0];for(r=0;r<e.length();++r){for(var s=0,l=e.at(r);s<a.length;++s)l+=a[s]<<8,a[s]=l%n,l=l/n|0;for(;l>0;)a.push(l%n),l=l/n|0}var c="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)c+=i;for(r=a.length-1;r>=0;--r)c+=t[a[r]];return c}});var Ot=ue((C9,HE)=>{var VE=ft(),KE=GE(),j=HE.exports=VE.util=VE.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){j.nextTick=process.nextTick,typeof setImmediate=="function"?j.setImmediate=setImmediate:j.setImmediate=j.nextTick;return}if(typeof setImmediate=="function"){j.setImmediate=function(){return setImmediate.apply(void 0,arguments)},j.nextTick=function(l){return setImmediate(l)};return}if(j.setImmediate=function(l){setTimeout(l,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let l=function(c){if(c.source===window&&c.data===e){c.stopPropagation();var f=t.slice();t.length=0,f.forEach(function(d){d()})}};var s=l,e="forge.setImmediate",t=[];j.setImmediate=function(c){t.push(c),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var c=t.slice();t.length=0,c.forEach(function(f){f()})}).observe(i,{attributes:!0});var a=j.setImmediate;j.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),a(c)):(t.push(c),t.length===1&&i.setAttribute("a",n=!n))}}j.nextTick=j.setImmediate})();j.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;j.globalScope=function(){return j.isNodejs?global:typeof self=="undefined"?window:self}();j.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};j.isArrayBuffer=function(e){return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer};j.isArrayBufferView=function(e){return e&&j.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function uu(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}j.ByteBuffer=E0;function E0(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(j.isArrayBuffer(e)||j.isArrayBufferView(e))if(typeof Buffer!="undefined"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(n){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof E0||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}j.ByteStringBuffer=E0;var X4=4096;j.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>X4&&(this.data.substr(0,1),this._constructedStringLength=0)};j.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};j.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};j.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};j.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};j.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};j.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(j.encodeUtf8(e))};j.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};j.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};j.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};j.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};j.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};j.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};j.ByteStringBuffer.prototype.putInt=function(e,t){uu(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};j.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};j.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};j.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};j.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};j.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};j.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};j.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};j.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};j.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};j.ByteStringBuffer.prototype.getInt=function(e){uu(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};j.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};j.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};j.ByteStringBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};j.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};j.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};j.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};j.ByteStringBuffer.prototype.copy=function(){var e=j.createBuffer(this.data);return e.read=this.read,e};j.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};j.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};j.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};j.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};j.ByteStringBuffer.prototype.toString=function(){return j.decodeUtf8(this.bytes())};function J4(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=j.isArrayBuffer(e),n=j.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}j.DataBuffer=J4;j.DataBuffer.prototype.length=function(){return this.write-this.read};j.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};j.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};j.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};j.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};j.DataBuffer.prototype.putBytes=function(e,t){if(j.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(j.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof j.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&j.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof j.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var a;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=j.binary.hex.decode(e,a,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=j.binary.base64.decode(e,a,this.write),this;if(t==="utf8"&&(e=j.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=j.binary.raw.decode(a),this;if(t==="utf16")return this.accommodate(e.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=j.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};j.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};j.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};j.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};j.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};j.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};j.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};j.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};j.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};j.DataBuffer.prototype.putInt=function(e,t){uu(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};j.DataBuffer.prototype.putSignedInt=function(e,t){return uu(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};j.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};j.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};j.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};j.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};j.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};j.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};j.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};j.DataBuffer.prototype.getInt=function(e){uu(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};j.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};j.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};j.DataBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};j.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};j.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};j.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};j.DataBuffer.prototype.copy=function(){return new j.DataBuffer(this)};j.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};j.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};j.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};j.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};j.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return j.binary.raw.encode(t);if(e==="hex")return j.binary.hex.encode(t);if(e==="base64")return j.binary.base64.encode(t);if(e==="utf8")return j.text.utf8.decode(t);if(e==="utf16")return j.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};j.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=j.encodeUtf8(e)),new j.ByteBuffer(e)};j.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};j.xorBytes=function(e,t,r){for(var n="",i="",a="",s=0,l=0;r>0;--r,++s)i=e.charCodeAt(s)^t.charCodeAt(s),l>=10&&(n+=a,a="",l=0),a+=String.fromCharCode(i),++l;return n+=a,n};j.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};j.bytesToHex=function(e){return j.createBuffer(e).toHex()};j.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var Wa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ya=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],jE="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";j.encode64=function(e,t){for(var r="",n="",i,a,s,l=0;l<e.length;)i=e.charCodeAt(l++),a=e.charCodeAt(l++),s=e.charCodeAt(l++),r+=Wa.charAt(i>>2),r+=Wa.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=Wa.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":Wa.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};j.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,a,s=0;s<e.length;)r=Ya[e.charCodeAt(s++)-43],n=Ya[e.charCodeAt(s++)-43],i=Ya[e.charCodeAt(s++)-43],a=Ya[e.charCodeAt(s++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),a!==64&&(t+=String.fromCharCode((i&3)<<6|a)));return t};j.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};j.decodeUtf8=function(e){return decodeURIComponent(escape(e))};j.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:KE.encode,decode:KE.decode}};j.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};j.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n};j.binary.hex.encode=j.bytesToHex;j.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,a=r;for(e.length&1&&(i=1,n[a++]=parseInt(e[0],16));i<e.length;i+=2)n[a++]=parseInt(e.substr(i,2),16);return t?a-r:n};j.binary.base64.encode=function(e,t){for(var r="",n="",i,a,s,l=0;l<e.byteLength;)i=e[l++],a=e[l++],s=e[l++],r+=Wa.charAt(i>>2),r+=Wa.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=Wa.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":Wa.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};j.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,a,s,l,c=0,f=r;c<e.length;)i=Ya[e.charCodeAt(c++)-43],a=Ya[e.charCodeAt(c++)-43],s=Ya[e.charCodeAt(c++)-43],l=Ya[e.charCodeAt(c++)-43],n[f++]=i<<2|a>>4,s!==64&&(n[f++]=(a&15)<<4|s>>2,l!==64&&(n[f++]=(s&3)<<6|l));return t?f-r:n.subarray(0,f)};j.binary.base58.encode=function(e,t){return j.binary.baseN.encode(e,jE,t)};j.binary.base58.decode=function(e,t){return j.binary.baseN.decode(e,jE,t)};j.text={utf8:{},utf16:{}};j.text.utf8.encode=function(e,t,r){e=j.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n};j.text.utf8.decode=function(e){return j.decodeUtf8(String.fromCharCode.apply(null,e))};j.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var a=r,s=r,l=0;l<e.length;++l)i[s++]=e.charCodeAt(l),a+=2;return t?a-r:n};j.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};j.deflate=function(e,t,r){if(t=j.decode64(e.deflate(j.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};j.inflate=function(e,t,r){var n=e.inflate(j.encode64(t)).rval;return n===null?null:j.decode64(n)};var w0=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=j.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},C0=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(j.decode64(r))),r},Z4=function(e,t,r,n){var i=C0(e,t);i===null&&(i={}),i[r]=n,w0(e,t,i)},$4=function(e,t,r){var n=C0(e,t);return n!==null&&(n=r in n?n[r]:null),n},eP=function(e,t,r){var n=C0(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),w0(e,t,n)}},tP=function(e,t){w0(e,t,null)},Mf=function(e,t,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,a=!1,s=null;for(var l in r){i=r[l];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),a=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),a=!0)}catch(c){s=c}if(a)break}if(!a)throw s;return n};j.setItem=function(e,t,r,n,i){Mf(Z4,arguments,i)};j.getItem=function(e,t,r,n){return Mf($4,arguments,n)};j.removeItem=function(e,t,r,n){Mf(eP,arguments,n)};j.clearItems=function(e,t,r){Mf(tP,arguments,r)};j.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};j.format=function(e){for(var t=/%./g,r,n,i=0,a=[],s=0;r=t.exec(e);){n=e.substring(s,t.lastIndex-2),n.length>0&&a.push(n),s=t.lastIndex;var l=r[0][1];switch(l){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+l+"?>")}}return a.push(e.substring(s)),a.join("")};j.formatNumber=function(e,t,r,n){var i=e,a=isNaN(t=Math.abs(t))?2:t,s=r===void 0?",":r,l=n===void 0?".":n,c=i<0?"-":"",f=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",d=f.length>3?f.length%3:0;return c+(d?f.substr(0,d)+l:"")+f.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+l)+(a?s+Math.abs(i-f).toFixed(a).slice(2):"")};j.formatSize=function(e){return e>=1073741824?e=j.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=j.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=j.formatNumber(e/1024,0)+" KiB":e=j.formatNumber(e,0)+" bytes",e};j.bytesFromIP=function(e){return e.indexOf(".")!==-1?j.bytesFromIPv4(e):e.indexOf(":")!==-1?j.bytesFromIPv6(e):null};j.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=j.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};j.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(s){return s.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=j.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var a=j.hexToBytes(e[i]);a.length<2&&n.putByte(0),n.putBytes(a)}return n.getBytes()};j.bytesToIP=function(e){return e.length===4?j.bytesToIPv4(e):e.length===16?j.bytesToIPv6(e):null};j.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};j.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var a=j.bytesToHex(e[i]+e[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=r[r.length-1],l=t.length;!s||l!==s.end+1?r.push({start:l,end:l}):(s.end=l,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(a)}if(r.length>0){var c=r[n];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),c.start===0&&t.unshift(""),c.end===7&&t.push(""))}return t.join(":")};j.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in j&&!e.update)return t(null,j.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return j.cores=navigator.hardwareConcurrency,t(null,j.cores);if(typeof Worker=="undefined")return j.cores=1,t(null,j.cores);if(typeof Blob=="undefined")return j.cores=2,t(null,j.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var l=Date.now(),c=l+4;Date.now()<c;);self.postMessage({st:l,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,l,c){if(l===0){var f=Math.floor(s.reduce(function(d,h){return d+h},0)/s.length);return j.cores=Math.max(1,f),URL.revokeObjectURL(r),t(null,j.cores)}i(c,function(d,h){s.push(a(c,h)),n(s,l-1,c)})}function i(s,l){for(var c=[],f=[],d=0;d<s;++d){var h=new Worker(r);h.addEventListener("message",function(g){if(f.push(g.data),f.length===s){for(var y=0;y<s;++y)c[y].terminate();l(null,f)}}),c.push(h)}for(var d=0;d<s;++d)c[d].postMessage(d)}function a(s,l){for(var c=[],f=0;f<s;++f)for(var d=l[f],h=c[f]=[],g=0;g<s;++g)if(f!==g){var y=l[g];(d.st>y.st&&d.st<y.et||y.st>d.st&&y.st<d.et)&&h.push(g)}return c.reduce(function(m,_){return Math.max(m,_.length)},0)}}});var Ff=ue((b9,WE)=>{var Dr=ft();Ot();WE.exports=Dr.cipher=Dr.cipher||{};Dr.cipher.algorithms=Dr.cipher.algorithms||{};Dr.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Dr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Dr.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};Dr.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Dr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Dr.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};Dr.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),Dr.cipher.algorithms[e]=t};Dr.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in Dr.cipher.algorithms?Dr.cipher.algorithms[e]:null};var b0=Dr.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};b0.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=Dr.util.createBuffer(),this.output=e.output||Dr.util.createBuffer(),this.mode.start(t)};b0.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};b0.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var S0=ue((x9,YE)=>{var Or=ft();Ot();Or.cipher=Or.cipher||{};var Et=YE.exports=Or.cipher.modes=Or.cipher.modes||{};Et.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Et.ecb.prototype.start=function(e){};Et.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};Et.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};Et.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};Et.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};Et.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Et.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=qf(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Et.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};Et.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Et.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};Et.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};Et.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Or.util.createBuffer(),this._partialBytes=0};Et.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=qf(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Et.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Et.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Et.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Or.util.createBuffer(),this._partialBytes=0};Et.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=qf(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Et.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Et.ofb.prototype.decrypt=Et.ofb.prototype.encrypt;Et.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Or.util.createBuffer(),this._partialBytes=0};Et.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=qf(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Et.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Gf(this._inBlock)};Et.ctr.prototype.decrypt=Et.ctr.prototype.encrypt;Et.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Or.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Et.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=Or.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=Or.util.createBuffer(e.additionalData):r=Or.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=Or.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(x0(n*8)))}this._inBlock=this._j0.slice(0),Gf(this._inBlock),this._partialBytes=0,r=Or.util.createBuffer(r),this._aDataLength=x0(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Et.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Gf(this._inBlock)};Et.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Gf(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Et.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=Or.util.createBuffer();var n=this._aDataLength.concat(x0(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Et.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var a=e[i/32|0]&1<<31-i%32;a&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Et.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};Et.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,a=this._m[r][i];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t};Et.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};Et.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,a=new Array(i),s=0;s<i;++s){var l=[0,0,0,0],c=s/n|0,f=(n-1-s%n)*t;l[c]=1<<t-1<<f,a[s]=this.generateSubHashTable(this.multiply(l,e),t)}return a};Et.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var s=1;s<a;++s){var l=i[a],c=i[s];i[a+s]=[l[0]^c[0],l[1]^c[1],l[2]^c[2],l[3]^c[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var f=i[a^n];i[a]=[e[0]^f[0],e[1]^f[1],e[2]^f[2],e[3]^f[3]]}return i};function qf(e,t){if(typeof e=="string"&&(e=Or.util.createBuffer(e)),Or.util.isArray(e)&&e.length>4){var r=e;e=Or.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!Or.util.isArray(e)){for(var i=[],a=t/4,n=0;n<a;++n)i.push(e.getInt32());e=i}return e}function Gf(e){e[e.length-1]=e[e.length-1]+1&4294967295}function x0(e){return[e/4294967296|0,e&4294967295]}});var za=ue((S9,JE)=>{var Jt=ft();Ff();S0();Ot();JE.exports=Jt.aes=Jt.aes||{};Jt.aes.startEncrypting=function(e,t,r,n){var i=Vf({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};Jt.aes.createEncryptionCipher=function(e,t){return Vf({key:e,output:null,decrypt:!1,mode:t})};Jt.aes.startDecrypting=function(e,t,r,n){var i=Vf({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};Jt.aes.createDecryptionCipher=function(e,t){return Vf({key:e,output:null,decrypt:!0,mode:t})};Jt.aes.Algorithm=function(e,t){T0||QE();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return I0(r._w,n,i,!1)},decrypt:function(n,i){return I0(r._w,n,i,!0)}}}),r._init=!1};Jt.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=Jt.util.createBuffer(t);else if(Jt.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=Jt.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!Jt.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!Jt.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=XE(t,e.decrypt&&!s),this._init=!0}};Jt.aes._expandKey=function(e,t){return T0||QE(),XE(e,t)};Jt.aes._updateBlock=I0;Ho("AES-ECB",Jt.cipher.modes.ecb);Ho("AES-CBC",Jt.cipher.modes.cbc);Ho("AES-CFB",Jt.cipher.modes.cfb);Ho("AES-OFB",Jt.cipher.modes.ofb);Ho("AES-CTR",Jt.cipher.modes.ctr);Ho("AES-GCM",Jt.cipher.modes.gcm);function Ho(e,t){var r=function(){return new Jt.aes.Algorithm(e,t)};Jt.cipher.registerAlgorithm(e,r)}var T0=!1,Wo=4,ln,A0,zE,Rs,vi;function QE(){T0=!0,zE=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;ln=new Array(256),A0=new Array(256),Rs=new Array(4),vi=new Array(4);for(var t=0;t<4;++t)Rs[t]=new Array(256),vi[t]=new Array(256);for(var r=0,n=0,i,a,s,l,c,f,d,t=0;t<256;++t){l=n^n<<1^n<<2^n<<3^n<<4,l=l>>8^l&255^99,ln[r]=l,A0[l]=r,c=e[l],i=e[r],a=e[i],s=e[a],f=c<<24^l<<16^l<<8^(l^c),d=(i^a^s)<<24^(r^s)<<16^(r^a^s)<<8^(r^i^s);for(var h=0;h<4;++h)Rs[h][r]=f,vi[h][l]=d,f=f<<24|f>>>8,d=d<<24|d>>>8;r===0?r=n=1:(r=i^e[e[e[i^s]]],n^=e[e[n]])}}function XE(e,t){for(var r=e.slice(0),n,i=1,a=r.length,s=a+6+1,l=Wo*s,c=a;c<l;++c)n=r[c-1],c%a==0?(n=ln[n>>>16&255]<<24^ln[n>>>8&255]<<16^ln[n&255]<<8^ln[n>>>24]^zE[i]<<24,i++):a>6&&c%a==4&&(n=ln[n>>>24]<<24^ln[n>>>16&255]<<16^ln[n>>>8&255]<<8^ln[n&255]),r[c]=r[c-a]^n;if(t){var f,d=vi[0],h=vi[1],g=vi[2],y=vi[3],m=r.slice(0);l=r.length;for(var c=0,_=l-Wo;c<l;c+=Wo,_-=Wo)if(c===0||c===l-Wo)m[c]=r[_],m[c+1]=r[_+3],m[c+2]=r[_+2],m[c+3]=r[_+1];else for(var E=0;E<Wo;++E)f=r[_+E],m[c+(3&-E)]=d[ln[f>>>24]]^h[ln[f>>>16&255]]^g[ln[f>>>8&255]]^y[ln[f&255]];r=m}return r}function I0(e,t,r,n){var i=e.length/4-1,a,s,l,c,f;n?(a=vi[0],s=vi[1],l=vi[2],c=vi[3],f=A0):(a=Rs[0],s=Rs[1],l=Rs[2],c=Rs[3],f=ln);var d,h,g,y,m,_,E;d=t[0]^e[0],h=t[n?3:1]^e[1],g=t[2]^e[2],y=t[n?1:3]^e[3];for(var w=3,S=1;S<i;++S)m=a[d>>>24]^s[h>>>16&255]^l[g>>>8&255]^c[y&255]^e[++w],_=a[h>>>24]^s[g>>>16&255]^l[y>>>8&255]^c[d&255]^e[++w],E=a[g>>>24]^s[y>>>16&255]^l[d>>>8&255]^c[h&255]^e[++w],y=a[y>>>24]^s[d>>>16&255]^l[h>>>8&255]^c[g&255]^e[++w],d=m,h=_,g=E;r[0]=f[d>>>24]<<24^f[h>>>16&255]<<16^f[g>>>8&255]<<8^f[y&255]^e[++w],r[n?3:1]=f[h>>>24]<<24^f[g>>>16&255]<<16^f[y>>>8&255]<<8^f[d&255]^e[++w],r[2]=f[g>>>24]<<24^f[y>>>16&255]<<16^f[d>>>8&255]<<8^f[h&255]^e[++w],r[n?1:3]=f[y>>>24]<<24^f[d>>>16&255]<<16^f[h>>>8&255]<<8^f[g&255]^e[++w]}function Vf(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=Jt.cipher.createDecipher(r,e.key):n=Jt.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(a,s){var l=null;s instanceof Jt.util.ByteBuffer&&(l=s,s={}),s=s||{},s.output=l,s.iv=a,i.call(n,s)},n}});var Qa=ue((T9,ZE)=>{var cu=ft();cu.pki=cu.pki||{};var k0=ZE.exports=cu.pki.oids=cu.oids=cu.oids||{};function Ee(e,t){k0[e]=t,k0[t]=e}function Ft(e,t){k0[e]=t}Ee("1.2.840.113549.1.1.1","rsaEncryption");Ee("1.2.840.113549.1.1.4","md5WithRSAEncryption");Ee("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Ee("1.2.840.113549.1.1.7","RSAES-OAEP");Ee("1.2.840.113549.1.1.8","mgf1");Ee("1.2.840.113549.1.1.9","pSpecified");Ee("1.2.840.113549.1.1.10","RSASSA-PSS");Ee("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Ee("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Ee("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Ee("1.3.101.112","EdDSA25519");Ee("1.2.840.10040.4.3","dsa-with-sha1");Ee("1.3.14.3.2.7","desCBC");Ee("1.3.14.3.2.26","sha1");Ee("1.3.14.3.2.29","sha1WithRSASignature");Ee("2.16.840.1.101.3.4.2.1","sha256");Ee("2.16.840.1.101.3.4.2.2","sha384");Ee("2.16.840.1.101.3.4.2.3","sha512");Ee("2.16.840.1.101.3.4.2.4","sha224");Ee("2.16.840.1.101.3.4.2.5","sha512-224");Ee("2.16.840.1.101.3.4.2.6","sha512-256");Ee("1.2.840.113549.2.2","md2");Ee("1.2.840.113549.2.5","md5");Ee("1.2.840.113549.1.7.1","data");Ee("1.2.840.113549.1.7.2","signedData");Ee("1.2.840.113549.1.7.3","envelopedData");Ee("1.2.840.113549.1.7.4","signedAndEnvelopedData");Ee("1.2.840.113549.1.7.5","digestedData");Ee("1.2.840.113549.1.7.6","encryptedData");Ee("1.2.840.113549.1.9.1","emailAddress");Ee("1.2.840.113549.1.9.2","unstructuredName");Ee("1.2.840.113549.1.9.3","contentType");Ee("1.2.840.113549.1.9.4","messageDigest");Ee("1.2.840.113549.1.9.5","signingTime");Ee("1.2.840.113549.1.9.6","counterSignature");Ee("1.2.840.113549.1.9.7","challengePassword");Ee("1.2.840.113549.1.9.8","unstructuredAddress");Ee("1.2.840.113549.1.9.14","extensionRequest");Ee("1.2.840.113549.1.9.20","friendlyName");Ee("1.2.840.113549.1.9.21","localKeyId");Ee("1.2.840.113549.1.9.22.1","x509Certificate");Ee("1.2.840.113549.1.12.10.1.1","keyBag");Ee("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Ee("1.2.840.113549.1.12.10.1.3","certBag");Ee("1.2.840.113549.1.12.10.1.4","crlBag");Ee("1.2.840.113549.1.12.10.1.5","secretBag");Ee("1.2.840.113549.1.12.10.1.6","safeContentsBag");Ee("1.2.840.113549.1.5.13","pkcs5PBES2");Ee("1.2.840.113549.1.5.12","pkcs5PBKDF2");Ee("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Ee("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Ee("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Ee("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Ee("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Ee("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Ee("1.2.840.113549.2.7","hmacWithSHA1");Ee("1.2.840.113549.2.8","hmacWithSHA224");Ee("1.2.840.113549.2.9","hmacWithSHA256");Ee("1.2.840.113549.2.10","hmacWithSHA384");Ee("1.2.840.113549.2.11","hmacWithSHA512");Ee("1.2.840.113549.3.7","des-EDE3-CBC");Ee("2.16.840.1.101.3.4.1.2","aes128-CBC");Ee("2.16.840.1.101.3.4.1.22","aes192-CBC");Ee("2.16.840.1.101.3.4.1.42","aes256-CBC");Ee("2.5.4.3","commonName");Ee("2.5.4.4","surname");Ee("2.5.4.5","serialNumber");Ee("2.5.4.6","countryName");Ee("2.5.4.7","localityName");Ee("2.5.4.8","stateOrProvinceName");Ee("2.5.4.9","streetAddress");Ee("2.5.4.10","organizationName");Ee("2.5.4.11","organizationalUnitName");Ee("2.5.4.12","title");Ee("2.5.4.13","description");Ee("2.5.4.15","businessCategory");Ee("2.5.4.17","postalCode");Ee("2.5.4.42","givenName");Ee("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Ee("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Ee("2.16.840.1.113730.1.1","nsCertType");Ee("2.16.840.1.113730.1.13","nsComment");Ft("2.5.29.1","authorityKeyIdentifier");Ft("2.5.29.2","keyAttributes");Ft("2.5.29.3","certificatePolicies");Ft("2.5.29.4","keyUsageRestriction");Ft("2.5.29.5","policyMapping");Ft("2.5.29.6","subtreesConstraint");Ft("2.5.29.7","subjectAltName");Ft("2.5.29.8","issuerAltName");Ft("2.5.29.9","subjectDirectoryAttributes");Ft("2.5.29.10","basicConstraints");Ft("2.5.29.11","nameConstraints");Ft("2.5.29.12","policyConstraints");Ft("2.5.29.13","basicConstraints");Ee("2.5.29.14","subjectKeyIdentifier");Ee("2.5.29.15","keyUsage");Ft("2.5.29.16","privateKeyUsagePeriod");Ee("2.5.29.17","subjectAltName");Ee("2.5.29.18","issuerAltName");Ee("2.5.29.19","basicConstraints");Ft("2.5.29.20","cRLNumber");Ft("2.5.29.21","cRLReason");Ft("2.5.29.22","expirationDate");Ft("2.5.29.23","instructionCode");Ft("2.5.29.24","invalidityDate");Ft("2.5.29.25","cRLDistributionPoints");Ft("2.5.29.26","issuingDistributionPoint");Ft("2.5.29.27","deltaCRLIndicator");Ft("2.5.29.28","issuingDistributionPoint");Ft("2.5.29.29","certificateIssuer");Ft("2.5.29.30","nameConstraints");Ee("2.5.29.31","cRLDistributionPoints");Ee("2.5.29.32","certificatePolicies");Ft("2.5.29.33","policyMappings");Ft("2.5.29.34","policyConstraints");Ee("2.5.29.35","authorityKeyIdentifier");Ft("2.5.29.36","policyConstraints");Ee("2.5.29.37","extKeyUsage");Ft("2.5.29.46","freshestCRL");Ft("2.5.29.54","inhibitAnyPolicy");Ee("1.3.6.1.4.1.11129.2.4.2","timestampList");Ee("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Ee("1.3.6.1.5.5.7.3.1","serverAuth");Ee("1.3.6.1.5.5.7.3.2","clientAuth");Ee("1.3.6.1.5.5.7.3.3","codeSigning");Ee("1.3.6.1.5.5.7.3.4","emailProtection");Ee("1.3.6.1.5.5.7.3.8","timeStamping")});var _i=ue((A9,ew)=>{var rr=ft();Ot();Qa();var Re=ew.exports=rr.asn1=rr.asn1||{};Re.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};Re.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};Re.create=function(e,t,r,n,i){if(rr.util.isArray(n)){for(var a=[],s=0;s<n.length;++s)n[s]!==void 0&&a.push(n[s]);n=a}var l={tagClass:e,type:t,constructed:r,composed:r||rr.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(l.bitStringContents=i.bitStringContents,l.original=Re.copy(l)),l};Re.copy=function(e,t){var r;if(rr.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(Re.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:Re.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};Re.equals=function(e,t,r){if(rr.util.isArray(e)){if(!rr.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!Re.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&Re.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};Re.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function fu(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var rP=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var a=r&127;fu(e,t,a),n=e.getInt(a<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};Re.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=rr.util.createBuffer(e));var r=e.length(),n=Kf(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n};function Kf(e,t,r,n){var i;fu(e,t,2);var a=e.getByte();t--;var s=a&192,l=a&31;i=e.length();var c=rP(e,t);if(t-=i-e.length(),c!==void 0&&c>t){if(n.strict){var f=new Error("Too few bytes to read ASN.1 value.");throw f.available=e.length(),f.remaining=t,f.requested=c,f}c=t}var d,h,g=(a&32)==32;if(g)if(d=[],c===void 0)for(;;){if(fu(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}i=e.length(),d.push(Kf(e,t,r+1,n)),t-=i-e.length()}else for(;c>0;)i=e.length(),d.push(Kf(e,c,r+1,n)),t-=i-e.length(),c-=i-e.length();if(d===void 0&&s===Re.Class.UNIVERSAL&&l===Re.Type.BITSTRING&&(h=e.bytes(c)),d===void 0&&n.decodeBitStrings&&s===Re.Class.UNIVERSAL&&l===Re.Type.BITSTRING&&c>1){var y=e.read,m=t,_=0;if(l===Re.Type.BITSTRING&&(fu(e,t,1),_=e.getByte(),t--),_===0)try{i=e.length();var E={strict:!0,decodeBitStrings:!0},w=Kf(e,t,r+1,E),S=i-e.length();t-=S,l==Re.Type.BITSTRING&&S++;var R=w.tagClass;S===c&&(R===Re.Class.UNIVERSAL||R===Re.Class.CONTEXT_SPECIFIC)&&(d=[w])}catch(O){}d===void 0&&(e.read=y,t=m)}if(d===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=t}if(l===Re.Type.BMPSTRING)for(d="";c>0;c-=2)fu(e,t,2),d+=String.fromCharCode(e.getInt16()),t-=2;else d=e.getBytes(c),t-=c}var B=h===void 0?null:{bitStringContents:h};return Re.create(s,l,g,d,B)}Re.toDer=function(e){var t=rr.util.createBuffer(),r=e.tagClass|e.type,n=rr.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=Re.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var a=0;a<e.value.length;++a)e.value[a]!==void 0&&n.putBuffer(Re.toDer(e.value[a]))}else if(e.type===Re.Type.BMPSTRING)for(var a=0;a<e.value.length;++a)n.putInt16(e.value.charCodeAt(a));else e.type===Re.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&(e.value.charCodeAt(1)&128)==0||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)==128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var s=n.length(),l="";do l+=String.fromCharCode(s&255),s=s>>>8;while(s>0);t.putByte(l.length|128);for(var a=l.length-1;a>=0;--a)t.putByte(l.charCodeAt(a))}return t.putBuffer(n),t};Re.oidToDer=function(e){var t=e.split("."),r=rr.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,a,s,l=2;l<t.length;++l){n=!0,i=[],a=parseInt(t[l],10);do s=a&127,a=a>>>7,n||(s|=128),i.push(s),n=!1;while(a>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};Re.derToOid=function(e){var t;typeof e=="string"&&(e=rr.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};Re.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),l=0;if(e.length>11){var c=e.charAt(10),f=10;c!=="+"&&c!=="-"&&(l=parseInt(e.substr(10,2),10),f+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(a,s,l,0),f&&(c=e.charAt(f),c==="+"||c==="-")){var d=parseInt(e.substr(f+1,2),10),h=parseInt(e.substr(f+4,2),10),g=d*60+h;g*=6e4,c==="+"?t.setTime(+t-g):t.setTime(+t+g)}return t};Re.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),l=parseInt(e.substr(12,2),10),c=0,f=0,d=!1;e.charAt(e.length-1)==="Z"&&(d=!0);var h=e.length-5,g=e.charAt(h);if(g==="+"||g==="-"){var y=parseInt(e.substr(h+1,2),10),m=parseInt(e.substr(h+4,2),10);f=y*60+m,f*=6e4,g==="+"&&(f*=-1),d=!0}return e.charAt(14)==="."&&(c=parseFloat(e.substr(14),10)*1e3),d?(t.setUTCFullYear(r,n,i),t.setUTCHours(a,s,l,c),t.setTime(+t+f)):(t.setFullYear(r,n,i),t.setHours(a,s,l,c)),t};Re.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};Re.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};Re.integerToDer=function(e){var t=rr.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};Re.derToInteger=function(e){typeof e=="string"&&(e=rr.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};Re.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass=="undefined")&&(e.type===t.type||typeof t.type=="undefined"))if(e.constructed===t.constructed||typeof t.constructed=="undefined"){if(i=!0,t.value&&rr.util.isArray(t.value))for(var a=0,s=0;i&&s<t.value.length;++s)i=t.value[s].optional||!1,e.value[a]&&(i=Re.validate(e.value[a],t.value[s],r,n),i?++a:t.value[s].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var l;if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var c=e.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var $E=/[^\\u0000-\\u00ff]/;Re.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",a=0;a<t*r;++a)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case Re.Class.UNIVERSAL:n+="Universal:";break;case Re.Class.APPLICATION:n+="Application:";break;case Re.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case Re.Class.PRIVATE:n+="Private:";break}if(e.tagClass===Re.Class.UNIVERSAL)switch(n+=e.type,e.type){case Re.Type.NONE:n+=" (None)";break;case Re.Type.BOOLEAN:n+=" (Boolean)";break;case Re.Type.INTEGER:n+=" (Integer)";break;case Re.Type.BITSTRING:n+=" (Bit string)";break;case Re.Type.OCTETSTRING:n+=" (Octet string)";break;case Re.Type.NULL:n+=" (Null)";break;case Re.Type.OID:n+=" (Object Identifier)";break;case Re.Type.ODESC:n+=" (Object Descriptor)";break;case Re.Type.EXTERNAL:n+=" (External or Instance of)";break;case Re.Type.REAL:n+=" (Real)";break;case Re.Type.ENUMERATED:n+=" (Enumerated)";break;case Re.Type.EMBEDDED:n+=" (Embedded PDV)";break;case Re.Type.UTF8:n+=" (UTF8)";break;case Re.Type.ROID:n+=" (Relative Object Identifier)";break;case Re.Type.SEQUENCE:n+=" (Sequence)";break;case Re.Type.SET:n+=" (Set)";break;case Re.Type.PRINTABLESTRING:n+=" (Printable String)";break;case Re.Type.IA5String:n+=" (IA5String (ASCII))";break;case Re.Type.UTCTIME:n+=" (UTC time)";break;case Re.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case Re.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var s=0,l="",a=0;a<e.value.length;++a)e.value[a]!==void 0&&(s+=1,l+=Re.prettyPrint(e.value[a],t+1,r),a+1<e.value.length&&(l+=","));n+=i+"Sub values: "+s+l}else{if(n+=i+"Value: ",e.type===Re.Type.OID){var c=Re.derToOid(e.value);n+=c,rr.pki&&rr.pki.oids&&c in rr.pki.oids&&(n+=" ("+rr.pki.oids[c]+") ")}if(e.type===Re.Type.INTEGER)try{n+=Re.derToInteger(e.value)}catch(d){n+="0x"+rr.util.bytesToHex(e.value)}else if(e.type===Re.Type.BITSTRING){if(e.value.length>1?n+="0x"+rr.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var f=e.value.charCodeAt(0);f==1?n+=" (1 unused bit shown)":f>1&&(n+=" ("+f+" unused bits shown)")}}else if(e.type===Re.Type.OCTETSTRING)$E.test(e.value)||(n+="("+e.value+") "),n+="0x"+rr.util.bytesToHex(e.value);else if(e.type===Re.Type.UTF8)try{n+=rr.util.decodeUtf8(e.value)}catch(d){if(d.message==="URI malformed")n+="0x"+rr.util.bytesToHex(e.value)+" (malformed UTF8)";else throw d}else e.type===Re.Type.PRINTABLESTRING||e.type===Re.Type.IA5String?n+=e.value:$E.test(e.value)?n+="0x"+rr.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n}});var Fi=ue((I9,tw)=>{var jf=ft();tw.exports=jf.md=jf.md||{};jf.md.algorithms=jf.md.algorithms||{}});var Yo=ue((k9,rw)=>{var ha=ft();Fi();Ot();var nP=rw.exports=ha.hmac=ha.hmac||{};nP.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in ha.md.algorithms)t=ha.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else t=a;if(s===null)s=e;else{if(typeof s=="string")s=ha.util.createBuffer(s);else if(ha.util.isArray(s)){var l=s;s=ha.util.createBuffer();for(var c=0;c<l.length;++c)s.putByte(l[c])}var f=s.length();f>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),r=ha.util.createBuffer(),n=ha.util.createBuffer(),f=s.length();for(var c=0;c<f;++c){var l=s.at(c);r.putByte(54^l),n.putByte(92^l)}if(f<t.blockLength)for(var l=t.blockLength-f,c=0;c<l;++c)r.putByte(54),n.putByte(92);e=s,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(a){t.update(a)},i.getMac=function(){var a=t.digest().bytes();return t.start(),t.update(n),t.update(a),t.digest()},i.digest=i.getMac,i}});var Wf=ue((R9,sw)=>{var qi=ft();Fi();Ot();var nw=sw.exports=qi.md5=qi.md5||{};qi.md.md5=qi.md.algorithms.md5=nw;nw.create=function(){iw||iP();var e=null,t=qi.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=qi.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=qi.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),aw(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=qi.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(R0.substr(0,n.blockLength-s));for(var l,c=0,f=n.fullMessageLength.length-1;f>=0;--f)l=n.fullMessageLength[f]*8+c,c=l/4294967296>>>0,i.putInt32Le(l>>>0);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};aw(d,r,i);var h=qi.util.createBuffer();return h.putInt32Le(d.h0),h.putInt32Le(d.h1),h.putInt32Le(d.h2),h.putInt32Le(d.h3),h},n};var R0=null,Hf=null,du=null,zo=null,iw=!1;function iP(){R0=String.fromCharCode(128),R0+=qi.util.fillString(String.fromCharCode(0),64),Hf=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],du=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],zo=new Array(64);for(var e=0;e<64;++e)zo[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);iw=!0}function aw(e,t,r){for(var n,i,a,s,l,c,f,d,h=r.length();h>=64;){for(i=e.h0,a=e.h1,s=e.h2,l=e.h3,d=0;d<16;++d)t[d]=r.getInt32Le(),c=l^a&(s^l),n=i+c+zo[d]+t[d],f=du[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<32;++d)c=s^l&(a^s),n=i+c+zo[d]+t[Hf[d]],f=du[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<48;++d)c=a^s^l,n=i+c+zo[d]+t[Hf[d]],f=du[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<64;++d)c=s^(a|~l),n=i+c+zo[d]+t[Hf[d]],f=du[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+l|0,h-=64}}});var Bs=ue((B9,lw)=>{var Yf=ft();Ot();var ow=lw.exports=Yf.pem=Yf.pem||{};ow.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=zf(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=zf(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=zf(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=zf(e.headers[i]);return e.procType&&(r+=`\r
`),r+=Yf.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};ow.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=r.exec(e),!!a;){var s=a[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var l={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Yf.util.decode64(a[3])};if(t.push(l),!!a[2]){for(var c=a[2].split(i),f=0;a&&f<c.length;){for(var d=c[f].replace(/\s+$/,""),h=f+1;h<c.length;++h){var g=c[h];if(!/\s/.test(g[0]))break;d+=g,f=h}if(a=d.match(n),a){for(var y={name:a[1],values:[]},m=a[2].split(","),_=0;_<m.length;++_)y.values.push(aP(m[_]));if(l.procType)if(!l.contentDomain&&y.name==="Content-Domain")l.contentDomain=m[0]||"";else if(!l.dekInfo&&y.name==="DEK-Info"){if(y.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:m[0],parameters:m[1]||null}}else l.headers.push(y);else{if(y.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(y.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:m[0],type:m[1]}}}++f}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function zf(e){for(var t=e.name+": ",r=[],n=function(c,f){return" "+f},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<t.length;++i,++a)if(a>65&&s!==-1){var l=t[s];l===","?(++s,t=t.substr(0,s)+`\r
 `+t.substr(s)):t=t.substr(0,s)+`\r
`+l+t.substr(s+1),a=i-s-1,s=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(s=i);return t}function aP(e){return e.replace(/^\s+/,"")}});var hu=ue((N9,cw)=>{var sr=ft();Ff();S0();Ot();cw.exports=sr.des=sr.des||{};sr.des.startEncrypting=function(e,t,r,n){var i=Qf({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};sr.des.createEncryptionCipher=function(e,t){return Qf({key:e,output:null,decrypt:!1,mode:t})};sr.des.startDecrypting=function(e,t,r,n){var i=Qf({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};sr.des.createDecryptionCipher=function(e,t){return Qf({key:e,output:null,decrypt:!0,mode:t})};sr.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return uw(r._keys,n,i,!1)},decrypt:function(n,i){return uw(r._keys,n,i,!0)}}}),r._init=!1};sr.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=sr.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=pP(t),this._init=!0}};Gi("DES-ECB",sr.cipher.modes.ecb);Gi("DES-CBC",sr.cipher.modes.cbc);Gi("DES-CFB",sr.cipher.modes.cfb);Gi("DES-OFB",sr.cipher.modes.ofb);Gi("DES-CTR",sr.cipher.modes.ctr);Gi("3DES-ECB",sr.cipher.modes.ecb);Gi("3DES-CBC",sr.cipher.modes.cbc);Gi("3DES-CFB",sr.cipher.modes.cfb);Gi("3DES-OFB",sr.cipher.modes.ofb);Gi("3DES-CTR",sr.cipher.modes.ctr);function Gi(e,t){var r=function(){return new sr.des.Algorithm(e,t)};sr.cipher.registerAlgorithm(e,r)}var sP=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],oP=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],lP=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],uP=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],cP=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],fP=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],dP=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],hP=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function pP(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],f=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],g=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],y=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],_=e.length()>8?3:1,E=[],w=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],S=0,R,B=0;B<_;B++){var O=e.getInt32(),N=e.getInt32();R=(O>>>4^N)&252645135,N^=R,O^=R<<4,R=(N>>>-16^O)&65535,O^=R,N^=R<<-16,R=(O>>>2^N)&858993459,N^=R,O^=R<<2,R=(N>>>-16^O)&65535,O^=R,N^=R<<-16,R=(O>>>1^N)&1431655765,N^=R,O^=R<<1,R=(N>>>8^O)&16711935,O^=R,N^=R<<8,R=(O>>>1^N)&1431655765,N^=R,O^=R<<1,R=O<<8|N>>>20&240,O=N<<24|N<<8&16711680|N>>>8&65280|N>>>24&240,N=R;for(var ee=0;ee<w.length;++ee){w[ee]?(O=O<<2|O>>>26,N=N<<2|N>>>26):(O=O<<1|O>>>27,N=N<<1|N>>>27),O&=-15,N&=-15;var q=t[O>>>28]|r[O>>>24&15]|n[O>>>20&15]|i[O>>>16&15]|a[O>>>12&15]|s[O>>>8&15]|l[O>>>4&15],F=c[N>>>28]|f[N>>>24&15]|d[N>>>20&15]|h[N>>>16&15]|g[N>>>12&15]|y[N>>>8&15]|m[N>>>4&15];R=(F>>>16^q)&65535,E[S++]=q^R,E[S++]=F^R<<16}}return E}function uw(e,t,r,n){var i=e.length===32?3:9,a;i===3?a=n?[30,-2,-2]:[0,32,2]:a=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,l=t[0],c=t[1];s=(l>>>4^c)&252645135,c^=s,l^=s<<4,s=(l>>>16^c)&65535,c^=s,l^=s<<16,s=(c>>>2^l)&858993459,l^=s,c^=s<<2,s=(c>>>8^l)&16711935,l^=s,c^=s<<8,s=(l>>>1^c)&1431655765,c^=s,l^=s<<1,l=l<<1|l>>>31,c=c<<1|c>>>31;for(var f=0;f<i;f+=3){for(var d=a[f+1],h=a[f+2],g=a[f];g!=d;g+=h){var y=c^e[g],m=(c>>>4|c<<28)^e[g+1];s=l,l=c,c=s^(oP[y>>>24&63]|uP[y>>>16&63]|fP[y>>>8&63]|hP[y&63]|sP[m>>>24&63]|lP[m>>>16&63]|cP[m>>>8&63]|dP[m&63])}s=l,l=c,c=s}l=l>>>1|l<<31,c=c>>>1|c<<31,s=(l>>>1^c)&1431655765,c^=s,l^=s<<1,s=(c>>>8^l)&16711935,l^=s,c^=s<<8,s=(c>>>2^l)&858993459,l^=s,c^=s<<2,s=(l>>>16^c)&65535,c^=s,l^=s<<16,s=(l>>>4^c)&252645135,c^=s,l^=s<<4,r[0]=l,r[1]=c}function Qf(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=sr.cipher.createDecipher(r,e.key):n=sr.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(a,s){var l=null;s instanceof sr.util.ByteBuffer&&(l=s,s={}),s=s||{},s.output=l,s.iv=a,i.call(n,s)},n}});var Xf=ue((D9,fw)=>{var un=ft();Yo();Fi();Ot();var gP=un.pkcs5=un.pkcs5||{},pa;un.util.isNodejs&&!un.options.usePureJavaScript&&(pa=require("crypto"));fw.exports=un.pbkdf2=gP.pbkdf2=function(e,t,r,n,i,a){if(typeof i=="function"&&(a=i,i=null),un.util.isNodejs&&!un.options.usePureJavaScript&&pa.pbkdf2&&(i===null||typeof i!="object")&&(pa.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),a?pa.pbkdf2Sync.length===4?pa.pbkdf2(e,t,r,n,function(R,B){if(R)return a(R);a(null,B.toString("binary"))}):pa.pbkdf2(e,t,r,n,i,function(R,B){if(R)return a(R);a(null,B.toString("binary"))}):pa.pbkdf2Sync.length===4?pa.pbkdf2Sync(e,t,r,n).toString("binary"):pa.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in un.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=un.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var l=new Error("Derived key is too long.");if(a)return a(l);throw l}var c=Math.ceil(n/s),f=n-(c-1)*s,d=un.hmac.create();d.start(i,e);var h="",g,y,m;if(!a){for(var _=1;_<=c;++_){d.start(null,null),d.update(t),d.update(un.util.int32ToBytes(_)),g=m=d.digest().getBytes();for(var E=2;E<=r;++E)d.start(null,null),d.update(m),y=d.digest().getBytes(),g=un.util.xorBytes(g,y,s),m=y;h+=_<c?g:g.substr(0,f)}return h}var _=1,E;function w(){if(_>c)return a(null,h);d.start(null,null),d.update(t),d.update(un.util.int32ToBytes(_)),g=m=d.digest().getBytes(),E=2,S()}function S(){if(E<=r)return d.start(null,null),d.update(m),y=d.digest().getBytes(),g=un.util.xorBytes(g,y,s),m=y,++E,un.util.setImmediate(S);h+=_<c?g:g.substr(0,f),++_,w()}w()}});var N0=ue((O9,mw)=>{var Vi=ft();Fi();Ot();var dw=mw.exports=Vi.sha256=Vi.sha256||{};Vi.md.sha256=Vi.md.algorithms.sha256=dw;dw.create=function(){hw||mP();var e=null,t=Vi.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=Vi.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Vi.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),gw(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Vi.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(B0.substr(0,n.blockLength-s));for(var l,c,f=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,c=l/4294967296>>>0,f+=c,i.putInt32(f>>>0),f=l>>>0;i.putInt32(f);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};gw(h,r,i);var g=Vi.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g.putInt32(h.h5),g.putInt32(h.h6),g.putInt32(h.h7),g},n};var B0=null,hw=!1,pw=null;function mP(){B0=String.fromCharCode(128),B0+=Vi.util.fillString(String.fromCharCode(0),64),pw=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],hw=!0}function gw(e,t,r){for(var n,i,a,s,l,c,f,d,h,g,y,m,_,E,w,S=r.length();S>=64;){for(f=0;f<16;++f)t[f]=r.getInt32();for(;f<64;++f)n=t[f-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[f-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[f]=n+t[f-7]+i+t[f-16]|0;for(d=e.h0,h=e.h1,g=e.h2,y=e.h3,m=e.h4,_=e.h5,E=e.h6,w=e.h7,f=0;f<64;++f)s=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),l=E^m&(_^E),a=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),c=d&h|g&(d^h),n=w+s+l+pw[f]+t[f],i=a+c,w=E,E=_,_=m,m=y+n>>>0,y=g,g=h,h=d,d=n+i>>>0;e.h0=e.h0+d|0,e.h1=e.h1+h|0,e.h2=e.h2+g|0,e.h3=e.h3+y|0,e.h4=e.h4+m|0,e.h5=e.h5+_|0,e.h6=e.h6+E|0,e.h7=e.h7+w|0,S-=64}}});var D0=ue((L9,yw)=>{var Ki=ft();Ot();var Jf=null;Ki.util.isNodejs&&!Ki.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Jf=require("crypto"));var yP=yw.exports=Ki.prng=Ki.prng||{};yP.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(f,d){if(!d)return t.generateSync(f);var h=t.plugin.cipher,g=t.plugin.increment,y=t.plugin.formatKey,m=t.plugin.formatSeed,_=Ki.util.createBuffer();t.key=null,E();function E(w){if(w)return d(w);if(_.length()>=f)return d(null,_.getBytes(f));if(t.generated>1048575&&(t.key=null),t.key===null)return Ki.util.nextTick(function(){a(E)});var S=h(t.key,t.seed);t.generated+=S.length,_.putBytes(S),t.key=y(h(t.key,g(t.seed))),t.seed=m(h(t.key,t.seed)),Ki.util.setImmediate(E)}},t.generateSync=function(f){var d=t.plugin.cipher,h=t.plugin.increment,g=t.plugin.formatKey,y=t.plugin.formatSeed;t.key=null;for(var m=Ki.util.createBuffer();m.length()<f;){t.generated>1048575&&(t.key=null),t.key===null&&s();var _=d(t.key,t.seed);t.generated+=_.length,m.putBytes(_),t.key=g(d(t.key,h(t.seed))),t.seed=y(d(t.key,t.seed))}return m.getBytes(f)};function a(f){if(t.pools[0].messageLength>=32)return l(),f();var d=32-t.pools[0].messageLength<<5;t.seedFile(d,function(h,g){if(h)return f(h);t.collect(g),l(),f()})}function s(){if(t.pools[0].messageLength>=32)return l();var f=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(f)),l()}function l(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var f=t.plugin.md.create();f.update(t.keyBytes);for(var d=1,h=0;h<32;++h)t.reseeds%d==0&&(f.update(t.pools[h].digest().getBytes()),t.pools[h].start()),d=d<<1;t.keyBytes=f.digest().getBytes(),f.start(),f.update(t.keyBytes);var g=f.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(g),t.generated=0}function c(f){var d=null,h=Ki.util.globalScope,g=h.crypto||h.msCrypto;g&&g.getRandomValues&&(d=function(O){return g.getRandomValues(O)});var y=Ki.util.createBuffer();if(d)for(;y.length()<f;){var m=Math.max(1,Math.min(f-y.length(),65536)/4),_=new Uint32Array(Math.floor(m));try{d(_);for(var E=0;E<_.length;++E)y.putInt32(_[E])}catch(O){if(!(typeof QuotaExceededError!="undefined"&&O instanceof QuotaExceededError))throw O}}if(y.length()<f)for(var w,S,R,B=Math.floor(Math.random()*65536);y.length()<f;){S=16807*(B&65535),w=16807*(B>>16),S+=(w&32767)<<16,S+=w>>15,S=(S&2147483647)+(S>>31),B=S&4294967295;for(var E=0;E<3;++E)R=B>>>(E<<3),R^=Math.floor(Math.random()*256),y.putByte(R&255)}return y.getBytes(f)}return Jf?(t.seedFile=function(f,d){Jf.randomBytes(f,function(h,g){if(h)return d(h);d(null,g.toString())})},t.seedFileSync=function(f){return Jf.randomBytes(f).toString()}):(t.seedFile=function(f,d){try{d(null,c(f))}catch(h){d(h)}},t.seedFileSync=c),t.collect=function(f){for(var d=f.length,h=0;h<d;++h)t.pools[t.pool].update(f.substr(h,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(f,d){for(var h="",g=0;g<d;g+=8)h+=String.fromCharCode(f>>g&255);t.collect(h)},t.registerWorker=function(f){if(f===self)t.seedFile=function(h,g){function y(m){var _=m.data;_.forge&&_.forge.prng&&(self.removeEventListener("message",y),g(_.forge.prng.err,_.forge.prng.bytes))}self.addEventListener("message",y),self.postMessage({forge:{prng:{needed:h}}})};else{var d=function(h){var g=h.data;g.forge&&g.forge.prng&&t.seedFile(g.forge.prng.needed,function(y,m){f.postMessage({forge:{prng:{err:y,bytes:m}}})})};f.addEventListener("message",d)}},t}});var Xn=ue((P9,O0)=>{var Lr=ft();za();N0();D0();Ot();(function(){if(Lr.random&&Lr.random.getBytes){O0.exports=Lr.random;return}(function(e){var t={},r=new Array(4),n=Lr.util.createBuffer();t.formatKey=function(h){var g=Lr.util.createBuffer(h);return h=new Array(4),h[0]=g.getInt32(),h[1]=g.getInt32(),h[2]=g.getInt32(),h[3]=g.getInt32(),Lr.aes._expandKey(h,!1)},t.formatSeed=function(h){var g=Lr.util.createBuffer(h);return h=new Array(4),h[0]=g.getInt32(),h[1]=g.getInt32(),h[2]=g.getInt32(),h[3]=g.getInt32(),h},t.cipher=function(h,g){return Lr.aes._updateBlock(h,g,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(h){return++h[3],h},t.md=Lr.md.sha256;function i(){var h=Lr.prng.create(t);return h.getBytes=function(g,y){return h.generate(g,y)},h.getBytesSync=function(g){return h.generate(g)},h}var a=i(),s=null,l=Lr.util.globalScope,c=l.crypto||l.msCrypto;if(c&&c.getRandomValues&&(s=function(h){return c.getRandomValues(h)}),Lr.options.usePureJavaScript||!Lr.util.isNodejs&&!s){if(typeof window=="undefined"||window.document===void 0,a.collectInt(+new Date,32),typeof navigator!="undefined"){var f="";for(var d in navigator)try{typeof navigator[d]=="string"&&(f+=navigator[d])}catch(h){}a.collect(f),f=null}e&&(e().mousemove(function(h){a.collectInt(h.clientX,16),a.collectInt(h.clientY,16)}),e().keypress(function(h){a.collectInt(h.charCode,8)}))}if(!Lr.random)Lr.random=a;else for(var d in a)Lr.random[d]=a[d];Lr.random.createInstance=i,O0.exports=Lr.random})(typeof jQuery!="undefined"?jQuery:null)})()});var P0=ue((U9,Ew)=>{var Cn=ft();Ot();var L0=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],vw=[1,2,3,5],vP=function(e,t){return e<<t&65535|(e&65535)>>16-t},_P=function(e,t){return(e&65535)>>t|e<<16-t&65535};Ew.exports=Cn.rc2=Cn.rc2||{};Cn.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Cn.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,a=Math.ceil(i/8),s=255>>(i&7),l;for(l=n;l<128;l++)r.putByte(L0[r.at(l-1)+r.at(l-n)&255]);for(r.setAt(128-a,L0[r.at(128-a)&s]),l=127-a;l>=0;l--)r.setAt(l,L0[r.at(l+1)^r.at(l+a)]);return r};var _w=function(e,t,r){var n=!1,i=null,a=null,s=null,l,c,f,d,h=[];for(e=Cn.rc2.expandKey(e,t),f=0;f<64;f++)h.push(e.getInt16Le());r?(l=function(m){for(f=0;f<4;f++)m[f]+=h[d]+(m[(f+3)%4]&m[(f+2)%4])+(~m[(f+3)%4]&m[(f+1)%4]),m[f]=vP(m[f],vw[f]),d++},c=function(m){for(f=0;f<4;f++)m[f]+=h[m[(f+3)%4]&63]}):(l=function(m){for(f=3;f>=0;f--)m[f]=_P(m[f],vw[f]),m[f]-=h[d]+(m[(f+3)%4]&m[(f+2)%4])+(~m[(f+3)%4]&m[(f+1)%4]),d--},c=function(m){for(f=3;f>=0;f--)m[f]-=h[m[(f+3)%4]&63]});var g=function(m){var _=[];for(f=0;f<4;f++){var E=i.getInt16Le();s!==null&&(r?E^=s.getInt16Le():s.putInt16Le(E)),_.push(E&65535)}d=r?0:63;for(var w=0;w<m.length;w++)for(var S=0;S<m[w][0];S++)m[w][1](_);for(f=0;f<4;f++)s!==null&&(r?s.putInt16Le(_[f]):_[f]^=s.getInt16Le()),a.putInt16Le(_[f])},y=null;return y={start:function(m,_){m&&typeof m=="string"&&(m=Cn.util.createBuffer(m)),n=!1,i=Cn.util.createBuffer(),a=_||new Cn.util.createBuffer,s=m,y.output=a},update:function(m){for(n||i.putBuffer(m);i.length()>=8;)g([[5,l],[1,c],[6,l],[1,c],[5,l]])},finish:function(m){var _=!0;if(r)if(m)_=m(8,i,!r);else{var E=i.length()===8?8:8-i.length();i.fillWithByte(E,E)}if(_&&(n=!0,y.update()),!r&&(_=i.length()===0,_))if(m)_=m(8,a,!r);else{var w=a.length(),S=a.at(w-1);S>w?_=!1:a.truncate(S)}return _}},y};Cn.rc2.startEncrypting=function(e,t,r){var n=Cn.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};Cn.rc2.createEncryptionCipher=function(e,t){return _w(e,t,!0)};Cn.rc2.startDecrypting=function(e,t,r){var n=Cn.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};Cn.rc2.createDecryptionCipher=function(e,t){return _w(e,t,!1)}});var gu=ue((M9,Iw)=>{var U0=ft();Iw.exports=U0.jsbn=U0.jsbn||{};var ga,EP=244837814094590,ww=(EP&16777215)==15715070;function ge(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}U0.jsbn.BigInteger=ge;function Lt(){return new ge(null)}function wP(e,t,r,n,i,a){for(;--a>=0;){var s=t*this.data[e++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function CP(e,t,r,n,i,a){for(var s=t&32767,l=t>>15;--a>=0;){var c=this.data[e]&32767,f=this.data[e++]>>15,d=l*c+f*s;c=s*c+((d&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(d>>>15)+l*f+(i>>>30),r.data[n++]=c&1073741823}return i}function Cw(e,t,r,n,i,a){for(var s=t&16383,l=t>>14;--a>=0;){var c=this.data[e]&16383,f=this.data[e++]>>14,d=l*c+f*s;c=s*c+((d&16383)<<14)+r.data[n]+i,i=(c>>28)+(d>>14)+l*f,r.data[n++]=c&268435455}return i}typeof navigator=="undefined"?(ge.prototype.am=Cw,ga=28):ww&&navigator.appName=="Microsoft Internet Explorer"?(ge.prototype.am=CP,ga=30):ww&&navigator.appName!="Netscape"?(ge.prototype.am=wP,ga=26):(ge.prototype.am=Cw,ga=28);ge.prototype.DB=ga;ge.prototype.DM=(1<<ga)-1;ge.prototype.DV=1<<ga;var M0=52;ge.prototype.FV=Math.pow(2,M0);ge.prototype.F1=M0-ga;ge.prototype.F2=2*ga-M0;var bP="0123456789abcdefghijklmnopqrstuvwxyz",Zf=new Array,Qo,Jn;Qo="0".charCodeAt(0);for(Jn=0;Jn<=9;++Jn)Zf[Qo++]=Jn;Qo="a".charCodeAt(0);for(Jn=10;Jn<36;++Jn)Zf[Qo++]=Jn;Qo="A".charCodeAt(0);for(Jn=10;Jn<36;++Jn)Zf[Qo++]=Jn;function bw(e){return bP.charAt(e)}function xw(e,t){var r=Zf[e.charCodeAt(t)];return r==null?-1:r}function xP(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function SP(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function Xa(e){var t=Lt();return t.fromInt(e),t}function TP(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,a=0;--n>=0;){var s=r==8?e[n]&255:xw(e,n);if(s<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&(e[0]&128)!=0&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&ge.ZERO.subTo(this,this)}function AP(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function IP(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,a="",s=this.t,l=this.DB-s*this.DB%t;if(s-- >0)for(l<this.DB&&(n=this.data[s]>>l)>0&&(i=!0,a=bw(n));s>=0;)l<t?(n=(this.data[s]&(1<<l)-1)<<t-l,n|=this.data[--s]>>(l+=this.DB-t)):(n=this.data[s]>>(l-=t)&r,l<=0&&(l+=this.DB,--s)),n>0&&(i=!0),i&&(a+=bw(n));return i?a:"0"}function kP(){var e=Lt();return ge.ZERO.subTo(this,e),e}function RP(){return this.s<0?this.negate():this}function BP(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function $f(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function NP(){return this.t<=0?0:this.DB*(this.t-1)+$f(this.data[this.t-1]^this.s&this.DM)}function DP(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function OP(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function LP(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,a=Math.floor(e/this.DB),s=this.s<<r&this.DM,l;for(l=this.t-1;l>=0;--l)t.data[l+a+1]=this.data[l]>>n|s,s=(this.data[l]&i)<<r;for(l=a-1;l>=0;--l)t.data[l]=0;t.data[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function PP(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&a)<<i,t.data[s-r]=this.data[s]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}function UP(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function MP(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&ge.ZERO.subTo(t,t)}function FP(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function qP(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Lt());var a=Lt(),s=this.s,l=e.s,c=this.DB-$f(n.data[n.t-1]);c>0?(n.lShiftTo(c,a),i.lShiftTo(c,r)):(n.copyTo(a),i.copyTo(r));var f=a.t,d=a.data[f-1];if(d!=0){var h=d*(1<<this.F1)+(f>1?a.data[f-2]>>this.F2:0),g=this.FV/h,y=(1<<this.F1)/h,m=1<<this.F2,_=r.t,E=_-f,w=t==null?Lt():t;for(a.dlShiftTo(E,w),r.compareTo(w)>=0&&(r.data[r.t++]=1,r.subTo(w,r)),ge.ONE.dlShiftTo(f,w),w.subTo(a,a);a.t<f;)a.data[a.t++]=0;for(;--E>=0;){var S=r.data[--_]==d?this.DM:Math.floor(r.data[_]*g+(r.data[_-1]+m)*y);if((r.data[_]+=a.am(0,S,r,E,0,f))<S)for(a.dlShiftTo(E,w),r.subTo(w,r);r.data[_]<--S;)r.subTo(w,r)}t!=null&&(r.drShiftTo(f,t),s!=l&&ge.ZERO.subTo(t,t)),r.t=f,r.clamp(),c>0&&r.rShiftTo(c,r),s<0&&ge.ZERO.subTo(r,r)}}}function GP(e){var t=Lt();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(ge.ZERO)>0&&e.subTo(t,t),t}function Ns(e){this.m=e}function VP(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function KP(e){return e}function jP(e){e.divRemTo(this.m,null,e)}function HP(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function WP(e,t){e.squareTo(t),this.reduce(t)}Ns.prototype.convert=VP;Ns.prototype.revert=KP;Ns.prototype.reduce=jP;Ns.prototype.mulTo=HP;Ns.prototype.sqrTo=WP;function YP(){if(this.t<1)return 0;var e=this.data[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Ds(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function zP(e){var t=Lt();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(ge.ZERO)>0&&this.m.subTo(t,t),t}function QP(e){var t=Lt();return e.copyTo(t),this.reduce(t),t}function XP(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function JP(e,t){e.squareTo(t),this.reduce(t)}function ZP(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Ds.prototype.convert=zP;Ds.prototype.revert=QP;Ds.prototype.reduce=XP;Ds.prototype.mulTo=ZP;Ds.prototype.sqrTo=JP;function $P(){return(this.t>0?this.data[0]&1:this.s)==0}function e6(e,t){if(e>4294967295||e<1)return ge.ONE;var r=Lt(),n=Lt(),i=t.convert(this),a=$f(e)-1;for(i.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,i,r);else{var s=r;r=n,n=s}return t.revert(r)}function t6(e,t){var r;return e<256||t.isEven()?r=new Ns(t):r=new Ds(t),this.exp(e,r)}ge.prototype.copyTo=xP;ge.prototype.fromInt=SP;ge.prototype.fromString=TP;ge.prototype.clamp=AP;ge.prototype.dlShiftTo=DP;ge.prototype.drShiftTo=OP;ge.prototype.lShiftTo=LP;ge.prototype.rShiftTo=PP;ge.prototype.subTo=UP;ge.prototype.multiplyTo=MP;ge.prototype.squareTo=FP;ge.prototype.divRemTo=qP;ge.prototype.invDigit=YP;ge.prototype.isEven=$P;ge.prototype.exp=e6;ge.prototype.toString=IP;ge.prototype.negate=kP;ge.prototype.abs=RP;ge.prototype.compareTo=BP;ge.prototype.bitLength=NP;ge.prototype.mod=GP;ge.prototype.modPowInt=t6;ge.ZERO=Xa(0);ge.ONE=Xa(1);function r6(){var e=Lt();return this.copyTo(e),e}function n6(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function i6(){return this.t==0?this.s:this.data[0]<<24>>24}function a6(){return this.t==0?this.s:this.data[0]<<16>>16}function s6(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function o6(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function l6(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=Xa(r),i=Lt(),a=Lt(),s="";for(this.divRemTo(n,i,a);i.signum()>0;)s=(r+a.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,a);return a.intValue().toString(e)+s}function u6(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,a=0,s=0,l=0;l<e.length;++l){var c=xw(e,l);if(c<0){e.charAt(l)=="-"&&this.signum()==0&&(i=!0);continue}s=t*s+c,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),i&&ge.ZERO.subTo(this,this)}function c6(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(ge.ONE.shiftLeft(e-1),F0,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(ge.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function f6(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function d6(e){return this.compareTo(e)==0}function h6(e){return this.compareTo(e)<0?this:e}function p6(e){return this.compareTo(e)>0?this:e}function g6(e,t,r){var n,i,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=a;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function m6(e,t){return e&t}function y6(e){var t=Lt();return this.bitwiseTo(e,m6,t),t}function F0(e,t){return e|t}function v6(e){var t=Lt();return this.bitwiseTo(e,F0,t),t}function Sw(e,t){return e^t}function _6(e){var t=Lt();return this.bitwiseTo(e,Sw,t),t}function Tw(e,t){return e&~t}function E6(e){var t=Lt();return this.bitwiseTo(e,Tw,t),t}function w6(){for(var e=Lt(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function C6(e){var t=Lt();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function b6(e){var t=Lt();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function x6(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function S6(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+x6(this.data[e]);return this.s<0?this.t*this.DB:-1}function T6(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function A6(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=T6(this.data[r]^t);return e}function I6(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function k6(e,t){var r=ge.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function R6(e){return this.changeBit(e,F0)}function B6(e){return this.changeBit(e,Tw)}function N6(e){return this.changeBit(e,Sw)}function D6(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function O6(e){var t=Lt();return this.addTo(e,t),t}function L6(e){var t=Lt();return this.subTo(e,t),t}function P6(e){var t=Lt();return this.multiplyTo(e,t),t}function U6(e){var t=Lt();return this.divRemTo(e,t,null),t}function M6(e){var t=Lt();return this.divRemTo(e,null,t),t}function F6(e){var t=Lt(),r=Lt();return this.divRemTo(e,t,r),new Array(t,r)}function q6(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function G6(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function pu(){}function Aw(e){return e}function V6(e,t,r){e.multiplyTo(t,r)}function K6(e,t){e.squareTo(t)}pu.prototype.convert=Aw;pu.prototype.revert=Aw;pu.prototype.mulTo=V6;pu.prototype.sqrTo=K6;function j6(e){return this.exp(e,new pu)}function H6(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function W6(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Xo(e){this.r2=Lt(),this.q3=Lt(),ge.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function Y6(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Lt();return e.copyTo(t),this.reduce(t),t}function z6(e){return e}function Q6(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function X6(e,t){e.squareTo(t),this.reduce(t)}function J6(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Xo.prototype.convert=Y6;Xo.prototype.revert=z6;Xo.prototype.reduce=Q6;Xo.prototype.mulTo=J6;Xo.prototype.sqrTo=X6;function Z6(e,t){var r=e.bitLength(),n,i=Xa(1),a;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?a=new Ns(t):t.isEven()?a=new Xo(t):a=new Ds(t);var s=new Array,l=3,c=n-1,f=(1<<n)-1;if(s[1]=a.convert(this),n>1){var d=Lt();for(a.sqrTo(s[1],d);l<=f;)s[l]=Lt(),a.mulTo(d,s[l-2],s[l]),l+=2}var h=e.t-1,g,y=!0,m=Lt(),_;for(r=$f(e.data[h])-1;h>=0;){for(r>=c?g=e.data[h]>>r-c&f:(g=(e.data[h]&(1<<r+1)-1)<<c-r,h>0&&(g|=e.data[h-1]>>this.DB+r-c)),l=n;(g&1)==0;)g>>=1,--l;if((r-=l)<0&&(r+=this.DB,--h),y)s[g].copyTo(i),y=!1;else{for(;l>1;)a.sqrTo(i,m),a.sqrTo(m,i),l-=2;l>0?a.sqrTo(i,m):(_=i,i=m,m=_),a.mulTo(m,s[g],i)}for(;h>=0&&(e.data[h]&1<<r)==0;)a.sqrTo(i,m),_=i,i=m,m=_,--r<0&&(r=this.DB-1,--h)}return a.revert(i)}function $6(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function e5(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function t5(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return ge.ZERO;for(var r=e.clone(),n=this.clone(),i=Xa(1),a=Xa(0),s=Xa(0),l=Xa(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?((!s.isEven()||!l.isEven())&&(s.addTo(this,s),l.subTo(e,l)),s.rShiftTo(1,s)):l.isEven()||l.subTo(e,l),l.rShiftTo(1,l);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(s,i),a.subTo(l,a)):(n.subTo(r,n),t&&s.subTo(i,s),l.subTo(a,l))}if(n.compareTo(ge.ONE)!=0)return ge.ZERO;if(l.compareTo(e)>=0)return l.subtract(e);if(l.signum()<0)l.addTo(e,l);else return l;return l.signum()<0?l.add(e):l}var Ei=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],r5=(1<<26)/Ei[Ei.length-1];function n5(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=Ei[Ei.length-1]){for(t=0;t<Ei.length;++t)if(r.data[0]==Ei[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<Ei.length;){for(var n=Ei[t],i=t+1;i<Ei.length&&n<r5;)n*=Ei[i++];for(n=r.modInt(n);t<i;)if(n%Ei[t++]==0)return!1}return r.millerRabin(e)}function i5(e){var t=this.subtract(ge.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=a5(),a,s=0;s<e;++s){do a=new ge(this.bitLength(),i);while(a.compareTo(ge.ONE)<=0||a.compareTo(t)>=0);var l=a.modPow(n,this);if(l.compareTo(ge.ONE)!=0&&l.compareTo(t)!=0){for(var c=1;c++<r&&l.compareTo(t)!=0;)if(l=l.modPowInt(2,this),l.compareTo(ge.ONE)==0)return!1;if(l.compareTo(t)!=0)return!1}}return!0}function a5(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}ge.prototype.chunkSize=s6;ge.prototype.toRadix=l6;ge.prototype.fromRadix=u6;ge.prototype.fromNumber=c6;ge.prototype.bitwiseTo=g6;ge.prototype.changeBit=k6;ge.prototype.addTo=D6;ge.prototype.dMultiply=q6;ge.prototype.dAddOffset=G6;ge.prototype.multiplyLowerTo=H6;ge.prototype.multiplyUpperTo=W6;ge.prototype.modInt=e5;ge.prototype.millerRabin=i5;ge.prototype.clone=r6;ge.prototype.intValue=n6;ge.prototype.byteValue=i6;ge.prototype.shortValue=a6;ge.prototype.signum=o6;ge.prototype.toByteArray=f6;ge.prototype.equals=d6;ge.prototype.min=h6;ge.prototype.max=p6;ge.prototype.and=y6;ge.prototype.or=v6;ge.prototype.xor=_6;ge.prototype.andNot=E6;ge.prototype.not=w6;ge.prototype.shiftLeft=C6;ge.prototype.shiftRight=b6;ge.prototype.getLowestSetBit=S6;ge.prototype.bitCount=A6;ge.prototype.testBit=I6;ge.prototype.setBit=R6;ge.prototype.clearBit=B6;ge.prototype.flipBit=N6;ge.prototype.add=O6;ge.prototype.subtract=L6;ge.prototype.multiply=P6;ge.prototype.divide=U6;ge.prototype.remainder=M6;ge.prototype.divideAndRemainder=F6;ge.prototype.modPow=Z6;ge.prototype.modInverse=t5;ge.prototype.pow=j6;ge.prototype.gcd=$6;ge.prototype.isProbablePrime=n5});var Jo=ue((F9,Nw)=>{var ji=ft();Fi();Ot();var kw=Nw.exports=ji.sha1=ji.sha1||{};ji.md.sha1=ji.md.algorithms.sha1=kw;kw.create=function(){Rw||s5();var e=null,t=ji.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=ji.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=ji.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),Bw(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=ji.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(q0.substr(0,n.blockLength-s));for(var l,c,f=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,c=l/4294967296>>>0,f+=c,i.putInt32(f>>>0),f=l>>>0;i.putInt32(f);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};Bw(h,r,i);var g=ji.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g},n};var q0=null,Rw=!1;function s5(){q0=String.fromCharCode(128),q0+=ji.util.fillString(String.fromCharCode(0),64),Rw=!0}function Bw(e,t,r){for(var n,i,a,s,l,c,f,d,h=r.length();h>=64;){for(i=e.h0,a=e.h1,s=e.h2,l=e.h3,c=e.h4,d=0;d<16;++d)n=r.getInt32(),t[d]=n,f=l^a&(s^l),n=(i<<5|i>>>27)+f+c+1518500249+n,c=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<20;++d)n=t[d-3]^t[d-8]^t[d-14]^t[d-16],n=n<<1|n>>>31,t[d]=n,f=l^a&(s^l),n=(i<<5|i>>>27)+f+c+1518500249+n,c=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<32;++d)n=t[d-3]^t[d-8]^t[d-14]^t[d-16],n=n<<1|n>>>31,t[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+c+1859775393+n,c=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<40;++d)n=t[d-6]^t[d-16]^t[d-28]^t[d-32],n=n<<2|n>>>30,t[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+c+1859775393+n,c=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<60;++d)n=t[d-6]^t[d-16]^t[d-28]^t[d-32],n=n<<2|n>>>30,t[d]=n,f=a&s|l&(a^s),n=(i<<5|i>>>27)+f+c+2400959708+n,c=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<80;++d)n=t[d-6]^t[d-16]^t[d-28]^t[d-32],n=n<<2|n>>>30,t[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+c+3395469782+n,c=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+l|0,e.h4=e.h4+c|0,h-=64}}});var G0=ue((q9,Ow)=>{var Hi=ft();Ot();Xn();Jo();var Dw=Ow.exports=Hi.pkcs1=Hi.pkcs1||{};Dw.encode_rsa_oaep=function(e,t,r){var n,i,a,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,a=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),a?a.start():a=Hi.md.sha1.create(),s||(s=a);var l=Math.ceil(e.n.bitLength()/8),c=l-2*a.digestLength-2;if(t.length>c){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=t.length,f.maxLength=c,f}n||(n=""),a.update(n,"raw");for(var d=a.digest(),h="",g=c-t.length,y=0;y<g;y++)h+="\0";var m=d.getBytes()+h+""+t;if(!i)i=Hi.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=i.length,f.digestLength=a.digestLength,f}var _=ed(i,l-a.digestLength-1,s),E=Hi.util.xorBytes(m,_,m.length),w=ed(E,a.digestLength,s),S=Hi.util.xorBytes(i,w,i.length);return"\0"+S+E};Dw.decode_rsa_oaep=function(e,t,r){var n,i,a;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var E=new Error("RSAES-OAEP encoded message length is invalid.");throw E.length=t.length,E.expectedLength=s,E}if(i===void 0?i=Hi.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var l=i.digest().getBytes(),c=t.charAt(0),f=t.substring(1,i.digestLength+1),d=t.substring(1+i.digestLength),h=ed(d,i.digestLength,a),g=Hi.util.xorBytes(f,h,f.length),y=ed(g,s-i.digestLength-1,a),m=Hi.util.xorBytes(d,y,d.length),_=m.substring(0,i.digestLength),E=c!=="\0",w=0;w<i.digestLength;++w)E|=l.charAt(w)!==_.charAt(w);for(var S=1,R=i.digestLength,B=i.digestLength;B<m.length;B++){var O=m.charCodeAt(B),N=O&1^1,ee=S?65534:0;E|=O&ee,S=S&N,R+=S}if(E||m.charCodeAt(R)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(R+1)};function ed(e,t,r){r||(r=Hi.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);r.start(),r.update(e+s),n+=r.digest().getBytes()}return n.substring(0,t)}});var K0=ue((G9,V0)=>{var Ja=ft();Ot();gu();Xn();(function(){if(Ja.prime){V0.exports=Ja.prime;return}var e=V0.exports=Ja.prime=Ja.prime||{},t=Ja.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(h,g){return h|g};e.generateProbablePrime=function(h,g,y){typeof g=="function"&&(y=g,g={}),g=g||{};var m=g.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var _=g.prng||Ja.random,E={nextBytes:function(w){for(var S=_.getBytesSync(w.length),R=0;R<w.length;++R)w[R]=S.charCodeAt(R)}};if(m.name==="PRIMEINC")return a(h,E,m.options,y);throw new Error("Invalid prime generation algorithm: "+m.name)};function a(h,g,y,m){return"workers"in y?c(h,g,y,m):s(h,g,y,m)}function s(h,g,y,m){var _=f(h,g),E=0,w=d(_.bitLength());"millerRabinTests"in y&&(w=y.millerRabinTests);var S=10;"maxBlockTime"in y&&(S=y.maxBlockTime),l(_,h,g,E,w,S,m)}function l(h,g,y,m,_,E,w){var S=+new Date;do{if(h.bitLength()>g&&(h=f(g,y)),h.isProbablePrime(_))return w(null,h);h.dAddOffset(r[m++%8],0)}while(E<0||+new Date-S<E);Ja.util.setImmediate(function(){l(h,g,y,m,_,E,w)})}function c(h,g,y,m){if(typeof Worker=="undefined")return s(h,g,y,m);var _=f(h,g),E=y.workers,w=y.workLoad||100,S=w*30/8,R=y.workerScript||"forge/prime.worker.js";if(E===-1)return Ja.util.estimateCores(function(O,N){O&&(N=2),E=N-1,B()});B();function B(){E=Math.max(1,E);for(var O=[],N=0;N<E;++N)O[N]=new Worker(R);for(var ee=E,N=0;N<E;++N)O[N].addEventListener("message",F);var q=!1;function F(ce){if(!q){--ee;var se=ce.data;if(se.found){for(var ve=0;ve<O.length;++ve)O[ve].terminate();return q=!0,m(null,new t(se.prime,16))}_.bitLength()>h&&(_=f(h,g));var Ie=_.toString(16);ce.target.postMessage({hex:Ie,workLoad:w}),_.dAddOffset(S,0)}}}}function f(h,g){var y=new t(h,g),m=h-1;return y.testBit(m)||y.bitwiseTo(t.ONE.shiftLeft(m),i,y),y.dAddOffset(31-y.mod(n).byteValue(),0),y}function d(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var mu=ue((V9,Gw)=>{var qe=ft();_i();gu();Qa();G0();K0();Xn();Ot();typeof Bt=="undefined"&&(Bt=qe.jsbn.BigInteger);var Bt,j0=qe.util.isNodejs?require("crypto"):null,$=qe.asn1,Zn=qe.util;qe.pki=qe.pki||{};Gw.exports=qe.pki.rsa=qe.rsa=qe.rsa||{};var it=qe.pki,o5=[6,4,2,4,2,4,6,2],l5={name:"PrivateKeyInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},u5={name:"RSAPrivateKey",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},c5={name:"RSAPublicKey",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},f5=qe.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:$.Class.UNIVERSAL,type:$.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},d5={name:"DigestInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:$.Class.UNIVERSAL,type:$.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:$.Class.UNIVERSAL,type:$.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},h5=function(e){var t;if(e.algorithm in it.oids)t=it.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=$.oidToDer(t).getBytes(),i=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[]),a=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[]);a.value.push($.create($.Class.UNIVERSAL,$.Type.OID,!1,n)),a.value.push($.create($.Class.UNIVERSAL,$.Type.NULL,!1,""));var s=$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(a),i.value.push(s),$.toDer(i).getBytes()},Lw=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(Bt.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(Bt.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new Bt(qe.util.bytesToHex(qe.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(Bt.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(a)<0;)i=i.add(t.p);var s=i.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return s=s.multiply(n.modInverse(t.n)).mod(t.n),s};it.rsa.encrypt=function(e,t,r){var n=r,i,a=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=Pw(e,t,r)):(i=qe.util.createBuffer(),i.putBytes(e));for(var s=new Bt(i.toHex(),16),l=Lw(s,t,n),c=l.toString(16),f=qe.util.createBuffer(),d=a-Math.ceil(c.length/2);d>0;)f.putByte(0),--d;return f.putBytes(qe.util.hexToBytes(c)),f.getBytes()};it.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=i,a}var s=new Bt(qe.util.createBuffer(e).toHex(),16);if(s.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=Lw(s,t,r),c=l.toString(16),f=qe.util.createBuffer(),d=i-Math.ceil(c.length/2);d>0;)f.putByte(0),--d;return f.putBytes(qe.util.hexToBytes(c)),n!==!1?td(f.getBytes(),t,r):f.getBytes()};it.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||qe.random,i={nextBytes:function(l){for(var c=n.getBytesSync(l.length),f=0;f<l.length;++f)l[f]=c.charCodeAt(f)}},a=r.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:e,rng:i,eInt:t||65537,e:new Bt(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};it.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new Bt(null);r.fromInt(30);for(var n=0,i=function(h,g){return h|g},a=+new Date,s,l=0;e.keys===null&&(t<=0||l<t);){if(e.state===0){var c=e.p===null?e.pBits:e.qBits,f=c-1;e.pqState===0?(e.num=new Bt(c,e.rng),e.num.testBit(f)||e.num.bitwiseTo(Bt.ONE.shiftLeft(f),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(g5(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(o5[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(Bt.ONE).gcd(e.e).compareTo(Bt.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(Bt.ONE),e.q1=e.q.subtract(Bt.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(Bt.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var d=e.e.modInverse(e.phi);e.keys={privateKey:it.rsa.setPrivateKey(e.n,e.e,d,e.p,e.q,d.mod(e.p1),d.mod(e.q1),e.q.modInverse(e.p)),publicKey:it.rsa.setPublicKey(e.n,e.e)}}s=+new Date,l+=s-a,a=s}return e.keys!==null};it.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!qe.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(Uw("generateKeyPair"))return j0.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,c,f){if(l)return n(l);n(null,{privateKey:it.privateKeyFromPem(f),publicKey:it.publicKeyFromPem(c)})});if(Mw("generateKey")&&Mw("exportKey"))return Zn.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:qw(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return Zn.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){n(l)}).then(function(l){if(l){var c=it.privateKeyFromAsn1($.fromDer(qe.util.createBuffer(l)));n(null,{privateKey:c,publicKey:it.setRsaPublicKey(c.n,c.e)})}});if(Fw("generateKey")&&Fw("exportKey")){var i=Zn.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:qw(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(l){var c=l.target.result,f=Zn.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);f.oncomplete=function(d){var h=d.target.result,g=it.privateKeyFromAsn1($.fromDer(qe.util.createBuffer(h)));n(null,{privateKey:g,publicKey:it.setRsaPublicKey(g.n,g.e)})},f.onerror=function(d){n(d)}},i.onerror=function(l){n(l)};return}}else if(Uw("generateKeyPairSync")){var a=j0.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:it.privateKeyFromPem(a.privateKey),publicKey:it.publicKeyFromPem(a.publicKey)}}}var s=it.rsa.createKeyPairGenerationState(e,t,r);if(!n)return it.rsa.stepKeyPairGenerationState(s,0),s.keys;p5(s,r,n)};it.setRsaPublicKey=it.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(l,c,f){return Pw(l,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(l,c){return qe.pkcs1.encode_rsa_oaep(c,l,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(l){return l}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return it.rsa.encrypt(s,r,!0)},r.verify=function(n,i,a,s){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),a==="RSASSA-PKCS1-V1_5"?a={verify:function(c,f){f=td(f,r,!0);var d=$.fromDer(f,{parseAllBytes:s._parseAllDigestBytes}),h={},g=[];if(!$.validate(d,d5,h,g)){var y=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw y.errors=g,y}var m=$.derToOid(h.algorithmIdentifier);if(!(m===qe.oids.md2||m===qe.oids.md5||m===qe.oids.sha1||m===qe.oids.sha224||m===qe.oids.sha256||m===qe.oids.sha384||m===qe.oids.sha512||m===qe.oids["sha512-224"]||m===qe.oids["sha512-256"])){var y=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw y.oid=m,y}if((m===qe.oids.md2||m===qe.oids.md5)&&!("parameters"in h))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===h.digest}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(c,f){return f=td(f,r,!0),c===f}});var l=it.rsa.decrypt(i,r,!0,!1);return a.verify(n,l,r.n.bitLength())},r};it.setRsaPrivateKey=it.rsa.setPrivateKey=function(e,t,r,n,i,a,s,l){var c={n:e,e:t,d:r,p:n,q:i,dP:a,dQ:s,qInv:l};return c.decrypt=function(f,d,h){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var g=it.rsa.decrypt(f,c,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:td};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:function(y,m){return qe.pkcs1.decode_rsa_oaep(m,y,h)}};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:function(y){return y}};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(g,c,!1)},c.sign=function(f,d){var h=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:h5},h=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:function(){return f}},h=1);var g=d.encode(f,c.n.bitLength());return it.rsa.encrypt(g,c,h)},c};it.wrapRsaPrivateKey=function(e){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(0).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(it.oids.rsaEncryption).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")]),$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,$.toDer(e).getBytes())])};it.privateKeyFromAsn1=function(e){var t={},r=[];if($.validate(e,l5,t,r)&&(e=$.fromDer(qe.util.createBuffer(t.privateKey))),t={},r=[],!$.validate(e,u5,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,a,s,l,c,f,d,h;return i=qe.util.createBuffer(t.privateKeyModulus).toHex(),a=qe.util.createBuffer(t.privateKeyPublicExponent).toHex(),s=qe.util.createBuffer(t.privateKeyPrivateExponent).toHex(),l=qe.util.createBuffer(t.privateKeyPrime1).toHex(),c=qe.util.createBuffer(t.privateKeyPrime2).toHex(),f=qe.util.createBuffer(t.privateKeyExponent1).toHex(),d=qe.util.createBuffer(t.privateKeyExponent2).toHex(),h=qe.util.createBuffer(t.privateKeyCoefficient).toHex(),it.setRsaPrivateKey(new Bt(i,16),new Bt(a,16),new Bt(s,16),new Bt(l,16),new Bt(c,16),new Bt(f,16),new Bt(d,16),new Bt(h,16))};it.privateKeyToAsn1=it.privateKeyToRSAPrivateKey=function(e){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(0).getBytes()),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Wi(e.n)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Wi(e.e)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Wi(e.d)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Wi(e.p)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Wi(e.q)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Wi(e.dP)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Wi(e.dQ)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Wi(e.qInv))])};it.publicKeyFromAsn1=function(e){var t={},r=[];if($.validate(e,f5,t,r)){var n=$.derToOid(t.publicKeyOid);if(n!==it.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!$.validate(e,c5,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var a=qe.util.createBuffer(t.publicKeyModulus).toHex(),s=qe.util.createBuffer(t.publicKeyExponent).toHex();return it.setRsaPublicKey(new Bt(a,16),new Bt(s,16))};it.publicKeyToAsn1=it.publicKeyToSubjectPublicKeyInfo=function(e){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(it.oids.rsaEncryption).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")]),$.create($.Class.UNIVERSAL,$.Type.BITSTRING,!1,[it.publicKeyToRSAPublicKey(e)])])};it.publicKeyToRSAPublicKey=function(e){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Wi(e.n)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Wi(e.e))])};function Pw(e,t,r){var n=qe.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var s=i-3-e.length,l;if(r===0||r===1){l=r===0?0:255;for(var c=0;c<s;++c)n.putByte(l)}else for(;s>0;){for(var f=0,d=qe.random.getBytes(s),c=0;c<s;++c)l=d.charCodeAt(c),l===0?++f:n.putByte(l);s=f}return n.putByte(0),n.putBytes(e),n}function td(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),a=qe.util.createBuffer(e),s=a.getByte(),l=a.getByte();if(s!==0||r&&l!==0&&l!==1||!r&&l!=2||r&&l===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var c=0;if(l===0){c=i-3-n;for(var f=0;f<c;++f)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(c=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++c}else if(l===2)for(c=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++c}var d=a.getByte();if(d!==0||c!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function p5(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){a(e.pBits,function(l,c){if(l)return r(l);if(e.p=c,e.q!==null)return s(l,e.q);a(e.qBits,s)})}function a(l,c){qe.prime.generateProbablePrime(l,n,c)}function s(l,c){if(l)return r(l);if(e.q=c,e.p.compareTo(e.q)<0){var f=e.p;e.p=e.q,e.q=f}if(e.p.subtract(Bt.ONE).gcd(e.e).compareTo(Bt.ONE)!==0){e.p=null,i();return}if(e.q.subtract(Bt.ONE).gcd(e.e).compareTo(Bt.ONE)!==0){e.q=null,a(e.qBits,s);return}if(e.p1=e.p.subtract(Bt.ONE),e.q1=e.q.subtract(Bt.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(Bt.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,a(e.qBits,s);return}var d=e.e.modInverse(e.phi);e.keys={privateKey:it.rsa.setPrivateKey(e.n,e.e,d,e.p,e.q,d.mod(e.p1),d.mod(e.q1),e.q.modInverse(e.p)),publicKey:it.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function Wi(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=qe.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function g5(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function Uw(e){return qe.util.isNodejs&&typeof j0[e]=="function"}function Mw(e){return typeof Zn.globalScope!="undefined"&&typeof Zn.globalScope.crypto=="object"&&typeof Zn.globalScope.crypto.subtle=="object"&&typeof Zn.globalScope.crypto.subtle[e]=="function"}function Fw(e){return typeof Zn.globalScope!="undefined"&&typeof Zn.globalScope.msCrypto=="object"&&typeof Zn.globalScope.msCrypto.subtle=="object"&&typeof Zn.globalScope.msCrypto.subtle[e]=="function"}function qw(e){for(var t=qe.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var H0=ue((K9,Ww)=>{var De=ft();za();_i();hu();Fi();Qa();Xf();Bs();Xn();P0();mu();Ot();typeof Vw=="undefined"&&(Vw=De.jsbn.BigInteger);var Vw,oe=De.asn1,ut=De.pki=De.pki||{};Ww.exports=ut.pbe=De.pbe=De.pbe||{};var Os=ut.oids,m5={name:"EncryptedPrivateKeyInfo",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},y5={name:"PBES2Algorithms",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:oe.Class.UNIVERSAL,type:oe.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:oe.Class.UNIVERSAL,type:oe.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},v5={name:"pkcs-12PbeParams",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:oe.Class.UNIVERSAL,type:oe.Type.INTEGER,constructed:!1,capture:"iterations"}]};ut.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=De.random.getBytesSync(r.saltSize),i=r.count,a=oe.integerToDer(i),s,l,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var f,d,h;switch(r.algorithm){case"aes128":s=16,f=16,d=Os["aes128-CBC"],h=De.aes.createEncryptionCipher;break;case"aes192":s=24,f=16,d=Os["aes192-CBC"],h=De.aes.createEncryptionCipher;break;case"aes256":s=32,f=16,d=Os["aes256-CBC"],h=De.aes.createEncryptionCipher;break;case"des":s=8,f=8,d=Os.desCBC,h=De.des.createEncryptionCipher;break;default:var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}var y="hmacWith"+r.prfAlgorithm.toUpperCase(),m=Hw(y),_=De.pkcs5.pbkdf2(t,n,i,s,m),E=De.random.getBytesSync(f),w=h(_);w.start(E),w.update(oe.toDer(e)),w.finish(),c=w.output.getBytes();var S=_5(n,a,s,y);l=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(Os.pkcs5PBES2).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(Os.pkcs5PBKDF2).getBytes()),S]),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(d).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,E)])])])}else if(r.algorithm==="3des"){s=24;var R=new De.util.ByteBuffer(n),_=ut.pbe.generatePkcs12Key(t,R,1,i,s),E=ut.pbe.generatePkcs12Key(t,R,2,i,s),w=De.des.createEncryptionCipher(_);w.start(E),w.update(oe.toDer(e)),w.finish(),c=w.output.getBytes(),l=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(Os["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,n),oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,a.getBytes())])])}else{var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}var B=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[l,oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,c)]);return B};ut.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!oe.validate(e,m5,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=oe.derToOid(n.encryptionOid),l=ut.pbe.getCipher(s,n.encryptionParams,t),c=De.util.createBuffer(n.encryptedData);return l.update(c),l.finish()&&(r=oe.fromDer(l.output)),r};ut.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:oe.toDer(e).getBytes()};return De.pem.encode(r,{maxline:t})};ut.encryptedPrivateKeyFromPem=function(e){var t=De.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return oe.fromDer(t.body)};ut.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=ut.wrapRsaPrivateKey(ut.privateKeyToAsn1(e));return n=ut.encryptPrivateKeyInfo(n,t,r),ut.encryptedPrivateKeyToPem(n)}var i,a,s,l;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,a=De.random.getBytesSync(16),l=De.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=De.random.getBytesSync(16),l=De.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=De.random.getBytesSync(16),l=De.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=De.random.getBytesSync(8),l=De.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=De.random.getBytesSync(8),l=De.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var f=De.pbe.opensslDeriveBytes(t,a.substr(0,8),s),d=l(f);d.start(a),d.update(oe.toDer(ut.privateKeyToAsn1(e))),d.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:De.util.bytesToHex(a).toUpperCase()},body:d.output.getBytes()};return De.pem.encode(h)};ut.decryptRsaPrivateKey=function(e,t){var r=null,n=De.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var a,s;switch(n.dekInfo.algorithm){case"DES-CBC":a=8,s=De.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=De.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=De.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=De.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=De.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(h){return De.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":a=8,s=function(h){return De.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":a=16,s=function(h){return De.rc2.createDecryptionCipher(h,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var l=De.util.hexToBytes(n.dekInfo.parameters),c=De.pbe.opensslDeriveBytes(t,l.substr(0,8),a),f=s(c);if(f.start(l),f.update(De.util.createBuffer(n.body)),f.finish())r=f.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=ut.decryptPrivateKeyInfo(oe.fromDer(r),t):r=oe.fromDer(r),r!==null&&(r=ut.privateKeyFromAsn1(r)),r};ut.pbe.generatePkcs12Key=function(e,t,r,n,i,a){var s,l;if(typeof a=="undefined"||a===null){if(!("sha1"in De.md))throw new Error('"sha1" hash algorithm unavailable.');a=De.md.sha1.create()}var c=a.digestLength,f=a.blockLength,d=new De.util.ByteBuffer,h=new De.util.ByteBuffer;if(e!=null){for(l=0;l<e.length;l++)h.putInt16(e.charCodeAt(l));h.putInt16(0)}var g=h.length(),y=t.length(),m=new De.util.ByteBuffer;m.fillWithByte(r,f);var _=f*Math.ceil(y/f),E=new De.util.ByteBuffer;for(l=0;l<_;l++)E.putByte(t.at(l%y));var w=f*Math.ceil(g/f),S=new De.util.ByteBuffer;for(l=0;l<w;l++)S.putByte(h.at(l%g));var R=E;R.putBuffer(S);for(var B=Math.ceil(i/c),O=1;O<=B;O++){var N=new De.util.ByteBuffer;N.putBytes(m.bytes()),N.putBytes(R.bytes());for(var ee=0;ee<n;ee++)a.start(),a.update(N.getBytes()),N=a.digest();var q=new De.util.ByteBuffer;for(l=0;l<f;l++)q.putByte(N.at(l%c));var F=Math.ceil(y/f)+Math.ceil(g/f),ce=new De.util.ByteBuffer;for(s=0;s<F;s++){var se=new De.util.ByteBuffer(R.getBytes(f)),ve=511;for(l=q.length()-1;l>=0;l--)ve=ve>>8,ve+=q.at(l)+se.at(l),se.setAt(l,ve&255);ce.putBuffer(se)}R=ce,d.putBuffer(N)}return d.truncate(d.length()-i),d};ut.pbe.getCipher=function(e,t,r){switch(e){case ut.oids.pkcs5PBES2:return ut.pbe.getCipherForPBES2(e,t,r);case ut.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case ut.oids["pbewithSHAAnd40BitRC2-CBC"]:return ut.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};ut.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!oe.validate(t,y5,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(e=oe.derToOid(n.kdfOid),e!==ut.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=e,a.supportedOids=["pkcs5PBKDF2"],a}if(e=oe.derToOid(n.encOid),e!==ut.oids["aes128-CBC"]&&e!==ut.oids["aes192-CBC"]&&e!==ut.oids["aes256-CBC"]&&e!==ut.oids["des-EDE3-CBC"]&&e!==ut.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=n.kdfSalt,l=De.util.createBuffer(n.kdfIterationCount);l=l.getInt(l.length()<<3);var c,f;switch(ut.oids[e]){case"aes128-CBC":c=16,f=De.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,f=De.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,f=De.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,f=De.des.createDecryptionCipher;break;case"desCBC":c=8,f=De.des.createDecryptionCipher;break}var d=jw(n.prfOid),h=De.pkcs5.pbkdf2(r,s,l,c,d),g=n.encIv,y=f(h);return y.start(g),y};ut.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!oe.validate(t,v5,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=De.util.createBuffer(n.salt),l=De.util.createBuffer(n.iterations);l=l.getInt(l.length()<<3);var c,f,d;switch(e){case ut.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,f=8,d=De.des.startDecrypting;break;case ut.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,f=8,d=function(_,E){var w=De.rc2.createDecryptionCipher(_,40);return w.start(E,null),w};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=e,a}var h=jw(n.prfOid),g=ut.pbe.generatePkcs12Key(r,s,1,l,c,h);h.start();var y=ut.pbe.generatePkcs12Key(r,s,2,l,f,h);return d(g,y)};ut.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in De.md))throw new Error('"md5" hash algorithm unavailable.');n=De.md.md5.create()}t===null&&(t="");for(var i=[Kw(n,e+t)],a=16,s=1;a<r;++s,a+=16)i.push(Kw(n,i[s-1]+e+t));return i.join("").substr(0,r)};function Kw(e,t){return e.start().update(t).digest().getBytes()}function jw(e){var t;if(!e)t="hmacWithSHA1";else if(t=ut.oids[oe.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Hw(t)}function Hw(e){var t=De.md;switch(e){case"hmacWithSHA224":t=De.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function _5(e,t,r,n){var i=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,e),oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,De.util.hexToBytes(r.toString(16))),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(ut.oids[n]).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.NULL,!1,"")])),i}});var W0=ue((j9,Qw)=>{var Zo=ft();_i();Ot();var Ne=Zo.asn1,$o=Qw.exports=Zo.pkcs7asn1=Zo.pkcs7asn1||{};Zo.pkcs7=Zo.pkcs7||{};Zo.pkcs7.asn1=$o;var Yw={name:"ContentInfo",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};$o.contentInfoValidator=Yw;var zw={name:"EncryptedContentInfo",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Ne.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};$o.envelopedDataValidator={name:"EnvelopedData",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(zw)};$o.encryptedDataValidator={name:"EncryptedData",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"version"}].concat(zw)};var E5={name:"SignerInfo",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Ne.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};$o.signedDataValidator={name:"SignedData",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},Yw,{name:"SignedData.Certificates",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SET,capture:"signerInfos",optional:!0,value:[E5]}]};$o.recipientInfoValidator={name:"RecipientInfo",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Ne.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Y0=ue((H9,Xw)=>{var Ls=ft();Ot();Ls.mgf=Ls.mgf||{};var w5=Xw.exports=Ls.mgf.mgf1=Ls.mgf1=Ls.mgf1||{};w5.create=function(e){var t={generate:function(r,n){for(var i=new Ls.util.ByteBuffer,a=Math.ceil(n/e.digestLength),s=0;s<a;s++){var l=new Ls.util.ByteBuffer;l.putInt32(s),e.start(),e.update(r+l.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-n),i.getBytes()}};return t}});var Zw=ue((W9,Jw)=>{var rd=ft();Y0();Jw.exports=rd.mgf=rd.mgf||{};rd.mgf.mgf1=rd.mgf1});var nd=ue((Y9,$w)=>{var Ps=ft();Xn();Ot();var C5=$w.exports=Ps.pss=Ps.pss||{};C5.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,r=e.mgf,n=t.digestLength,i=e.salt||null;typeof i=="string"&&(i=Ps.util.createBuffer(i));var a;if("saltLength"in e)a=e.saltLength;else if(i!==null)a=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==a)throw new Error("Given salt length does not match length of given salt.");var s=e.prng||Ps.random,l={};return l.encode=function(c,f){var d,h=f-1,g=Math.ceil(h/8),y=c.digest().getBytes();if(g<n+a+2)throw new Error("Message is too long to encrypt.");var m;i===null?m=s.getBytesSync(a):m=i.bytes();var _=new Ps.util.ByteBuffer;_.fillWithByte(0,8),_.putBytes(y),_.putBytes(m),t.start(),t.update(_.getBytes());var E=t.digest().getBytes(),w=new Ps.util.ByteBuffer;w.fillWithByte(0,g-a-n-2),w.putByte(1),w.putBytes(m);var S=w.getBytes(),R=g-n-1,B=r.generate(E,R),O="";for(d=0;d<R;d++)O+=String.fromCharCode(S.charCodeAt(d)^B.charCodeAt(d));var N=65280>>8*g-h&255;return O=String.fromCharCode(O.charCodeAt(0)&~N)+O.substr(1),O+E+String.fromCharCode(188)},l.verify=function(c,f,d){var h,g=d-1,y=Math.ceil(g/8);if(f=f.substr(-y),y<n+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(f.charCodeAt(y-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=y-n-1,_=f.substr(0,m),E=f.substr(m,n),w=65280>>8*y-g&255;if((_.charCodeAt(0)&w)!=0)throw new Error("Bits beyond keysize not zero as expected.");var S=r.generate(E,m),R="";for(h=0;h<m;h++)R+=String.fromCharCode(_.charCodeAt(h)^S.charCodeAt(h));R=String.fromCharCode(R.charCodeAt(0)&~w)+R.substr(1);var B=y-n-a-2;for(h=0;h<B;h++)if(R.charCodeAt(h)!==0)throw new Error("Leftmost octets not zero as expected");if(R.charCodeAt(B)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var O=R.substr(-a),N=new Ps.util.ByteBuffer;N.fillWithByte(0,8),N.putBytes(c),N.putBytes(O),t.start(),t.update(N.getBytes());var ee=t.digest().getBytes();return E===ee},l}});var sd=ue((z9,iC)=>{var Ge=ft();za();_i();hu();Fi();Zw();Qa();Bs();nd();mu();Ot();var b=Ge.asn1,xe=iC.exports=Ge.pki=Ge.pki||{},Nt=xe.oids,pr={};pr.CN=Nt.commonName;pr.commonName="CN";pr.C=Nt.countryName;pr.countryName="C";pr.L=Nt.localityName;pr.localityName="L";pr.ST=Nt.stateOrProvinceName;pr.stateOrProvinceName="ST";pr.O=Nt.organizationName;pr.organizationName="O";pr.OU=Nt.organizationalUnitName;pr.organizationalUnitName="OU";pr.E=Nt.emailAddress;pr.emailAddress="E";var eC=Ge.pki.rsa.publicKeyValidator,b5={name:"Certificate",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:b.Class.UNIVERSAL,type:b.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:b.Class.UNIVERSAL,type:b.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:b.Class.UNIVERSAL,type:b.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:b.Class.UNIVERSAL,type:b.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},eC,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:b.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:b.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:b.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},x5={name:"rsapss",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:b.Class.UNIVERSAL,type:b.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:b.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:b.Class.UNIVERSAL,type:b.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:b.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:b.Class.UNIVERSAL,type:b.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:b.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:b.Class.UNIVERSAL,type:b.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},S5={name:"CertificationRequestInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},eC,{name:"CertificationRequestInfo.attributes",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:b.Class.UNIVERSAL,type:b.Type.SET,constructed:!0}]}]}]},T5={name:"CertificationRequest",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[S5,{name:"CertificationRequest.signatureAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};xe.RDNAttributesAsArray=function(e,t){for(var r=[],n,i,a,s=0;s<e.value.length;++s){n=e.value[s];for(var l=0;l<n.value.length;++l)a={},i=n.value[l],a.type=b.derToOid(i.value[0].value),a.value=i.value[1].value,a.valueTagClass=i.value[1].type,a.type in Nt&&(a.name=Nt[a.type],a.name in pr&&(a.shortName=pr[a.name])),t&&(t.update(a.type),t.update(a.value)),r.push(a)}return r};xe.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],i=b.derToOid(n.value[0].value),a=n.value[1].value,s=0;s<a.length;++s){var l={};if(l.type=i,l.value=a[s].value,l.valueTagClass=a[s].type,l.type in Nt&&(l.name=Nt[l.type],l.name in pr&&(l.shortName=pr[l.name])),l.type===Nt.extensionRequest){l.extensions=[];for(var c=0;c<l.value.length;++c)l.extensions.push(xe.certificateExtensionFromAsn1(l.value[c]))}t.push(l)}return t};function Za(e,t){typeof t=="string"&&(t={shortName:t});for(var r=null,n,i=0;r===null&&i<e.attributes.length;++i)n=e.attributes[i],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(r=n);return r}var id=function(e,t,r){var n={};if(e!==Nt["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Nt.sha1},mgf:{algorithmOid:Nt.mgf1,hash:{algorithmOid:Nt.sha1}},saltLength:20});var i={},a=[];if(!b.validate(t,x5,i,a)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=a,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=b.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=b.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=b.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},ad=function(e){switch(Nt[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return Ge.md.sha1.create();case"md5WithRSAEncryption":return Ge.md.md5.create();case"sha256WithRSAEncryption":return Ge.md.sha256.create();case"sha384WithRSAEncryption":return Ge.md.sha384.create();case"sha512WithRSAEncryption":return Ge.md.sha512.create();case"RSASSA-PSS":return Ge.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},tC=function(e){var t=e.certificate,r;switch(t.signatureOid){case Nt.sha1WithRSAEncryption:case Nt.sha1WithRSASignature:break;case Nt["RSASSA-PSS"]:var n,i;if(n=Nt[t.signatureParameters.mgf.hash.algorithmOid],n===void 0||Ge.md[n]===void 0){var a=new Error("Unsupported MGF hash function.");throw a.oid=t.signatureParameters.mgf.hash.algorithmOid,a.name=n,a}if(i=Nt[t.signatureParameters.mgf.algorithmOid],i===void 0||Ge.mgf[i]===void 0){var a=new Error("Unsupported MGF function.");throw a.oid=t.signatureParameters.mgf.algorithmOid,a.name=i,a}if(i=Ge.mgf[i].create(Ge.md[n].create()),n=Nt[t.signatureParameters.hash.algorithmOid],n===void 0||Ge.md[n]===void 0){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=t.signatureParameters.hash.algorithmOid,a.name=n,a}r=Ge.pss.create(Ge.md[n].create(),i,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,r)};xe.certificateFromPem=function(e,t,r){var n=Ge.pem.decode(e)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=b.fromDer(n.body,r);return xe.certificateFromAsn1(a,t)};xe.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:b.toDer(xe.certificateToAsn1(e)).getBytes()};return Ge.pem.encode(r,{maxline:t})};xe.publicKeyFromPem=function(e){var t=Ge.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=b.fromDer(t.body);return xe.publicKeyFromAsn1(n)};xe.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:b.toDer(xe.publicKeyToAsn1(e)).getBytes()};return Ge.pem.encode(r,{maxline:t})};xe.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:b.toDer(xe.publicKeyToRSAPublicKey(e)).getBytes()};return Ge.pem.encode(r,{maxline:t})};xe.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||Ge.md.sha1.create(),n=t.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=b.toDer(xe.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=b.toDer(xe.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}r.start(),r.update(i);var a=r.digest();if(t.encoding==="hex"){var s=a.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};xe.certificationRequestFromPem=function(e,t,r){var n=Ge.pem.decode(e)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=b.fromDer(n.body,r);return xe.certificationRequestFromAsn1(a,t)};xe.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:b.toDer(xe.certificationRequestToAsn1(e)).getBytes()};return Ge.pem.encode(r,{maxline:t})};xe.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return Za(e.issuer,t)},e.issuer.addField=function(t){$n([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return Za(e.subject,t)},e.subject.addField=function(t){$n([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){$n(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){$n(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)rC(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var r=null,n,i=0;r===null&&i<e.extensions.length;++i)n=e.extensions[i],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(r=n);return r},e.sign=function(t,r){e.md=r||Ge.md.sha1.create();var n=Nt[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.tbsCertificate=xe.getTBSCertificate(e);var a=b.toDer(e.tbsCertificate);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,i=e.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=i.attributes,a.actualIssuer=n.attributes,a}var s=t.md;if(s===null){s=ad({signatureOid:t.signatureOid,type:"certificate"});var l=t.tbsCertificate||xe.getTBSCertificate(t),c=b.toDer(l);s.update(c.getBytes())}return s!==null&&(r=tC({certificate:e,md:s,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var a,s,l=0;r&&l<n.attributes.length;++l)a=n.attributes[l],s=i.attributes[l],(a.type!==s.type||a.value!==s.value)&&(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return xe.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=Nt.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var n=e.extensions[r];if(n.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return Ge.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},e};xe.certificateFromAsn1=function(e,t){var r={},n=[];if(!b.validate(e,b5,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var a=b.derToOid(r.publicKeyOid);if(a!==xe.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=xe.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=Ge.util.createBuffer(r.certSerialNumber);s.serialNumber=l.toHex(),s.signatureOid=Ge.asn1.derToOid(r.certSignatureOid),s.signatureParameters=id(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=Ge.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=id(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(b.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(b.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(b.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(b.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=c[0],s.validity.notAfter=c[1],s.tbsCertificate=r.tbsCertificate,t){s.md=ad({signatureOid:s.signatureOid,type:"certificate"});var f=b.toDer(s.tbsCertificate);s.md.update(f.getBytes())}var d=Ge.md.sha1.create(),h=b.toDer(r.certIssuer);d.update(h.getBytes()),s.issuer.getField=function(m){return Za(s.issuer,m)},s.issuer.addField=function(m){$n([m]),s.issuer.attributes.push(m)},s.issuer.attributes=xe.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=d.digest().toHex();var g=Ge.md.sha1.create(),y=b.toDer(r.certSubject);return g.update(y.getBytes()),s.subject.getField=function(m){return Za(s.subject,m)},s.subject.addField=function(m){$n([m]),s.subject.attributes.push(m)},s.subject.attributes=xe.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=g.digest().toHex(),r.certExtensions?s.extensions=xe.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=xe.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};xe.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(xe.certificateExtensionFromAsn1(n.value[i]));return t};xe.certificateExtensionFromAsn1=function(e){var t={};if(t.id=b.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===b.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in Nt){if(t.name=Nt[t.id],t.name==="keyUsage"){var r=b.fromDer(t.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),t.digitalSignature=(n&128)==128,t.nonRepudiation=(n&64)==64,t.keyEncipherment=(n&32)==32,t.dataEncipherment=(n&16)==16,t.keyAgreement=(n&8)==8,t.keyCertSign=(n&4)==4,t.cRLSign=(n&2)==2,t.encipherOnly=(n&1)==1,t.decipherOnly=(i&128)==128}else if(t.name==="basicConstraints"){var r=b.fromDer(t.value);r.value.length>0&&r.value[0].type===b.Type.BOOLEAN?t.cA=r.value[0].value.charCodeAt(0)!==0:t.cA=!1;var a=null;r.value.length>0&&r.value[0].type===b.Type.INTEGER?a=r.value[0].value:r.value.length>1&&(a=r.value[1].value),a!==null&&(t.pathLenConstraint=b.derToInteger(a))}else if(t.name==="extKeyUsage")for(var r=b.fromDer(t.value),s=0;s<r.value.length;++s){var l=b.derToOid(r.value[s].value);l in Nt?t[Nt[l]]=!0:t[l]=!0}else if(t.name==="nsCertType"){var r=b.fromDer(t.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),t.client=(n&128)==128,t.server=(n&64)==64,t.email=(n&32)==32,t.objsign=(n&16)==16,t.reserved=(n&8)==8,t.sslCA=(n&4)==4,t.emailCA=(n&2)==2,t.objCA=(n&1)==1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var c,r=b.fromDer(t.value),f=0;f<r.value.length;++f){c=r.value[f];var d={type:c.type,value:c.value};switch(t.altNames.push(d),c.type){case 1:case 2:case 6:break;case 7:d.ip=Ge.util.bytesToIP(c.value);break;case 8:d.oid=b.derToOid(c.value);break;default:}}}else if(t.name==="subjectKeyIdentifier"){var r=b.fromDer(t.value);t.subjectKeyIdentifier=Ge.util.bytesToHex(r.value)}}return t};xe.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!b.validate(e,T5,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var a=b.derToOid(r.publicKeyOid);if(a!==xe.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=xe.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=Ge.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=id(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=Ge.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=id(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,t){s.md=ad({signatureOid:s.signatureOid,type:"certification request"});var l=b.toDer(s.certificationRequestInfo);s.md.update(l.getBytes())}var c=Ge.md.sha1.create();return s.subject.getField=function(f){return Za(s.subject,f)},s.subject.addField=function(f){$n([f]),s.subject.attributes.push(f)},s.subject.attributes=xe.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),s.subject.hash=c.digest().toHex(),s.publicKey=xe.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(f){return Za(s,f)},s.addAttribute=function(f){$n([f]),s.attributes.push(f)},s.attributes=xe.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};xe.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return Za(e.subject,t)},e.subject.addField=function(t){$n([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return Za(e,t)},e.addAttribute=function(t){$n([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){$n(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){$n(t),e.attributes=t},e.sign=function(t,r){e.md=r||Ge.md.sha1.create();var n=Nt[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.certificationRequestInfo=xe.getCertificationRequestInfo(e);var a=b.toDer(e.certificationRequestInfo);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(r===null){r=ad({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||xe.getCertificationRequestInfo(e),i=b.toDer(n);r.update(i.getBytes())}return r!==null&&(t=tC({certificate:e,md:r,signature:e.signature})),t},e};function el(e){for(var t=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),r,n,i=e.attributes,a=0;a<i.length;++a){r=i[a];var s=r.value,l=b.Type.PRINTABLESTRING;"valueTagClass"in r&&(l=r.valueTagClass,l===b.Type.UTF8&&(s=Ge.util.encodeUtf8(s))),n=b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(r.type).getBytes()),b.create(b.Class.UNIVERSAL,l,!1,s)])]),t.value.push(n)}return t}function $n(e){for(var t,r=0;r<e.length;++r){if(t=e[r],typeof t.name=="undefined"&&(t.type&&t.type in xe.oids?t.name=xe.oids[t.type]:t.shortName&&t.shortName in pr&&(t.name=xe.oids[pr[t.shortName]])),typeof t.type=="undefined")if(t.name&&t.name in xe.oids)t.type=xe.oids[t.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=t,n}if(typeof t.shortName=="undefined"&&t.name&&t.name in pr&&(t.shortName=pr[t.name]),t.type===Nt.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=b.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(xe.certificateExtensionToAsn1(rC(t.extensions[i])))}if(typeof t.value=="undefined"){var n=new Error("Attribute value not specified.");throw n.attribute=t,n}}}function rC(e,t){if(t=t||{},typeof e.name=="undefined"&&e.id&&e.id in xe.oids&&(e.name=xe.oids[e.id]),typeof e.id=="undefined")if(e.name&&e.name in xe.oids)e.id=xe.oids[e.name];else{var r=new Error("Extension ID not specified.");throw r.extension=e,r}if(typeof e.value!="undefined")return e;if(e.name==="keyUsage"){var n=0,i=0,a=0;e.digitalSignature&&(i|=128,n=7),e.nonRepudiation&&(i|=64,n=6),e.keyEncipherment&&(i|=32,n=5),e.dataEncipherment&&(i|=16,n=4),e.keyAgreement&&(i|=8,n=3),e.keyCertSign&&(i|=4,n=2),e.cRLSign&&(i|=2,n=1),e.encipherOnly&&(i|=1,n=0),e.decipherOnly&&(a|=128,n=7);var s=String.fromCharCode(n);a!==0?s+=String.fromCharCode(i)+String.fromCharCode(a):i!==0&&(s+=String.fromCharCode(i)),e.value=b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,s)}else if(e.name==="basicConstraints")e.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(b.create(b.Class.UNIVERSAL,b.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);var l=e.value.value;for(var c in e)e[c]===!0&&(c in Nt?l.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(Nt[c]).getBytes())):c.indexOf(".")!==-1&&l.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c).getBytes())))}else if(e.name==="nsCertType"){var n=0,i=0;e.client&&(i|=128,n=7),e.server&&(i|=64,n=6),e.email&&(i|=32,n=5),e.objsign&&(i|=16,n=4),e.reserved&&(i|=8,n=3),e.sslCA&&(i|=4,n=2),e.emailCA&&(i|=2,n=1),e.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),e.value=b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,s)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);for(var f,d=0;d<e.altNames.length;++d){f=e.altNames[d];var s=f.value;if(f.type===7&&f.ip){if(s=Ge.util.bytesFromIP(f.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else f.type===8&&(f.oid?s=b.oidToDer(b.oidToDer(f.oid)):s=b.oidToDer(s));e.value.value.push(b.create(b.Class.CONTEXT_SPECIFIC,f.type,!1,s))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=b.create(b.Class.UNIVERSAL,b.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var h=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=h.toHex(),e.value=b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,h.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);var l=e.value.value;if(e.keyIdentifier){var g=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;l.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!1,g))}if(e.authorityCertIssuer){var y=[b.create(b.Class.CONTEXT_SPECIFIC,4,!0,[el(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];l.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,y))}if(e.serialNumber){var m=Ge.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);l.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if(e.name==="cRLDistributionPoints"){e.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);for(var l=e.value.value,_=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),E=b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[]),f,d=0;d<e.altNames.length;++d){f=e.altNames[d];var s=f.value;if(f.type===7&&f.ip){if(s=Ge.util.bytesFromIP(f.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else f.type===8&&(f.oid?s=b.oidToDer(b.oidToDer(f.oid)):s=b.oidToDer(s));E.value.push(b.create(b.Class.CONTEXT_SPECIFIC,f.type,!1,s))}_.value.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[E])),l.push(_)}if(typeof e.value=="undefined"){var r=new Error("Extension value not specified.");throw r.extension=e,r}return e}function z0(e,t){switch(e){case Nt["RSASSA-PSS"]:var r=[];return t.hash.algorithmOid!==void 0&&r.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.hash.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&r.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.mgf.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.mgf.hash.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&r.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(t.saltLength).getBytes())])),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,r);default:return b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")}}function A5(e){var t=b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var r=e.attributes,n=0;n<r.length;++n){var i=r[n],a=i.value,s=b.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===b.Type.UTF8&&(a=Ge.util.encodeUtf8(a));var l=!1;"valueConstructed"in i&&(l=i.valueConstructed);var c=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(i.type).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[b.create(b.Class.UNIVERSAL,s,l,a)])]);t.value.push(c)}return t}var I5=new Date("1950-01-01T00:00:00Z"),k5=new Date("2050-01-01T00:00:00Z");function nC(e){return e>=I5&&e<k5?b.create(b.Class.UNIVERSAL,b.Type.UTCTIME,!1,b.dateToUtcTime(e)):b.create(b.Class.UNIVERSAL,b.Type.GENERALIZEDTIME,!1,b.dateToGeneralizedTime(e))}xe.getTBSCertificate=function(e){var t=nC(e.validity.notBefore),r=nC(e.validity.notAfter),n=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.version).getBytes())]),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,Ge.util.hexToBytes(e.serialNumber)),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.siginfo.algorithmOid).getBytes()),z0(e.siginfo.algorithmOid,e.siginfo.parameters)]),el(e.issuer),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[t,r]),el(e.subject),xe.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,[b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!0,[b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(xe.certificateExtensionsToAsn1(e.extensions)),n};xe.getCertificationRequestInfo=function(e){var t=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.version).getBytes()),el(e.subject),xe.publicKeyToAsn1(e.publicKey),A5(e)]);return t};xe.distinguishedNameToAsn1=function(e){return el(e)};xe.certificateToAsn1=function(e){var t=e.tbsCertificate||xe.getTBSCertificate(e);return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[t,b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.signatureOid).getBytes()),z0(e.signatureOid,e.signatureParameters)]),b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])};xe.certificateExtensionsToAsn1=function(e){var t=b.create(b.Class.CONTEXT_SPECIFIC,3,!0,[]),r=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(xe.certificateExtensionToAsn1(e[n]));return t};xe.certificateExtensionToAsn1=function(e){var t=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);t.value.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.id).getBytes())),e.critical&&t.value.push(b.create(b.Class.UNIVERSAL,b.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return typeof e.value!="string"&&(r=b.toDer(r).getBytes()),t.value.push(b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,r)),t};xe.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||xe.getCertificationRequestInfo(e);return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[t,b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.signatureOid).getBytes()),z0(e.signatureOid,e.signatureParameters)]),b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])};xe.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(s){var l=r(s.issuer);return l},t.addCertificate=function(s){if(typeof s=="string"&&(s=Ge.pki.certificateFromPem(s)),n(s.subject),!t.hasCertificate(s))if(s.subject.hash in t.certs){var l=t.certs[s.subject.hash];Ge.util.isArray(l)||(l=[l]),l.push(s),t.certs[s.subject.hash]=l}else t.certs[s.subject.hash]=s},t.hasCertificate=function(s){typeof s=="string"&&(s=Ge.pki.certificateFromPem(s));var l=r(s.subject);if(!l)return!1;Ge.util.isArray(l)||(l=[l]);for(var c=b.toDer(xe.certificateToAsn1(s)).getBytes(),f=0;f<l.length;++f){var d=b.toDer(xe.certificateToAsn1(l[f])).getBytes();if(c===d)return!0}return!1},t.listAllCertificates=function(){var s=[];for(var l in t.certs)if(t.certs.hasOwnProperty(l)){var c=t.certs[l];if(!Ge.util.isArray(c))s.push(c);else for(var f=0;f<c.length;++f)s.push(c[f])}return s},t.removeCertificate=function(s){var l;if(typeof s=="string"&&(s=Ge.pki.certificateFromPem(s)),n(s.subject),!t.hasCertificate(s))return null;var c=r(s.subject);if(!Ge.util.isArray(c))return l=t.certs[s.subject.hash],delete t.certs[s.subject.hash],l;for(var f=b.toDer(xe.certificateToAsn1(s)).getBytes(),d=0;d<c.length;++d){var h=b.toDer(xe.certificateToAsn1(c[d])).getBytes();f===h&&(l=c[d],c.splice(d,1))}return c.length===0&&delete t.certs[s.subject.hash],l};function r(s){return n(s),t.certs[s.hash]||null}function n(s){if(!s.hash){var l=Ge.md.sha1.create();s.attributes=xe.RDNAttributesAsArray(el(s),l),s.hash=l.digest().toHex()}}if(e)for(var i=0;i<e.length;++i){var a=e[i];t.addCertificate(a)}return t};xe.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};xe.verifyCertificateChain=function(e,t,r){typeof r=="function"&&(r={verify:r}),r=r||{},t=t.slice(0);var n=t.slice(0),i=r.validityCheckDate;typeof i=="undefined"&&(i=new Date);var a=!0,s=null,l=0;do{var c=t.shift(),f=null,d=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:xe.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),s===null){if(f=t[0]||e.getIssuer(c),f===null&&c.isIssuer(c)&&(d=!0,f=c),f){var h=f;Ge.util.isArray(h)||(h=[h]);for(var g=!1;!g&&h.length>0;){f=h.shift();try{g=f.verify(c)}catch(O){}}g||(s={message:"Certificate signature is invalid.",error:xe.certificateError.bad_certificate})}s===null&&(!f||d)&&!e.hasCertificate(c)&&(s={message:"Certificate is not trusted.",error:xe.certificateError.unknown_ca})}if(s===null&&f&&!c.isIssuer(f)&&(s={message:"Certificate issuer is invalid.",error:xe.certificateError.bad_certificate}),s===null)for(var y={keyUsage:!0,basicConstraints:!0},m=0;s===null&&m<c.extensions.length;++m){var _=c.extensions[m];_.critical&&!(_.name in y)&&(s={message:"Certificate has an unsupported critical extension.",error:xe.certificateError.unsupported_certificate})}if(s===null&&(!a||t.length===0&&(!f||d))){var E=c.getExtension("basicConstraints"),w=c.getExtension("keyUsage");if(w!==null&&(!w.keyCertSign||E===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:xe.certificateError.bad_certificate}),s===null&&E!==null&&!E.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:xe.certificateError.bad_certificate}),s===null&&w!==null&&"pathLenConstraint"in E){var S=l-1;S>E.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:xe.certificateError.bad_certificate})}}var R=s===null?!0:s.error,B=r.verify?r.verify(R,l,n):R;if(B===!0)s=null;else throw R===!0&&(s={message:"The application rejected the certificate.",error:xe.certificateError.bad_certificate}),(B||B===0)&&(typeof B=="object"&&!Ge.util.isArray(B)?(B.message&&(s.message=B.message),B.error&&(s.error=B.error)):typeof B=="string"&&(s.error=B)),s;a=!1,++l}while(t.length>0);return!0}});var X0=ue((Q9,sC)=>{var Zt=ft();_i();Yo();Qa();W0();H0();Xn();mu();Jo();Ot();sd();var U=Zt.asn1,wt=Zt.pki,yu=sC.exports=Zt.pkcs12=Zt.pkcs12||{},aC={name:"ContentInfo",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:U.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},R5={name:"PFX",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:U.Class.UNIVERSAL,type:U.Type.INTEGER,constructed:!1,capture:"version"},aC,{name:"PFX.macData",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:U.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:U.Class.UNIVERSAL,type:U.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:U.Class.UNIVERSAL,type:U.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:U.Class.UNIVERSAL,type:U.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},B5={name:"SafeBag",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:U.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:U.Class.UNIVERSAL,type:U.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},N5={name:"Attribute",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:U.Class.UNIVERSAL,type:U.Type.SET,constructed:!0,capture:"values"}]},D5={name:"CertBag",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:U.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:U.Class.UNIVERSAL,type:U.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function vu(e,t,r,n){for(var i=[],a=0;a<e.length;a++)for(var s=0;s<e[a].safeBags.length;s++){var l=e[a].safeBags[s];if(!(n!==void 0&&l.type!==n)){if(t===null){i.push(l);continue}l.attributes[t]!==void 0&&l.attributes[t].indexOf(r)>=0&&i.push(l)}}return i}yu.pkcs12FromAsn1=function(e,t,r){typeof t=="string"?(r=t,t=!0):t===void 0&&(t=!0);var n={},i=[];if(!U.validate(e,R5,n,i)){var a=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw a.errors=a,a}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(E){var w={},S;return"localKeyId"in E?S=E.localKeyId:"localKeyIdHex"in E&&(S=Zt.util.hexToBytes(E.localKeyIdHex)),S===void 0&&!("friendlyName"in E)&&"bagType"in E&&(w[E.bagType]=vu(s.safeContents,null,null,E.bagType)),S!==void 0&&(w.localKeyId=vu(s.safeContents,"localKeyId",S,E.bagType)),"friendlyName"in E&&(w.friendlyName=vu(s.safeContents,"friendlyName",E.friendlyName,E.bagType)),w},getBagsByFriendlyName:function(E,w){return vu(s.safeContents,"friendlyName",E,w)},getBagsByLocalKeyId:function(E,w){return vu(s.safeContents,"localKeyId",E,w)}};if(n.version.charCodeAt(0)!==3){var a=new Error("PKCS#12 PFX of version other than 3 not supported.");throw a.version=n.version.charCodeAt(0),a}if(U.derToOid(n.contentType)!==wt.oids.data){var a=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw a.oid=U.derToOid(n.contentType),a}var l=n.content.value[0];if(l.tagClass!==U.Class.UNIVERSAL||l.type!==U.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=Q0(l),n.mac){var c=null,f=0,d=U.derToOid(n.macAlgorithm);switch(d){case wt.oids.sha1:c=Zt.md.sha1.create(),f=20;break;case wt.oids.sha256:c=Zt.md.sha256.create(),f=32;break;case wt.oids.sha384:c=Zt.md.sha384.create(),f=48;break;case wt.oids.sha512:c=Zt.md.sha512.create(),f=64;break;case wt.oids.md5:c=Zt.md.md5.create(),f=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var h=new Zt.util.ByteBuffer(n.macSalt),g="macIterations"in n?parseInt(Zt.util.bytesToHex(n.macIterations),16):1,y=yu.generateKey(r,h,3,g,f,c),m=Zt.hmac.create();m.start(c,y),m.update(l.value);var _=m.getMac();if(_.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return O5(s,l.value,t,r),s};function Q0(e){if(e.composed||e.constructed){for(var t=Zt.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function O5(e,t,r,n){if(t=U.fromDer(t,r),t.tagClass!==U.Class.UNIVERSAL||t.type!==U.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var a=t.value[i],s={},l=[];if(!U.validate(a,aC,s,l)){var c=new Error("Cannot read ContentInfo.");throw c.errors=l,c}var f={encrypted:!1},d=null,h=s.content.value[0];switch(U.derToOid(s.contentType)){case wt.oids.data:if(h.tagClass!==U.Class.UNIVERSAL||h.type!==U.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=Q0(h).value;break;case wt.oids.encryptedData:d=L5(h,n),f.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=U.derToOid(s.contentType),c}f.safeBags=P5(d,r,n),e.safeContents.push(f)}}function L5(e,t){var r={},n=[];if(!U.validate(e,Zt.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var a=U.derToOid(r.contentType);if(a!==wt.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=a,i}a=U.derToOid(r.encAlgorithm);var s=wt.pbe.getCipher(a,r.encParameter,t),l=Q0(r.encryptedContentAsn1),c=Zt.util.createBuffer(l.value);if(s.update(c),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function P5(e,t,r){if(!t&&e.length===0)return[];if(e=U.fromDer(e,t),e.tagClass!==U.Class.UNIVERSAL||e.type!==U.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<e.value.length;i++){var a=e.value[i],s={},l=[];if(!U.validate(a,B5,s,l)){var c=new Error("Cannot read SafeBag.");throw c.errors=l,c}var f={type:U.derToOid(s.bagId),attributes:U5(s.bagAttributes)};n.push(f);var d,h,g=s.bagValue.value[0];switch(f.type){case wt.oids.pkcs8ShroudedKeyBag:if(g=wt.decryptPrivateKeyInfo(g,r),g===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case wt.oids.keyBag:try{f.key=wt.privateKeyFromAsn1(g)}catch(m){f.key=null,f.asn1=g}continue;case wt.oids.certBag:d=D5,h=function(){if(U.derToOid(s.certId)!==wt.oids.x509Certificate){var m=new Error("Unsupported certificate type, only X.509 supported.");throw m.oid=U.derToOid(s.certId),m}var _=U.fromDer(s.cert,t);try{f.cert=wt.certificateFromAsn1(_,!0)}catch(E){f.cert=null,f.asn1=_}};break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=f.type,c}if(d!==void 0&&!U.validate(g,d,s,l)){var c=new Error("Cannot read PKCS#12 "+d.name);throw c.errors=l,c}h()}return n}function U5(e){var t={};if(e!==void 0)for(var r=0;r<e.length;++r){var n={},i=[];if(!U.validate(e[r],N5,n,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var s=U.derToOid(n.oid);if(wt.oids[s]!==void 0){t[wt.oids[s]]=[];for(var l=0;l<n.values.length;++l)t[wt.oids[s]].push(n.values[l].value)}}return t}yu.toPkcs12Asn1=function(e,t,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,a;if(i!==null)i=Zt.util.hexToBytes(i);else if(n.generateLocalKeyId)if(t){var s=Zt.util.isArray(t)?t[0]:t;typeof s=="string"&&(s=wt.certificateFromPem(s));var l=Zt.md.sha1.create();l.update(U.toDer(wt.certificateToAsn1(s)).getBytes()),i=l.digest().getBytes()}else i=Zt.random.getBytes(20);var c=[];i!==null&&c.push(U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(wt.oids.localKeyId).getBytes()),U.create(U.Class.UNIVERSAL,U.Type.SET,!0,[U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&c.push(U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(wt.oids.friendlyName).getBytes()),U.create(U.Class.UNIVERSAL,U.Type.SET,!0,[U.create(U.Class.UNIVERSAL,U.Type.BMPSTRING,!1,n.friendlyName)])])),c.length>0&&(a=U.create(U.Class.UNIVERSAL,U.Type.SET,!0,c));var f=[],d=[];t!==null&&(Zt.util.isArray(t)?d=t:d=[t]);for(var h=[],g=0;g<d.length;++g){t=d[g],typeof t=="string"&&(t=wt.certificateFromPem(t));var y=g===0?a:void 0,m=wt.certificateToAsn1(t),_=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(wt.oids.certBag).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(wt.oids.x509Certificate).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,U.toDer(m).getBytes())])])]),y]);h.push(_)}if(h.length>0){var E=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,h),w=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(wt.oids.data).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,U.toDer(E).getBytes())])]);f.push(w)}var S=null;if(e!==null){var R=wt.wrapRsaPrivateKey(wt.privateKeyToAsn1(e));r===null?S=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(wt.oids.keyBag).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[R]),a]):S=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(wt.oids.pkcs8ShroudedKeyBag).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[wt.encryptPrivateKeyInfo(R,r,n)]),a]);var B=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[S]),O=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(wt.oids.data).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,U.toDer(B).getBytes())])]);f.push(O)}var N=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,f),ee;if(n.useMac){var l=Zt.md.sha1.create(),q=new Zt.util.ByteBuffer(Zt.random.getBytes(n.saltSize)),F=n.count,e=yu.generateKey(r,q,3,F,20),ce=Zt.hmac.create();ce.start(l,e),ce.update(U.toDer(N).getBytes());var se=ce.getMac();ee=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(wt.oids.sha1).getBytes()),U.create(U.Class.UNIVERSAL,U.Type.NULL,!1,"")]),U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,se.getBytes())]),U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,q.getBytes()),U.create(U.Class.UNIVERSAL,U.Type.INTEGER,!1,U.integerToDer(F).getBytes())])}return U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.INTEGER,!1,U.integerToDer(3).getBytes()),U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(wt.oids.data).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,U.toDer(N).getBytes())])]),ee])};yu.generateKey=Zt.pbe.generatePkcs12Key});var Z0=ue((X9,oC)=>{var $a=ft();_i();Qa();H0();Bs();Xf();X0();nd();mu();Ot();sd();var J0=$a.asn1,tl=oC.exports=$a.pki=$a.pki||{};tl.pemToDer=function(e){var t=$a.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return $a.util.createBuffer(t.body)};tl.privateKeyFromPem=function(e){var t=$a.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=J0.fromDer(t.body);return tl.privateKeyFromAsn1(n)};tl.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:J0.toDer(tl.privateKeyToAsn1(e)).getBytes()};return $a.pem.encode(r,{maxline:t})};tl.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:J0.toDer(e).getBytes()};return $a.pem.encode(r,{maxline:t})}});var ig=ue((J9,gC)=>{var me=ft();_i();Yo();Wf();Bs();Z0();Xn();Jo();Ot();var od=function(e,t,r,n){var i=me.util.createBuffer(),a=e.length>>1,s=a+(e.length&1),l=e.substr(0,s),c=e.substr(a,s),f=me.util.createBuffer(),d=me.hmac.create();r=t+r;var h=Math.ceil(n/16),g=Math.ceil(n/20);d.start("MD5",l);var y=me.util.createBuffer();f.putBytes(r);for(var m=0;m<h;++m)d.start(null,null),d.update(f.getBytes()),f.putBuffer(d.digest()),d.start(null,null),d.update(f.bytes()+r),y.putBuffer(d.digest());d.start("SHA1",c);var _=me.util.createBuffer();f.clear(),f.putBytes(r);for(var m=0;m<g;++m)d.start(null,null),d.update(f.getBytes()),f.putBuffer(d.digest()),d.start(null,null),d.update(f.bytes()+r),_.putBuffer(d.digest());return i.putBytes(me.util.xorBytes(y.getBytes(),_.getBytes(),n)),i},M5=function(e,t,r){var n=me.hmac.create();n.start("SHA1",e);var i=me.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},F5=function(e,t,r){var n=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=me.util.createBuffer(i),t.length=i.length,n=!0}catch(a){}return n},q5=function(e,t,r){var n=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=me.util.createBuffer(i),t.length=i.length,n=!0}catch(a){}return n},Pn=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32();break}return me.util.createBuffer(e.getBytes(r))},ei=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},T={};T.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};T.SupportedVersions=[T.Versions.TLS_1_1,T.Versions.TLS_1_0];T.Version=T.SupportedVersions[0];T.MaxFragment=16384-1024;T.ConnectionEnd={server:0,client:1};T.PRFAlgorithm={tls_prf_sha256:0};T.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};T.CipherType={stream:0,block:1,aead:2};T.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};T.CompressionMethod={none:0,deflate:1};T.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};T.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};T.Alert={};T.Alert.Level={warning:1,fatal:2};T.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};T.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};T.CipherSuites={};T.getCipherSuite=function(e){var t=null;for(var r in T.CipherSuites){var n=T.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t};T.handleUnexpected=function(e,t){var r=!e.open&&e.entity===T.ConnectionEnd.client;r||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unexpected_message}})};T.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(T.queue(e,T.createAlert(e,{level:T.Alert.Level.warning,description:T.Alert.Description.no_renegotiation})),T.flush(e)),e.process()};T.parseHelloMessage=function(e,t,r){var n=null,i=e.entity===T.ConnectionEnd.client;if(r<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});else{var a=t.fragment,s=a.length();if(n={version:{major:a.getByte(),minor:a.getByte()},random:me.util.createBuffer(a.getBytes(32)),session_id:Pn(a,1),extensions:[]},i?(n.cipher_suite=a.getBytes(2),n.compression_method=a.getByte()):(n.cipher_suites=Pn(a,2),n.compression_methods=Pn(a,1)),s=r-(s-a.length()),s>0){for(var l=Pn(a,2);l.length()>0;)n.extensions.push({type:[l.getByte(),l.getByte()],data:Pn(l,2)});if(!i)for(var c=0;c<n.extensions.length;++c){var f=n.extensions[c];if(f.type[0]===0&&f.type[1]===0)for(var d=Pn(f.data,2);d.length()>0;){var h=d.getByte();if(h!==0)break;e.session.extensions.server_name.serverNameList.push(Pn(d,2).getBytes())}}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=T.getCipherSuite(n.cipher_suite);else for(var g=me.util.createBuffer(n.cipher_suites.bytes());g.length()>0&&(e.session.cipherSuite=T.getCipherSuite(g.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.handshake_failure},cipherSuite:me.util.bytesToHex(n.cipher_suite)});i?e.session.compressionMethod=n.compression_method:e.session.compressionMethod=T.CompressionMethod.none}return n};T.createSecurityParameters=function(e,t){var r=e.entity===T.ConnectionEnd.client,n=t.random.bytes(),i=r?e.session.sp.client_random:n,a=r?n:T.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:T.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:a}};T.handleServerHello=function(e,t,r){var n=T.parseHelloMessage(e,t,r);if(!e.fail){if(n.version.minor<=e.version.minor)e.version.minor=n.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.protocol_version}});e.session.version=e.version;var i=n.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=uC,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=V5,e.session.resuming=!1,T.createSecurityParameters(e,n)),e.session.id=i,e.process()}};T.handleClientHello=function(e,t,r){var n=T.parseHelloMessage(e,t,r);if(!e.fail){var i=n.session_id.bytes(),a=null;if(e.sessionCache&&(a=e.sessionCache.getSession(i),a===null?i="":(a.version.major!==n.version.major||a.version.minor>n.version.minor)&&(a=null,i="")),i.length===0&&(i=me.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=n.version,e.session.sp={},a)e.version=e.session.version=a.version,e.session.sp=a.sp;else{for(var s,l=1;l<T.SupportedVersions.length&&(s=T.SupportedVersions[l],!(s.minor<=n.version.minor));++l);e.version={major:s.major,minor:s.minor},e.session.version=e.version}a!==null?(e.expect=eg,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()):(e.expect=e.verifyClient!==!1?Q5:$0,e.session.resuming=!1,T.createSecurityParameters(e,n)),e.open=!0,T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createServerHello(e)})),e.session.resuming?(T.queue(e,T.createRecord(e,{type:T.ContentType.change_cipher_spec,data:T.createChangeCipherSpec()})),e.state.pending=T.createConnectionState(e),e.state.current.write=e.state.pending.write,T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createFinished(e)}))):(T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createCertificate(e)})),e.fail||(T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createServerKeyExchange(e)})),e.verifyClient!==!1&&T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createCertificateRequest(e)})),T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createServerHelloDone(e)})))),T.flush(e),e.process()}};T.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_list:Pn(n,3)},a,s,l=[];try{for(;i.certificate_list.length()>0;)a=Pn(i.certificate_list,3),s=me.asn1.fromDer(a),a=me.pki.certificateFromAsn1(s,!0),l.push(a)}catch(f){return e.error(e,{message:"Could not parse certificate list.",cause:f,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.bad_certificate}})}var c=e.entity===T.ConnectionEnd.client;(c||e.verifyClient===!0)&&l.length===0?e.error(e,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}}):l.length===0?e.expect=c?lC:$0:(c?e.session.serverCertificate=l[0]:e.session.clientCertificate=l[0],T.verifyCertificateChain(e,l)&&(e.expect=c?lC:$0)),e.process()};T.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unsupported_certificate}});e.expect=K5,e.process()};T.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unsupported_certificate}});var n=t.fragment,i={enc_pre_master_secret:Pn(n,2).getBytes()},a=null;if(e.getPrivateKey)try{a=e.getPrivateKey(e,e.session.serverCertificate),a=me.pki.privateKeyFromPem(a)}catch(c){e.error(e,{message:"Could not get private key.",cause:c,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}})}if(a===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}});try{var s=e.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var l=e.session.clientHelloVersion;if(l.major!==s.pre_master_secret.charCodeAt(0)||l.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(c){s.pre_master_secret=me.random.getBytes(48)}e.expect=eg,e.session.clientCertificate!==null&&(e.expect=X5),e.process()};T.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_types:Pn(n,1),certificate_authorities:Pn(n,2)};e.session.certificateRequest=i,e.expect=j5,e.process()};T.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a={signature:Pn(n,2).getBytes()},s=me.util.createBuffer();s.putBuffer(e.session.md5.digest()),s.putBuffer(e.session.sha1.digest()),s=s.getBytes();try{var l=e.session.clientCertificate;if(!l.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch(c){return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.handshake_failure}})}e.expect=eg,e.process()};T.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.record_overflow}});if(e.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.insufficient_security}},i=0,a=e.verify(e,n.alert.description,i,[]);if(a!==!0)return(a||a===0)&&(typeof a=="object"&&!me.util.isArray(a)?(a.message&&(n.message=a.message),a.alert&&(n.alert.description=a.alert)):typeof a=="number"&&(n.alert.description=a)),e.error(e,n)}e.session.certificateRequest!==null&&(t=T.createRecord(e,{type:T.ContentType.handshake,data:T.createCertificate(e)}),T.queue(e,t)),t=T.createRecord(e,{type:T.ContentType.handshake,data:T.createClientKeyExchange(e)}),T.queue(e,t),e.expect=Y5;var s=function(l,c){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&T.queue(l,T.createRecord(l,{type:T.ContentType.handshake,data:T.createCertificateVerify(l,c)})),T.queue(l,T.createRecord(l,{type:T.ContentType.change_cipher_spec,data:T.createChangeCipherSpec()})),l.state.pending=T.createConnectionState(l),l.state.current.write=l.state.pending.write,T.queue(l,T.createRecord(l,{type:T.ContentType.handshake,data:T.createFinished(l)})),l.expect=uC,T.flush(l),l.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return s(e,null);T.getClientSignature(e,s)};T.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var r=e.entity===T.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=T.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?H5:J5,e.process()};T.handleFinished=function(e,t,r){var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a=t.fragment.getBytes();n=me.util.createBuffer(),n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var s=e.entity===T.ConnectionEnd.client,l=s?"server finished":"client finished",c=e.session.sp,f=12,d=od;if(n=d(c.master_secret,l,n.getBytes(),f),n.getBytes()!==a)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&s||!e.session.resuming&&!s)&&(T.queue(e,T.createRecord(e,{type:T.ContentType.change_cipher_spec,data:T.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createFinished(e)}))),e.expect=s?W5:Z5,e.handshaking=!1,++e.handshakes,e.peerCertificate=s?e.session.serverCertificate:e.session.clientCertificate,T.flush(e),e.isConnected=!0,e.connected(e),e.process()};T.handleAlert=function(e,t){var r=t.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case T.Alert.Description.close_notify:i="Connection closed.";break;case T.Alert.Description.unexpected_message:i="Unexpected message.";break;case T.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case T.Alert.Description.decryption_failed:i="Decryption failed.";break;case T.Alert.Description.record_overflow:i="Record overflow.";break;case T.Alert.Description.decompression_failure:i="Decompression failed.";break;case T.Alert.Description.handshake_failure:i="Handshake failure.";break;case T.Alert.Description.bad_certificate:i="Bad certificate.";break;case T.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case T.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case T.Alert.Description.certificate_expired:i="Certificate expired.";break;case T.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case T.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case T.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case T.Alert.Description.access_denied:i="Access denied.";break;case T.Alert.Description.decode_error:i="Decode error.";break;case T.Alert.Description.decrypt_error:i="Decrypt error.";break;case T.Alert.Description.export_restriction:i="Export restriction.";break;case T.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case T.Alert.Description.insufficient_security:i="Insufficient security.";break;case T.Alert.Description.internal_error:i="Internal error.";break;case T.Alert.Description.user_canceled:i="User canceled.";break;case T.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===T.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===T.ConnectionEnd.client?"server":"client",alert:n}),e.process()};T.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return e.fragmented=t,t.fragment=me.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var a=r.bytes(i+4);r.read+=4,n in ud[e.entity][e.expect]?(e.entity===T.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:me.md.md5.create(),sha1:me.md.sha1.create()}),n!==T.HandshakeType.hello_request&&n!==T.HandshakeType.certificate_verify&&n!==T.HandshakeType.finished&&(e.session.md5.update(a),e.session.sha1.update(a)),ud[e.entity][e.expect][n](e,t,i)):T.handleUnexpected(e,t)};T.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};T.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt16(),a=r.getBytes(i);if(n===T.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>a.length)return e.process();T.queue(e,T.createRecord(e,{type:T.ContentType.heartbeat,data:T.createHeartbeat(T.HeartbeatMessageType.heartbeat_response,a)})),T.flush(e)}else if(n===T.HeartbeatMessageType.heartbeat_response){if(a!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,me.util.createBuffer(a))}e.process()};var G5=0,V5=1,lC=2,K5=3,j5=4,uC=5,H5=6,W5=7,Y5=8,z5=0,Q5=1,$0=2,X5=3,eg=4,J5=5,Z5=6,x=T.handleUnexpected,cC=T.handleChangeCipherSpec,Kr=T.handleAlert,cn=T.handleHandshake,fC=T.handleApplicationData,jr=T.handleHeartbeat,tg=[];tg[T.ConnectionEnd.client]=[[x,Kr,cn,x,jr],[x,Kr,cn,x,jr],[x,Kr,cn,x,jr],[x,Kr,cn,x,jr],[x,Kr,cn,x,jr],[cC,Kr,x,x,jr],[x,Kr,cn,x,jr],[x,Kr,cn,fC,jr],[x,Kr,cn,x,jr]];tg[T.ConnectionEnd.server]=[[x,Kr,cn,x,jr],[x,Kr,cn,x,jr],[x,Kr,cn,x,jr],[x,Kr,cn,x,jr],[cC,Kr,x,x,jr],[x,Kr,cn,x,jr],[x,Kr,cn,fC,jr],[x,Kr,cn,x,jr]];var es=T.handleHelloRequest,$5=T.handleServerHello,dC=T.handleCertificate,hC=T.handleServerKeyExchange,rg=T.handleCertificateRequest,ld=T.handleServerHelloDone,pC=T.handleFinished,ud=[];ud[T.ConnectionEnd.client]=[[x,x,$5,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[es,x,x,x,x,x,x,x,x,x,x,dC,hC,rg,ld,x,x,x,x,x,x],[es,x,x,x,x,x,x,x,x,x,x,x,hC,rg,ld,x,x,x,x,x,x],[es,x,x,x,x,x,x,x,x,x,x,x,x,rg,ld,x,x,x,x,x,x],[es,x,x,x,x,x,x,x,x,x,x,x,x,x,ld,x,x,x,x,x,x],[es,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[es,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,pC],[es,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[es,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x]];var e8=T.handleClientHello,t8=T.handleClientKeyExchange,r8=T.handleCertificateVerify;ud[T.ConnectionEnd.server]=[[x,e8,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,dC,x,x,x,x,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,t8,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,r8,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,pC],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x]];T.generateKeys=function(e,t){var r=od,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,a=e.version.major===T.Versions.TLS_1_0.major&&e.version.minor===T.Versions.TLS_1_0.minor;a&&(i+=2*t.fixed_iv_length);var s=r(t.master_secret,"key expansion",n,i),l={client_write_MAC_key:s.getBytes(t.mac_key_length),server_write_MAC_key:s.getBytes(t.mac_key_length),client_write_key:s.getBytes(t.enc_key_length),server_write_key:s.getBytes(t.enc_key_length)};return a&&(l.client_write_IV=s.getBytes(t.fixed_iv_length),l.server_write_IV=s.getBytes(t.fixed_iv_length)),l};T.createConnectionState=function(e){var t=e.entity===T.ConnectionEnd.client,r=function(){var a={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){a.sequenceNumber[1]===4294967295?(a.sequenceNumber[1]=0,++a.sequenceNumber[0]):++a.sequenceNumber[1]}};return a},n={read:r(),write:r()};if(n.read.update=function(a,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(a,s,n.read)||a.error(a,{message:"Could not decompress record.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.decompression_failure}}):a.error(a,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.bad_record_mac}}),!a.fail},n.write.update=function(a,s){return n.write.compressFunction(a,s,n.write)?n.write.cipherFunction(s,n.write)||a.error(a,{message:"Could not encrypt record.",send:!1,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}}):a.error(a,{message:"Could not compress record.",send:!1,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}}),!a.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=T.generateKeys(e,i),n.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,i),i.compression_algorithm){case T.CompressionMethod.none:break;case T.CompressionMethod.deflate:n.read.compressFunction=q5,n.write.compressFunction=F5;break;default:throw new Error("Unsupported compression algorithm.")}}return n};T.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,r=me.util.createBuffer();return r.putInt32(t),r.putBytes(me.random.getBytes(28)),r};T.createRecord=function(e,t){if(!t.data)return null;var r={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return r};T.createAlert=function(e,t){var r=me.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),T.createRecord(e,{type:T.ContentType.alert,data:r})};T.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=me.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1])}var i=t.length(),a=me.util.createBuffer();a.putByte(T.CompressionMethod.none);var s=a.length(),l=me.util.createBuffer();if(e.virtualHost){var c=me.util.createBuffer();c.putByte(0),c.putByte(0);var f=me.util.createBuffer();f.putByte(0),ei(f,2,me.util.createBuffer(e.virtualHost));var d=me.util.createBuffer();ei(d,2,f),ei(c,2,d),l.putBuffer(c)}var h=l.length();h>0&&(h+=2);var g=e.session.id,y=g.length+1+2+4+28+2+i+1+s+h,m=me.util.createBuffer();return m.putByte(T.HandshakeType.client_hello),m.putInt24(y),m.putByte(e.version.major),m.putByte(e.version.minor),m.putBytes(e.session.sp.client_random),ei(m,1,me.util.createBuffer(g)),ei(m,2,t),ei(m,1,a),h>0&&ei(m,2,l),m};T.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=me.util.createBuffer();return n.putByte(T.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),ei(n,1,me.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n};T.createCertificate=function(e){var t=e.entity===T.ConnectionEnd.client,r=null;if(e.getCertificate){var n;t?n=e.session.certificateRequest:n=e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,n)}var i=me.util.createBuffer();if(r!==null)try{me.util.isArray(r)||(r=[r]);for(var a=null,s=0;s<r.length;++s){var l=me.pem.decode(r[s])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=l.type,c}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var f=me.util.createBuffer(l.body);a===null&&(a=me.asn1.fromDer(f.bytes(),!1));var d=me.util.createBuffer();ei(d,3,f),i.putBuffer(d)}r=me.pki.certificateFromAsn1(a),t?e.session.clientCertificate=r:e.session.serverCertificate=r}catch(y){return e.error(e,{message:"Could not send certificate list.",cause:y,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.bad_certificate}})}var h=3+i.length(),g=me.util.createBuffer();return g.putByte(T.HandshakeType.certificate),g.putInt24(h),ei(g,3,i),g};T.createClientKeyExchange=function(e){var t=me.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(me.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var n=e.session.serverCertificate.publicKey;t=n.encrypt(r.pre_master_secret);var i=t.length+2,a=me.util.createBuffer();return a.putByte(T.HandshakeType.client_key_exchange),a.putInt24(i),a.putInt16(t.length),a.putBytes(t),a};T.createServerKeyExchange=function(e){var t=0,r=me.util.createBuffer();return t>0&&(r.putByte(T.HandshakeType.server_key_exchange),r.putInt24(t)),r};T.getClientSignature=function(e,t){var r=me.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(n,i,a){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=me.pki.privateKeyFromPem(s)}catch(l){n.error(n,{message:"Could not get private key.",cause:l,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}}):i=s.sign(i,null),a(n,i)},e.getSignature(e,r,t)};T.createCertificateVerify=function(e,t){var r=t.length+2,n=me.util.createBuffer();return n.putByte(T.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n};T.createCertificateRequest=function(e){var t=me.util.createBuffer();t.putByte(1);var r=me.util.createBuffer();for(var n in e.caStore.certs){var i=e.caStore.certs[n],a=me.pki.distinguishedNameToAsn1(i.subject),s=me.asn1.toDer(a);r.putInt16(s.length()),r.putBuffer(s)}var l=1+t.length()+2+r.length(),c=me.util.createBuffer();return c.putByte(T.HandshakeType.certificate_request),c.putInt24(l),ei(c,1,t),ei(c,2,r),c};T.createServerHelloDone=function(e){var t=me.util.createBuffer();return t.putByte(T.HandshakeType.server_hello_done),t.putInt24(0),t};T.createChangeCipherSpec=function(){var e=me.util.createBuffer();return e.putByte(1),e};T.createFinished=function(e){var t=me.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===T.ConnectionEnd.client,n=e.session.sp,i=12,a=od,s=r?"client finished":"server finished";t=a(n.master_secret,s,t.getBytes(),i);var l=me.util.createBuffer();return l.putByte(T.HandshakeType.finished),l.putInt24(t.length()),l.putBuffer(t),l};T.createHeartbeat=function(e,t,r){typeof r=="undefined"&&(r=t.length);var n=me.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);var i=n.length(),a=Math.max(16,i-r-3);return n.putBytes(me.random.getBytes(a)),n};T.queue=function(e,t){if(!!t&&!(t.fragment.length()===0&&(t.type===T.ContentType.handshake||t.type===T.ContentType.alert||t.type===T.ContentType.change_cipher_spec))){if(t.type===T.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var n;if(t.fragment.length()<=T.MaxFragment)n=[t];else{n=[];for(var i=t.fragment.bytes();i.length>T.MaxFragment;)n.push(T.createRecord(e,{type:t.type,data:me.util.createBuffer(i.slice(0,T.MaxFragment))})),i=i.slice(T.MaxFragment);i.length>0&&n.push(T.createRecord(e,{type:t.type,data:me.util.createBuffer(i)}))}for(var a=0;a<n.length&&!e.fail;++a){var s=n[a],l=e.state.current.write;l.update(e,s)&&e.records.push(s)}}};T.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var ng=function(e){switch(e){case!0:return!0;case me.pki.certificateError.bad_certificate:return T.Alert.Description.bad_certificate;case me.pki.certificateError.unsupported_certificate:return T.Alert.Description.unsupported_certificate;case me.pki.certificateError.certificate_revoked:return T.Alert.Description.certificate_revoked;case me.pki.certificateError.certificate_expired:return T.Alert.Description.certificate_expired;case me.pki.certificateError.certificate_unknown:return T.Alert.Description.certificate_unknown;case me.pki.certificateError.unknown_ca:return T.Alert.Description.unknown_ca;default:return T.Alert.Description.bad_certificate}},n8=function(e){switch(e){case!0:return!0;case T.Alert.Description.bad_certificate:return me.pki.certificateError.bad_certificate;case T.Alert.Description.unsupported_certificate:return me.pki.certificateError.unsupported_certificate;case T.Alert.Description.certificate_revoked:return me.pki.certificateError.certificate_revoked;case T.Alert.Description.certificate_expired:return me.pki.certificateError.certificate_expired;case T.Alert.Description.certificate_unknown:return me.pki.certificateError.certificate_unknown;case T.Alert.Description.unknown_ca:return me.pki.certificateError.unknown_ca;default:return me.pki.certificateError.bad_certificate}};T.verifyCertificateChain=function(e,t){try{var r={};for(var n in e.verifyOptions)r[n]=e.verifyOptions[n];r.verify=function(a,s,l){var c=ng(a),f=e.verify(e,a,s,l);if(f!==!0){if(typeof f=="object"&&!me.util.isArray(f)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:T.Alert.Level.fatal,description:T.Alert.Description.bad_certificate},f.message&&(d.message=f.message),f.alert&&(d.alert.description=f.alert),d}f!==a&&(f=n8(f))}return f},me.pki.verifyCertificateChain(e.caStore,t,r)}catch(a){var i=a;(typeof i!="object"||me.util.isArray(i))&&(i={send:!0,alert:{level:T.Alert.Level.fatal,description:ng(a)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:T.Alert.Level.fatal,description:ng(i.error)}),e.error(e,i)}return!e.fail};T.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{r={},r.cache=e||{},r.capacity=Math.max(t||100,1),r.order=[];for(var n in e)r.order.length<=t?r.order.push(n):delete e[n];r.getSession=function(i){var a=null,s=null;if(i?s=me.util.bytesToHex(i):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){a=r.cache[s],delete r.cache[s];for(var l in r.order)if(r.order[l]===s){r.order.splice(l,1);break}}return a},r.setSession=function(i,a){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=me.util.bytesToHex(i);r.order.push(s),r.cache[s]=a}}return r};T.createConnection=function(e){var t=null;e.caStore?me.util.isArray(e.caStore)?t=me.pki.createCaStore(e.caStore):t=e.caStore:t=me.pki.createCaStore();var r=e.cipherSuites||null;if(r===null){r=[];for(var n in T.CipherSuites)r.push(T.CipherSuites[n])}var i=e.server?T.ConnectionEnd.server:T.ConnectionEnd.client,a=e.sessionCache?T.createSessionCache(e.sessionCache):null,s={version:{major:T.Version.major,minor:T.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:a,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(d,h,g,y){return h},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:me.util.createBuffer(),tlsData:me.util.createBuffer(),data:me.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(d,h){h.origin=h.origin||(d.entity===T.ConnectionEnd.client?"client":"server"),h.send&&(T.queue(d,T.createAlert(d,h.alert)),T.flush(d));var g=h.fatal!==!1;g&&(d.fail=!0),e.error(d,h),g&&d.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};s.reset=function(d){s.version={major:T.Version.major,minor:T.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===T.ConnectionEnd.client?G5:z5,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(d||typeof d=="undefined"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=T.createConnectionState(s)},s.reset();var l=function(d,h){var g=h.type-T.ContentType.change_cipher_spec,y=tg[d.entity][d.expect];g in y?y[g](d,h):T.handleUnexpected(d,h)},c=function(d){var h=0,g=d.input,y=g.length();if(y<5)h=5-y;else{d.record={type:g.getByte(),version:{major:g.getByte(),minor:g.getByte()},length:g.getInt16(),fragment:me.util.createBuffer(),ready:!1};var m=d.record.version.major===d.version.major;m&&d.session&&d.session.version&&(m=d.record.version.minor===d.version.minor),m||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.protocol_version}})}return h},f=function(d){var h=0,g=d.input,y=g.length();if(y<d.record.length)h=d.record.length-y;else{d.record.fragment.putBytes(g.getBytes(d.record.length)),g.compact();var m=d.state.current.read;m.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unexpected_message}})),d.record.ready=!0)}return h};return s.handshake=function(d){if(s.entity!==T.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,d=d||"";var h=null;d.length>0&&(s.sessionCache&&(h=s.sessionCache.getSession(d)),h===null&&(d="")),d.length===0&&s.sessionCache&&(h=s.sessionCache.getSession(),h!==null&&(d=h.id)),s.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:me.md.md5.create(),sha1:me.md.sha1.create()},h&&(s.version=h.version,s.session.sp=h.sp),s.session.sp.client_random=T.createRandom().getBytes(),s.open=!0,T.queue(s,T.createRecord(s,{type:T.ContentType.handshake,data:T.createClientHello(s)})),T.flush(s)}},s.process=function(d){var h=0;return d&&s.input.putBytes(d),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(h=c(s)),!s.fail&&s.record!==null&&!s.record.ready&&(h=f(s)),!s.fail&&s.record!==null&&s.record.ready&&l(s,s.record)),h},s.prepare=function(d){return T.queue(s,T.createRecord(s,{type:T.ContentType.application_data,data:me.util.createBuffer(d)})),T.flush(s)},s.prepareHeartbeatRequest=function(d,h){return d instanceof me.util.ByteBuffer&&(d=d.bytes()),typeof h=="undefined"&&(h=d.length),s.expectedHeartbeatPayload=d,T.queue(s,T.createRecord(s,{type:T.ContentType.heartbeat,data:T.createHeartbeat(T.HeartbeatMessageType.heartbeat_request,d,h)})),T.flush(s)},s.close=function(d){if(!s.fail&&s.sessionCache&&s.session){var h={id:s.session.id,version:s.session.version,sp:s.session.sp};h.sp.keys=null,s.sessionCache.setSession(h.id,h)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,T.queue(s,T.createAlert(s,{level:T.Alert.Level.warning,description:T.Alert.Description.close_notify})),T.flush(s)),s.closed(s)),s.reset(d)},s};gC.exports=me.tls=me.tls||{};for(cd in T)typeof T[cd]!="function"&&(me.tls[cd]=T[cd]);var cd;me.tls.prf_tls1=od;me.tls.hmac_sha1=M5;me.tls.createSessionCache=T.createSessionCache;me.tls.createConnection=T.createConnection});var vC=ue((Z9,yC)=>{var ts=ft();za();ig();var ti=yC.exports=ts.tls;ti.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=ti.BulkCipherAlgorithm.aes,e.cipher_type=ti.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=ti.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:mC};ti.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=ti.BulkCipherAlgorithm.aes,e.cipher_type=ti.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=ti.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:mC};function mC(e,t,r){var n=t.entity===ts.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:ts.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:ts.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=o8,e.write.cipherFunction=i8,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=ti.hmac_sha1}function i8(e,t){var r=!1,n=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(n),t.updateSequenceNumber();var i;e.version.minor===ti.Versions.TLS_1_0.minor?i=t.cipherState.init?null:t.cipherState.iv:i=ts.random.getBytesSync(16),t.cipherState.init=!0;var a=t.cipherState.cipher;return a.start({iv:i}),e.version.minor>=ti.Versions.TLS_1_1.minor&&a.output.putBytes(i),a.update(e.fragment),a.finish(a8)&&(e.fragment=a.output,e.length=e.fragment.length(),r=!0),r}function a8(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function s8(e,t,r){var n=!0;if(r){for(var i=t.length(),a=t.last(),s=i-1-a;s<i-1;++s)n=n&&t.at(s)==a;n&&t.truncate(a+1)}return n}function o8(e,t){var r=!1,n;e.version.minor===ti.Versions.TLS_1_0.minor?n=t.cipherState.init?null:t.cipherState.iv:n=e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:n}),i.update(e.fragment),r=i.finish(s8);var a=t.macLength,s=ts.random.getBytesSync(a),l=i.output.length();l>=a?(e.fragment=i.output.getBytes(l-a),s=i.output.getBytes(a)):e.fragment=i.output.getBytes(),e.fragment=ts.util.createBuffer(e.fragment),e.length=e.fragment.length();var c=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),r=l8(t.macKey,s,c)&&r,r}function l8(e,t,r){var n=ts.hmac.create();return n.start("SHA1",e),n.update(t),t=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),t===r}});var og=ue(($9,CC)=>{var nr=ft();Fi();Ot();var _u=CC.exports=nr.sha512=nr.sha512||{};nr.md.sha512=nr.md.algorithms.sha512=_u;var _C=nr.sha384=nr.sha512.sha384=nr.sha512.sha384||{};_C.create=function(){return _u.create("SHA-384")};nr.md.sha384=nr.md.algorithms.sha384=_C;nr.sha512.sha256=nr.sha512.sha256||{create:function(){return _u.create("SHA-512/256")}};nr.md["sha512/256"]=nr.md.algorithms["sha512/256"]=nr.sha512.sha256;nr.sha512.sha224=nr.sha512.sha224||{create:function(){return _u.create("SHA-512/224")}};nr.md["sha512/224"]=nr.md.algorithms["sha512/224"]=nr.sha512.sha224;_u.create=function(e){if(EC||u8(),typeof e=="undefined"&&(e="SHA-512"),!(e in Us))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=Us[e],r=null,n=nr.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(e){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var l={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var c=l.messageLengthSize/4,f=0;f<c;++f)l.fullMessageLength.push(0);n=nr.util.createBuffer(),r=new Array(t.length);for(var f=0;f<t.length;++f)r[f]=t[f].slice(0);return l},l.start(),l.update=function(c,f){f==="utf8"&&(c=nr.util.encodeUtf8(c));var d=c.length;l.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var h=l.fullMessageLength.length-1;h>=0;--h)l.fullMessageLength[h]+=d[1],d[1]=d[0]+(l.fullMessageLength[h]/4294967296>>>0),l.fullMessageLength[h]=l.fullMessageLength[h]>>>0,d[0]=d[1]/4294967296>>>0;return n.putBytes(c),wC(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),l},l.digest=function(){var c=nr.util.createBuffer();c.putBytes(n.bytes());var f=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,d=f&l.blockLength-1;c.putBytes(ag.substr(0,l.blockLength-d));for(var h,g,y=l.fullMessageLength[0]*8,m=0;m<l.fullMessageLength.length-1;++m)h=l.fullMessageLength[m+1]*8,g=h/4294967296>>>0,y+=g,c.putInt32(y>>>0),y=h>>>0;c.putInt32(y);for(var _=new Array(r.length),m=0;m<r.length;++m)_[m]=r[m].slice(0);wC(_,i,c);var E=nr.util.createBuffer(),w;e==="SHA-512"?w=_.length:e==="SHA-384"?w=_.length-2:w=_.length-4;for(var m=0;m<w;++m)E.putInt32(_[m][0]),(m!==w-1||e!=="SHA-512/224")&&E.putInt32(_[m][1]);return E},l};var ag=null,EC=!1,sg=null,Us=null;function u8(){ag=String.fromCharCode(128),ag+=nr.util.fillString(String.fromCharCode(0),128),sg=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Us={},Us["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Us["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Us["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Us["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],EC=!0}function wC(e,t,r){for(var n,i,a,s,l,c,f,d,h,g,y,m,_,E,w,S,R,B,O,N,ee,q,F,ce,se,ve,Ie,Be,Se,Te,_e,Xe,Ve,yt,ht,ze=r.length();ze>=128;){for(Se=0;Se<16;++Se)t[Se][0]=r.getInt32()>>>0,t[Se][1]=r.getInt32()>>>0;for(;Se<80;++Se)Xe=t[Se-2],Te=Xe[0],_e=Xe[1],n=((Te>>>19|_e<<13)^(_e>>>29|Te<<3)^Te>>>6)>>>0,i=((Te<<13|_e>>>19)^(_e<<3|Te>>>29)^(Te<<26|_e>>>6))>>>0,yt=t[Se-15],Te=yt[0],_e=yt[1],a=((Te>>>1|_e<<31)^(Te>>>8|_e<<24)^Te>>>7)>>>0,s=((Te<<31|_e>>>1)^(Te<<24|_e>>>8)^(Te<<25|_e>>>7))>>>0,Ve=t[Se-7],ht=t[Se-16],_e=i+Ve[1]+s+ht[1],t[Se][0]=n+Ve[0]+a+ht[0]+(_e/4294967296>>>0)>>>0,t[Se][1]=_e>>>0;for(_=e[0][0],E=e[0][1],w=e[1][0],S=e[1][1],R=e[2][0],B=e[2][1],O=e[3][0],N=e[3][1],ee=e[4][0],q=e[4][1],F=e[5][0],ce=e[5][1],se=e[6][0],ve=e[6][1],Ie=e[7][0],Be=e[7][1],Se=0;Se<80;++Se)f=((ee>>>14|q<<18)^(ee>>>18|q<<14)^(q>>>9|ee<<23))>>>0,d=((ee<<18|q>>>14)^(ee<<14|q>>>18)^(q<<23|ee>>>9))>>>0,h=(se^ee&(F^se))>>>0,g=(ve^q&(ce^ve))>>>0,l=((_>>>28|E<<4)^(E>>>2|_<<30)^(E>>>7|_<<25))>>>0,c=((_<<4|E>>>28)^(E<<30|_>>>2)^(E<<25|_>>>7))>>>0,y=(_&w|R&(_^w))>>>0,m=(E&S|B&(E^S))>>>0,_e=Be+d+g+sg[Se][1]+t[Se][1],n=Ie+f+h+sg[Se][0]+t[Se][0]+(_e/4294967296>>>0)>>>0,i=_e>>>0,_e=c+m,a=l+y+(_e/4294967296>>>0)>>>0,s=_e>>>0,Ie=se,Be=ve,se=F,ve=ce,F=ee,ce=q,_e=N+i,ee=O+n+(_e/4294967296>>>0)>>>0,q=_e>>>0,O=R,N=B,R=w,B=S,w=_,S=E,_e=i+s,_=n+a+(_e/4294967296>>>0)>>>0,E=_e>>>0;_e=e[0][1]+E,e[0][0]=e[0][0]+_+(_e/4294967296>>>0)>>>0,e[0][1]=_e>>>0,_e=e[1][1]+S,e[1][0]=e[1][0]+w+(_e/4294967296>>>0)>>>0,e[1][1]=_e>>>0,_e=e[2][1]+B,e[2][0]=e[2][0]+R+(_e/4294967296>>>0)>>>0,e[2][1]=_e>>>0,_e=e[3][1]+N,e[3][0]=e[3][0]+O+(_e/4294967296>>>0)>>>0,e[3][1]=_e>>>0,_e=e[4][1]+q,e[4][0]=e[4][0]+ee+(_e/4294967296>>>0)>>>0,e[4][1]=_e>>>0,_e=e[5][1]+ce,e[5][0]=e[5][0]+F+(_e/4294967296>>>0)>>>0,e[5][1]=_e>>>0,_e=e[6][1]+ve,e[6][0]=e[6][0]+se+(_e/4294967296>>>0)>>>0,e[6][1]=_e>>>0,_e=e[7][1]+Be,e[7][0]=e[7][0]+Ie+(_e/4294967296>>>0)>>>0,e[7][1]=_e>>>0,ze-=128}}});var bC=ue(lg=>{var c8=ft();_i();var Pr=c8.asn1;lg.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Pr.Class.UNIVERSAL,type:Pr.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Pr.Class.UNIVERSAL,type:Pr.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Pr.Class.UNIVERSAL,type:Pr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Pr.Class.UNIVERSAL,type:Pr.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Pr.Class.UNIVERSAL,type:Pr.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};lg.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Pr.Class.UNIVERSAL,type:Pr.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Pr.Class.UNIVERSAL,type:Pr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Pr.Class.UNIVERSAL,type:Pr.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Pr.Class.UNIVERSAL,type:Pr.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var PC=ue((tV,LC)=>{var Hr=ft();gu();Xn();og();Ot();var xC=bC(),f8=xC.publicKeyValidator,d8=xC.privateKeyValidator;typeof SC=="undefined"&&(SC=Hr.jsbn.BigInteger);var SC,ug=Hr.util.ByteBuffer,bn=typeof Buffer=="undefined"?Uint8Array:Buffer;Hr.pki=Hr.pki||{};LC.exports=Hr.pki.ed25519=Hr.ed25519=Hr.ed25519||{};var Ct=Hr.ed25519;Ct.constants={};Ct.constants.PUBLIC_KEY_BYTE_LENGTH=32;Ct.constants.PRIVATE_KEY_BYTE_LENGTH=64;Ct.constants.SEED_BYTE_LENGTH=32;Ct.constants.SIGN_BYTE_LENGTH=64;Ct.constants.HASH_BYTE_LENGTH=64;Ct.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=Hr.random.getBytesSync(Ct.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==Ct.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Ct.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=ma({message:t,encoding:"binary"});for(var r=new bn(Ct.constants.PUBLIC_KEY_BYTE_LENGTH),n=new bn(Ct.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=t[i];return m8(r,n),{publicKey:r,privateKey:n}};Ct.privateKeyFromAsn1=function(e){var t={},r=[],n=Hr.asn1.validate(e,d8,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=Hr.asn1.derToOid(t.privateKeyOid),s=Hr.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var l=t.privateKey,c=ma({message:Hr.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:c}};Ct.publicKeyFromAsn1=function(e){var t={},r=[],n=Hr.asn1.validate(e,f8,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=Hr.asn1.derToOid(t.publicKeyOid),s=Hr.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var l=t.ed25519PublicKey;if(l.length!==Ct.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return ma({message:l,encoding:"binary"})};Ct.publicKeyFromPrivateKey=function(e){e=e||{};var t=ma({message:e.privateKey,encoding:"binary"});if(t.length!==Ct.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Ct.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new bn(Ct.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r};Ct.sign=function(e){e=e||{};var t=ma(e),r=ma({message:e.privateKey,encoding:"binary"});if(r.length===Ct.constants.SEED_BYTE_LENGTH){var n=Ct.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==Ct.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Ct.constants.SEED_BYTE_LENGTH+" or "+Ct.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new bn(Ct.constants.SIGN_BYTE_LENGTH+t.length);y8(i,t,t.length,r);for(var a=new bn(Ct.constants.SIGN_BYTE_LENGTH),s=0;s<a.length;++s)a[s]=i[s];return a};Ct.verify=function(e){e=e||{};var t=ma(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=ma({message:e.signature,encoding:"binary"});if(r.length!==Ct.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Ct.constants.SIGN_BYTE_LENGTH);var n=ma({message:e.publicKey,encoding:"binary"});if(n.length!==Ct.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Ct.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new bn(Ct.constants.SIGN_BYTE_LENGTH+t.length),a=new bn(Ct.constants.SIGN_BYTE_LENGTH+t.length),s;for(s=0;s<Ct.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<t.length;++s)i[s+Ct.constants.SIGN_BYTE_LENGTH]=t[s];return v8(a,i,i.length,n)>=0};function ma(e){var t=e.message;if(t instanceof Uint8Array||t instanceof bn)return t;var r=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer!="undefined")return Buffer.from(t,r);t=new ug(t,r)}else if(!(t instanceof ug))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new bn(t.length()),i=0;i<n.length;++i)n[i]=t.at(i);return n}var cg=We(),fd=We([1]),h8=We([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p8=We([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),TC=We([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),AC=We([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),fg=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),g8=We([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Eu(e,t){var r=Hr.md.sha512.create(),n=new ug(e);r.update(n.getBytes(t),"binary");var i=r.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(i,"binary");for(var a=new bn(Ct.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function m8(e,t){var r=[We(),We(),We(),We()],n,i=Eu(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,gg(r,i),pg(e,r),n=0;n<32;++n)t[n+32]=e[n];return 0}function y8(e,t,r,n){var i,a,s=new Float64Array(64),l=[We(),We(),We(),We()],c=Eu(n,32);c[0]&=248,c[31]&=127,c[31]|=64;var f=r+64;for(i=0;i<r;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=c[32+i];var d=Eu(e.subarray(32),r+32);for(dg(d),gg(l,d),pg(e,l),i=32;i<64;++i)e[i]=n[i];var h=Eu(e,r+64);for(dg(h),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=d[i];for(i=0;i<32;++i)for(a=0;a<32;a++)s[i+a]+=h[i]*c[a];return IC(e.subarray(32),s),f}function v8(e,t,r,n){var i,a,s=new bn(32),l=[We(),We(),We(),We()],c=[We(),We(),We(),We()];if(a=-1,r<64||_8(c,n))return-1;for(i=0;i<r;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=n[i];var f=Eu(e,r);if(dg(f),DC(l,c,f),gg(c,t.subarray(32)),hg(l,c),pg(s,l),r-=64,BC(t,0,s,0)){for(i=0;i<r;++i)e[i]=0;return-1}for(i=0;i<r;++i)e[i]=t[i+64];return a=r,a}function IC(e,t){var r,n,i,a;for(n=63;n>=32;--n){for(r=0,i=n-32,a=n-12;i<a;++i)t[i]+=r-16*t[n]*fg[i-(n-32)],r=t[i]+128>>8,t[i]-=r*256;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;++i)t[i]+=r-(t[31]>>4)*fg[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=r*fg[i];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=t[n]&255}function dg(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;IC(e,t)}function hg(e,t){var r=We(),n=We(),i=We(),a=We(),s=We(),l=We(),c=We(),f=We(),d=We();nl(r,e[1],e[0]),nl(d,t[1],t[0]),Yt(r,r,d),rl(n,e[0],e[1]),rl(d,t[0],t[1]),Yt(n,n,d),Yt(i,e[3],t[3]),Yt(i,i,p8),Yt(a,e[2],t[2]),rl(a,a,a),nl(s,n,r),nl(l,a,i),rl(c,a,i),rl(f,n,r),Yt(e[0],s,l),Yt(e[1],f,c),Yt(e[2],c,l),Yt(e[3],s,f)}function kC(e,t,r){for(var n=0;n<4;++n)OC(e[n],t[n],r)}function pg(e,t){var r=We(),n=We(),i=We();b8(i,t[2]),Yt(r,t[0],i),Yt(n,t[1],i),dd(e,n),e[31]^=NC(r)<<7}function dd(e,t){var r,n,i,a=We(),s=We();for(r=0;r<16;++r)s[r]=t[r];for(mg(s),mg(s),mg(s),n=0;n<2;++n){for(a[0]=s[0]-65517,r=1;r<15;++r)a[r]=s[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,OC(s,a,1-i)}for(r=0;r<16;r++)e[2*r]=s[r]&255,e[2*r+1]=s[r]>>8}function _8(e,t){var r=We(),n=We(),i=We(),a=We(),s=We(),l=We(),c=We();return rs(e[2],fd),E8(e[1],t),Ms(i,e[1]),Yt(a,i,h8),nl(i,i,e[2]),rl(a,e[2],a),Ms(s,a),Ms(l,s),Yt(c,l,s),Yt(r,c,i),Yt(r,r,a),w8(r,r),Yt(r,r,i),Yt(r,r,a),Yt(r,r,a),Yt(e[0],r,a),Ms(n,e[0]),Yt(n,n,a),RC(n,i)&&Yt(e[0],e[0],g8),Ms(n,e[0]),Yt(n,n,a),RC(n,i)?-1:(NC(e[0])===t[31]>>7&&nl(e[0],cg,e[0]),Yt(e[3],e[0],e[1]),0)}function E8(e,t){var r;for(r=0;r<16;++r)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function w8(e,t){var r=We(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=250;n>=0;--n)Ms(r,r),n!==1&&Yt(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function RC(e,t){var r=new bn(32),n=new bn(32);return dd(r,e),dd(n,t),BC(r,0,n,0)}function BC(e,t,r,n){return C8(e,t,r,n,32)}function C8(e,t,r,n,i){var a,s=0;for(a=0;a<i;++a)s|=e[t+a]^r[n+a];return(1&s-1>>>8)-1}function NC(e){var t=new bn(32);return dd(t,e),t[0]&1}function DC(e,t,r){var n,i;for(rs(e[0],cg),rs(e[1],fd),rs(e[2],fd),rs(e[3],cg),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,kC(e,t,n),hg(t,e),hg(e,e),kC(e,t,n)}function gg(e,t){var r=[We(),We(),We(),We()];rs(r[0],TC),rs(r[1],AC),rs(r[2],fd),Yt(r[3],TC,AC),DC(e,r,t)}function rs(e,t){var r;for(r=0;r<16;r++)e[r]=t[r]|0}function b8(e,t){var r=We(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=253;n>=0;--n)Ms(r,r),n!==2&&n!==4&&Yt(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function mg(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-n*65536;e[0]+=n-1+37*(n-1)}function OC(e,t,r){for(var n,i=~(r-1),a=0;a<16;++a)n=i&(e[a]^t[a]),e[a]^=n,t[a]^=n}function We(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function rl(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n]}function nl(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n]}function Ms(e,t){Yt(e,t,t)}function Yt(e,t,r){var n,i,a=0,s=0,l=0,c=0,f=0,d=0,h=0,g=0,y=0,m=0,_=0,E=0,w=0,S=0,R=0,B=0,O=0,N=0,ee=0,q=0,F=0,ce=0,se=0,ve=0,Ie=0,Be=0,Se=0,Te=0,_e=0,Xe=0,Ve=0,yt=r[0],ht=r[1],ze=r[2],fe=r[3],pt=r[4],tt=r[5],vt=r[6],Je=r[7],we=r[8],A=r[9],D=r[10],L=r[11],W=r[12],V=r[13],Q=r[14],J=r[15];n=t[0],a+=n*yt,s+=n*ht,l+=n*ze,c+=n*fe,f+=n*pt,d+=n*tt,h+=n*vt,g+=n*Je,y+=n*we,m+=n*A,_+=n*D,E+=n*L,w+=n*W,S+=n*V,R+=n*Q,B+=n*J,n=t[1],s+=n*yt,l+=n*ht,c+=n*ze,f+=n*fe,d+=n*pt,h+=n*tt,g+=n*vt,y+=n*Je,m+=n*we,_+=n*A,E+=n*D,w+=n*L,S+=n*W,R+=n*V,B+=n*Q,O+=n*J,n=t[2],l+=n*yt,c+=n*ht,f+=n*ze,d+=n*fe,h+=n*pt,g+=n*tt,y+=n*vt,m+=n*Je,_+=n*we,E+=n*A,w+=n*D,S+=n*L,R+=n*W,B+=n*V,O+=n*Q,N+=n*J,n=t[3],c+=n*yt,f+=n*ht,d+=n*ze,h+=n*fe,g+=n*pt,y+=n*tt,m+=n*vt,_+=n*Je,E+=n*we,w+=n*A,S+=n*D,R+=n*L,B+=n*W,O+=n*V,N+=n*Q,ee+=n*J,n=t[4],f+=n*yt,d+=n*ht,h+=n*ze,g+=n*fe,y+=n*pt,m+=n*tt,_+=n*vt,E+=n*Je,w+=n*we,S+=n*A,R+=n*D,B+=n*L,O+=n*W,N+=n*V,ee+=n*Q,q+=n*J,n=t[5],d+=n*yt,h+=n*ht,g+=n*ze,y+=n*fe,m+=n*pt,_+=n*tt,E+=n*vt,w+=n*Je,S+=n*we,R+=n*A,B+=n*D,O+=n*L,N+=n*W,ee+=n*V,q+=n*Q,F+=n*J,n=t[6],h+=n*yt,g+=n*ht,y+=n*ze,m+=n*fe,_+=n*pt,E+=n*tt,w+=n*vt,S+=n*Je,R+=n*we,B+=n*A,O+=n*D,N+=n*L,ee+=n*W,q+=n*V,F+=n*Q,ce+=n*J,n=t[7],g+=n*yt,y+=n*ht,m+=n*ze,_+=n*fe,E+=n*pt,w+=n*tt,S+=n*vt,R+=n*Je,B+=n*we,O+=n*A,N+=n*D,ee+=n*L,q+=n*W,F+=n*V,ce+=n*Q,se+=n*J,n=t[8],y+=n*yt,m+=n*ht,_+=n*ze,E+=n*fe,w+=n*pt,S+=n*tt,R+=n*vt,B+=n*Je,O+=n*we,N+=n*A,ee+=n*D,q+=n*L,F+=n*W,ce+=n*V,se+=n*Q,ve+=n*J,n=t[9],m+=n*yt,_+=n*ht,E+=n*ze,w+=n*fe,S+=n*pt,R+=n*tt,B+=n*vt,O+=n*Je,N+=n*we,ee+=n*A,q+=n*D,F+=n*L,ce+=n*W,se+=n*V,ve+=n*Q,Ie+=n*J,n=t[10],_+=n*yt,E+=n*ht,w+=n*ze,S+=n*fe,R+=n*pt,B+=n*tt,O+=n*vt,N+=n*Je,ee+=n*we,q+=n*A,F+=n*D,ce+=n*L,se+=n*W,ve+=n*V,Ie+=n*Q,Be+=n*J,n=t[11],E+=n*yt,w+=n*ht,S+=n*ze,R+=n*fe,B+=n*pt,O+=n*tt,N+=n*vt,ee+=n*Je,q+=n*we,F+=n*A,ce+=n*D,se+=n*L,ve+=n*W,Ie+=n*V,Be+=n*Q,Se+=n*J,n=t[12],w+=n*yt,S+=n*ht,R+=n*ze,B+=n*fe,O+=n*pt,N+=n*tt,ee+=n*vt,q+=n*Je,F+=n*we,ce+=n*A,se+=n*D,ve+=n*L,Ie+=n*W,Be+=n*V,Se+=n*Q,Te+=n*J,n=t[13],S+=n*yt,R+=n*ht,B+=n*ze,O+=n*fe,N+=n*pt,ee+=n*tt,q+=n*vt,F+=n*Je,ce+=n*we,se+=n*A,ve+=n*D,Ie+=n*L,Be+=n*W,Se+=n*V,Te+=n*Q,_e+=n*J,n=t[14],R+=n*yt,B+=n*ht,O+=n*ze,N+=n*fe,ee+=n*pt,q+=n*tt,F+=n*vt,ce+=n*Je,se+=n*we,ve+=n*A,Ie+=n*D,Be+=n*L,Se+=n*W,Te+=n*V,_e+=n*Q,Xe+=n*J,n=t[15],B+=n*yt,O+=n*ht,N+=n*ze,ee+=n*fe,q+=n*pt,F+=n*tt,ce+=n*vt,se+=n*Je,ve+=n*we,Ie+=n*A,Be+=n*D,Se+=n*L,Te+=n*W,_e+=n*V,Xe+=n*Q,Ve+=n*J,a+=38*O,s+=38*N,l+=38*ee,c+=38*q,f+=38*F,d+=38*ce,h+=38*se,g+=38*ve,y+=38*Ie,m+=38*Be,_+=38*Se,E+=38*Te,w+=38*_e,S+=38*Xe,R+=38*Ve,i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,a+=i-1+37*(i-1),i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,a+=i-1+37*(i-1),e[0]=a,e[1]=s,e[2]=l,e[3]=c,e[4]=f,e[5]=d,e[6]=h,e[7]=g,e[8]=y,e[9]=m,e[10]=_,e[11]=E,e[12]=w,e[13]=S,e[14]=R,e[15]=B}});var qC=ue((rV,FC)=>{var Un=ft();Ot();Xn();gu();FC.exports=Un.kem=Un.kem||{};var UC=Un.jsbn.BigInteger;Un.kem.rsa={};Un.kem.rsa.create=function(e,t){t=t||{};var r=t.prng||Un.random,n={};return n.encrypt=function(i,a){var s=Math.ceil(i.n.bitLength()/8),l;do l=new UC(Un.util.bytesToHex(r.getBytesSync(s)),16).mod(i.n);while(l.compareTo(UC.ONE)<=0);l=Un.util.hexToBytes(l.toString(16));var c=s-l.length;c>0&&(l=Un.util.fillString(String.fromCharCode(0),c)+l);var f=i.encrypt(l,"NONE"),d=e.generate(l,a);return{encapsulation:f,key:d}},n.decrypt=function(i,a,s){var l=i.decrypt(a,"NONE");return e.generate(l,s)},n};Un.kem.kdf1=function(e,t){MC(this,e,0,t||e.digestLength)};Un.kem.kdf2=function(e,t){MC(this,e,1,t||e.digestLength)};function MC(e,t,r,n){e.generate=function(i,a){for(var s=new Un.util.ByteBuffer,l=Math.ceil(a/n)+r,c=new Un.util.ByteBuffer,f=r;f<l;++f){c.putInt32(f),t.start(),t.update(i+c.getBytes());var d=t.digest();s.putBytes(d.getBytes(n))}return s.truncate(s.length()-a),s.getBytes()}}});var jC=ue((nV,KC)=>{var St=ft();Ot();KC.exports=St.log=St.log||{};St.log.levels=["none","error","warning","info","debug","verbose","max"];var hd={},yg=[],wu=null;St.log.LEVEL_LOCKED=1<<1;St.log.NO_LEVEL_CHECK=1<<2;St.log.INTERPOLATE=1<<3;for(Yi=0;Yi<St.log.levels.length;++Yi)vg=St.log.levels[Yi],hd[vg]={index:Yi,name:vg.toUpperCase()};var vg,Yi;St.log.logMessage=function(e){for(var t=hd[e.level].index,r=0;r<yg.length;++r){var n=yg[r];if(n.flags&St.log.NO_LEVEL_CHECK)n.f(e);else{var i=hd[n.level].index;t<=i&&n.f(n,e)}}};St.log.prepareStandard=function(e){"standard"in e||(e.standard=hd[e.level].name+" ["+e.category+"] "+e.message)};St.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=St.util.format.apply(this,t)}};St.log.prepareStandardFull=function(e){"standardFull"in e||(St.log.prepareStandard(e),e.standardFull=e.standard)};for(_g=["error","warning","info","debug","verbose"],Yi=0;Yi<_g.length;++Yi)(function(t){St.log[t]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:t,category:r,message:n,arguments:i};St.log.logMessage(a)}})(_g[Yi]);var _g,Yi;St.log.makeLogger=function(e){var t={flags:0,f:e};return St.log.setLevel(t,"none"),t};St.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&St.log.LEVEL_LOCKED))for(var n=0;n<St.log.levels.length;++n){var i=St.log.levels[n];if(t==i){e.level=t,r=!0;break}}return r};St.log.lock=function(e,t){typeof t=="undefined"||t?e.flags|=St.log.LEVEL_LOCKED:e.flags&=~St.log.LEVEL_LOCKED};St.log.addLogger=function(e){yg.push(e)};typeof console!="undefined"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(GC={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},Cu=function(e,t){St.log.prepareStandard(t);var r=GC[t.level],n=[t.standard];n=n.concat(t.arguments.slice()),r.apply(console,n)},il=St.log.makeLogger(Cu)):(Cu=function(t,r){St.log.prepareStandardFull(r),console.log(r.standardFull)},il=St.log.makeLogger(Cu)),St.log.setLevel(il,"debug"),St.log.addLogger(il),wu=il):console={log:function(){}};var il,GC,Cu;wu!==null&&typeof window!="undefined"&&window.location&&(bu=new URL(window.location.href).searchParams,bu.has("console.level")&&St.log.setLevel(wu,bu.get("console.level").slice(-1)[0]),bu.has("console.lock")&&(VC=bu.get("console.lock").slice(-1)[0],VC=="true"&&St.log.lock(wu)));var bu,VC;St.log.consoleLogger=wu});var WC=ue((iV,HC)=>{HC.exports=Fi();Wf();Jo();N0();og()});var QC=ue((aV,zC)=>{var Ae=ft();za();_i();hu();Qa();Bs();W0();Xn();Ot();sd();var K=Ae.asn1,fn=zC.exports=Ae.pkcs7=Ae.pkcs7||{};fn.messageFromPem=function(e){var t=Ae.pem.decode(e)[0];if(t.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=K.fromDer(t.body);return fn.messageFromAsn1(n)};fn.messageToPem=function(e,t){var r={type:"PKCS7",body:K.toDer(e.toAsn1()).getBytes()};return Ae.pem.encode(r,{maxline:t})};fn.messageFromAsn1=function(e){var t={},r=[];if(!K.validate(e,fn.asn1.contentInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=K.derToOid(t.contentType),a;switch(i){case Ae.pki.oids.envelopedData:a=fn.createEnvelopedData();break;case Ae.pki.oids.encryptedData:a=fn.createEncryptedData();break;case Ae.pki.oids.signedData:a=fn.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return a.fromAsn1(t.content.value[0]),a};fn.createSignedData=function(){var e=null;return e={type:Ae.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(wg(e,n,fn.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var i=e.rawCapture.certificates.value,a=0;a<i.length;++a)e.certificates.push(Ae.pki.certificateFromAsn1(i[a]))},toAsn1:function(){e.contentInfo||e.sign();for(var n=[],i=0;i<e.certificates.length;++i)n.push(Ae.pki.certificateToAsn1(e.certificates[i]));var a=[],s=K.create(K.Class.CONTEXT_SPECIFIC,0,!0,[K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,K.integerToDer(e.version).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return n.length>0&&s.value[0].value.push(K.create(K.Class.CONTEXT_SPECIFIC,0,!0,n)),a.length>0&&s.value[0].value.push(K.create(K.Class.CONTEXT_SPECIFIC,1,!0,a)),s.value[0].value.push(K.create(K.Class.UNIVERSAL,K.Type.SET,!0,e.signerInfos)),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,a=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=Ae.pki.certificateFromPem(s)),i=s.issuer.attributes,a=s.serialNumber}var l=n.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=Ae.pki.privateKeyFromPem(l));var c=n.digestAlgorithm||Ae.pki.oids.sha1;switch(c){case Ae.pki.oids.sha1:case Ae.pki.oids.sha256:case Ae.pki.oids.sha384:case Ae.pki.oids.sha512:case Ae.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var f=n.authenticatedAttributes||[];if(f.length>0){for(var d=!1,h=!1,g=0;g<f.length;++g){var y=f[g];if(!d&&y.type===Ae.pki.oids.contentType){if(d=!0,h)break;continue}if(!h&&y.type===Ae.pki.oids.messageDigest){if(h=!0,d)break;continue}}if(!d||!h)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:l,version:1,issuer:i,serialNumber:a,digestAlgorithm:c,signatureAlgorithm:Ae.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:f,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(Ae.pki.oids.data).getBytes())]),"content"in e)){var i;e.content instanceof Ae.util.ByteBuffer?i=e.content.bytes():typeof e.content=="string"&&(i=Ae.util.encodeUtf8(e.content)),n.detached?e.detachedContent=K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(K.create(K.Class.CONTEXT_SPECIFIC,0,!0,[K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,i)]))}if(e.signers.length!==0){var a=t();r(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Ae.pki.certificateFromPem(n)),e.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var n={},i=0;i<e.signers.length;++i){var a=e.signers[i],s=a.digestAlgorithm;s in n||(n[s]=Ae.md[Ae.pki.oids[s]].create()),a.authenticatedAttributes.length===0?a.md=n[s]:a.md=Ae.md[Ae.pki.oids[s]].create()}e.digestAlgorithmIdentifiers=[];for(var s in n)e.digestAlgorithmIdentifiers.push(K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(s).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.NULL,!1,"")]));return n}function r(n){var i;if(e.detachedContent?i=e.detachedContent:(i=e.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=K.derToOid(e.contentInfo.value[0].value),s=K.toDer(i);s.getByte(),K.getBerValueLength(s),s=s.getBytes();for(var l in n)n[l].start().update(s);for(var c=new Date,f=0;f<e.signers.length;++f){var d=e.signers[f];if(d.authenticatedAttributes.length===0){if(a!==Ae.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=K.create(K.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=K.create(K.Class.UNIVERSAL,K.Type.SET,!0,[]),g=0;g<d.authenticatedAttributes.length;++g){var y=d.authenticatedAttributes[g];y.type===Ae.pki.oids.messageDigest?y.value=n[d.digestAlgorithm].digest():y.type===Ae.pki.oids.signingTime&&(y.value||(y.value=c)),h.value.push(Eg(y)),d.authenticatedAttributesAsn1.value.push(Eg(y))}s=K.toDer(h).getBytes(),d.md.start().update(s)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=k8(e.signers)}};fn.createEncryptedData=function(){var e=null;return e={type:Ae.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Ae.pki.oids["aes256-CBC"]},fromAsn1:function(t){wg(e,t,fn.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),YC(e)}},e};fn.createEnvelopedData=function(){var e=null;return e={type:Ae.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Ae.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=wg(e,t,fn.asn1.envelopedDataValidator);e.recipients=T8(r.recipientInfos.value)},toAsn1:function(){return K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.type).getBytes()),K.create(K.Class.CONTEXT_SPECIFIC,0,!0,[K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,K.integerToDer(e.version).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SET,!0,A8(e.recipients)),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,R8(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],a=i.issuer;if(i.serialNumber===t.serialNumber&&a.length===r.length){for(var s=!0,l=0;l<r.length;++l)if(a[l].type!==r[l].type||a[l].value!==r[l].value){s=!1;break}if(s)return i}}return null},decrypt:function(t,r){if(e.encryptedContent.key===void 0&&t!==void 0&&r!==void 0)switch(t.encryptedContent.algorithm){case Ae.pki.oids.rsaEncryption:case Ae.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=Ae.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}YC(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:Ae.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(e.encryptedContent.content===void 0){r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var n,i,a;switch(r){case Ae.pki.oids["aes128-CBC"]:n=16,i=16,a=Ae.aes.createEncryptionCipher;break;case Ae.pki.oids["aes192-CBC"]:n=24,i=16,a=Ae.aes.createEncryptionCipher;break;case Ae.pki.oids["aes256-CBC"]:n=32,i=16,a=Ae.aes.createEncryptionCipher;break;case Ae.pki.oids["des-EDE3-CBC"]:n=24,i=8,a=Ae.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(t===void 0)t=Ae.util.createBuffer(Ae.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=Ae.util.createBuffer(Ae.random.getBytes(i));var s=a(t);if(s.start(e.encryptedContent.parameter.copy()),s.update(e.content),!s.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=s.output}for(var l=0;l<e.recipients.length;++l){var c=e.recipients[l];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Ae.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},e};function x8(e){var t={},r=[];if(!K.validate(e,fn.asn1.recipientInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:t.version.charCodeAt(0),issuer:Ae.pki.RDNAttributesAsArray(t.issuer),serialNumber:Ae.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:K.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function S8(e){return K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,K.integerToDer(e.version).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[Ae.pki.distinguishedNameToAsn1({attributes:e.issuer}),K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Ae.util.hexToBytes(e.serialNumber))]),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.encryptedContent.algorithm).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.NULL,!1,"")]),K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function T8(e){for(var t=[],r=0;r<e.length;++r)t.push(x8(e[r]));return t}function A8(e){for(var t=[],r=0;r<e.length;++r)t.push(S8(e[r]));return t}function I8(e){var t=K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,K.integerToDer(e.version).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[Ae.pki.distinguishedNameToAsn1({attributes:e.issuer}),K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Ae.util.hexToBytes(e.serialNumber))]),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.digestAlgorithm).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.signatureAlgorithm).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.NULL,!1,"")])),t.value.push(K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=K.create(K.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var i=e.unauthenticatedAttributes[n];r.values.push(Eg(i))}t.value.push(r)}return t}function k8(e){for(var t=[],r=0;r<e.length;++r)t.push(I8(e[r]));return t}function Eg(e){var t;if(e.type===Ae.pki.oids.contentType)t=K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.value).getBytes());else if(e.type===Ae.pki.oids.messageDigest)t=K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===Ae.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var a=Date.parse(i);isNaN(a)?i.length===13?i=K.utcTimeToDate(i):i=K.generalizedTimeToDate(i):i=new Date(a)}i>=r&&i<n?t=K.create(K.Class.UNIVERSAL,K.Type.UTCTIME,!1,K.dateToUtcTime(i)):t=K.create(K.Class.UNIVERSAL,K.Type.GENERALIZEDTIME,!1,K.dateToGeneralizedTime(i))}return K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.type).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SET,!0,[t])])}function R8(e){return[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(Ae.pki.oids.data).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.algorithm).getBytes()),e.parameter?K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),K.create(K.Class.CONTEXT_SPECIFIC,0,!0,[K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,e.content.getBytes())])]}function wg(e,t,r){var n={},i=[];if(!K.validate(t,r,n,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var s=K.derToOid(n.contentType);if(s!==Ae.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var l="";if(Ae.util.isArray(n.encryptedContent))for(var c=0;c<n.encryptedContent.length;++c){if(n.encryptedContent[c].type!==K.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=n.encryptedContent[c].value}else l=n.encryptedContent;e.encryptedContent={algorithm:K.derToOid(n.encAlgorithm),parameter:Ae.util.createBuffer(n.encParameter.value),content:Ae.util.createBuffer(l)}}if(n.content){var l="";if(Ae.util.isArray(n.content))for(var c=0;c<n.content.length;++c){if(n.content[c].type!==K.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=n.content[c].value}else l=n.content;e.content=Ae.util.createBuffer(l)}return e.version=n.version.charCodeAt(0),e.rawCapture=n,n}function YC(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case Ae.pki.oids["aes128-CBC"]:case Ae.pki.oids["aes192-CBC"]:case Ae.pki.oids["aes256-CBC"]:t=Ae.aes.createDecryptionCipher(e.encryptedContent.key);break;case Ae.pki.oids.desCBC:case Ae.pki.oids["des-EDE3-CBC"]:t=Ae.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}});var JC=ue((sV,XC)=>{var Cr=ft();za();Yo();Wf();Jo();Ot();var pd=XC.exports=Cr.ssh=Cr.ssh||{};pd.privateKeyToPutty=function(e,t,r){r=r||"",t=t||"";var n="ssh-rsa",i=t===""?"none":"aes256-cbc",a="PuTTY-User-Key-File-2: "+n+`\r
`;a+="Encryption: "+i+`\r
`,a+="Comment: "+r+`\r
`;var s=Cr.util.createBuffer();al(s,n),zi(s,e.e),zi(s,e.n);var l=Cr.util.encode64(s.bytes(),64),c=Math.floor(l.length/66)+1;a+="Public-Lines: "+c+`\r
`,a+=l;var f=Cr.util.createBuffer();zi(f,e.d),zi(f,e.p),zi(f,e.q),zi(f,e.qInv);var d;if(!t)d=Cr.util.encode64(f.bytes(),64);else{var h=f.length()+16-1;h-=h%16;var g=gd(f.bytes());g.truncate(g.length()-h+f.length()),f.putBuffer(g);var y=Cr.util.createBuffer();y.putBuffer(gd("\0\0\0\0",t)),y.putBuffer(gd("\0\0\0",t));var m=Cr.aes.createEncryptionCipher(y.truncate(8),"CBC");m.start(Cr.util.createBuffer().fillWithByte(0,16)),m.update(f.copy()),m.finish();var _=m.output;_.truncate(16),d=Cr.util.encode64(_.bytes(),64)}c=Math.floor(d.length/66)+1,a+=`\r
Private-Lines: `+c+`\r
`,a+=d;var E=gd("putty-private-key-file-mac-key",t),w=Cr.util.createBuffer();al(w,n),al(w,i),al(w,r),w.putInt32(s.length()),w.putBuffer(s),w.putInt32(f.length()),w.putBuffer(f);var S=Cr.hmac.create();return S.start("sha1",E),S.update(w.bytes()),a+=`\r
Private-MAC: `+S.digest().toHex()+`\r
`,a};pd.publicKeyToOpenSSH=function(e,t){var r="ssh-rsa";t=t||"";var n=Cr.util.createBuffer();return al(n,r),zi(n,e.e),zi(n,e.n),r+" "+Cr.util.encode64(n.bytes())+" "+t};pd.privateKeyToOpenSSH=function(e,t){return t?Cr.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):Cr.pki.privateKeyToPem(e)};pd.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||Cr.md.md5.create(),n="ssh-rsa",i=Cr.util.createBuffer();al(i,n),zi(i,e.e),zi(i,e.n),r.start(),r.update(i.getBytes());var a=r.digest();if(t.encoding==="hex"){var s=a.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};function zi(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=Cr.util.hexToBytes(r);e.putInt32(n.length),e.putBytes(n)}function al(e,t){e.putInt32(t.length),e.putString(t)}function gd(){for(var e=Cr.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}});var $C=ue((oV,ZC)=>{ZC.exports=ft();za();vC();_i();Ff();hu();PC();Yo();qC();jC();WC();Y0();Xf();Bs();G0();X0();QC();Z0();K0();D0();nd();Xn();P0();JC();ig();Ot()});var tb=ue(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});yd.getPem=void 0;var B8=require("fs"),md=$C(),N8=require("util"),D8=N8.promisify(B8.readFile);function O8(e,t){if(t)eb(e).then(r=>t(null,r)).catch(r=>t(r,null));else return eb(e)}yd.getPem=O8;function eb(e){return D8(e,{encoding:"base64"}).then(t=>L8(t))}function L8(e){let t=md.util.decode64(e),r=md.asn1.fromDer(t),i=md.pkcs12.pkcs12FromAsn1(r,"notasecret").getBags({friendlyName:"privatekey"});if(i.friendlyName){let a=i.friendlyName[0].key;return md.pki.privateKeyToPem(a).replace(/\r\n/g,`
`)}else throw new Error("Unable to get friendly name.")}});var ob=ue(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.GoogleToken=void 0;var rb=require("fs"),nb=oE(),P8=v0(),U8=require("path"),M8=require("util"),ib=rb.readFile?M8.promisify(rb.readFile):()=>M(Su,null,function*(){throw new xu("use key rather than keyFile.","MISSING_CREDENTIALS")}),ab="https://www.googleapis.com/oauth2/v4/token",F8="https://accounts.google.com/o/oauth2/revoke?token=",xu=class extends Error{constructor(t,r){super(t);this.code=r}},Cg,sb=class{constructor(t){this.configure(t)}get accessToken(){return this.rawToken?this.rawToken.access_token:void 0}get idToken(){return this.rawToken?this.rawToken.id_token:void 0}get tokenType(){return this.rawToken?this.rawToken.token_type:void 0}get refreshToken(){return this.rawToken?this.rawToken.refresh_token:void 0}hasExpired(){let t=new Date().getTime();return this.rawToken&&this.expiresAt?t>=this.expiresAt:!0}isTokenExpiring(){var t;let r=new Date().getTime(),n=(t=this.eagerRefreshThresholdMillis)!==null&&t!==void 0?t:0;return this.rawToken&&this.expiresAt?this.expiresAt<=r+n:!0}getToken(t,r={}){if(typeof t=="object"&&(r=t,t=void 0),r=Object.assign({forceRefresh:!1},r),t){let n=t;this.getTokenAsync(r).then(i=>n(null,i),t);return}return this.getTokenAsync(r)}getCredentials(t){return M(this,null,function*(){switch(U8.extname(t)){case".json":{let n=yield ib(t,"utf8"),i=JSON.parse(n),a=i.private_key,s=i.client_email;if(!a||!s)throw new xu("private_key and client_email are required.","MISSING_CREDENTIALS");return{privateKey:a,clientEmail:s}}case".der":case".crt":case".pem":return{privateKey:yield ib(t,"utf8")};case".p12":case".pfx":return Cg||(Cg=(yield Promise.resolve().then(()=>tb())).getPem),{privateKey:yield Cg(t)};default:throw new xu("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, *.pem, and *.p12.","UNKNOWN_CERTIFICATE_TYPE")}})}getTokenAsync(t){return M(this,null,function*(){if(this.inFlightRequest&&!t.forceRefresh)return this.inFlightRequest;try{return yield this.inFlightRequest=this.getTokenAsyncInner(t)}finally{this.inFlightRequest=void 0}})}getTokenAsyncInner(t){return M(this,null,function*(){if(this.isTokenExpiring()===!1&&t.forceRefresh===!1)return Promise.resolve(this.rawToken);if(!this.key&&!this.keyFile)throw new Error("No key or keyFile set.");if(!this.key&&this.keyFile){let r=yield this.getCredentials(this.keyFile);this.key=r.privateKey,this.iss=r.clientEmail||this.iss,r.clientEmail||this.ensureEmail()}return this.requestToken()})}ensureEmail(){if(!this.iss)throw new xu("email is required.","MISSING_CREDENTIALS")}revokeToken(t){if(t){this.revokeTokenAsync().then(()=>t(),t);return}return this.revokeTokenAsync()}revokeTokenAsync(){return M(this,null,function*(){if(!this.accessToken)throw new Error("No token to revoke.");let t=F8+this.accessToken;yield nb.request({url:t}),this.configure({email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims})})}configure(t={}){this.keyFile=t.keyFile,this.key=t.key,this.rawToken=void 0,this.iss=t.email||t.iss,this.sub=t.sub,this.additionalClaims=t.additionalClaims,typeof t.scope=="object"?this.scope=t.scope.join(" "):this.scope=t.scope,this.eagerRefreshThresholdMillis=t.eagerRefreshThresholdMillis}requestToken(){return M(this,null,function*(){let t=Math.floor(new Date().getTime()/1e3),r=this.additionalClaims||{},n=Object.assign({iss:this.iss,scope:this.scope,aud:ab,exp:t+3600,iat:t,sub:this.sub},r),i=P8.sign({header:{alg:"RS256"},payload:n,secret:this.key});try{let a=yield nb.request({method:"POST",url:ab,data:{grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:i},headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"json"});return this.rawToken=a.data,this.expiresAt=a.data.expires_in===null||a.data.expires_in===void 0?void 0:(t+a.data.expires_in)*1e3,this.rawToken}catch(a){this.rawToken=void 0,this.tokenExpires=void 0;let s=a.response&&a.response.data?a.response.data:{};if(s.error){let l=s.error_description?`: ${s.error_description}`:"";a.message=`${s.error}${l}`}throw a}})}};Su.GoogleToken=sb});var ub=ue((cV,lb)=>{"use strict";lb.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var fb=ue((fV,cb)=>{"use strict";cb.exports=Pt;Pt.Node=Fs;Pt.create=Pt;function Pt(e){var t=this;if(t instanceof Pt||(t=new Pt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}Pt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Pt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Pt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Pt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)G8(this,arguments[e]);return this.length};Pt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)V8(this,arguments[e]);return this.length};Pt.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Pt.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Pt.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};Pt.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};Pt.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};Pt.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};Pt.prototype.map=function(e,t){t=t||this;for(var r=new Pt,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};Pt.prototype.mapReverse=function(e,t){t=t||this;for(var r=new Pt,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};Pt.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=e(r,n.value,i),n=n.next;return r};Pt.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=e(r,n.value,i),n=n.prev;return r};Pt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};Pt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};Pt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Pt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(;i!==null&&n<t;n++,i=i.next)r.push(i.value);return r};Pt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Pt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;i!==null&&n>t;n--)i=i.prev;for(;i!==null&&n>e;n--,i=i.prev)r.push(i.value);return r};Pt.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(var a=[],n=0;i&&n<t;n++)a.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=q8(this,i,r[n]);return a};Pt.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function q8(e,t,r){var n=t===e.head?new Fs(r,null,t,e):new Fs(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function G8(e,t){e.tail=new Fs(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function V8(e,t){e.head=new Fs(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Fs(e,t,r,n){if(!(this instanceof Fs))return new Fs(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{ub()(Pt)}catch(e){}});var vb=ue((dV,yb)=>{"use strict";var K8=fb(),qs=Symbol("max"),ya=Symbol("length"),sl=Symbol("lengthCalculator"),Tu=Symbol("allowStale"),Gs=Symbol("maxAge"),va=Symbol("dispose"),db=Symbol("noDisposeOnSet"),Ur=Symbol("lruList"),wi=Symbol("cache"),hb=Symbol("updateAgeOnGet"),bg=()=>1,pb=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let r=this[qs]=t.max||1/0,n=t.length||bg;if(this[sl]=typeof n!="function"?bg:n,this[Tu]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Gs]=t.maxAge||0,this[va]=t.dispose,this[db]=t.noDisposeOnSet||!1,this[hb]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[qs]=t||1/0,Au(this)}get max(){return this[qs]}set allowStale(t){this[Tu]=!!t}get allowStale(){return this[Tu]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Gs]=t,Au(this)}get maxAge(){return this[Gs]}set lengthCalculator(t){typeof t!="function"&&(t=bg),t!==this[sl]&&(this[sl]=t,this[ya]=0,this[Ur].forEach(r=>{r.length=this[sl](r.value,r.key),this[ya]+=r.length})),Au(this)}get lengthCalculator(){return this[sl]}get length(){return this[ya]}get itemCount(){return this[Ur].length}rforEach(t,r){r=r||this;for(let n=this[Ur].tail;n!==null;){let i=n.prev;mb(this,t,n,r),n=i}}forEach(t,r){r=r||this;for(let n=this[Ur].head;n!==null;){let i=n.next;mb(this,t,n,r),n=i}}keys(){return this[Ur].toArray().map(t=>t.key)}values(){return this[Ur].toArray().map(t=>t.value)}reset(){this[va]&&this[Ur]&&this[Ur].length&&this[Ur].forEach(t=>this[va](t.key,t.value)),this[wi]=new Map,this[Ur]=new K8,this[ya]=0}dump(){return this[Ur].map(t=>vd(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ur]}set(t,r,n){if(n=n||this[Gs],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,a=this[sl](r,t);if(this[wi].has(t)){if(a>this[qs])return ol(this,this[wi].get(t)),!1;let c=this[wi].get(t).value;return this[va]&&(this[db]||this[va](t,c.value)),c.now=i,c.maxAge=n,c.value=r,this[ya]+=a-c.length,c.length=a,this.get(t),Au(this),!0}let s=new gb(t,r,a,i,n);return s.length>this[qs]?(this[va]&&this[va](t,r),!1):(this[ya]+=s.length,this[Ur].unshift(s),this[wi].set(t,this[Ur].head),Au(this),!0)}has(t){if(!this[wi].has(t))return!1;let r=this[wi].get(t).value;return!vd(this,r)}get(t){return xg(this,t,!0)}peek(t){return xg(this,t,!1)}pop(){let t=this[Ur].tail;return t?(ol(this,t),t.value):null}del(t){ol(this,this[wi].get(t))}load(t){this.reset();let r=Date.now();for(let n=t.length-1;n>=0;n--){let i=t[n],a=i.e||0;if(a===0)this.set(i.k,i.v);else{let s=a-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[wi].forEach((t,r)=>xg(this,r,!1))}},xg=(e,t,r)=>{let n=e[wi].get(t);if(n){let i=n.value;if(vd(e,i)){if(ol(e,n),!e[Tu])return}else r&&(e[hb]&&(n.value.now=Date.now()),e[Ur].unshiftNode(n));return i.value}},vd=(e,t)=>{if(!t||!t.maxAge&&!e[Gs])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[Gs]&&r>e[Gs]},Au=e=>{if(e[ya]>e[qs])for(let t=e[Ur].tail;e[ya]>e[qs]&&t!==null;){let r=t.prev;ol(e,t),t=r}},ol=(e,t)=>{if(t){let r=t.value;e[va]&&e[va](r.key,r.value),e[ya]-=r.length,e[wi].delete(r.key),e[Ur].removeNode(t)}},gb=class{constructor(t,r,n,i,a){this.key=t,this.value=r,this.length=n,this.now=i,this.maxAge=a||0}},mb=(e,t,r,n)=>{let i=r.value;vd(e,i)&&(ol(e,r),e[Tu]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};yb.exports=pb});var Sg=ue(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});Ed.JWTAccess=void 0;var j8=v0(),H8=vb(),_b={alg:"RS256",typ:"JWT"},_d=class{constructor(t,r,n,i){this.cache=new H8({max:500,maxAge:60*60*1e3}),this.email=t,this.key=r,this.keyId=n,this.eagerRefreshThresholdMillis=i!=null?i:5*60*1e3}getCachedKey(t,r){let n=t;if(r&&Array.isArray(r)&&r.length?n=t?`${t}_${r.join("_")}`:`${r.join("_")}`:typeof r=="string"&&(n=t?`${t}_${r}`:r),!n)throw Error("Scopes or url must be provided");return n}getRequestHeaders(t,r,n){let i=this.getCachedKey(t,n),a=this.cache.get(i),s=Date.now();if(a&&a.expiration-s>this.eagerRefreshThresholdMillis)return a.headers;let l=Math.floor(Date.now()/1e3),c=_d.getExpirationTime(l),f;if(Array.isArray(n)&&(n=n.join(" ")),n?f={iss:this.email,sub:this.email,scope:n,exp:c,iat:l}:f={iss:this.email,sub:this.email,aud:t,exp:c,iat:l},r){for(let m in f)if(r[m])throw new Error(`The '${m}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let d=this.keyId?on(Zr({},_b),{kid:this.keyId}):_b,h=Object.assign(f,r),y={Authorization:`Bearer ${j8.sign({header:d,payload:h,secret:this.key})}`};return this.cache.set(i,{expiration:c*1e3,headers:y}),y}static getExpirationTime(t){return t+3600}fromJSON(t){if(!t)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!t.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!t.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=t.client_email,this.key=t.private_key,this.keyId=t.private_key_id,this.projectId=t.project_id}fromStream(t,r){if(r)this.fromStreamAsync(t).then(()=>r(),r);else return this.fromStreamAsync(t)}fromStreamAsync(t){return new Promise((r,n)=>{t||n(new Error("Must pass in a stream containing the service account auth settings."));let i="";t.setEncoding("utf8").on("data",a=>i+=a).on("error",n).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),r()}catch(a){n(a)}})})}};Ed.JWTAccess=_d});var Tg=ue(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.JWT=void 0;var Eb=ob(),W8=Sg(),Y8=ks(),wd=class extends Y8.OAuth2Client{constructor(t,r,n,i,a,s){let l=t&&typeof t=="object"?t:{email:t,keyFile:r,key:n,keyId:s,scopes:i,subject:a};super({eagerRefreshThresholdMillis:l.eagerRefreshThresholdMillis,forceRefreshOnFailure:l.forceRefreshOnFailure});this.email=l.email,this.keyFile=l.keyFile,this.key=l.key,this.keyId=l.keyId,this.scopes=l.scopes,this.subject=l.subject,this.additionalClaims=l.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(t){return new wd({email:this.email,keyFile:this.keyFile,key:this.key,keyId:this.keyId,scopes:t,subject:this.subject,additionalClaims:this.additionalClaims})}getRequestMetadataAsync(t){var r=n=>super[n];return M(this,null,function*(){t=this.defaultServicePath?`https://${this.defaultServicePath}/`:t;let i=!this.hasUserScopes()&&t||this.useJWTAccessWithScope&&this.hasAnyScopes();if(!this.apiKey&&i)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:a}=yield this.refreshToken();return{headers:this.addSharedMetadataHeaders({Authorization:`Bearer ${a.id_token}`})}}else{this.access||(this.access=new W8.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let a;this.hasUserScopes()?a=this.scopes:t||(a=this.defaultScopes);let s=yield this.access.getRequestHeaders(t!=null?t:void 0,this.additionalClaims,this.useJWTAccessWithScope?a:void 0);return{headers:this.addSharedMetadataHeaders(s)}}else return this.hasAnyScopes()||this.apiKey?r("getRequestMetadataAsync").call(this,t):{headers:{}}})}fetchIdToken(t){return M(this,null,function*(){let r=new Eb.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:t}});if(yield r.getToken({forceRefresh:!0}),!r.idToken)throw new Error("Unknown error: Failed to fetch ID token");return r.idToken})}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(t){if(t)this.authorizeAsync().then(r=>t(null,r),t);else return this.authorizeAsync()}authorizeAsync(){return M(this,null,function*(){let t=yield this.refreshToken();if(!t)throw new Error("No result returned");return this.credentials=t.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,t.tokens})}refreshTokenNoCache(t){return M(this,null,function*(){let r=this.createGToken(),i={access_token:(yield r.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:r.expiresAt,id_token:r.idToken};return this.emit("tokens",i),{res:null,tokens:i}})}createGToken(){return this.gtoken||(this.gtoken=new Eb.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims})),this.gtoken}fromJSON(t){if(!t)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!t.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!t.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=t.client_email,this.key=t.private_key,this.keyId=t.private_key_id,this.projectId=t.project_id,this.quotaProjectId=t.quota_project_id}fromStream(t,r){if(r)this.fromStreamAsync(t).then(()=>r(),r);else return this.fromStreamAsync(t)}fromStreamAsync(t){return new Promise((r,n)=>{if(!t)throw new Error("Must pass in a stream containing the service account auth settings.");let i="";t.setEncoding("utf8").on("error",n).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),r()}catch(a){n(a)}})})}fromAPIKey(t){if(typeof t!="string")throw new Error("Must provide an API Key string.");this.apiKey=t}getCredentials(){return M(this,null,function*(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let r=yield this.createGToken().getCredentials(this.keyFile);return{private_key:r.privateKey,client_email:r.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")})}};Cd.JWT=wd});var Ag=ue(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});bd.UserRefreshClient=void 0;var z8=ks(),wb=class extends z8.OAuth2Client{constructor(t,r,n,i,a){let s=t&&typeof t=="object"?t:{clientId:t,clientSecret:r,refreshToken:n,eagerRefreshThresholdMillis:i,forceRefreshOnFailure:a};super({clientId:s.clientId,clientSecret:s.clientSecret,eagerRefreshThresholdMillis:s.eagerRefreshThresholdMillis,forceRefreshOnFailure:s.forceRefreshOnFailure});this._refreshToken=s.refreshToken,this.credentials.refresh_token=s.refreshToken}refreshTokenNoCache(t){var r=n=>super[n];return M(this,null,function*(){return r("refreshTokenNoCache").call(this,this._refreshToken)})}fromJSON(t){if(!t)throw new Error("Must pass in a JSON object containing the user refresh token");if(t.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!t.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!t.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!t.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=t.client_id,this._clientSecret=t.client_secret,this._refreshToken=t.refresh_token,this.credentials.refresh_token=t.refresh_token,this.quotaProjectId=t.quota_project_id}fromStream(t,r){if(r)this.fromStreamAsync(t).then(()=>r(),r);else return this.fromStreamAsync(t)}fromStreamAsync(t){return M(this,null,function*(){return new Promise((r,n)=>{if(!t)return n(new Error("Must pass in a stream containing the user refresh token."));let i="";t.setEncoding("utf8").on("error",n).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);return this.fromJSON(a),r()}catch(a){return n(a)}})})})}};bd.UserRefreshClient=wb});var xb=ue(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.getErrorFromOAuthErrorResponse=ll.OAuthClientAuthHandler=void 0;var Cb=require("querystring"),Q8=Uo(),X8=["PUT","POST","PATCH"],bb=class{constructor(t){this.clientAuthentication=t,this.crypto=(0,Q8.createCrypto)()}applyClientAuthenticationOptions(t,r){this.injectAuthenticatedHeaders(t,r),r||this.injectAuthenticatedRequestBody(t)}injectAuthenticatedHeaders(t,r){var n;if(r)t.headers=t.headers||{},Object.assign(t.headers,{Authorization:`Bearer ${r}}`});else if(((n=this.clientAuthentication)===null||n===void 0?void 0:n.confidentialClientType)==="basic"){t.headers=t.headers||{};let i=this.clientAuthentication.clientId,a=this.clientAuthentication.clientSecret||"",s=this.crypto.encodeBase64StringUtf8(`${i}:${a}`);Object.assign(t.headers,{Authorization:`Basic ${s}`})}}injectAuthenticatedRequestBody(t){var r;if(((r=this.clientAuthentication)===null||r===void 0?void 0:r.confidentialClientType)==="request-body"){let n=(t.method||"GET").toUpperCase();if(X8.indexOf(n)!==-1){let i,a=t.headers||{};for(let s in a)if(s.toLowerCase()==="content-type"&&a[s]){i=a[s].toLowerCase();break}if(i==="application/x-www-form-urlencoded"){t.data=t.data||"";let s=Cb.parse(t.data);Object.assign(s,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""}),t.data=Cb.stringify(s)}else if(i==="application/json")t.data=t.data||{},Object.assign(t.data,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""});else throw new Error(`${i} content-types are not supported with ${this.clientAuthentication.confidentialClientType} client authentication`)}else throw new Error(`${n} HTTP method does not support ${this.clientAuthentication.confidentialClientType} client authentication`)}}};ll.OAuthClientAuthHandler=bb;function J8(e,t){let r=e.error,n=e.error_description,i=e.error_uri,a=`Error code ${r}`;typeof n!="undefined"&&(a+=`: ${n}`),typeof i!="undefined"&&(a+=` - ${i}`);let s=new Error(a);if(t){let l=Object.keys(t);t.stack&&l.push("stack"),l.forEach(c=>{c!=="message"&&Object.defineProperty(s,c,{value:t[c],writable:!1,enumerable:!0})})}return s}ll.getErrorFromOAuthErrorResponse=J8});var Ig=ue(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});xd.StsCredentials=void 0;var Z8=Lo(),$8=require("querystring"),eU=nu(),Sb=xb(),Tb=class extends Sb.OAuthClientAuthHandler{constructor(t,r){super(r);this.tokenExchangeEndpoint=t,this.transporter=new eU.DefaultTransporter}exchangeToken(t,r,n){return M(this,null,function*(){var i,a,s;let l={grant_type:t.grantType,resource:t.resource,audience:t.audience,scope:(i=t.scope)===null||i===void 0?void 0:i.join(" "),requested_token_type:t.requestedTokenType,subject_token:t.subjectToken,subject_token_type:t.subjectTokenType,actor_token:(a=t.actingParty)===null||a===void 0?void 0:a.actorToken,actor_token_type:(s=t.actingParty)===null||s===void 0?void 0:s.actorTokenType,options:n&&JSON.stringify(n)};Object.keys(l).forEach(d=>{typeof l[d]=="undefined"&&delete l[d]});let c={"Content-Type":"application/x-www-form-urlencoded"};Object.assign(c,r||{});let f={url:this.tokenExchangeEndpoint,method:"POST",headers:c,data:$8.stringify(l),responseType:"json"};this.applyClientAuthenticationOptions(f);try{let d=yield this.transporter.request(f),h=d.data;return h.res=d,h}catch(d){throw d instanceof Z8.GaxiosError&&d.response?(0,Sb.getErrorFromOAuthErrorResponse)(d.response.data,d):d}})}};xd.StsCredentials=Tb});var ul=ue(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.BaseExternalAccountClient=xn.CLOUD_RESOURCE_MANAGER=xn.EXTERNAL_ACCOUNT_TYPE=xn.EXPIRATION_TIME_OFFSET=void 0;var tU=require("stream"),rU=iu(),nU=Ig(),iU="urn:ietf:params:oauth:grant-type:token-exchange",aU="urn:ietf:params:oauth:token-type:access_token",kg="https://www.googleapis.com/auth/cloud-platform",Sd="\\.googleapis\\.com$",Rg="[^\\.\\s\\/\\\\]+";xn.EXPIRATION_TIME_OFFSET=5*60*1e3;xn.EXTERNAL_ACCOUNT_TYPE="external_account";xn.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";var sU="//iam.googleapis.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",Ab=class extends rU.AuthClient{constructor(t,r){super();if(t.type!==xn.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${xn.EXTERNAL_ACCOUNT_TYPE}" type but received "${t.type}"`);if(this.clientAuth=t.client_id?{confidentialClientType:"basic",clientId:t.client_id,clientSecret:t.client_secret}:void 0,!this.validateGoogleAPIsUrl("sts",t.token_url))throw new Error(`"${t.token_url}" is not a valid token url.`);this.stsCredential=new nU.StsCredentials(t.token_url,this.clientAuth),this.scopes=[kg],this.cachedAccessToken=null,this.audience=t.audience,this.subjectTokenType=t.subject_token_type,this.quotaProjectId=t.quota_project_id,this.workforcePoolUserProject=t.workforce_pool_user_project;let n=new RegExp(sU);if(this.workforcePoolUserProject&&!this.audience.match(n))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");if(typeof t.service_account_impersonation_url!="undefined"&&!this.validateGoogleAPIsUrl("iamcredentials",t.service_account_impersonation_url))throw new Error(`"${t.service_account_impersonation_url}" is not a valid service account impersonation url.`);this.serviceAccountImpersonationUrl=t.service_account_impersonation_url,typeof(r==null?void 0:r.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=xn.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=r.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(r==null?void 0:r.forceRefreshOnFailure),this.projectId=null,this.projectNumber=this.getProjectNumber(this.audience)}getServiceAccountEmail(){var t;if(this.serviceAccountImpersonationUrl){let n=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return((t=n==null?void 0:n.groups)===null||t===void 0?void 0:t.email)||null}return null}setCredentials(t){super.setCredentials(t),this.cachedAccessToken=t}getAccessToken(){return M(this,null,function*(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}})}getRequestHeaders(){return M(this,null,function*(){let r={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(r)})}request(t,r){if(r)this.requestAsync(t).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(t)}getProjectId(){return M(this,null,function*(){let t=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(t){let r=yield this.getRequestHeaders(),n=yield this.transporter.request({headers:r,url:`${xn.CLOUD_RESOURCE_MANAGER}${t}`,responseType:"json"});return this.projectId=n.data.projectId,this.projectId}return null})}requestAsync(t,r=!1){return M(this,null,function*(){let n;try{let i=yield this.getRequestHeaders();t.headers=t.headers||{},i&&i["x-goog-user-project"]&&(t.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(t.headers.Authorization=i.Authorization),n=yield this.transporter.request(t)}catch(i){let a=i.response;if(a){let s=a.status,l=a.config.data instanceof tU.Readable;if(!r&&(s===401||s===403)&&!l&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(t,!0)}throw i}return n})}refreshAccessTokenAsync(){return M(this,null,function*(){let t=yield this.retrieveSubjectToken(),r={grantType:iU,audience:this.audience,requestedTokenType:aU,subjectToken:t,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[kg]:this.getScopesArray()},n=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,i=yield this.stsCredential.exchangeToken(r,void 0,n);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=yield this.getImpersonatedAccessToken(i.access_token):i.expires_in?this.cachedAccessToken={access_token:i.access_token,expiry_date:new Date().getTime()+i.expires_in*1e3,res:i.res}:this.cachedAccessToken={access_token:i.access_token,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken})}getProjectNumber(t){let r=t.match(/\/projects\/([^/]+)/);return r?r[1]:null}getImpersonatedAccessToken(t){return M(this,null,function*(){let r={url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},data:{scope:this.getScopesArray()},responseType:"json"},n=yield this.transporter.request(r),i=n.data;return{access_token:i.accessToken,expiry_date:new Date(i.expireTime).getTime(),res:n}})}isExpired(t){let r=new Date().getTime();return t.expiry_date?r>=t.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:typeof this.scopes=="undefined"?[kg]:this.scopes}validateGoogleAPIsUrl(t,r){let n;try{n=new URL(r)}catch(s){return!1}let i=n.hostname;if(n.protocol!=="https:")return!1;let a=[new RegExp("^"+Rg+"\\."+t+Sd),new RegExp("^"+t+Sd),new RegExp("^"+t+"\\."+Rg+Sd),new RegExp("^"+Rg+"\\-"+t+Sd)];for(let s of a)if(i.match(s))return!0;return!1}};xn.BaseExternalAccountClient=Ab});var Pg=ue(Td=>{"use strict";var Bg,Ng,Dg;Object.defineProperty(Td,"__esModule",{value:!0});Td.IdentityPoolClient=void 0;var Og=require("fs"),Lg=require("util"),oU=ul(),lU=(0,Lg.promisify)((Bg=Og.readFile)!==null&&Bg!==void 0?Bg:()=>{}),uU=(0,Lg.promisify)((Ng=Og.realpath)!==null&&Ng!==void 0?Ng:()=>{}),cU=(0,Lg.promisify)((Dg=Og.lstat)!==null&&Dg!==void 0?Dg:()=>{}),Ib=class extends oU.BaseExternalAccountClient{constructor(t,r){var n,i;super(t,r);if(this.file=t.credential_source.file,this.url=t.credential_source.url,this.headers=t.credential_source.headers,!this.file&&!this.url)throw new Error('No valid Identity Pool "credential_source" provided');if(this.formatType=((n=t.credential_source.format)===null||n===void 0?void 0:n.type)||"text",this.formatSubjectTokenFieldName=(i=t.credential_source.format)===null||i===void 0?void 0:i.subject_token_field_name,this.formatType!=="json"&&this.formatType!=="text")throw new Error(`Invalid credential_source format "${this.formatType}"`);if(this.formatType==="json"&&!this.formatSubjectTokenFieldName)throw new Error("Missing subject_token_field_name for JSON credential_source format")}retrieveSubjectToken(){return M(this,null,function*(){return this.file?yield this.getTokenFromFile(this.file,this.formatType,this.formatSubjectTokenFieldName):yield this.getTokenFromUrl(this.url,this.formatType,this.formatSubjectTokenFieldName,this.headers)})}getTokenFromFile(t,r,n){return M(this,null,function*(){try{if(t=yield uU(t),!(yield cU(t)).isFile())throw new Error}catch(s){throw s instanceof Error&&(s.message=`The file at ${t} does not exist, or it is not a file. ${s.message}`),s}let i,a=yield lU(t,{encoding:"utf8"});if(r==="text"?i=a:r==="json"&&n&&(i=JSON.parse(a)[n]),!i)throw new Error("Unable to parse the subject_token from the credential_source file");return i})}getTokenFromUrl(t,r,n,i){return M(this,null,function*(){let a={url:t,method:"GET",headers:i,responseType:r},s;if(r==="text"?s=(yield this.transporter.request(a)).data:r==="json"&&n&&(s=(yield this.transporter.request(a)).data[n]),!s)throw new Error("Unable to parse the subject_token from the credential_source URL");return s})}};Td.IdentityPoolClient=Ib});var Nb=ue(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});Ad.AwsRequestSigner=void 0;var kb=Uo(),Rb="AWS4-HMAC-SHA256",fU="aws4_request",Bb=class{constructor(t,r){this.getCredentials=t,this.region=r,this.crypto=(0,kb.createCrypto)()}getRequestOptions(t){return M(this,null,function*(){if(!t.url)throw new Error('"url" is required in "amzOptions"');let r=typeof t.data=="object"?JSON.stringify(t.data):t.data,n=t.url,i=t.method||"GET",a=t.body||r,s=t.headers,l=yield this.getCredentials(),c=new URL(n),f=yield hU({crypto:this.crypto,host:c.host,canonicalUri:c.pathname,canonicalQuerystring:c.search.substr(1),method:i,region:this.region,securityCredentials:l,requestPayload:a,additionalAmzHeaders:s}),d=Object.assign(f.amzDate?{"x-amz-date":f.amzDate}:{},{Authorization:f.authorizationHeader,host:c.host},s||{});l.token&&Object.assign(d,{"x-amz-security-token":l.token});let h={url:n,method:i,headers:d};return typeof a!="undefined"&&(h.body=a),h})}};Ad.AwsRequestSigner=Bb;function Iu(e,t,r){return M(this,null,function*(){return yield e.signWithHmacSha256(t,r)})}function dU(e,t,r,n,i){return M(this,null,function*(){let a=yield Iu(e,`AWS4${t}`,r),s=yield Iu(e,a,n),l=yield Iu(e,s,i);return yield Iu(e,l,"aws4_request")})}function hU(e){return M(this,null,function*(){let t=e.additionalAmzHeaders||{},r=e.requestPayload||"",n=e.host.split(".")[0],i=new Date,a=i.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),s=i.toISOString().replace(/[-]/g,"").replace(/T.*/,""),l={};Object.keys(t).forEach(R=>{l[R.toLowerCase()]=t[R]}),e.securityCredentials.token&&(l["x-amz-security-token"]=e.securityCredentials.token);let c=Object.assign({host:e.host},l.date?{}:{"x-amz-date":a},l),f="",d=Object.keys(c).sort();d.forEach(R=>{f+=`${R}:${c[R]}
`});let h=d.join(";"),g=yield e.crypto.sha256DigestHex(r),y=`${e.method}
${e.canonicalUri}
${e.canonicalQuerystring}
${f}
${h}
${g}`,m=`${s}/${e.region}/${n}/${fU}`,_=`${Rb}
${a}
${m}
`+(yield e.crypto.sha256DigestHex(y)),E=yield dU(e.crypto,e.securityCredentials.secretAccessKey,s,e.region,n),w=yield Iu(e.crypto,E,_),S=`${Rb} Credential=${e.securityCredentials.accessKeyId}/${m}, SignedHeaders=${h}, Signature=${(0,kb.fromArrayBufferToHex)(w)}`;return{amzDate:l.date?void 0:a,authorizationHeader:S,canonicalQuerystring:e.canonicalQuerystring}})}});var Ug=ue(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});Id.AwsClient=void 0;var pU=Nb(),gU=ul(),Db=class extends gU.BaseExternalAccountClient{constructor(t,r){var n;super(t,r);this.environmentId=t.credential_source.environment_id,this.regionUrl=t.credential_source.region_url,this.securityCredentialsUrl=t.credential_source.url,this.regionalCredVerificationUrl=t.credential_source.regional_cred_verification_url,this.imdsV2SessionTokenUrl=t.credential_source.imdsv2_session_token_url;let i=(n=this.environmentId)===null||n===void 0?void 0:n.match(/^(aws)(\d+)$/);if(!i||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(i[2],10)!==1)throw new Error(`aws version "${i[2]}" is not supported in the current build.`);this.awsRequestSigner=null,this.region=""}retrieveSubjectToken(){return M(this,null,function*(){if(!this.awsRequestSigner){let i={};this.imdsV2SessionTokenUrl&&(i["x-aws-ec2-metadata-token"]=yield this.getImdsV2SessionToken()),this.region=yield this.getAwsRegion(i),this.awsRequestSigner=new pU.AwsRequestSigner(()=>M(this,null,function*(){if(process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY)return{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN};let a=yield this.getAwsRoleName(i),s=yield this.getAwsSecurityCredentials(a,i);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,token:s.Token}}),this.region)}let t=yield this.awsRequestSigner.getRequestOptions({url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),r=[],n=Object.assign({"x-goog-cloud-target-resource":this.audience},t.headers);for(let i in n)r.push({key:i,value:n[i]});return encodeURIComponent(JSON.stringify({url:t.url,method:t.method,headers:r}))})}getImdsV2SessionToken(){return M(this,null,function*(){let t={url:this.imdsV2SessionTokenUrl,method:"PUT",responseType:"text",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return(yield this.transporter.request(t)).data})}getAwsRegion(t){return M(this,null,function*(){if(process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION)return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION;if(!this.regionUrl)throw new Error('Unable to determine AWS region due to missing "options.credential_source.region_url"');let r={url:this.regionUrl,method:"GET",responseType:"text",headers:t},n=yield this.transporter.request(r);return n.data.substr(0,n.data.length-1)})}getAwsRoleName(t){return M(this,null,function*(){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let r={url:this.securityCredentialsUrl,method:"GET",responseType:"text",headers:t};return(yield this.transporter.request(r)).data})}getAwsSecurityCredentials(t,r){return M(this,null,function*(){return(yield this.transporter.request({url:`${this.securityCredentialsUrl}/${t}`,responseType:"json",headers:r})).data})}};Id.AwsClient=Db});var Mg=ue(kd=>{"use strict";Object.defineProperty(kd,"__esModule",{value:!0});kd.ExternalAccountClient=void 0;var mU=ul(),yU=Pg(),vU=Ug(),Ob=class{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options) or via new GoogleAuth(options).getClient()")}static fromJSON(t,r){var n;return t&&t.type===mU.EXTERNAL_ACCOUNT_TYPE?((n=t.credential_source)===null||n===void 0?void 0:n.environment_id)?new vU.AwsClient(t,r):new yU.IdentityPoolClient(t,r):null}};kd.ExternalAccountClient=Ob});var Ub=ue(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.GoogleAuth=fl.CLOUD_SDK_CLIENT_ID=void 0;var _U=require("child_process"),ku=require("fs"),Fg=gf(),EU=require("os"),qg=require("path"),wU=Uo(),CU=nu(),bU=s0(),xU=o0(),SU=l0(),Vs=Tg(),Lb=Ag(),Pb=Mg(),cl=ul();fl.CLOUD_SDK_CLIENT_ID="764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com";var Gg=class{constructor(t){this.checkIsGCE=void 0,this.jsonContent=null,this.cachedCredential=null,t=t||{},this._cachedProjectId=t.projectId||null,this.cachedCredential=t.authClient||null,this.keyFilename=t.keyFilename||t.keyFile,this.scopes=t.scopes,this.jsonContent=t.credentials||null,this.clientOptions=t.clientOptions}get isGCE(){return this.checkIsGCE}setGapicJWTValues(t){t.defaultServicePath=this.defaultServicePath,t.useJWTAccessWithScope=this.useJWTAccessWithScope,t.defaultScopes=this.defaultScopes}getProjectId(t){if(t)this.getProjectIdAsync().then(r=>t(null,r),t);else return this.getProjectIdAsync()}getProjectIdAsync(){return this._cachedProjectId?Promise.resolve(this._cachedProjectId):(this._getDefaultProjectIdPromise||(this._getDefaultProjectIdPromise=new Promise((t,r)=>M(this,null,function*(){try{let n=this.getProductionProjectId()||(yield this.getFileProjectId())||(yield this.getDefaultServiceProjectId())||(yield this.getGCEProjectId())||(yield this.getExternalAccountClientProjectId());if(this._cachedProjectId=n,!n)throw new Error(`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`);t(n)}catch(n){r(n)}}))),this._getDefaultProjectIdPromise)}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(t={},r){let n;if(typeof t=="function"?r=t:n=t,r)this.getApplicationDefaultAsync(n).then(i=>r(null,i.credential,i.projectId),r);else return this.getApplicationDefaultAsync(n)}getApplicationDefaultAsync(){return M(this,arguments,function*(t={}){if(this.cachedCredential)return{credential:this.cachedCredential,projectId:yield this.getProjectIdAsync()};let r,n;if(r=yield this._tryGetApplicationCredentialsFromEnvironmentVariable(t),r)return r instanceof Vs.JWT?r.scopes=this.scopes:r instanceof cl.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),this.cachedCredential=r,n=yield this.getProjectId(),{credential:r,projectId:n};if(r=yield this._tryGetApplicationCredentialsFromWellKnownFile(t),r)return r instanceof Vs.JWT?r.scopes=this.scopes:r instanceof cl.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),this.cachedCredential=r,n=yield this.getProjectId(),{credential:r,projectId:n};let i;try{i=yield this._checkIsGCE()}catch(a){throw a instanceof Error&&(a.message=`Unexpected error determining execution environment: ${a.message}`),a}if(!i)throw new Error("Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.");return t.scopes=this.getAnyScopes(),this.cachedCredential=new bU.Compute(t),n=yield this.getProjectId(),{projectId:n,credential:this.cachedCredential}})}_checkIsGCE(){return M(this,null,function*(){return this.checkIsGCE===void 0&&(this.checkIsGCE=yield Fg.isAvailable()),this.checkIsGCE})}_tryGetApplicationCredentialsFromEnvironmentVariable(t){return M(this,null,function*(){let r=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!r||r.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(r,t)}catch(n){throw n instanceof Error&&(n.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${n.message}`),n}})}_tryGetApplicationCredentialsFromWellKnownFile(t){return M(this,null,function*(){let r=null;if(this._isWindows())r=process.env.APPDATA;else{let i=process.env.HOME;i&&(r=qg.join(i,".config"))}return r&&(r=qg.join(r,"gcloud","application_default_credentials.json"),ku.existsSync(r)||(r=null)),r?yield this._getApplicationCredentialsFromFilePath(r,t):null})}_getApplicationCredentialsFromFilePath(n){return M(this,arguments,function*(t,r={}){if(!t||t.length===0)throw new Error("The file path is invalid.");try{if(t=ku.realpathSync(t),!ku.lstatSync(t).isFile())throw new Error}catch(a){throw a instanceof Error&&(a.message=`The file at ${t} does not exist, or it is not a file. ${a.message}`),a}let i=ku.createReadStream(t);return this.fromStream(i,r)})}fromJSON(t,r){let n;if(!t)throw new Error("Must pass in a JSON object containing the Google auth settings.");return r=r||{},t.type==="authorized_user"?(n=new Lb.UserRefreshClient(r),n.fromJSON(t)):t.type===cl.EXTERNAL_ACCOUNT_TYPE?(n=Pb.ExternalAccountClient.fromJSON(t,r),n.scopes=this.getAnyScopes()):(r.scopes=this.scopes,n=new Vs.JWT(r),this.setGapicJWTValues(n),n.fromJSON(t)),n}_cacheClientFromJSON(t,r){let n;return r=r||{},t.type==="authorized_user"?(n=new Lb.UserRefreshClient(r),n.fromJSON(t)):t.type===cl.EXTERNAL_ACCOUNT_TYPE?(n=Pb.ExternalAccountClient.fromJSON(t,r),n.scopes=this.getAnyScopes()):(r.scopes=this.scopes,n=new Vs.JWT(r),this.setGapicJWTValues(n),n.fromJSON(t)),this.jsonContent=t,this.cachedCredential=n,n}fromStream(t,r={},n){let i={};if(typeof r=="function"?n=r:i=r,n)this.fromStreamAsync(t,i).then(a=>n(null,a),n);else return this.fromStreamAsync(t,i)}fromStreamAsync(t,r){return new Promise((n,i)=>{if(!t)throw new Error("Must pass in a stream containing the Google auth settings.");let a="";t.setEncoding("utf8").on("error",i).on("data",s=>a+=s).on("end",()=>{try{try{let s=JSON.parse(a),l=this._cacheClientFromJSON(s,r);return n(l)}catch(s){if(!this.keyFilename)throw s;let l=new Vs.JWT(on(Zr({},this.clientOptions),{keyFile:this.keyFilename}));return this.cachedCredential=l,this.setGapicJWTValues(l),n(l)}}catch(s){return i(s)}})})}fromAPIKey(t,r){r=r||{};let n=new Vs.JWT(r);return n.fromAPIKey(t),n}_isWindows(){let t=EU.platform();return!!(t&&t.length>=3&&t.substring(0,3).toLowerCase()==="win")}getDefaultServiceProjectId(){return M(this,null,function*(){return new Promise(t=>{(0,_U.exec)("gcloud config config-helper --format json",(r,n)=>{if(!r&&n)try{let i=JSON.parse(n).configuration.properties.core.project;t(i);return}catch(i){}t(null)})})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}getFileProjectId(){return M(this,null,function*(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let r=yield this.getClient();if(r&&r.projectId)return r.projectId}let t=yield this._tryGetApplicationCredentialsFromEnvironmentVariable();return t?t.projectId:null})}getExternalAccountClientProjectId(){return M(this,null,function*(){return!this.jsonContent||this.jsonContent.type!==cl.EXTERNAL_ACCOUNT_TYPE?null:yield(yield this.getClient()).getProjectId()})}getGCEProjectId(){return M(this,null,function*(){try{return yield Fg.project("project-id")}catch(t){return null}})}getCredentials(t){if(t)this.getCredentialsAsync().then(r=>t(null,r),t);else return this.getCredentialsAsync()}getCredentialsAsync(){return M(this,null,function*(){let t=yield this.getClient();if(t instanceof cl.BaseExternalAccountClient){let i=t.getServiceAccountEmail();if(i)return{client_email:i}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key};if(!(yield this._checkIsGCE()))throw new Error("Unknown error.");let n=yield Fg.instance({property:"service-accounts/",params:{recursive:"true"}});if(!n||!n.default||!n.default.email)throw new Error("Failure from metadata server.");return{client_email:n.default.email}})}getClient(){return M(this,null,function*(){if(!this.cachedCredential)if(this.jsonContent)this._cacheClientFromJSON(this.jsonContent,this.clientOptions);else if(this.keyFilename){let t=qg.resolve(this.keyFilename),r=ku.createReadStream(t);yield this.fromStreamAsync(r,this.clientOptions)}else yield this.getApplicationDefaultAsync(this.clientOptions);return this.cachedCredential})}getIdTokenClient(t){return M(this,null,function*(){let r=yield this.getClient();if(!("fetchIdToken"in r))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new xU.IdTokenClient({targetAudience:t,idTokenProvider:r})})}getAccessToken(){return M(this,null,function*(){return(yield(yield this.getClient()).getAccessToken()).token})}getRequestHeaders(t){return M(this,null,function*(){return(yield this.getClient()).getRequestHeaders(t)})}authorizeRequest(t){return M(this,null,function*(){t=t||{};let r=t.url||t.uri,i=yield(yield this.getClient()).getRequestHeaders(r);return t.headers=Object.assign(t.headers||{},i),t})}request(t){return M(this,null,function*(){return(yield this.getClient()).request(t)})}getEnv(){return(0,SU.getEnv)()}sign(t){return M(this,null,function*(){let r=yield this.getClient(),n=(0,wU.createCrypto)();if(r instanceof Vs.JWT&&r.key)return yield n.sign(r.key,t);if(!(yield this.getProjectId()))throw new Error("Cannot sign data without a project ID.");let a=yield this.getCredentials();if(!a.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(n,a.client_email,t)})}signBlob(t,r,n){return M(this,null,function*(){let i=`https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${r}:signBlob`;return(yield this.request({method:"POST",url:i,data:{payload:t.encodeBase64StringUtf8(n)}})).data.signedBlob})}};fl.GoogleAuth=Gg;Gg.DefaultTransporter=CU.DefaultTransporter});var Fb=ue(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});Rd.IAMAuth=void 0;var Mb=class{constructor(t,r){this.selector=t,this.token=r,this.selector=t,this.token=r}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}};Rd.IAMAuth=Mb});var Vb=ue(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});Bd.Impersonated=void 0;var qb=ks(),TU=Lo(),Gb=class extends qb.OAuth2Client{constructor(t={}){var r,n,i,a,s,l;super(t);this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=(r=t.sourceClient)!==null&&r!==void 0?r:new qb.OAuth2Client,this.targetPrincipal=(n=t.targetPrincipal)!==null&&n!==void 0?n:"",this.delegates=(i=t.delegates)!==null&&i!==void 0?i:[],this.targetScopes=(a=t.targetScopes)!==null&&a!==void 0?a:[],this.lifetime=(s=t.lifetime)!==null&&s!==void 0?s:3600,this.endpoint=(l=t.endpoint)!==null&&l!==void 0?l:"https://iamcredentials.googleapis.com"}refreshToken(t){return M(this,null,function*(){var r,n,i,a,s,l;try{yield this.sourceClient.getAccessToken();let c="projects/-/serviceAccounts/"+this.targetPrincipal,f=`${this.endpoint}/v1/${c}:generateAccessToken`,d={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},h=yield this.sourceClient.request({url:f,data:d,method:"POST"}),g=h.data;return this.credentials.access_token=g.accessToken,this.credentials.expiry_date=Date.parse(g.expireTime),{tokens:this.credentials,res:h}}catch(c){if(!(c instanceof Error))throw c;let f=0,d="";throw c instanceof TU.GaxiosError&&(f=(i=(n=(r=c==null?void 0:c.response)===null||r===void 0?void 0:r.data)===null||n===void 0?void 0:n.error)===null||i===void 0?void 0:i.status,d=(l=(s=(a=c==null?void 0:c.response)===null||a===void 0?void 0:a.data)===null||s===void 0?void 0:s.error)===null||l===void 0?void 0:l.message),f&&d?(c.message=`${f}: unable to impersonate: ${d}`,c):(c.message=`unable to impersonate: ${c}`,c)}})}};Bd.Impersonated=Gb});var jb=ue(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.DownscopedClient=Ci.EXPIRATION_TIME_OFFSET=Ci.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;var AU=require("stream"),IU=iu(),kU=Ig(),RU="urn:ietf:params:oauth:grant-type:token-exchange",BU="urn:ietf:params:oauth:token-type:access_token",NU="urn:ietf:params:oauth:token-type:access_token",DU="https://sts.googleapis.com/v1/token";Ci.MAX_ACCESS_BOUNDARY_RULES_COUNT=10;Ci.EXPIRATION_TIME_OFFSET=5*60*1e3;var Kb=class extends IU.AuthClient{constructor(t,r,n,i){super();if(this.authClient=t,this.credentialAccessBoundary=r,r.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(r.accessBoundary.accessBoundaryRules.length>Ci.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${Ci.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let a of r.accessBoundary.accessBoundaryRules)if(a.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new kU.StsCredentials(DU),this.cachedDownscopedAccessToken=null,typeof(n==null?void 0:n.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=Ci.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=n.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(n==null?void 0:n.forceRefreshOnFailure),this.quotaProjectId=i}setCredentials(t){if(!t.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(t),this.cachedDownscopedAccessToken=t}getAccessToken(){return M(this,null,function*(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}})}getRequestHeaders(){return M(this,null,function*(){let r={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(r)})}request(t,r){if(r)this.requestAsync(t).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(t)}requestAsync(t,r=!1){return M(this,null,function*(){let n;try{let i=yield this.getRequestHeaders();t.headers=t.headers||{},i&&i["x-goog-user-project"]&&(t.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(t.headers.Authorization=i.Authorization),n=yield this.transporter.request(t)}catch(i){let a=i.response;if(a){let s=a.status,l=a.config.data instanceof AU.Readable;if(!r&&(s===401||s===403)&&!l&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(t,!0)}throw i}return n})}refreshAccessTokenAsync(){return M(this,null,function*(){var t;let r=(yield this.authClient.getAccessToken()).token,n={grantType:RU,requestedTokenType:BU,subjectToken:r,subjectTokenType:NU},i=yield this.stsCredential.exchangeToken(n,void 0,this.credentialAccessBoundary),a=((t=this.authClient.credentials)===null||t===void 0?void 0:t.expiry_date)||null,s=i.expires_in?new Date().getTime()+i.expires_in*1e3:a;return this.cachedDownscopedAccessToken={access_token:i.access_token,expiry_date:s,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken})}isExpired(t){let r=new Date().getTime();return t.expiry_date?r>=t.expiry_date-this.eagerRefreshThresholdMillis:!1}};Ci.DownscopedClient=Kb});var Yb=ue(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.GoogleAuth=at.auth=at.DefaultTransporter=at.DownscopedClient=at.BaseExternalAccountClient=at.ExternalAccountClient=at.IdentityPoolClient=at.AwsClient=at.UserRefreshClient=at.LoginTicket=at.OAuth2Client=at.CodeChallengeMethod=at.Impersonated=at.JWT=at.JWTAccess=at.IdTokenClient=at.IAMAuth=at.GCPEnv=at.Compute=at.AuthClient=void 0;var Hb=Ub();Object.defineProperty(at,"GoogleAuth",{enumerable:!0,get:function(){return Hb.GoogleAuth}});var OU=iu();Object.defineProperty(at,"AuthClient",{enumerable:!0,get:function(){return OU.AuthClient}});var LU=s0();Object.defineProperty(at,"Compute",{enumerable:!0,get:function(){return LU.Compute}});var PU=l0();Object.defineProperty(at,"GCPEnv",{enumerable:!0,get:function(){return PU.GCPEnv}});var UU=Fb();Object.defineProperty(at,"IAMAuth",{enumerable:!0,get:function(){return UU.IAMAuth}});var MU=o0();Object.defineProperty(at,"IdTokenClient",{enumerable:!0,get:function(){return MU.IdTokenClient}});var FU=Sg();Object.defineProperty(at,"JWTAccess",{enumerable:!0,get:function(){return FU.JWTAccess}});var qU=Tg();Object.defineProperty(at,"JWT",{enumerable:!0,get:function(){return qU.JWT}});var GU=Vb();Object.defineProperty(at,"Impersonated",{enumerable:!0,get:function(){return GU.Impersonated}});var Wb=ks();Object.defineProperty(at,"CodeChallengeMethod",{enumerable:!0,get:function(){return Wb.CodeChallengeMethod}});Object.defineProperty(at,"OAuth2Client",{enumerable:!0,get:function(){return Wb.OAuth2Client}});var VU=i0();Object.defineProperty(at,"LoginTicket",{enumerable:!0,get:function(){return VU.LoginTicket}});var KU=Ag();Object.defineProperty(at,"UserRefreshClient",{enumerable:!0,get:function(){return KU.UserRefreshClient}});var jU=Ug();Object.defineProperty(at,"AwsClient",{enumerable:!0,get:function(){return jU.AwsClient}});var HU=Pg();Object.defineProperty(at,"IdentityPoolClient",{enumerable:!0,get:function(){return HU.IdentityPoolClient}});var WU=Mg();Object.defineProperty(at,"ExternalAccountClient",{enumerable:!0,get:function(){return WU.ExternalAccountClient}});var YU=ul();Object.defineProperty(at,"BaseExternalAccountClient",{enumerable:!0,get:function(){return YU.BaseExternalAccountClient}});var zU=jb();Object.defineProperty(at,"DownscopedClient",{enumerable:!0,get:function(){return zU.DownscopedClient}});var QU=nu();Object.defineProperty(at,"DefaultTransporter",{enumerable:!0,get:function(){return QU.DefaultTransporter}});var XU=new Hb.GoogleAuth;at.auth=XU});var Kg=ue((IV,Qb)=>{"use strict";var zb=require("fs"),Vg;function JU(){try{return zb.statSync("/.dockerenv"),!0}catch(e){return!1}}function ZU(){try{return zb.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(e){return!1}}Qb.exports=()=>(Vg===void 0&&(Vg=JU()||ZU()),Vg)});var Zb=ue((kV,jg)=>{"use strict";var $U=require("os"),eM=require("fs"),Xb=Kg(),Jb=()=>{if(process.platform!=="linux")return!1;if($U.release().toLowerCase().includes("microsoft"))return!Xb();try{return eM.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Xb():!1}catch(e){return!1}};process.env.__IS_WSL_TEST__?jg.exports=Jb:jg.exports=Jb()});var ex=ue((RV,$b)=>{"use strict";$b.exports=(e,t,r)=>{let n=i=>Object.defineProperty(e,t,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),e}});var ox=ue((Qg,sx)=>{var tM=require("path"),rM=require("child_process"),{promises:Hg,constants:tx}=require("fs"),Nd=Zb(),nM=Kg(),Wg=ex(),rx=tM.join(__dirname,"xdg-open"),{platform:dl,arch:nx}=process,iM=(()=>{let e="/mnt/",t;return function(){return M(this,null,function*(){if(t)return t;let r="/etc/wsl.conf",n=!1;try{yield Hg.access(r,tx.F_OK),n=!0}catch(s){}if(!n)return e;let i=yield Hg.readFile(r,{encoding:"utf8"}),a=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return a?(t=a.groups.mountPoint.trim(),t=t.endsWith("/")?t:`${t}/`,t):e})}})(),ix=(e,t)=>M(Qg,null,function*(){let r;for(let n of e)try{return yield t(n)}catch(i){r=i}throw r}),Dd=e=>M(Qg,null,function*(){if(e=Zr({wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1},e),Array.isArray(e.app))return ix(e.app,l=>Dd(on(Zr({},e),{app:l})));let{name:t,arguments:r=[]}=e.app||{};if(r=[...r],Array.isArray(t))return ix(t,l=>Dd(on(Zr({},e),{app:{name:l,arguments:r}})));let n,i=[],a={};if(dl==="darwin")n="open",e.wait&&i.push("--wait-apps"),e.background&&i.push("--background"),e.newInstance&&i.push("--new"),t&&i.push("-a",t);else if(dl==="win32"||Nd&&!nM()){let l=yield iM();n=Nd?`${l}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),Nd||(a.windowsVerbatimArguments=!0);let c=["Start"];e.wait&&c.push("-Wait"),t?(c.push(`"\`"${t}\`""`,"-ArgumentList"),e.target&&r.unshift(e.target)):e.target&&c.push(`"${e.target}"`),r.length>0&&(r=r.map(f=>`"\`"${f}\`""`),c.push(r.join(","))),e.target=Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(t)n=t;else{let l=!__dirname||__dirname==="/",c=!1;try{yield Hg.access(rx,tx.X_OK),c=!0}catch(d){}n=process.versions.electron||dl==="android"||l||!c?"xdg-open":rx}r.length>0&&i.push(...r),e.wait||(a.stdio="ignore",a.detached=!0)}e.target&&i.push(e.target),dl==="darwin"&&r.length>0&&i.push("--args",...r);let s=rM.spawn(n,i,a);return e.wait?new Promise((l,c)=>{s.once("error",c),s.once("close",f=>{if(e.allowNonzeroExitCode&&f>0){c(new Error(`Exited with code ${f}`));return}l(s)})}):(s.unref(),s)}),Yg=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a `target`");return Dd(on(Zr({},t),{target:e}))},aM=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a `name`");let{arguments:r=[]}=t||{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return Dd(on(Zr({},t),{app:{name:e,arguments:r}}))};function ax(e){if(typeof e=="string"||Array.isArray(e))return e;let{[nx]:t}=e;if(!t)throw new Error(`${nx} is not supported`);return t}function zg({[dl]:e},{wsl:t}){if(t&&Nd)return ax(t);if(!e)throw new Error(`${dl} is not supported`);return ax(e)}var Od={};Wg(Od,"chrome",()=>zg({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));Wg(Od,"firefox",()=>zg({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));Wg(Od,"edge",()=>zg({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));Yg.apps=Od;Yg.openApp=aM;sx.exports=Yg});var ux=ue((BV,lx)=>{lx.exports=sM;function sM(e){var t={};e.on("connection",function(r){var n=r.remoteAddress+":"+r.remotePort;t[n]=r,r.on("close",function(){delete t[n]})}),e.destroy=function(r){e.close(r);for(var n in t)t[n].destroy()}}});var _l=ue((vl,qu)=>{(function(){var e,t="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",a="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,g=1,y=2,m=1,_=2,E=4,w=8,S=16,R=32,B=64,O=128,N=256,ee=512,q=30,F="...",ce=800,se=16,ve=1,Ie=2,Be=3,Se=1/0,Te=9007199254740991,_e=17976931348623157e292,Xe=0/0,Ve=4294967295,yt=Ve-1,ht=Ve>>>1,ze=[["ary",O],["bind",m],["bindKey",_],["curry",w],["curryRight",S],["flip",ee],["partial",R],["partialRight",B],["rearg",N]],fe="[object Arguments]",pt="[object Array]",tt="[object AsyncFunction]",vt="[object Boolean]",Je="[object Date]",we="[object DOMException]",A="[object Error]",D="[object Function]",L="[object GeneratorFunction]",W="[object Map]",V="[object Number]",Q="[object Null]",J="[object Object]",H="[object Promise]",X="[object Proxy]",ne="[object RegExp]",Z="[object Set]",de="[object String]",Ue="[object Symbol]",Fe="[object Undefined]",ot="[object WeakMap]",Vt="[object WeakSet]",Kt="[object ArrayBuffer]",rt="[object DataView]",At="[object Float32Array]",ur="[object Float64Array]",ka="[object Int8Array]",hs="[object Int16Array]",ps="[object Int32Array]",yn="[object Uint8Array]",ea="[object Uint8ClampedArray]",Qr="[object Uint16Array]",Sr="[object Uint32Array]",ir=/\b__p \+= '';/g,v2=/\b(__p \+=) '' \+/g,_2=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Qm=/&(?:amp|lt|gt|quot|#39);/g,Xm=/[&<>"']/g,E2=RegExp(Qm.source),w2=RegExp(Xm.source),C2=/<%-([\s\S]+?)%>/g,b2=/<%([\s\S]+?)%>/g,Jm=/<%=([\s\S]+?)%>/g,x2=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S2=/^\w*$/,T2=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sh=/[\\^$.*+?()[\]{}|]/g,A2=RegExp(Sh.source),Th=/^\s+/,I2=/\s/,k2=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,R2=/\{\n\/\* \[wrapped with (.+)\] \*/,B2=/,? & /,N2=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,D2=/[()=,{}\[\]\/\s]/,O2=/\\(\\)?/g,L2=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Zm=/\w*$/,P2=/^[-+]0x[0-9a-f]+$/i,U2=/^0b[01]+$/i,M2=/^\[object .+?Constructor\]$/,F2=/^0o[0-7]+$/i,q2=/^(?:0|[1-9]\d*)$/,G2=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,cc=/($^)/,V2=/['\n\r\u2028\u2029\\]/g,fc="\\ud800-\\udfff",K2="\\u0300-\\u036f",j2="\\ufe20-\\ufe2f",H2="\\u20d0-\\u20ff",$m=K2+j2+H2,ey="\\u2700-\\u27bf",ty="a-z\\xdf-\\xf6\\xf8-\\xff",W2="\\xac\\xb1\\xd7\\xf7",Y2="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",z2="\\u2000-\\u206f",Q2=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ry="A-Z\\xc0-\\xd6\\xd8-\\xde",ny="\\ufe0e\\ufe0f",iy=W2+Y2+z2+Q2,Ah="['\u2019]",X2="["+fc+"]",ay="["+iy+"]",dc="["+$m+"]",sy="\\d+",J2="["+ey+"]",oy="["+ty+"]",ly="[^"+fc+iy+sy+ey+ty+ry+"]",Ih="\\ud83c[\\udffb-\\udfff]",Z2="(?:"+dc+"|"+Ih+")",uy="[^"+fc+"]",kh="(?:\\ud83c[\\udde6-\\uddff]){2}",Rh="[\\ud800-\\udbff][\\udc00-\\udfff]",mo="["+ry+"]",cy="\\u200d",fy="(?:"+oy+"|"+ly+")",$2="(?:"+mo+"|"+ly+")",dy="(?:"+Ah+"(?:d|ll|m|re|s|t|ve))?",hy="(?:"+Ah+"(?:D|LL|M|RE|S|T|VE))?",py=Z2+"?",gy="["+ny+"]?",eI="(?:"+cy+"(?:"+[uy,kh,Rh].join("|")+")"+gy+py+")*",tI="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rI="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",my=gy+py+eI,nI="(?:"+[J2,kh,Rh].join("|")+")"+my,iI="(?:"+[uy+dc+"?",dc,kh,Rh,X2].join("|")+")",aI=RegExp(Ah,"g"),sI=RegExp(dc,"g"),Bh=RegExp(Ih+"(?="+Ih+")|"+iI+my,"g"),oI=RegExp([mo+"?"+oy+"+"+dy+"(?="+[ay,mo,"$"].join("|")+")",$2+"+"+hy+"(?="+[ay,mo+fy,"$"].join("|")+")",mo+"?"+fy+"+"+dy,mo+"+"+hy,rI,tI,sy,nI].join("|"),"g"),lI=RegExp("["+cy+fc+$m+ny+"]"),uI=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,cI=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],fI=-1,tr={};tr[At]=tr[ur]=tr[ka]=tr[hs]=tr[ps]=tr[yn]=tr[ea]=tr[Qr]=tr[Sr]=!0,tr[fe]=tr[pt]=tr[Kt]=tr[vt]=tr[rt]=tr[Je]=tr[A]=tr[D]=tr[W]=tr[V]=tr[J]=tr[ne]=tr[Z]=tr[de]=tr[ot]=!1;var Qt={};Qt[fe]=Qt[pt]=Qt[Kt]=Qt[rt]=Qt[vt]=Qt[Je]=Qt[At]=Qt[ur]=Qt[ka]=Qt[hs]=Qt[ps]=Qt[W]=Qt[V]=Qt[J]=Qt[ne]=Qt[Z]=Qt[de]=Qt[Ue]=Qt[yn]=Qt[ea]=Qt[Qr]=Qt[Sr]=!0,Qt[A]=Qt[D]=Qt[ot]=!1;var dI={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},hI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pI={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},gI={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},mI=parseFloat,yI=parseInt,yy=typeof global=="object"&&global&&global.Object===Object&&global,vI=typeof self=="object"&&self&&self.Object===Object&&self,Br=yy||vI||Function("return this")(),Nh=typeof vl=="object"&&vl&&!vl.nodeType&&vl,gs=Nh&&typeof qu=="object"&&qu&&!qu.nodeType&&qu,vy=gs&&gs.exports===Nh,Dh=vy&&yy.process,Gn=function(){try{var Y=gs&&gs.require&&gs.require("util").types;return Y||Dh&&Dh.binding&&Dh.binding("util")}catch(le){}}(),_y=Gn&&Gn.isArrayBuffer,Ey=Gn&&Gn.isDate,wy=Gn&&Gn.isMap,Cy=Gn&&Gn.isRegExp,by=Gn&&Gn.isSet,xy=Gn&&Gn.isTypedArray;function kn(Y,le,ie){switch(ie.length){case 0:return Y.call(le);case 1:return Y.call(le,ie[0]);case 2:return Y.call(le,ie[0],ie[1]);case 3:return Y.call(le,ie[0],ie[1],ie[2])}return Y.apply(le,ie)}function _I(Y,le,ie,Le){for(var $e=-1,Ut=Y==null?0:Y.length;++$e<Ut;){var Tr=Y[$e];le(Le,Tr,ie(Tr),Y)}return Le}function Vn(Y,le){for(var ie=-1,Le=Y==null?0:Y.length;++ie<Le&&le(Y[ie],ie,Y)!==!1;);return Y}function EI(Y,le){for(var ie=Y==null?0:Y.length;ie--&&le(Y[ie],ie,Y)!==!1;);return Y}function Sy(Y,le){for(var ie=-1,Le=Y==null?0:Y.length;++ie<Le;)if(!le(Y[ie],ie,Y))return!1;return!0}function Ra(Y,le){for(var ie=-1,Le=Y==null?0:Y.length,$e=0,Ut=[];++ie<Le;){var Tr=Y[ie];le(Tr,ie,Y)&&(Ut[$e++]=Tr)}return Ut}function hc(Y,le){var ie=Y==null?0:Y.length;return!!ie&&yo(Y,le,0)>-1}function Oh(Y,le,ie){for(var Le=-1,$e=Y==null?0:Y.length;++Le<$e;)if(ie(le,Y[Le]))return!0;return!1}function ar(Y,le){for(var ie=-1,Le=Y==null?0:Y.length,$e=Array(Le);++ie<Le;)$e[ie]=le(Y[ie],ie,Y);return $e}function Ba(Y,le){for(var ie=-1,Le=le.length,$e=Y.length;++ie<Le;)Y[$e+ie]=le[ie];return Y}function Lh(Y,le,ie,Le){var $e=-1,Ut=Y==null?0:Y.length;for(Le&&Ut&&(ie=Y[++$e]);++$e<Ut;)ie=le(ie,Y[$e],$e,Y);return ie}function wI(Y,le,ie,Le){var $e=Y==null?0:Y.length;for(Le&&$e&&(ie=Y[--$e]);$e--;)ie=le(ie,Y[$e],$e,Y);return ie}function Ph(Y,le){for(var ie=-1,Le=Y==null?0:Y.length;++ie<Le;)if(le(Y[ie],ie,Y))return!0;return!1}var CI=Uh("length");function bI(Y){return Y.split("")}function xI(Y){return Y.match(N2)||[]}function Ty(Y,le,ie){var Le;return ie(Y,function($e,Ut,Tr){if(le($e,Ut,Tr))return Le=Ut,!1}),Le}function pc(Y,le,ie,Le){for(var $e=Y.length,Ut=ie+(Le?1:-1);Le?Ut--:++Ut<$e;)if(le(Y[Ut],Ut,Y))return Ut;return-1}function yo(Y,le,ie){return le===le?PI(Y,le,ie):pc(Y,Ay,ie)}function SI(Y,le,ie,Le){for(var $e=ie-1,Ut=Y.length;++$e<Ut;)if(Le(Y[$e],le))return $e;return-1}function Ay(Y){return Y!==Y}function Iy(Y,le){var ie=Y==null?0:Y.length;return ie?Fh(Y,le)/ie:Xe}function Uh(Y){return function(le){return le==null?e:le[Y]}}function Mh(Y){return function(le){return Y==null?e:Y[le]}}function ky(Y,le,ie,Le,$e){return $e(Y,function(Ut,Tr,Wt){ie=Le?(Le=!1,Ut):le(ie,Ut,Tr,Wt)}),ie}function TI(Y,le){var ie=Y.length;for(Y.sort(le);ie--;)Y[ie]=Y[ie].value;return Y}function Fh(Y,le){for(var ie,Le=-1,$e=Y.length;++Le<$e;){var Ut=le(Y[Le]);Ut!==e&&(ie=ie===e?Ut:ie+Ut)}return ie}function qh(Y,le){for(var ie=-1,Le=Array(Y);++ie<Y;)Le[ie]=le(ie);return Le}function AI(Y,le){return ar(le,function(ie){return[ie,Y[ie]]})}function Ry(Y){return Y&&Y.slice(0,Oy(Y)+1).replace(Th,"")}function Rn(Y){return function(le){return Y(le)}}function Gh(Y,le){return ar(le,function(ie){return Y[ie]})}function Ll(Y,le){return Y.has(le)}function By(Y,le){for(var ie=-1,Le=Y.length;++ie<Le&&yo(le,Y[ie],0)>-1;);return ie}function Ny(Y,le){for(var ie=Y.length;ie--&&yo(le,Y[ie],0)>-1;);return ie}function II(Y,le){for(var ie=Y.length,Le=0;ie--;)Y[ie]===le&&++Le;return Le}var kI=Mh(dI),RI=Mh(hI);function BI(Y){return"\\"+gI[Y]}function NI(Y,le){return Y==null?e:Y[le]}function vo(Y){return lI.test(Y)}function DI(Y){return uI.test(Y)}function OI(Y){for(var le,ie=[];!(le=Y.next()).done;)ie.push(le.value);return ie}function Vh(Y){var le=-1,ie=Array(Y.size);return Y.forEach(function(Le,$e){ie[++le]=[$e,Le]}),ie}function Dy(Y,le){return function(ie){return Y(le(ie))}}function Na(Y,le){for(var ie=-1,Le=Y.length,$e=0,Ut=[];++ie<Le;){var Tr=Y[ie];(Tr===le||Tr===c)&&(Y[ie]=c,Ut[$e++]=ie)}return Ut}function gc(Y){var le=-1,ie=Array(Y.size);return Y.forEach(function(Le){ie[++le]=Le}),ie}function LI(Y){var le=-1,ie=Array(Y.size);return Y.forEach(function(Le){ie[++le]=[Le,Le]}),ie}function PI(Y,le,ie){for(var Le=ie-1,$e=Y.length;++Le<$e;)if(Y[Le]===le)return Le;return-1}function UI(Y,le,ie){for(var Le=ie+1;Le--;)if(Y[Le]===le)return Le;return Le}function _o(Y){return vo(Y)?FI(Y):CI(Y)}function di(Y){return vo(Y)?qI(Y):bI(Y)}function Oy(Y){for(var le=Y.length;le--&&I2.test(Y.charAt(le)););return le}var MI=Mh(pI);function FI(Y){for(var le=Bh.lastIndex=0;Bh.test(Y);)++le;return le}function qI(Y){return Y.match(Bh)||[]}function GI(Y){return Y.match(oI)||[]}var VI=function Y(le){le=le==null?Br:Da.defaults(Br.Object(),le,Da.pick(Br,cI));var ie=le.Array,Le=le.Date,$e=le.Error,Ut=le.Function,Tr=le.Math,Wt=le.Object,Kh=le.RegExp,KI=le.String,Kn=le.TypeError,mc=ie.prototype,jI=Ut.prototype,Eo=Wt.prototype,yc=le["__core-js_shared__"],vc=jI.toString,Gt=Eo.hasOwnProperty,HI=0,Ly=function(){var o=/[^.]+$/.exec(yc&&yc.keys&&yc.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),_c=Eo.toString,WI=vc.call(Wt),YI=Br._,zI=Kh("^"+vc.call(Gt).replace(Sh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ec=vy?le.Buffer:e,Oa=le.Symbol,wc=le.Uint8Array,Py=Ec?Ec.allocUnsafe:e,Cc=Dy(Wt.getPrototypeOf,Wt),Uy=Wt.create,My=Eo.propertyIsEnumerable,bc=mc.splice,Fy=Oa?Oa.isConcatSpreadable:e,Pl=Oa?Oa.iterator:e,ms=Oa?Oa.toStringTag:e,xc=function(){try{var o=ws(Wt,"defineProperty");return o({},"",{}),o}catch(u){}}(),QI=le.clearTimeout!==Br.clearTimeout&&le.clearTimeout,XI=Le&&Le.now!==Br.Date.now&&Le.now,JI=le.setTimeout!==Br.setTimeout&&le.setTimeout,Sc=Tr.ceil,Tc=Tr.floor,jh=Wt.getOwnPropertySymbols,ZI=Ec?Ec.isBuffer:e,qy=le.isFinite,$I=mc.join,ek=Dy(Wt.keys,Wt),Ar=Tr.max,Xr=Tr.min,tk=Le.now,rk=le.parseInt,Gy=Tr.random,nk=mc.reverse,Hh=ws(le,"DataView"),Ul=ws(le,"Map"),Wh=ws(le,"Promise"),wo=ws(le,"Set"),Ml=ws(le,"WeakMap"),Fl=ws(Wt,"create"),Ac=Ml&&new Ml,Co={},ik=Cs(Hh),ak=Cs(Ul),sk=Cs(Wh),ok=Cs(wo),lk=Cs(Ml),Ic=Oa?Oa.prototype:e,ql=Ic?Ic.valueOf:e,Vy=Ic?Ic.toString:e;function I(o){if(hr(o)&&!nt(o)&&!(o instanceof xt)){if(o instanceof jn)return o;if(Gt.call(o,"__wrapped__"))return Kv(o)}return new jn(o)}var bo=function(){function o(){}return function(u){if(!cr(u))return{};if(Uy)return Uy(u);o.prototype=u;var p=new o;return o.prototype=e,p}}();function kc(){}function jn(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=e}I.templateSettings={escape:C2,evaluate:b2,interpolate:Jm,variable:"",imports:{_:I}},I.prototype=kc.prototype,I.prototype.constructor=I,jn.prototype=bo(kc.prototype),jn.prototype.constructor=jn;function xt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ve,this.__views__=[]}function uk(){var o=new xt(this.__wrapped__);return o.__actions__=vn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=vn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=vn(this.__views__),o}function ck(){if(this.__filtered__){var o=new xt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function fk(){var o=this.__wrapped__.value(),u=this.__dir__,p=nt(o),v=u<0,C=p?o.length:0,k=bR(0,C,this.__views__),P=k.start,G=k.end,z=G-P,he=v?G:P-1,pe=this.__iteratees__,ye=pe.length,ke=0,Me=Xr(z,this.__takeCount__);if(!p||!v&&C==z&&Me==z)return dv(o,this.__actions__);var je=[];e:for(;z--&&ke<Me;){he+=u;for(var ct=-1,He=o[he];++ct<ye;){var _t=pe[ct],It=_t.iteratee,Dn=_t.type,sn=It(He);if(Dn==Ie)He=sn;else if(!sn){if(Dn==ve)continue e;break e}}je[ke++]=He}return je}xt.prototype=bo(kc.prototype),xt.prototype.constructor=xt;function ys(o){var u=-1,p=o==null?0:o.length;for(this.clear();++u<p;){var v=o[u];this.set(v[0],v[1])}}function dk(){this.__data__=Fl?Fl(null):{},this.size=0}function hk(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function pk(o){var u=this.__data__;if(Fl){var p=u[o];return p===s?e:p}return Gt.call(u,o)?u[o]:e}function gk(o){var u=this.__data__;return Fl?u[o]!==e:Gt.call(u,o)}function mk(o,u){var p=this.__data__;return this.size+=this.has(o)?0:1,p[o]=Fl&&u===e?s:u,this}ys.prototype.clear=dk,ys.prototype.delete=hk,ys.prototype.get=pk,ys.prototype.has=gk,ys.prototype.set=mk;function ta(o){var u=-1,p=o==null?0:o.length;for(this.clear();++u<p;){var v=o[u];this.set(v[0],v[1])}}function yk(){this.__data__=[],this.size=0}function vk(o){var u=this.__data__,p=Rc(u,o);if(p<0)return!1;var v=u.length-1;return p==v?u.pop():bc.call(u,p,1),--this.size,!0}function _k(o){var u=this.__data__,p=Rc(u,o);return p<0?e:u[p][1]}function Ek(o){return Rc(this.__data__,o)>-1}function wk(o,u){var p=this.__data__,v=Rc(p,o);return v<0?(++this.size,p.push([o,u])):p[v][1]=u,this}ta.prototype.clear=yk,ta.prototype.delete=vk,ta.prototype.get=_k,ta.prototype.has=Ek,ta.prototype.set=wk;function ra(o){var u=-1,p=o==null?0:o.length;for(this.clear();++u<p;){var v=o[u];this.set(v[0],v[1])}}function Ck(){this.size=0,this.__data__={hash:new ys,map:new(Ul||ta),string:new ys}}function bk(o){var u=Vc(this,o).delete(o);return this.size-=u?1:0,u}function xk(o){return Vc(this,o).get(o)}function Sk(o){return Vc(this,o).has(o)}function Tk(o,u){var p=Vc(this,o),v=p.size;return p.set(o,u),this.size+=p.size==v?0:1,this}ra.prototype.clear=Ck,ra.prototype.delete=bk,ra.prototype.get=xk,ra.prototype.has=Sk,ra.prototype.set=Tk;function vs(o){var u=-1,p=o==null?0:o.length;for(this.__data__=new ra;++u<p;)this.add(o[u])}function Ak(o){return this.__data__.set(o,s),this}function Ik(o){return this.__data__.has(o)}vs.prototype.add=vs.prototype.push=Ak,vs.prototype.has=Ik;function hi(o){var u=this.__data__=new ta(o);this.size=u.size}function kk(){this.__data__=new ta,this.size=0}function Rk(o){var u=this.__data__,p=u.delete(o);return this.size=u.size,p}function Bk(o){return this.__data__.get(o)}function Nk(o){return this.__data__.has(o)}function Dk(o,u){var p=this.__data__;if(p instanceof ta){var v=p.__data__;if(!Ul||v.length<r-1)return v.push([o,u]),this.size=++p.size,this;p=this.__data__=new ra(v)}return p.set(o,u),this.size=p.size,this}hi.prototype.clear=kk,hi.prototype.delete=Rk,hi.prototype.get=Bk,hi.prototype.has=Nk,hi.prototype.set=Dk;function Ky(o,u){var p=nt(o),v=!p&&bs(o),C=!p&&!v&&Fa(o),k=!p&&!v&&!C&&Ao(o),P=p||v||C||k,G=P?qh(o.length,KI):[],z=G.length;for(var he in o)(u||Gt.call(o,he))&&!(P&&(he=="length"||C&&(he=="offset"||he=="parent")||k&&(he=="buffer"||he=="byteLength"||he=="byteOffset")||sa(he,z)))&&G.push(he);return G}function jy(o){var u=o.length;return u?o[np(0,u-1)]:e}function Ok(o,u){return Kc(vn(o),_s(u,0,o.length))}function Lk(o){return Kc(vn(o))}function Yh(o,u,p){(p!==e&&!pi(o[u],p)||p===e&&!(u in o))&&na(o,u,p)}function Gl(o,u,p){var v=o[u];(!(Gt.call(o,u)&&pi(v,p))||p===e&&!(u in o))&&na(o,u,p)}function Rc(o,u){for(var p=o.length;p--;)if(pi(o[p][0],u))return p;return-1}function Pk(o,u,p,v){return La(o,function(C,k,P){u(v,C,p(C),P)}),v}function Hy(o,u){return o&&Bi(u,Nr(u),o)}function Uk(o,u){return o&&Bi(u,En(u),o)}function na(o,u,p){u=="__proto__"&&xc?xc(o,u,{configurable:!0,enumerable:!0,value:p,writable:!0}):o[u]=p}function zh(o,u){for(var p=-1,v=u.length,C=ie(v),k=o==null;++p<v;)C[p]=k?e:Ip(o,u[p]);return C}function _s(o,u,p){return o===o&&(p!==e&&(o=o<=p?o:p),u!==e&&(o=o>=u?o:u)),o}function Hn(o,u,p,v,C,k){var P,G=u&f,z=u&d,he=u&h;if(p&&(P=C?p(o,v,C,k):p(o)),P!==e)return P;if(!cr(o))return o;var pe=nt(o);if(pe){if(P=SR(o),!G)return vn(o,P)}else{var ye=Jr(o),ke=ye==D||ye==L;if(Fa(o))return gv(o,G);if(ye==J||ye==fe||ke&&!C){if(P=z||ke?{}:Ov(o),!G)return z?pR(o,Uk(P,o)):hR(o,Hy(P,o))}else{if(!Qt[ye])return C?o:{};P=TR(o,ye,G)}}k||(k=new hi);var Me=k.get(o);if(Me)return Me;k.set(o,P),u1(o)?o.forEach(function(He){P.add(Hn(He,u,p,He,o,k))}):o1(o)&&o.forEach(function(He,_t){P.set(_t,Hn(He,u,p,_t,o,k))});var je=he?z?pp:hp:z?En:Nr,ct=pe?e:je(o);return Vn(ct||o,function(He,_t){ct&&(_t=He,He=o[_t]),Gl(P,_t,Hn(He,u,p,_t,o,k))}),P}function Mk(o){var u=Nr(o);return function(p){return Wy(p,o,u)}}function Wy(o,u,p){var v=p.length;if(o==null)return!v;for(o=Wt(o);v--;){var C=p[v],k=u[C],P=o[C];if(P===e&&!(C in o)||!k(P))return!1}return!0}function Yy(o,u,p){if(typeof o!="function")throw new Kn(i);return zl(function(){o.apply(e,p)},u)}function Vl(o,u,p,v){var C=-1,k=hc,P=!0,G=o.length,z=[],he=u.length;if(!G)return z;p&&(u=ar(u,Rn(p))),v?(k=Oh,P=!1):u.length>=r&&(k=Ll,P=!1,u=new vs(u));e:for(;++C<G;){var pe=o[C],ye=p==null?pe:p(pe);if(pe=v||pe!==0?pe:0,P&&ye===ye){for(var ke=he;ke--;)if(u[ke]===ye)continue e;z.push(pe)}else k(u,ye,v)||z.push(pe)}return z}var La=Ev(Ri),zy=Ev(Xh,!0);function Fk(o,u){var p=!0;return La(o,function(v,C,k){return p=!!u(v,C,k),p}),p}function Bc(o,u,p){for(var v=-1,C=o.length;++v<C;){var k=o[v],P=u(k);if(P!=null&&(G===e?P===P&&!Nn(P):p(P,G)))var G=P,z=k}return z}function qk(o,u,p,v){var C=o.length;for(p=lt(p),p<0&&(p=-p>C?0:C+p),v=v===e||v>C?C:lt(v),v<0&&(v+=C),v=p>v?0:f1(v);p<v;)o[p++]=u;return o}function Qy(o,u){var p=[];return La(o,function(v,C,k){u(v,C,k)&&p.push(v)}),p}function Vr(o,u,p,v,C){var k=-1,P=o.length;for(p||(p=IR),C||(C=[]);++k<P;){var G=o[k];u>0&&p(G)?u>1?Vr(G,u-1,p,v,C):Ba(C,G):v||(C[C.length]=G)}return C}var Qh=wv(),Xy=wv(!0);function Ri(o,u){return o&&Qh(o,u,Nr)}function Xh(o,u){return o&&Xy(o,u,Nr)}function Nc(o,u){return Ra(u,function(p){return oa(o[p])})}function Es(o,u){u=Ua(u,o);for(var p=0,v=u.length;o!=null&&p<v;)o=o[Ni(u[p++])];return p&&p==v?o:e}function Jy(o,u,p){var v=u(o);return nt(o)?v:Ba(v,p(o))}function nn(o){return o==null?o===e?Fe:Q:ms&&ms in Wt(o)?CR(o):LR(o)}function Jh(o,u){return o>u}function Gk(o,u){return o!=null&&Gt.call(o,u)}function Vk(o,u){return o!=null&&u in Wt(o)}function Kk(o,u,p){return o>=Xr(u,p)&&o<Ar(u,p)}function Zh(o,u,p){for(var v=p?Oh:hc,C=o[0].length,k=o.length,P=k,G=ie(k),z=1/0,he=[];P--;){var pe=o[P];P&&u&&(pe=ar(pe,Rn(u))),z=Xr(pe.length,z),G[P]=!p&&(u||C>=120&&pe.length>=120)?new vs(P&&pe):e}pe=o[0];var ye=-1,ke=G[0];e:for(;++ye<C&&he.length<z;){var Me=pe[ye],je=u?u(Me):Me;if(Me=p||Me!==0?Me:0,!(ke?Ll(ke,je):v(he,je,p))){for(P=k;--P;){var ct=G[P];if(!(ct?Ll(ct,je):v(o[P],je,p)))continue e}ke&&ke.push(je),he.push(Me)}}return he}function jk(o,u,p,v){return Ri(o,function(C,k,P){u(v,p(C),k,P)}),v}function Kl(o,u,p){u=Ua(u,o),o=Mv(o,u);var v=o==null?o:o[Ni(Yn(u))];return v==null?e:kn(v,o,p)}function Zy(o){return hr(o)&&nn(o)==fe}function Hk(o){return hr(o)&&nn(o)==Kt}function Wk(o){return hr(o)&&nn(o)==Je}function jl(o,u,p,v,C){return o===u?!0:o==null||u==null||!hr(o)&&!hr(u)?o!==o&&u!==u:Yk(o,u,p,v,jl,C)}function Yk(o,u,p,v,C,k){var P=nt(o),G=nt(u),z=P?pt:Jr(o),he=G?pt:Jr(u);z=z==fe?J:z,he=he==fe?J:he;var pe=z==J,ye=he==J,ke=z==he;if(ke&&Fa(o)){if(!Fa(u))return!1;P=!0,pe=!1}if(ke&&!pe)return k||(k=new hi),P||Ao(o)?Bv(o,u,p,v,C,k):ER(o,u,z,p,v,C,k);if(!(p&g)){var Me=pe&&Gt.call(o,"__wrapped__"),je=ye&&Gt.call(u,"__wrapped__");if(Me||je){var ct=Me?o.value():o,He=je?u.value():u;return k||(k=new hi),C(ct,He,p,v,k)}}return ke?(k||(k=new hi),wR(o,u,p,v,C,k)):!1}function zk(o){return hr(o)&&Jr(o)==W}function $h(o,u,p,v){var C=p.length,k=C,P=!v;if(o==null)return!k;for(o=Wt(o);C--;){var G=p[C];if(P&&G[2]?G[1]!==o[G[0]]:!(G[0]in o))return!1}for(;++C<k;){G=p[C];var z=G[0],he=o[z],pe=G[1];if(P&&G[2]){if(he===e&&!(z in o))return!1}else{var ye=new hi;if(v)var ke=v(he,pe,z,o,u,ye);if(!(ke===e?jl(pe,he,g|y,v,ye):ke))return!1}}return!0}function $y(o){if(!cr(o)||RR(o))return!1;var u=oa(o)?zI:M2;return u.test(Cs(o))}function Qk(o){return hr(o)&&nn(o)==ne}function Xk(o){return hr(o)&&Jr(o)==Z}function Jk(o){return hr(o)&&Qc(o.length)&&!!tr[nn(o)]}function ev(o){return typeof o=="function"?o:o==null?wn:typeof o=="object"?nt(o)?nv(o[0],o[1]):rv(o):C1(o)}function ep(o){if(!Yl(o))return ek(o);var u=[];for(var p in Wt(o))Gt.call(o,p)&&p!="constructor"&&u.push(p);return u}function Zk(o){if(!cr(o))return OR(o);var u=Yl(o),p=[];for(var v in o)v=="constructor"&&(u||!Gt.call(o,v))||p.push(v);return p}function tp(o,u){return o<u}function tv(o,u){var p=-1,v=_n(o)?ie(o.length):[];return La(o,function(C,k,P){v[++p]=u(C,k,P)}),v}function rv(o){var u=mp(o);return u.length==1&&u[0][2]?Pv(u[0][0],u[0][1]):function(p){return p===o||$h(p,o,u)}}function nv(o,u){return vp(o)&&Lv(u)?Pv(Ni(o),u):function(p){var v=Ip(p,o);return v===e&&v===u?kp(p,o):jl(u,v,g|y)}}function Dc(o,u,p,v,C){o!==u&&Qh(u,function(k,P){if(C||(C=new hi),cr(k))$k(o,u,P,p,Dc,v,C);else{var G=v?v(Ep(o,P),k,P+"",o,u,C):e;G===e&&(G=k),Yh(o,P,G)}},En)}function $k(o,u,p,v,C,k,P){var G=Ep(o,p),z=Ep(u,p),he=P.get(z);if(he){Yh(o,p,he);return}var pe=k?k(G,z,p+"",o,u,P):e,ye=pe===e;if(ye){var ke=nt(z),Me=!ke&&Fa(z),je=!ke&&!Me&&Ao(z);pe=z,ke||Me||je?nt(G)?pe=G:mr(G)?pe=vn(G):Me?(ye=!1,pe=gv(z,!0)):je?(ye=!1,pe=mv(z,!0)):pe=[]:Ql(z)||bs(z)?(pe=G,bs(G)?pe=d1(G):(!cr(G)||oa(G))&&(pe=Ov(z))):ye=!1}ye&&(P.set(z,pe),C(pe,z,v,k,P),P.delete(z)),Yh(o,p,pe)}function iv(o,u){var p=o.length;if(!!p)return u+=u<0?p:0,sa(u,p)?o[u]:e}function av(o,u,p){u.length?u=ar(u,function(k){return nt(k)?function(P){return Es(P,k.length===1?k[0]:k)}:k}):u=[wn];var v=-1;u=ar(u,Rn(Ke()));var C=tv(o,function(k,P,G){var z=ar(u,function(he){return he(k)});return{criteria:z,index:++v,value:k}});return TI(C,function(k,P){return dR(k,P,p)})}function eR(o,u){return sv(o,u,function(p,v){return kp(o,v)})}function sv(o,u,p){for(var v=-1,C=u.length,k={};++v<C;){var P=u[v],G=Es(o,P);p(G,P)&&Hl(k,Ua(P,o),G)}return k}function tR(o){return function(u){return Es(u,o)}}function rp(o,u,p,v){var C=v?SI:yo,k=-1,P=u.length,G=o;for(o===u&&(u=vn(u)),p&&(G=ar(o,Rn(p)));++k<P;)for(var z=0,he=u[k],pe=p?p(he):he;(z=C(G,pe,z,v))>-1;)G!==o&&bc.call(G,z,1),bc.call(o,z,1);return o}function ov(o,u){for(var p=o?u.length:0,v=p-1;p--;){var C=u[p];if(p==v||C!==k){var k=C;sa(C)?bc.call(o,C,1):sp(o,C)}}return o}function np(o,u){return o+Tc(Gy()*(u-o+1))}function rR(o,u,p,v){for(var C=-1,k=Ar(Sc((u-o)/(p||1)),0),P=ie(k);k--;)P[v?k:++C]=o,o+=p;return P}function ip(o,u){var p="";if(!o||u<1||u>Te)return p;do u%2&&(p+=o),u=Tc(u/2),u&&(o+=o);while(u);return p}function gt(o,u){return wp(Uv(o,u,wn),o+"")}function nR(o){return jy(Io(o))}function iR(o,u){var p=Io(o);return Kc(p,_s(u,0,p.length))}function Hl(o,u,p,v){if(!cr(o))return o;u=Ua(u,o);for(var C=-1,k=u.length,P=k-1,G=o;G!=null&&++C<k;){var z=Ni(u[C]),he=p;if(z==="__proto__"||z==="constructor"||z==="prototype")return o;if(C!=P){var pe=G[z];he=v?v(pe,z,G):e,he===e&&(he=cr(pe)?pe:sa(u[C+1])?[]:{})}Gl(G,z,he),G=G[z]}return o}var lv=Ac?function(o,u){return Ac.set(o,u),o}:wn,aR=xc?function(o,u){return xc(o,"toString",{configurable:!0,enumerable:!1,value:Bp(u),writable:!0})}:wn;function sR(o){return Kc(Io(o))}function Wn(o,u,p){var v=-1,C=o.length;u<0&&(u=-u>C?0:C+u),p=p>C?C:p,p<0&&(p+=C),C=u>p?0:p-u>>>0,u>>>=0;for(var k=ie(C);++v<C;)k[v]=o[v+u];return k}function oR(o,u){var p;return La(o,function(v,C,k){return p=u(v,C,k),!p}),!!p}function Oc(o,u,p){var v=0,C=o==null?v:o.length;if(typeof u=="number"&&u===u&&C<=ht){for(;v<C;){var k=v+C>>>1,P=o[k];P!==null&&!Nn(P)&&(p?P<=u:P<u)?v=k+1:C=k}return C}return ap(o,u,wn,p)}function ap(o,u,p,v){var C=0,k=o==null?0:o.length;if(k===0)return 0;u=p(u);for(var P=u!==u,G=u===null,z=Nn(u),he=u===e;C<k;){var pe=Tc((C+k)/2),ye=p(o[pe]),ke=ye!==e,Me=ye===null,je=ye===ye,ct=Nn(ye);if(P)var He=v||je;else he?He=je&&(v||ke):G?He=je&&ke&&(v||!Me):z?He=je&&ke&&!Me&&(v||!ct):Me||ct?He=!1:He=v?ye<=u:ye<u;He?C=pe+1:k=pe}return Xr(k,yt)}function uv(o,u){for(var p=-1,v=o.length,C=0,k=[];++p<v;){var P=o[p],G=u?u(P):P;if(!p||!pi(G,z)){var z=G;k[C++]=P===0?0:P}}return k}function cv(o){return typeof o=="number"?o:Nn(o)?Xe:+o}function Bn(o){if(typeof o=="string")return o;if(nt(o))return ar(o,Bn)+"";if(Nn(o))return Vy?Vy.call(o):"";var u=o+"";return u=="0"&&1/o==-Se?"-0":u}function Pa(o,u,p){var v=-1,C=hc,k=o.length,P=!0,G=[],z=G;if(p)P=!1,C=Oh;else if(k>=r){var he=u?null:vR(o);if(he)return gc(he);P=!1,C=Ll,z=new vs}else z=u?[]:G;e:for(;++v<k;){var pe=o[v],ye=u?u(pe):pe;if(pe=p||pe!==0?pe:0,P&&ye===ye){for(var ke=z.length;ke--;)if(z[ke]===ye)continue e;u&&z.push(ye),G.push(pe)}else C(z,ye,p)||(z!==G&&z.push(ye),G.push(pe))}return G}function sp(o,u){return u=Ua(u,o),o=Mv(o,u),o==null||delete o[Ni(Yn(u))]}function fv(o,u,p,v){return Hl(o,u,p(Es(o,u)),v)}function Lc(o,u,p,v){for(var C=o.length,k=v?C:-1;(v?k--:++k<C)&&u(o[k],k,o););return p?Wn(o,v?0:k,v?k+1:C):Wn(o,v?k+1:0,v?C:k)}function dv(o,u){var p=o;return p instanceof xt&&(p=p.value()),Lh(u,function(v,C){return C.func.apply(C.thisArg,Ba([v],C.args))},p)}function op(o,u,p){var v=o.length;if(v<2)return v?Pa(o[0]):[];for(var C=-1,k=ie(v);++C<v;)for(var P=o[C],G=-1;++G<v;)G!=C&&(k[C]=Vl(k[C]||P,o[G],u,p));return Pa(Vr(k,1),u,p)}function hv(o,u,p){for(var v=-1,C=o.length,k=u.length,P={};++v<C;){var G=v<k?u[v]:e;p(P,o[v],G)}return P}function lp(o){return mr(o)?o:[]}function up(o){return typeof o=="function"?o:wn}function Ua(o,u){return nt(o)?o:vp(o,u)?[o]:Vv(Mt(o))}var lR=gt;function Ma(o,u,p){var v=o.length;return p=p===e?v:p,!u&&p>=v?o:Wn(o,u,p)}var pv=QI||function(o){return Br.clearTimeout(o)};function gv(o,u){if(u)return o.slice();var p=o.length,v=Py?Py(p):new o.constructor(p);return o.copy(v),v}function cp(o){var u=new o.constructor(o.byteLength);return new wc(u).set(new wc(o)),u}function uR(o,u){var p=u?cp(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.byteLength)}function cR(o){var u=new o.constructor(o.source,Zm.exec(o));return u.lastIndex=o.lastIndex,u}function fR(o){return ql?Wt(ql.call(o)):{}}function mv(o,u){var p=u?cp(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.length)}function yv(o,u){if(o!==u){var p=o!==e,v=o===null,C=o===o,k=Nn(o),P=u!==e,G=u===null,z=u===u,he=Nn(u);if(!G&&!he&&!k&&o>u||k&&P&&z&&!G&&!he||v&&P&&z||!p&&z||!C)return 1;if(!v&&!k&&!he&&o<u||he&&p&&C&&!v&&!k||G&&p&&C||!P&&C||!z)return-1}return 0}function dR(o,u,p){for(var v=-1,C=o.criteria,k=u.criteria,P=C.length,G=p.length;++v<P;){var z=yv(C[v],k[v]);if(z){if(v>=G)return z;var he=p[v];return z*(he=="desc"?-1:1)}}return o.index-u.index}function vv(o,u,p,v){for(var C=-1,k=o.length,P=p.length,G=-1,z=u.length,he=Ar(k-P,0),pe=ie(z+he),ye=!v;++G<z;)pe[G]=u[G];for(;++C<P;)(ye||C<k)&&(pe[p[C]]=o[C]);for(;he--;)pe[G++]=o[C++];return pe}function _v(o,u,p,v){for(var C=-1,k=o.length,P=-1,G=p.length,z=-1,he=u.length,pe=Ar(k-G,0),ye=ie(pe+he),ke=!v;++C<pe;)ye[C]=o[C];for(var Me=C;++z<he;)ye[Me+z]=u[z];for(;++P<G;)(ke||C<k)&&(ye[Me+p[P]]=o[C++]);return ye}function vn(o,u){var p=-1,v=o.length;for(u||(u=ie(v));++p<v;)u[p]=o[p];return u}function Bi(o,u,p,v){var C=!p;p||(p={});for(var k=-1,P=u.length;++k<P;){var G=u[k],z=v?v(p[G],o[G],G,p,o):e;z===e&&(z=o[G]),C?na(p,G,z):Gl(p,G,z)}return p}function hR(o,u){return Bi(o,yp(o),u)}function pR(o,u){return Bi(o,Nv(o),u)}function Pc(o,u){return function(p,v){var C=nt(p)?_I:Pk,k=u?u():{};return C(p,o,Ke(v,2),k)}}function xo(o){return gt(function(u,p){var v=-1,C=p.length,k=C>1?p[C-1]:e,P=C>2?p[2]:e;for(k=o.length>3&&typeof k=="function"?(C--,k):e,P&&an(p[0],p[1],P)&&(k=C<3?e:k,C=1),u=Wt(u);++v<C;){var G=p[v];G&&o(u,G,v,k)}return u})}function Ev(o,u){return function(p,v){if(p==null)return p;if(!_n(p))return o(p,v);for(var C=p.length,k=u?C:-1,P=Wt(p);(u?k--:++k<C)&&v(P[k],k,P)!==!1;);return p}}function wv(o){return function(u,p,v){for(var C=-1,k=Wt(u),P=v(u),G=P.length;G--;){var z=P[o?G:++C];if(p(k[z],z,k)===!1)break}return u}}function gR(o,u,p){var v=u&m,C=Wl(o);function k(){var P=this&&this!==Br&&this instanceof k?C:o;return P.apply(v?p:this,arguments)}return k}function Cv(o){return function(u){u=Mt(u);var p=vo(u)?di(u):e,v=p?p[0]:u.charAt(0),C=p?Ma(p,1).join(""):u.slice(1);return v[o]()+C}}function So(o){return function(u){return Lh(E1(_1(u).replace(aI,"")),o,"")}}function Wl(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var p=bo(o.prototype),v=o.apply(p,u);return cr(v)?v:p}}function mR(o,u,p){var v=Wl(o);function C(){for(var k=arguments.length,P=ie(k),G=k,z=To(C);G--;)P[G]=arguments[G];var he=k<3&&P[0]!==z&&P[k-1]!==z?[]:Na(P,z);if(k-=he.length,k<p)return Av(o,u,Uc,C.placeholder,e,P,he,e,e,p-k);var pe=this&&this!==Br&&this instanceof C?v:o;return kn(pe,this,P)}return C}function bv(o){return function(u,p,v){var C=Wt(u);if(!_n(u)){var k=Ke(p,3);u=Nr(u),p=function(G){return k(C[G],G,C)}}var P=o(u,p,v);return P>-1?C[k?u[P]:P]:e}}function xv(o){return aa(function(u){var p=u.length,v=p,C=jn.prototype.thru;for(o&&u.reverse();v--;){var k=u[v];if(typeof k!="function")throw new Kn(i);if(C&&!P&&Gc(k)=="wrapper")var P=new jn([],!0)}for(v=P?v:p;++v<p;){k=u[v];var G=Gc(k),z=G=="wrapper"?gp(k):e;z&&_p(z[0])&&z[1]==(O|w|R|N)&&!z[4].length&&z[9]==1?P=P[Gc(z[0])].apply(P,z[3]):P=k.length==1&&_p(k)?P[G]():P.thru(k)}return function(){var he=arguments,pe=he[0];if(P&&he.length==1&&nt(pe))return P.plant(pe).value();for(var ye=0,ke=p?u[ye].apply(this,he):pe;++ye<p;)ke=u[ye].call(this,ke);return ke}})}function Uc(o,u,p,v,C,k,P,G,z,he){var pe=u&O,ye=u&m,ke=u&_,Me=u&(w|S),je=u&ee,ct=ke?e:Wl(o);function He(){for(var _t=arguments.length,It=ie(_t),Dn=_t;Dn--;)It[Dn]=arguments[Dn];if(Me)var sn=To(He),On=II(It,sn);if(v&&(It=vv(It,v,C,Me)),k&&(It=_v(It,k,P,Me)),_t-=On,Me&&_t<he){var yr=Na(It,sn);return Av(o,u,Uc,He.placeholder,p,It,yr,G,z,he-_t)}var gi=ye?p:this,ua=ke?gi[o]:o;return _t=It.length,G?It=PR(It,G):je&&_t>1&&It.reverse(),pe&&z<_t&&(It.length=z),this&&this!==Br&&this instanceof He&&(ua=ct||Wl(ua)),ua.apply(gi,It)}return He}function Sv(o,u){return function(p,v){return jk(p,o,u(v),{})}}function Mc(o,u){return function(p,v){var C;if(p===e&&v===e)return u;if(p!==e&&(C=p),v!==e){if(C===e)return v;typeof p=="string"||typeof v=="string"?(p=Bn(p),v=Bn(v)):(p=cv(p),v=cv(v)),C=o(p,v)}return C}}function fp(o){return aa(function(u){return u=ar(u,Rn(Ke())),gt(function(p){var v=this;return o(u,function(C){return kn(C,v,p)})})})}function Fc(o,u){u=u===e?" ":Bn(u);var p=u.length;if(p<2)return p?ip(u,o):u;var v=ip(u,Sc(o/_o(u)));return vo(u)?Ma(di(v),0,o).join(""):v.slice(0,o)}function yR(o,u,p,v){var C=u&m,k=Wl(o);function P(){for(var G=-1,z=arguments.length,he=-1,pe=v.length,ye=ie(pe+z),ke=this&&this!==Br&&this instanceof P?k:o;++he<pe;)ye[he]=v[he];for(;z--;)ye[he++]=arguments[++G];return kn(ke,C?p:this,ye)}return P}function Tv(o){return function(u,p,v){return v&&typeof v!="number"&&an(u,p,v)&&(p=v=e),u=la(u),p===e?(p=u,u=0):p=la(p),v=v===e?u<p?1:-1:la(v),rR(u,p,v,o)}}function qc(o){return function(u,p){return typeof u=="string"&&typeof p=="string"||(u=zn(u),p=zn(p)),o(u,p)}}function Av(o,u,p,v,C,k,P,G,z,he){var pe=u&w,ye=pe?P:e,ke=pe?e:P,Me=pe?k:e,je=pe?e:k;u|=pe?R:B,u&=~(pe?B:R),u&E||(u&=~(m|_));var ct=[o,u,C,Me,ye,je,ke,G,z,he],He=p.apply(e,ct);return _p(o)&&Fv(He,ct),He.placeholder=v,qv(He,o,u)}function dp(o){var u=Tr[o];return function(p,v){if(p=zn(p),v=v==null?0:Xr(lt(v),292),v&&qy(p)){var C=(Mt(p)+"e").split("e"),k=u(C[0]+"e"+(+C[1]+v));return C=(Mt(k)+"e").split("e"),+(C[0]+"e"+(+C[1]-v))}return u(p)}}var vR=wo&&1/gc(new wo([,-0]))[1]==Se?function(o){return new wo(o)}:Op;function Iv(o){return function(u){var p=Jr(u);return p==W?Vh(u):p==Z?LI(u):AI(u,o(u))}}function ia(o,u,p,v,C,k,P,G){var z=u&_;if(!z&&typeof o!="function")throw new Kn(i);var he=v?v.length:0;if(he||(u&=~(R|B),v=C=e),P=P===e?P:Ar(lt(P),0),G=G===e?G:lt(G),he-=C?C.length:0,u&B){var pe=v,ye=C;v=C=e}var ke=z?e:gp(o),Me=[o,u,p,v,C,pe,ye,k,P,G];if(ke&&DR(Me,ke),o=Me[0],u=Me[1],p=Me[2],v=Me[3],C=Me[4],G=Me[9]=Me[9]===e?z?0:o.length:Ar(Me[9]-he,0),!G&&u&(w|S)&&(u&=~(w|S)),!u||u==m)var je=gR(o,u,p);else u==w||u==S?je=mR(o,u,G):(u==R||u==(m|R))&&!C.length?je=yR(o,u,p,v):je=Uc.apply(e,Me);var ct=ke?lv:Fv;return qv(ct(je,Me),o,u)}function kv(o,u,p,v){return o===e||pi(o,Eo[p])&&!Gt.call(v,p)?u:o}function Rv(o,u,p,v,C,k){return cr(o)&&cr(u)&&(k.set(u,o),Dc(o,u,e,Rv,k),k.delete(u)),o}function _R(o){return Ql(o)?e:o}function Bv(o,u,p,v,C,k){var P=p&g,G=o.length,z=u.length;if(G!=z&&!(P&&z>G))return!1;var he=k.get(o),pe=k.get(u);if(he&&pe)return he==u&&pe==o;var ye=-1,ke=!0,Me=p&y?new vs:e;for(k.set(o,u),k.set(u,o);++ye<G;){var je=o[ye],ct=u[ye];if(v)var He=P?v(ct,je,ye,u,o,k):v(je,ct,ye,o,u,k);if(He!==e){if(He)continue;ke=!1;break}if(Me){if(!Ph(u,function(_t,It){if(!Ll(Me,It)&&(je===_t||C(je,_t,p,v,k)))return Me.push(It)})){ke=!1;break}}else if(!(je===ct||C(je,ct,p,v,k))){ke=!1;break}}return k.delete(o),k.delete(u),ke}function ER(o,u,p,v,C,k,P){switch(p){case rt:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case Kt:return!(o.byteLength!=u.byteLength||!k(new wc(o),new wc(u)));case vt:case Je:case V:return pi(+o,+u);case A:return o.name==u.name&&o.message==u.message;case ne:case de:return o==u+"";case W:var G=Vh;case Z:var z=v&g;if(G||(G=gc),o.size!=u.size&&!z)return!1;var he=P.get(o);if(he)return he==u;v|=y,P.set(o,u);var pe=Bv(G(o),G(u),v,C,k,P);return P.delete(o),pe;case Ue:if(ql)return ql.call(o)==ql.call(u)}return!1}function wR(o,u,p,v,C,k){var P=p&g,G=hp(o),z=G.length,he=hp(u),pe=he.length;if(z!=pe&&!P)return!1;for(var ye=z;ye--;){var ke=G[ye];if(!(P?ke in u:Gt.call(u,ke)))return!1}var Me=k.get(o),je=k.get(u);if(Me&&je)return Me==u&&je==o;var ct=!0;k.set(o,u),k.set(u,o);for(var He=P;++ye<z;){ke=G[ye];var _t=o[ke],It=u[ke];if(v)var Dn=P?v(It,_t,ke,u,o,k):v(_t,It,ke,o,u,k);if(!(Dn===e?_t===It||C(_t,It,p,v,k):Dn)){ct=!1;break}He||(He=ke=="constructor")}if(ct&&!He){var sn=o.constructor,On=u.constructor;sn!=On&&"constructor"in o&&"constructor"in u&&!(typeof sn=="function"&&sn instanceof sn&&typeof On=="function"&&On instanceof On)&&(ct=!1)}return k.delete(o),k.delete(u),ct}function aa(o){return wp(Uv(o,e,Wv),o+"")}function hp(o){return Jy(o,Nr,yp)}function pp(o){return Jy(o,En,Nv)}var gp=Ac?function(o){return Ac.get(o)}:Op;function Gc(o){for(var u=o.name+"",p=Co[u],v=Gt.call(Co,u)?p.length:0;v--;){var C=p[v],k=C.func;if(k==null||k==o)return C.name}return u}function To(o){var u=Gt.call(I,"placeholder")?I:o;return u.placeholder}function Ke(){var o=I.iteratee||Np;return o=o===Np?ev:o,arguments.length?o(arguments[0],arguments[1]):o}function Vc(o,u){var p=o.__data__;return kR(u)?p[typeof u=="string"?"string":"hash"]:p.map}function mp(o){for(var u=Nr(o),p=u.length;p--;){var v=u[p],C=o[v];u[p]=[v,C,Lv(C)]}return u}function ws(o,u){var p=NI(o,u);return $y(p)?p:e}function CR(o){var u=Gt.call(o,ms),p=o[ms];try{o[ms]=e;var v=!0}catch(k){}var C=_c.call(o);return v&&(u?o[ms]=p:delete o[ms]),C}var yp=jh?function(o){return o==null?[]:(o=Wt(o),Ra(jh(o),function(u){return My.call(o,u)}))}:Lp,Nv=jh?function(o){for(var u=[];o;)Ba(u,yp(o)),o=Cc(o);return u}:Lp,Jr=nn;(Hh&&Jr(new Hh(new ArrayBuffer(1)))!=rt||Ul&&Jr(new Ul)!=W||Wh&&Jr(Wh.resolve())!=H||wo&&Jr(new wo)!=Z||Ml&&Jr(new Ml)!=ot)&&(Jr=function(o){var u=nn(o),p=u==J?o.constructor:e,v=p?Cs(p):"";if(v)switch(v){case ik:return rt;case ak:return W;case sk:return H;case ok:return Z;case lk:return ot}return u});function bR(o,u,p){for(var v=-1,C=p.length;++v<C;){var k=p[v],P=k.size;switch(k.type){case"drop":o+=P;break;case"dropRight":u-=P;break;case"take":u=Xr(u,o+P);break;case"takeRight":o=Ar(o,u-P);break}}return{start:o,end:u}}function xR(o){var u=o.match(R2);return u?u[1].split(B2):[]}function Dv(o,u,p){u=Ua(u,o);for(var v=-1,C=u.length,k=!1;++v<C;){var P=Ni(u[v]);if(!(k=o!=null&&p(o,P)))break;o=o[P]}return k||++v!=C?k:(C=o==null?0:o.length,!!C&&Qc(C)&&sa(P,C)&&(nt(o)||bs(o)))}function SR(o){var u=o.length,p=new o.constructor(u);return u&&typeof o[0]=="string"&&Gt.call(o,"index")&&(p.index=o.index,p.input=o.input),p}function Ov(o){return typeof o.constructor=="function"&&!Yl(o)?bo(Cc(o)):{}}function TR(o,u,p){var v=o.constructor;switch(u){case Kt:return cp(o);case vt:case Je:return new v(+o);case rt:return uR(o,p);case At:case ur:case ka:case hs:case ps:case yn:case ea:case Qr:case Sr:return mv(o,p);case W:return new v;case V:case de:return new v(o);case ne:return cR(o);case Z:return new v;case Ue:return fR(o)}}function AR(o,u){var p=u.length;if(!p)return o;var v=p-1;return u[v]=(p>1?"& ":"")+u[v],u=u.join(p>2?", ":" "),o.replace(k2,`{
/* [wrapped with `+u+`] */
`)}function IR(o){return nt(o)||bs(o)||!!(Fy&&o&&o[Fy])}function sa(o,u){var p=typeof o;return u=u==null?Te:u,!!u&&(p=="number"||p!="symbol"&&q2.test(o))&&o>-1&&o%1==0&&o<u}function an(o,u,p){if(!cr(p))return!1;var v=typeof u;return(v=="number"?_n(p)&&sa(u,p.length):v=="string"&&u in p)?pi(p[u],o):!1}function vp(o,u){if(nt(o))return!1;var p=typeof o;return p=="number"||p=="symbol"||p=="boolean"||o==null||Nn(o)?!0:S2.test(o)||!x2.test(o)||u!=null&&o in Wt(u)}function kR(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function _p(o){var u=Gc(o),p=I[u];if(typeof p!="function"||!(u in xt.prototype))return!1;if(o===p)return!0;var v=gp(p);return!!v&&o===v[0]}function RR(o){return!!Ly&&Ly in o}var BR=yc?oa:Pp;function Yl(o){var u=o&&o.constructor,p=typeof u=="function"&&u.prototype||Eo;return o===p}function Lv(o){return o===o&&!cr(o)}function Pv(o,u){return function(p){return p==null?!1:p[o]===u&&(u!==e||o in Wt(p))}}function NR(o){var u=Yc(o,function(v){return p.size===l&&p.clear(),v}),p=u.cache;return u}function DR(o,u){var p=o[1],v=u[1],C=p|v,k=C<(m|_|O),P=v==O&&p==w||v==O&&p==N&&o[7].length<=u[8]||v==(O|N)&&u[7].length<=u[8]&&p==w;if(!(k||P))return o;v&m&&(o[2]=u[2],C|=p&m?0:E);var G=u[3];if(G){var z=o[3];o[3]=z?vv(z,G,u[4]):G,o[4]=z?Na(o[3],c):u[4]}return G=u[5],G&&(z=o[5],o[5]=z?_v(z,G,u[6]):G,o[6]=z?Na(o[5],c):u[6]),G=u[7],G&&(o[7]=G),v&O&&(o[8]=o[8]==null?u[8]:Xr(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=C,o}function OR(o){var u=[];if(o!=null)for(var p in Wt(o))u.push(p);return u}function LR(o){return _c.call(o)}function Uv(o,u,p){return u=Ar(u===e?o.length-1:u,0),function(){for(var v=arguments,C=-1,k=Ar(v.length-u,0),P=ie(k);++C<k;)P[C]=v[u+C];C=-1;for(var G=ie(u+1);++C<u;)G[C]=v[C];return G[u]=p(P),kn(o,this,G)}}function Mv(o,u){return u.length<2?o:Es(o,Wn(u,0,-1))}function PR(o,u){for(var p=o.length,v=Xr(u.length,p),C=vn(o);v--;){var k=u[v];o[v]=sa(k,p)?C[k]:e}return o}function Ep(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var Fv=Gv(lv),zl=JI||function(o,u){return Br.setTimeout(o,u)},wp=Gv(aR);function qv(o,u,p){var v=u+"";return wp(o,AR(v,UR(xR(v),p)))}function Gv(o){var u=0,p=0;return function(){var v=tk(),C=se-(v-p);if(p=v,C>0){if(++u>=ce)return arguments[0]}else u=0;return o.apply(e,arguments)}}function Kc(o,u){var p=-1,v=o.length,C=v-1;for(u=u===e?v:u;++p<u;){var k=np(p,C),P=o[k];o[k]=o[p],o[p]=P}return o.length=u,o}var Vv=NR(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(T2,function(p,v,C,k){u.push(C?k.replace(O2,"$1"):v||p)}),u});function Ni(o){if(typeof o=="string"||Nn(o))return o;var u=o+"";return u=="0"&&1/o==-Se?"-0":u}function Cs(o){if(o!=null){try{return vc.call(o)}catch(u){}try{return o+""}catch(u){}}return""}function UR(o,u){return Vn(ze,function(p){var v="_."+p[0];u&p[1]&&!hc(o,v)&&o.push(v)}),o.sort()}function Kv(o){if(o instanceof xt)return o.clone();var u=new jn(o.__wrapped__,o.__chain__);return u.__actions__=vn(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function MR(o,u,p){(p?an(o,u,p):u===e)?u=1:u=Ar(lt(u),0);var v=o==null?0:o.length;if(!v||u<1)return[];for(var C=0,k=0,P=ie(Sc(v/u));C<v;)P[k++]=Wn(o,C,C+=u);return P}function FR(o){for(var u=-1,p=o==null?0:o.length,v=0,C=[];++u<p;){var k=o[u];k&&(C[v++]=k)}return C}function qR(){var o=arguments.length;if(!o)return[];for(var u=ie(o-1),p=arguments[0],v=o;v--;)u[v-1]=arguments[v];return Ba(nt(p)?vn(p):[p],Vr(u,1))}var GR=gt(function(o,u){return mr(o)?Vl(o,Vr(u,1,mr,!0)):[]}),VR=gt(function(o,u){var p=Yn(u);return mr(p)&&(p=e),mr(o)?Vl(o,Vr(u,1,mr,!0),Ke(p,2)):[]}),KR=gt(function(o,u){var p=Yn(u);return mr(p)&&(p=e),mr(o)?Vl(o,Vr(u,1,mr,!0),e,p):[]});function jR(o,u,p){var v=o==null?0:o.length;return v?(u=p||u===e?1:lt(u),Wn(o,u<0?0:u,v)):[]}function HR(o,u,p){var v=o==null?0:o.length;return v?(u=p||u===e?1:lt(u),u=v-u,Wn(o,0,u<0?0:u)):[]}function WR(o,u){return o&&o.length?Lc(o,Ke(u,3),!0,!0):[]}function YR(o,u){return o&&o.length?Lc(o,Ke(u,3),!0):[]}function zR(o,u,p,v){var C=o==null?0:o.length;return C?(p&&typeof p!="number"&&an(o,u,p)&&(p=0,v=C),qk(o,u,p,v)):[]}function jv(o,u,p){var v=o==null?0:o.length;if(!v)return-1;var C=p==null?0:lt(p);return C<0&&(C=Ar(v+C,0)),pc(o,Ke(u,3),C)}function Hv(o,u,p){var v=o==null?0:o.length;if(!v)return-1;var C=v-1;return p!==e&&(C=lt(p),C=p<0?Ar(v+C,0):Xr(C,v-1)),pc(o,Ke(u,3),C,!0)}function Wv(o){var u=o==null?0:o.length;return u?Vr(o,1):[]}function QR(o){var u=o==null?0:o.length;return u?Vr(o,Se):[]}function XR(o,u){var p=o==null?0:o.length;return p?(u=u===e?1:lt(u),Vr(o,u)):[]}function JR(o){for(var u=-1,p=o==null?0:o.length,v={};++u<p;){var C=o[u];v[C[0]]=C[1]}return v}function Yv(o){return o&&o.length?o[0]:e}function ZR(o,u,p){var v=o==null?0:o.length;if(!v)return-1;var C=p==null?0:lt(p);return C<0&&(C=Ar(v+C,0)),yo(o,u,C)}function $R(o){var u=o==null?0:o.length;return u?Wn(o,0,-1):[]}var eB=gt(function(o){var u=ar(o,lp);return u.length&&u[0]===o[0]?Zh(u):[]}),tB=gt(function(o){var u=Yn(o),p=ar(o,lp);return u===Yn(p)?u=e:p.pop(),p.length&&p[0]===o[0]?Zh(p,Ke(u,2)):[]}),rB=gt(function(o){var u=Yn(o),p=ar(o,lp);return u=typeof u=="function"?u:e,u&&p.pop(),p.length&&p[0]===o[0]?Zh(p,e,u):[]});function nB(o,u){return o==null?"":$I.call(o,u)}function Yn(o){var u=o==null?0:o.length;return u?o[u-1]:e}function iB(o,u,p){var v=o==null?0:o.length;if(!v)return-1;var C=v;return p!==e&&(C=lt(p),C=C<0?Ar(v+C,0):Xr(C,v-1)),u===u?UI(o,u,C):pc(o,Ay,C,!0)}function aB(o,u){return o&&o.length?iv(o,lt(u)):e}var sB=gt(zv);function zv(o,u){return o&&o.length&&u&&u.length?rp(o,u):o}function oB(o,u,p){return o&&o.length&&u&&u.length?rp(o,u,Ke(p,2)):o}function lB(o,u,p){return o&&o.length&&u&&u.length?rp(o,u,e,p):o}var uB=aa(function(o,u){var p=o==null?0:o.length,v=zh(o,u);return ov(o,ar(u,function(C){return sa(C,p)?+C:C}).sort(yv)),v});function cB(o,u){var p=[];if(!(o&&o.length))return p;var v=-1,C=[],k=o.length;for(u=Ke(u,3);++v<k;){var P=o[v];u(P,v,o)&&(p.push(P),C.push(v))}return ov(o,C),p}function Cp(o){return o==null?o:nk.call(o)}function fB(o,u,p){var v=o==null?0:o.length;return v?(p&&typeof p!="number"&&an(o,u,p)?(u=0,p=v):(u=u==null?0:lt(u),p=p===e?v:lt(p)),Wn(o,u,p)):[]}function dB(o,u){return Oc(o,u)}function hB(o,u,p){return ap(o,u,Ke(p,2))}function pB(o,u){var p=o==null?0:o.length;if(p){var v=Oc(o,u);if(v<p&&pi(o[v],u))return v}return-1}function gB(o,u){return Oc(o,u,!0)}function mB(o,u,p){return ap(o,u,Ke(p,2),!0)}function yB(o,u){var p=o==null?0:o.length;if(p){var v=Oc(o,u,!0)-1;if(pi(o[v],u))return v}return-1}function vB(o){return o&&o.length?uv(o):[]}function _B(o,u){return o&&o.length?uv(o,Ke(u,2)):[]}function EB(o){var u=o==null?0:o.length;return u?Wn(o,1,u):[]}function wB(o,u,p){return o&&o.length?(u=p||u===e?1:lt(u),Wn(o,0,u<0?0:u)):[]}function CB(o,u,p){var v=o==null?0:o.length;return v?(u=p||u===e?1:lt(u),u=v-u,Wn(o,u<0?0:u,v)):[]}function bB(o,u){return o&&o.length?Lc(o,Ke(u,3),!1,!0):[]}function xB(o,u){return o&&o.length?Lc(o,Ke(u,3)):[]}var SB=gt(function(o){return Pa(Vr(o,1,mr,!0))}),TB=gt(function(o){var u=Yn(o);return mr(u)&&(u=e),Pa(Vr(o,1,mr,!0),Ke(u,2))}),AB=gt(function(o){var u=Yn(o);return u=typeof u=="function"?u:e,Pa(Vr(o,1,mr,!0),e,u)});function IB(o){return o&&o.length?Pa(o):[]}function kB(o,u){return o&&o.length?Pa(o,Ke(u,2)):[]}function RB(o,u){return u=typeof u=="function"?u:e,o&&o.length?Pa(o,e,u):[]}function bp(o){if(!(o&&o.length))return[];var u=0;return o=Ra(o,function(p){if(mr(p))return u=Ar(p.length,u),!0}),qh(u,function(p){return ar(o,Uh(p))})}function Qv(o,u){if(!(o&&o.length))return[];var p=bp(o);return u==null?p:ar(p,function(v){return kn(u,e,v)})}var BB=gt(function(o,u){return mr(o)?Vl(o,u):[]}),NB=gt(function(o){return op(Ra(o,mr))}),DB=gt(function(o){var u=Yn(o);return mr(u)&&(u=e),op(Ra(o,mr),Ke(u,2))}),OB=gt(function(o){var u=Yn(o);return u=typeof u=="function"?u:e,op(Ra(o,mr),e,u)}),LB=gt(bp);function PB(o,u){return hv(o||[],u||[],Gl)}function UB(o,u){return hv(o||[],u||[],Hl)}var MB=gt(function(o){var u=o.length,p=u>1?o[u-1]:e;return p=typeof p=="function"?(o.pop(),p):e,Qv(o,p)});function Xv(o){var u=I(o);return u.__chain__=!0,u}function FB(o,u){return u(o),o}function jc(o,u){return u(o)}var qB=aa(function(o){var u=o.length,p=u?o[0]:0,v=this.__wrapped__,C=function(k){return zh(k,o)};return u>1||this.__actions__.length||!(v instanceof xt)||!sa(p)?this.thru(C):(v=v.slice(p,+p+(u?1:0)),v.__actions__.push({func:jc,args:[C],thisArg:e}),new jn(v,this.__chain__).thru(function(k){return u&&!k.length&&k.push(e),k}))});function GB(){return Xv(this)}function VB(){return new jn(this.value(),this.__chain__)}function KB(){this.__values__===e&&(this.__values__=c1(this.value()));var o=this.__index__>=this.__values__.length,u=o?e:this.__values__[this.__index__++];return{done:o,value:u}}function jB(){return this}function HB(o){for(var u,p=this;p instanceof kc;){var v=Kv(p);v.__index__=0,v.__values__=e,u?C.__wrapped__=v:u=v;var C=v;p=p.__wrapped__}return C.__wrapped__=o,u}function WB(){var o=this.__wrapped__;if(o instanceof xt){var u=o;return this.__actions__.length&&(u=new xt(this)),u=u.reverse(),u.__actions__.push({func:jc,args:[Cp],thisArg:e}),new jn(u,this.__chain__)}return this.thru(Cp)}function YB(){return dv(this.__wrapped__,this.__actions__)}var zB=Pc(function(o,u,p){Gt.call(o,p)?++o[p]:na(o,p,1)});function QB(o,u,p){var v=nt(o)?Sy:Fk;return p&&an(o,u,p)&&(u=e),v(o,Ke(u,3))}function XB(o,u){var p=nt(o)?Ra:Qy;return p(o,Ke(u,3))}var JB=bv(jv),ZB=bv(Hv);function $B(o,u){return Vr(Hc(o,u),1)}function eN(o,u){return Vr(Hc(o,u),Se)}function tN(o,u,p){return p=p===e?1:lt(p),Vr(Hc(o,u),p)}function Jv(o,u){var p=nt(o)?Vn:La;return p(o,Ke(u,3))}function Zv(o,u){var p=nt(o)?EI:zy;return p(o,Ke(u,3))}var rN=Pc(function(o,u,p){Gt.call(o,p)?o[p].push(u):na(o,p,[u])});function nN(o,u,p,v){o=_n(o)?o:Io(o),p=p&&!v?lt(p):0;var C=o.length;return p<0&&(p=Ar(C+p,0)),Xc(o)?p<=C&&o.indexOf(u,p)>-1:!!C&&yo(o,u,p)>-1}var iN=gt(function(o,u,p){var v=-1,C=typeof u=="function",k=_n(o)?ie(o.length):[];return La(o,function(P){k[++v]=C?kn(u,P,p):Kl(P,u,p)}),k}),aN=Pc(function(o,u,p){na(o,p,u)});function Hc(o,u){var p=nt(o)?ar:tv;return p(o,Ke(u,3))}function sN(o,u,p,v){return o==null?[]:(nt(u)||(u=u==null?[]:[u]),p=v?e:p,nt(p)||(p=p==null?[]:[p]),av(o,u,p))}var oN=Pc(function(o,u,p){o[p?0:1].push(u)},function(){return[[],[]]});function lN(o,u,p){var v=nt(o)?Lh:ky,C=arguments.length<3;return v(o,Ke(u,4),p,C,La)}function uN(o,u,p){var v=nt(o)?wI:ky,C=arguments.length<3;return v(o,Ke(u,4),p,C,zy)}function cN(o,u){var p=nt(o)?Ra:Qy;return p(o,zc(Ke(u,3)))}function fN(o){var u=nt(o)?jy:nR;return u(o)}function dN(o,u,p){(p?an(o,u,p):u===e)?u=1:u=lt(u);var v=nt(o)?Ok:iR;return v(o,u)}function hN(o){var u=nt(o)?Lk:sR;return u(o)}function pN(o){if(o==null)return 0;if(_n(o))return Xc(o)?_o(o):o.length;var u=Jr(o);return u==W||u==Z?o.size:ep(o).length}function gN(o,u,p){var v=nt(o)?Ph:oR;return p&&an(o,u,p)&&(u=e),v(o,Ke(u,3))}var mN=gt(function(o,u){if(o==null)return[];var p=u.length;return p>1&&an(o,u[0],u[1])?u=[]:p>2&&an(u[0],u[1],u[2])&&(u=[u[0]]),av(o,Vr(u,1),[])}),Wc=XI||function(){return Br.Date.now()};function yN(o,u){if(typeof u!="function")throw new Kn(i);return o=lt(o),function(){if(--o<1)return u.apply(this,arguments)}}function $v(o,u,p){return u=p?e:u,u=o&&u==null?o.length:u,ia(o,O,e,e,e,e,u)}function e1(o,u){var p;if(typeof u!="function")throw new Kn(i);return o=lt(o),function(){return--o>0&&(p=u.apply(this,arguments)),o<=1&&(u=e),p}}var xp=gt(function(o,u,p){var v=m;if(p.length){var C=Na(p,To(xp));v|=R}return ia(o,v,u,p,C)}),t1=gt(function(o,u,p){var v=m|_;if(p.length){var C=Na(p,To(t1));v|=R}return ia(u,v,o,p,C)});function r1(o,u,p){u=p?e:u;var v=ia(o,w,e,e,e,e,e,u);return v.placeholder=r1.placeholder,v}function n1(o,u,p){u=p?e:u;var v=ia(o,S,e,e,e,e,e,u);return v.placeholder=n1.placeholder,v}function i1(o,u,p){var v,C,k,P,G,z,he=0,pe=!1,ye=!1,ke=!0;if(typeof o!="function")throw new Kn(i);u=zn(u)||0,cr(p)&&(pe=!!p.leading,ye="maxWait"in p,k=ye?Ar(zn(p.maxWait)||0,u):k,ke="trailing"in p?!!p.trailing:ke);function Me(yr){var gi=v,ua=C;return v=C=e,he=yr,P=o.apply(ua,gi),P}function je(yr){return he=yr,G=zl(_t,u),pe?Me(yr):P}function ct(yr){var gi=yr-z,ua=yr-he,b1=u-gi;return ye?Xr(b1,k-ua):b1}function He(yr){var gi=yr-z,ua=yr-he;return z===e||gi>=u||gi<0||ye&&ua>=k}function _t(){var yr=Wc();if(He(yr))return It(yr);G=zl(_t,ct(yr))}function It(yr){return G=e,ke&&v?Me(yr):(v=C=e,P)}function Dn(){G!==e&&pv(G),he=0,v=z=C=G=e}function sn(){return G===e?P:It(Wc())}function On(){var yr=Wc(),gi=He(yr);if(v=arguments,C=this,z=yr,gi){if(G===e)return je(z);if(ye)return pv(G),G=zl(_t,u),Me(z)}return G===e&&(G=zl(_t,u)),P}return On.cancel=Dn,On.flush=sn,On}var vN=gt(function(o,u){return Yy(o,1,u)}),_N=gt(function(o,u,p){return Yy(o,zn(u)||0,p)});function EN(o){return ia(o,ee)}function Yc(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new Kn(i);var p=function(){var v=arguments,C=u?u.apply(this,v):v[0],k=p.cache;if(k.has(C))return k.get(C);var P=o.apply(this,v);return p.cache=k.set(C,P)||k,P};return p.cache=new(Yc.Cache||ra),p}Yc.Cache=ra;function zc(o){if(typeof o!="function")throw new Kn(i);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function wN(o){return e1(2,o)}var CN=lR(function(o,u){u=u.length==1&&nt(u[0])?ar(u[0],Rn(Ke())):ar(Vr(u,1),Rn(Ke()));var p=u.length;return gt(function(v){for(var C=-1,k=Xr(v.length,p);++C<k;)v[C]=u[C].call(this,v[C]);return kn(o,this,v)})}),Sp=gt(function(o,u){var p=Na(u,To(Sp));return ia(o,R,e,u,p)}),a1=gt(function(o,u){var p=Na(u,To(a1));return ia(o,B,e,u,p)}),bN=aa(function(o,u){return ia(o,N,e,e,e,u)});function xN(o,u){if(typeof o!="function")throw new Kn(i);return u=u===e?u:lt(u),gt(o,u)}function SN(o,u){if(typeof o!="function")throw new Kn(i);return u=u==null?0:Ar(lt(u),0),gt(function(p){var v=p[u],C=Ma(p,0,u);return v&&Ba(C,v),kn(o,this,C)})}function TN(o,u,p){var v=!0,C=!0;if(typeof o!="function")throw new Kn(i);return cr(p)&&(v="leading"in p?!!p.leading:v,C="trailing"in p?!!p.trailing:C),i1(o,u,{leading:v,maxWait:u,trailing:C})}function AN(o){return $v(o,1)}function IN(o,u){return Sp(up(u),o)}function kN(){if(!arguments.length)return[];var o=arguments[0];return nt(o)?o:[o]}function RN(o){return Hn(o,h)}function BN(o,u){return u=typeof u=="function"?u:e,Hn(o,h,u)}function NN(o){return Hn(o,f|h)}function DN(o,u){return u=typeof u=="function"?u:e,Hn(o,f|h,u)}function ON(o,u){return u==null||Wy(o,u,Nr(u))}function pi(o,u){return o===u||o!==o&&u!==u}var LN=qc(Jh),PN=qc(function(o,u){return o>=u}),bs=Zy(function(){return arguments}())?Zy:function(o){return hr(o)&&Gt.call(o,"callee")&&!My.call(o,"callee")},nt=ie.isArray,UN=_y?Rn(_y):Hk;function _n(o){return o!=null&&Qc(o.length)&&!oa(o)}function mr(o){return hr(o)&&_n(o)}function MN(o){return o===!0||o===!1||hr(o)&&nn(o)==vt}var Fa=ZI||Pp,FN=Ey?Rn(Ey):Wk;function qN(o){return hr(o)&&o.nodeType===1&&!Ql(o)}function GN(o){if(o==null)return!0;if(_n(o)&&(nt(o)||typeof o=="string"||typeof o.splice=="function"||Fa(o)||Ao(o)||bs(o)))return!o.length;var u=Jr(o);if(u==W||u==Z)return!o.size;if(Yl(o))return!ep(o).length;for(var p in o)if(Gt.call(o,p))return!1;return!0}function VN(o,u){return jl(o,u)}function KN(o,u,p){p=typeof p=="function"?p:e;var v=p?p(o,u):e;return v===e?jl(o,u,e,p):!!v}function Tp(o){if(!hr(o))return!1;var u=nn(o);return u==A||u==we||typeof o.message=="string"&&typeof o.name=="string"&&!Ql(o)}function jN(o){return typeof o=="number"&&qy(o)}function oa(o){if(!cr(o))return!1;var u=nn(o);return u==D||u==L||u==tt||u==X}function s1(o){return typeof o=="number"&&o==lt(o)}function Qc(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Te}function cr(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function hr(o){return o!=null&&typeof o=="object"}var o1=wy?Rn(wy):zk;function HN(o,u){return o===u||$h(o,u,mp(u))}function WN(o,u,p){return p=typeof p=="function"?p:e,$h(o,u,mp(u),p)}function YN(o){return l1(o)&&o!=+o}function zN(o){if(BR(o))throw new $e(n);return $y(o)}function QN(o){return o===null}function XN(o){return o==null}function l1(o){return typeof o=="number"||hr(o)&&nn(o)==V}function Ql(o){if(!hr(o)||nn(o)!=J)return!1;var u=Cc(o);if(u===null)return!0;var p=Gt.call(u,"constructor")&&u.constructor;return typeof p=="function"&&p instanceof p&&vc.call(p)==WI}var Ap=Cy?Rn(Cy):Qk;function JN(o){return s1(o)&&o>=-Te&&o<=Te}var u1=by?Rn(by):Xk;function Xc(o){return typeof o=="string"||!nt(o)&&hr(o)&&nn(o)==de}function Nn(o){return typeof o=="symbol"||hr(o)&&nn(o)==Ue}var Ao=xy?Rn(xy):Jk;function ZN(o){return o===e}function $N(o){return hr(o)&&Jr(o)==ot}function eD(o){return hr(o)&&nn(o)==Vt}var tD=qc(tp),rD=qc(function(o,u){return o<=u});function c1(o){if(!o)return[];if(_n(o))return Xc(o)?di(o):vn(o);if(Pl&&o[Pl])return OI(o[Pl]());var u=Jr(o),p=u==W?Vh:u==Z?gc:Io;return p(o)}function la(o){if(!o)return o===0?o:0;if(o=zn(o),o===Se||o===-Se){var u=o<0?-1:1;return u*_e}return o===o?o:0}function lt(o){var u=la(o),p=u%1;return u===u?p?u-p:u:0}function f1(o){return o?_s(lt(o),0,Ve):0}function zn(o){if(typeof o=="number")return o;if(Nn(o))return Xe;if(cr(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=cr(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=Ry(o);var p=U2.test(o);return p||F2.test(o)?yI(o.slice(2),p?2:8):P2.test(o)?Xe:+o}function d1(o){return Bi(o,En(o))}function nD(o){return o?_s(lt(o),-Te,Te):o===0?o:0}function Mt(o){return o==null?"":Bn(o)}var iD=xo(function(o,u){if(Yl(u)||_n(u)){Bi(u,Nr(u),o);return}for(var p in u)Gt.call(u,p)&&Gl(o,p,u[p])}),h1=xo(function(o,u){Bi(u,En(u),o)}),Jc=xo(function(o,u,p,v){Bi(u,En(u),o,v)}),aD=xo(function(o,u,p,v){Bi(u,Nr(u),o,v)}),sD=aa(zh);function oD(o,u){var p=bo(o);return u==null?p:Hy(p,u)}var lD=gt(function(o,u){o=Wt(o);var p=-1,v=u.length,C=v>2?u[2]:e;for(C&&an(u[0],u[1],C)&&(v=1);++p<v;)for(var k=u[p],P=En(k),G=-1,z=P.length;++G<z;){var he=P[G],pe=o[he];(pe===e||pi(pe,Eo[he])&&!Gt.call(o,he))&&(o[he]=k[he])}return o}),uD=gt(function(o){return o.push(e,Rv),kn(p1,e,o)});function cD(o,u){return Ty(o,Ke(u,3),Ri)}function fD(o,u){return Ty(o,Ke(u,3),Xh)}function dD(o,u){return o==null?o:Qh(o,Ke(u,3),En)}function hD(o,u){return o==null?o:Xy(o,Ke(u,3),En)}function pD(o,u){return o&&Ri(o,Ke(u,3))}function gD(o,u){return o&&Xh(o,Ke(u,3))}function mD(o){return o==null?[]:Nc(o,Nr(o))}function yD(o){return o==null?[]:Nc(o,En(o))}function Ip(o,u,p){var v=o==null?e:Es(o,u);return v===e?p:v}function vD(o,u){return o!=null&&Dv(o,u,Gk)}function kp(o,u){return o!=null&&Dv(o,u,Vk)}var _D=Sv(function(o,u,p){u!=null&&typeof u.toString!="function"&&(u=_c.call(u)),o[u]=p},Bp(wn)),ED=Sv(function(o,u,p){u!=null&&typeof u.toString!="function"&&(u=_c.call(u)),Gt.call(o,u)?o[u].push(p):o[u]=[p]},Ke),wD=gt(Kl);function Nr(o){return _n(o)?Ky(o):ep(o)}function En(o){return _n(o)?Ky(o,!0):Zk(o)}function CD(o,u){var p={};return u=Ke(u,3),Ri(o,function(v,C,k){na(p,u(v,C,k),v)}),p}function bD(o,u){var p={};return u=Ke(u,3),Ri(o,function(v,C,k){na(p,C,u(v,C,k))}),p}var xD=xo(function(o,u,p){Dc(o,u,p)}),p1=xo(function(o,u,p,v){Dc(o,u,p,v)}),SD=aa(function(o,u){var p={};if(o==null)return p;var v=!1;u=ar(u,function(k){return k=Ua(k,o),v||(v=k.length>1),k}),Bi(o,pp(o),p),v&&(p=Hn(p,f|d|h,_R));for(var C=u.length;C--;)sp(p,u[C]);return p});function TD(o,u){return g1(o,zc(Ke(u)))}var AD=aa(function(o,u){return o==null?{}:eR(o,u)});function g1(o,u){if(o==null)return{};var p=ar(pp(o),function(v){return[v]});return u=Ke(u),sv(o,p,function(v,C){return u(v,C[0])})}function ID(o,u,p){u=Ua(u,o);var v=-1,C=u.length;for(C||(C=1,o=e);++v<C;){var k=o==null?e:o[Ni(u[v])];k===e&&(v=C,k=p),o=oa(k)?k.call(o):k}return o}function kD(o,u,p){return o==null?o:Hl(o,u,p)}function RD(o,u,p,v){return v=typeof v=="function"?v:e,o==null?o:Hl(o,u,p,v)}var m1=Iv(Nr),y1=Iv(En);function BD(o,u,p){var v=nt(o),C=v||Fa(o)||Ao(o);if(u=Ke(u,4),p==null){var k=o&&o.constructor;C?p=v?new k:[]:cr(o)?p=oa(k)?bo(Cc(o)):{}:p={}}return(C?Vn:Ri)(o,function(P,G,z){return u(p,P,G,z)}),p}function ND(o,u){return o==null?!0:sp(o,u)}function DD(o,u,p){return o==null?o:fv(o,u,up(p))}function OD(o,u,p,v){return v=typeof v=="function"?v:e,o==null?o:fv(o,u,up(p),v)}function Io(o){return o==null?[]:Gh(o,Nr(o))}function LD(o){return o==null?[]:Gh(o,En(o))}function PD(o,u,p){return p===e&&(p=u,u=e),p!==e&&(p=zn(p),p=p===p?p:0),u!==e&&(u=zn(u),u=u===u?u:0),_s(zn(o),u,p)}function UD(o,u,p){return u=la(u),p===e?(p=u,u=0):p=la(p),o=zn(o),Kk(o,u,p)}function MD(o,u,p){if(p&&typeof p!="boolean"&&an(o,u,p)&&(u=p=e),p===e&&(typeof u=="boolean"?(p=u,u=e):typeof o=="boolean"&&(p=o,o=e)),o===e&&u===e?(o=0,u=1):(o=la(o),u===e?(u=o,o=0):u=la(u)),o>u){var v=o;o=u,u=v}if(p||o%1||u%1){var C=Gy();return Xr(o+C*(u-o+mI("1e-"+((C+"").length-1))),u)}return np(o,u)}var FD=So(function(o,u,p){return u=u.toLowerCase(),o+(p?v1(u):u)});function v1(o){return Rp(Mt(o).toLowerCase())}function _1(o){return o=Mt(o),o&&o.replace(G2,kI).replace(sI,"")}function qD(o,u,p){o=Mt(o),u=Bn(u);var v=o.length;p=p===e?v:_s(lt(p),0,v);var C=p;return p-=u.length,p>=0&&o.slice(p,C)==u}function GD(o){return o=Mt(o),o&&w2.test(o)?o.replace(Xm,RI):o}function VD(o){return o=Mt(o),o&&A2.test(o)?o.replace(Sh,"\\$&"):o}var KD=So(function(o,u,p){return o+(p?"-":"")+u.toLowerCase()}),jD=So(function(o,u,p){return o+(p?" ":"")+u.toLowerCase()}),HD=Cv("toLowerCase");function WD(o,u,p){o=Mt(o),u=lt(u);var v=u?_o(o):0;if(!u||v>=u)return o;var C=(u-v)/2;return Fc(Tc(C),p)+o+Fc(Sc(C),p)}function YD(o,u,p){o=Mt(o),u=lt(u);var v=u?_o(o):0;return u&&v<u?o+Fc(u-v,p):o}function zD(o,u,p){o=Mt(o),u=lt(u);var v=u?_o(o):0;return u&&v<u?Fc(u-v,p)+o:o}function QD(o,u,p){return p||u==null?u=0:u&&(u=+u),rk(Mt(o).replace(Th,""),u||0)}function XD(o,u,p){return(p?an(o,u,p):u===e)?u=1:u=lt(u),ip(Mt(o),u)}function JD(){var o=arguments,u=Mt(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var ZD=So(function(o,u,p){return o+(p?"_":"")+u.toLowerCase()});function $D(o,u,p){return p&&typeof p!="number"&&an(o,u,p)&&(u=p=e),p=p===e?Ve:p>>>0,p?(o=Mt(o),o&&(typeof u=="string"||u!=null&&!Ap(u))&&(u=Bn(u),!u&&vo(o))?Ma(di(o),0,p):o.split(u,p)):[]}var e3=So(function(o,u,p){return o+(p?" ":"")+Rp(u)});function t3(o,u,p){return o=Mt(o),p=p==null?0:_s(lt(p),0,o.length),u=Bn(u),o.slice(p,p+u.length)==u}function r3(o,u,p){var v=I.templateSettings;p&&an(o,u,p)&&(u=e),o=Mt(o),u=Jc({},u,v,kv);var C=Jc({},u.imports,v.imports,kv),k=Nr(C),P=Gh(C,k),G,z,he=0,pe=u.interpolate||cc,ye="__p += '",ke=Kh((u.escape||cc).source+"|"+pe.source+"|"+(pe===Jm?L2:cc).source+"|"+(u.evaluate||cc).source+"|$","g"),Me="//# sourceURL="+(Gt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++fI+"]")+`
`;o.replace(ke,function(He,_t,It,Dn,sn,On){return It||(It=Dn),ye+=o.slice(he,On).replace(V2,BI),_t&&(G=!0,ye+=`' +
__e(`+_t+`) +
'`),sn&&(z=!0,ye+=`';
`+sn+`;
__p += '`),It&&(ye+=`' +
((__t = (`+It+`)) == null ? '' : __t) +
'`),he=On+He.length,He}),ye+=`';
`;var je=Gt.call(u,"variable")&&u.variable;if(!je)ye=`with (obj) {
`+ye+`
}
`;else if(D2.test(je))throw new $e(a);ye=(z?ye.replace(ir,""):ye).replace(v2,"$1").replace(_2,"$1;"),ye="function("+(je||"obj")+`) {
`+(je?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(G?", __e = _.escape":"")+(z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ye+`return __p
}`;var ct=w1(function(){return Ut(k,Me+"return "+ye).apply(e,P)});if(ct.source=ye,Tp(ct))throw ct;return ct}function n3(o){return Mt(o).toLowerCase()}function i3(o){return Mt(o).toUpperCase()}function a3(o,u,p){if(o=Mt(o),o&&(p||u===e))return Ry(o);if(!o||!(u=Bn(u)))return o;var v=di(o),C=di(u),k=By(v,C),P=Ny(v,C)+1;return Ma(v,k,P).join("")}function s3(o,u,p){if(o=Mt(o),o&&(p||u===e))return o.slice(0,Oy(o)+1);if(!o||!(u=Bn(u)))return o;var v=di(o),C=Ny(v,di(u))+1;return Ma(v,0,C).join("")}function o3(o,u,p){if(o=Mt(o),o&&(p||u===e))return o.replace(Th,"");if(!o||!(u=Bn(u)))return o;var v=di(o),C=By(v,di(u));return Ma(v,C).join("")}function l3(o,u){var p=q,v=F;if(cr(u)){var C="separator"in u?u.separator:C;p="length"in u?lt(u.length):p,v="omission"in u?Bn(u.omission):v}o=Mt(o);var k=o.length;if(vo(o)){var P=di(o);k=P.length}if(p>=k)return o;var G=p-_o(v);if(G<1)return v;var z=P?Ma(P,0,G).join(""):o.slice(0,G);if(C===e)return z+v;if(P&&(G+=z.length-G),Ap(C)){if(o.slice(G).search(C)){var he,pe=z;for(C.global||(C=Kh(C.source,Mt(Zm.exec(C))+"g")),C.lastIndex=0;he=C.exec(pe);)var ye=he.index;z=z.slice(0,ye===e?G:ye)}}else if(o.indexOf(Bn(C),G)!=G){var ke=z.lastIndexOf(C);ke>-1&&(z=z.slice(0,ke))}return z+v}function u3(o){return o=Mt(o),o&&E2.test(o)?o.replace(Qm,MI):o}var c3=So(function(o,u,p){return o+(p?" ":"")+u.toUpperCase()}),Rp=Cv("toUpperCase");function E1(o,u,p){return o=Mt(o),u=p?e:u,u===e?DI(o)?GI(o):xI(o):o.match(u)||[]}var w1=gt(function(o,u){try{return kn(o,e,u)}catch(p){return Tp(p)?p:new $e(p)}}),f3=aa(function(o,u){return Vn(u,function(p){p=Ni(p),na(o,p,xp(o[p],o))}),o});function d3(o){var u=o==null?0:o.length,p=Ke();return o=u?ar(o,function(v){if(typeof v[1]!="function")throw new Kn(i);return[p(v[0]),v[1]]}):[],gt(function(v){for(var C=-1;++C<u;){var k=o[C];if(kn(k[0],this,v))return kn(k[1],this,v)}})}function h3(o){return Mk(Hn(o,f))}function Bp(o){return function(){return o}}function p3(o,u){return o==null||o!==o?u:o}var g3=xv(),m3=xv(!0);function wn(o){return o}function Np(o){return ev(typeof o=="function"?o:Hn(o,f))}function y3(o){return rv(Hn(o,f))}function v3(o,u){return nv(o,Hn(u,f))}var _3=gt(function(o,u){return function(p){return Kl(p,o,u)}}),E3=gt(function(o,u){return function(p){return Kl(o,p,u)}});function Dp(o,u,p){var v=Nr(u),C=Nc(u,v);p==null&&!(cr(u)&&(C.length||!v.length))&&(p=u,u=o,o=this,C=Nc(u,Nr(u)));var k=!(cr(p)&&"chain"in p)||!!p.chain,P=oa(o);return Vn(C,function(G){var z=u[G];o[G]=z,P&&(o.prototype[G]=function(){var he=this.__chain__;if(k||he){var pe=o(this.__wrapped__),ye=pe.__actions__=vn(this.__actions__);return ye.push({func:z,args:arguments,thisArg:o}),pe.__chain__=he,pe}return z.apply(o,Ba([this.value()],arguments))})}),o}function w3(){return Br._===this&&(Br._=YI),this}function Op(){}function C3(o){return o=lt(o),gt(function(u){return iv(u,o)})}var b3=fp(ar),x3=fp(Sy),S3=fp(Ph);function C1(o){return vp(o)?Uh(Ni(o)):tR(o)}function T3(o){return function(u){return o==null?e:Es(o,u)}}var A3=Tv(),I3=Tv(!0);function Lp(){return[]}function Pp(){return!1}function k3(){return{}}function R3(){return""}function B3(){return!0}function N3(o,u){if(o=lt(o),o<1||o>Te)return[];var p=Ve,v=Xr(o,Ve);u=Ke(u),o-=Ve;for(var C=qh(v,u);++p<o;)u(p);return C}function D3(o){return nt(o)?ar(o,Ni):Nn(o)?[o]:vn(Vv(Mt(o)))}function O3(o){var u=++HI;return Mt(o)+u}var L3=Mc(function(o,u){return o+u},0),P3=dp("ceil"),U3=Mc(function(o,u){return o/u},1),M3=dp("floor");function F3(o){return o&&o.length?Bc(o,wn,Jh):e}function q3(o,u){return o&&o.length?Bc(o,Ke(u,2),Jh):e}function G3(o){return Iy(o,wn)}function V3(o,u){return Iy(o,Ke(u,2))}function K3(o){return o&&o.length?Bc(o,wn,tp):e}function j3(o,u){return o&&o.length?Bc(o,Ke(u,2),tp):e}var H3=Mc(function(o,u){return o*u},1),W3=dp("round"),Y3=Mc(function(o,u){return o-u},0);function z3(o){return o&&o.length?Fh(o,wn):0}function Q3(o,u){return o&&o.length?Fh(o,Ke(u,2)):0}return I.after=yN,I.ary=$v,I.assign=iD,I.assignIn=h1,I.assignInWith=Jc,I.assignWith=aD,I.at=sD,I.before=e1,I.bind=xp,I.bindAll=f3,I.bindKey=t1,I.castArray=kN,I.chain=Xv,I.chunk=MR,I.compact=FR,I.concat=qR,I.cond=d3,I.conforms=h3,I.constant=Bp,I.countBy=zB,I.create=oD,I.curry=r1,I.curryRight=n1,I.debounce=i1,I.defaults=lD,I.defaultsDeep=uD,I.defer=vN,I.delay=_N,I.difference=GR,I.differenceBy=VR,I.differenceWith=KR,I.drop=jR,I.dropRight=HR,I.dropRightWhile=WR,I.dropWhile=YR,I.fill=zR,I.filter=XB,I.flatMap=$B,I.flatMapDeep=eN,I.flatMapDepth=tN,I.flatten=Wv,I.flattenDeep=QR,I.flattenDepth=XR,I.flip=EN,I.flow=g3,I.flowRight=m3,I.fromPairs=JR,I.functions=mD,I.functionsIn=yD,I.groupBy=rN,I.initial=$R,I.intersection=eB,I.intersectionBy=tB,I.intersectionWith=rB,I.invert=_D,I.invertBy=ED,I.invokeMap=iN,I.iteratee=Np,I.keyBy=aN,I.keys=Nr,I.keysIn=En,I.map=Hc,I.mapKeys=CD,I.mapValues=bD,I.matches=y3,I.matchesProperty=v3,I.memoize=Yc,I.merge=xD,I.mergeWith=p1,I.method=_3,I.methodOf=E3,I.mixin=Dp,I.negate=zc,I.nthArg=C3,I.omit=SD,I.omitBy=TD,I.once=wN,I.orderBy=sN,I.over=b3,I.overArgs=CN,I.overEvery=x3,I.overSome=S3,I.partial=Sp,I.partialRight=a1,I.partition=oN,I.pick=AD,I.pickBy=g1,I.property=C1,I.propertyOf=T3,I.pull=sB,I.pullAll=zv,I.pullAllBy=oB,I.pullAllWith=lB,I.pullAt=uB,I.range=A3,I.rangeRight=I3,I.rearg=bN,I.reject=cN,I.remove=cB,I.rest=xN,I.reverse=Cp,I.sampleSize=dN,I.set=kD,I.setWith=RD,I.shuffle=hN,I.slice=fB,I.sortBy=mN,I.sortedUniq=vB,I.sortedUniqBy=_B,I.split=$D,I.spread=SN,I.tail=EB,I.take=wB,I.takeRight=CB,I.takeRightWhile=bB,I.takeWhile=xB,I.tap=FB,I.throttle=TN,I.thru=jc,I.toArray=c1,I.toPairs=m1,I.toPairsIn=y1,I.toPath=D3,I.toPlainObject=d1,I.transform=BD,I.unary=AN,I.union=SB,I.unionBy=TB,I.unionWith=AB,I.uniq=IB,I.uniqBy=kB,I.uniqWith=RB,I.unset=ND,I.unzip=bp,I.unzipWith=Qv,I.update=DD,I.updateWith=OD,I.values=Io,I.valuesIn=LD,I.without=BB,I.words=E1,I.wrap=IN,I.xor=NB,I.xorBy=DB,I.xorWith=OB,I.zip=LB,I.zipObject=PB,I.zipObjectDeep=UB,I.zipWith=MB,I.entries=m1,I.entriesIn=y1,I.extend=h1,I.extendWith=Jc,Dp(I,I),I.add=L3,I.attempt=w1,I.camelCase=FD,I.capitalize=v1,I.ceil=P3,I.clamp=PD,I.clone=RN,I.cloneDeep=NN,I.cloneDeepWith=DN,I.cloneWith=BN,I.conformsTo=ON,I.deburr=_1,I.defaultTo=p3,I.divide=U3,I.endsWith=qD,I.eq=pi,I.escape=GD,I.escapeRegExp=VD,I.every=QB,I.find=JB,I.findIndex=jv,I.findKey=cD,I.findLast=ZB,I.findLastIndex=Hv,I.findLastKey=fD,I.floor=M3,I.forEach=Jv,I.forEachRight=Zv,I.forIn=dD,I.forInRight=hD,I.forOwn=pD,I.forOwnRight=gD,I.get=Ip,I.gt=LN,I.gte=PN,I.has=vD,I.hasIn=kp,I.head=Yv,I.identity=wn,I.includes=nN,I.indexOf=ZR,I.inRange=UD,I.invoke=wD,I.isArguments=bs,I.isArray=nt,I.isArrayBuffer=UN,I.isArrayLike=_n,I.isArrayLikeObject=mr,I.isBoolean=MN,I.isBuffer=Fa,I.isDate=FN,I.isElement=qN,I.isEmpty=GN,I.isEqual=VN,I.isEqualWith=KN,I.isError=Tp,I.isFinite=jN,I.isFunction=oa,I.isInteger=s1,I.isLength=Qc,I.isMap=o1,I.isMatch=HN,I.isMatchWith=WN,I.isNaN=YN,I.isNative=zN,I.isNil=XN,I.isNull=QN,I.isNumber=l1,I.isObject=cr,I.isObjectLike=hr,I.isPlainObject=Ql,I.isRegExp=Ap,I.isSafeInteger=JN,I.isSet=u1,I.isString=Xc,I.isSymbol=Nn,I.isTypedArray=Ao,I.isUndefined=ZN,I.isWeakMap=$N,I.isWeakSet=eD,I.join=nB,I.kebabCase=KD,I.last=Yn,I.lastIndexOf=iB,I.lowerCase=jD,I.lowerFirst=HD,I.lt=tD,I.lte=rD,I.max=F3,I.maxBy=q3,I.mean=G3,I.meanBy=V3,I.min=K3,I.minBy=j3,I.stubArray=Lp,I.stubFalse=Pp,I.stubObject=k3,I.stubString=R3,I.stubTrue=B3,I.multiply=H3,I.nth=aB,I.noConflict=w3,I.noop=Op,I.now=Wc,I.pad=WD,I.padEnd=YD,I.padStart=zD,I.parseInt=QD,I.random=MD,I.reduce=lN,I.reduceRight=uN,I.repeat=XD,I.replace=JD,I.result=ID,I.round=W3,I.runInContext=Y,I.sample=fN,I.size=pN,I.snakeCase=ZD,I.some=gN,I.sortedIndex=dB,I.sortedIndexBy=hB,I.sortedIndexOf=pB,I.sortedLastIndex=gB,I.sortedLastIndexBy=mB,I.sortedLastIndexOf=yB,I.startCase=e3,I.startsWith=t3,I.subtract=Y3,I.sum=z3,I.sumBy=Q3,I.template=r3,I.times=N3,I.toFinite=la,I.toInteger=lt,I.toLength=f1,I.toLower=n3,I.toNumber=zn,I.toSafeInteger=nD,I.toString=Mt,I.toUpper=i3,I.trim=a3,I.trimEnd=s3,I.trimStart=o3,I.truncate=l3,I.unescape=u3,I.uniqueId=O3,I.upperCase=c3,I.upperFirst=Rp,I.each=Jv,I.eachRight=Zv,I.first=Yv,Dp(I,function(){var o={};return Ri(I,function(u,p){Gt.call(I.prototype,p)||(o[p]=u)}),o}(),{chain:!1}),I.VERSION=t,Vn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){I[o].placeholder=I}),Vn(["drop","take"],function(o,u){xt.prototype[o]=function(p){p=p===e?1:Ar(lt(p),0);var v=this.__filtered__&&!u?new xt(this):this.clone();return v.__filtered__?v.__takeCount__=Xr(p,v.__takeCount__):v.__views__.push({size:Xr(p,Ve),type:o+(v.__dir__<0?"Right":"")}),v},xt.prototype[o+"Right"]=function(p){return this.reverse()[o](p).reverse()}}),Vn(["filter","map","takeWhile"],function(o,u){var p=u+1,v=p==ve||p==Be;xt.prototype[o]=function(C){var k=this.clone();return k.__iteratees__.push({iteratee:Ke(C,3),type:p}),k.__filtered__=k.__filtered__||v,k}}),Vn(["head","last"],function(o,u){var p="take"+(u?"Right":"");xt.prototype[o]=function(){return this[p](1).value()[0]}}),Vn(["initial","tail"],function(o,u){var p="drop"+(u?"":"Right");xt.prototype[o]=function(){return this.__filtered__?new xt(this):this[p](1)}}),xt.prototype.compact=function(){return this.filter(wn)},xt.prototype.find=function(o){return this.filter(o).head()},xt.prototype.findLast=function(o){return this.reverse().find(o)},xt.prototype.invokeMap=gt(function(o,u){return typeof o=="function"?new xt(this):this.map(function(p){return Kl(p,o,u)})}),xt.prototype.reject=function(o){return this.filter(zc(Ke(o)))},xt.prototype.slice=function(o,u){o=lt(o);var p=this;return p.__filtered__&&(o>0||u<0)?new xt(p):(o<0?p=p.takeRight(-o):o&&(p=p.drop(o)),u!==e&&(u=lt(u),p=u<0?p.dropRight(-u):p.take(u-o)),p)},xt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},xt.prototype.toArray=function(){return this.take(Ve)},Ri(xt.prototype,function(o,u){var p=/^(?:filter|find|map|reject)|While$/.test(u),v=/^(?:head|last)$/.test(u),C=I[v?"take"+(u=="last"?"Right":""):u],k=v||/^find/.test(u);!C||(I.prototype[u]=function(){var P=this.__wrapped__,G=v?[1]:arguments,z=P instanceof xt,he=G[0],pe=z||nt(P),ye=function(_t){var It=C.apply(I,Ba([_t],G));return v&&ke?It[0]:It};pe&&p&&typeof he=="function"&&he.length!=1&&(z=pe=!1);var ke=this.__chain__,Me=!!this.__actions__.length,je=k&&!ke,ct=z&&!Me;if(!k&&pe){P=ct?P:new xt(this);var He=o.apply(P,G);return He.__actions__.push({func:jc,args:[ye],thisArg:e}),new jn(He,ke)}return je&&ct?o.apply(this,G):(He=this.thru(ye),je?v?He.value()[0]:He.value():He)})}),Vn(["pop","push","shift","sort","splice","unshift"],function(o){var u=mc[o],p=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",v=/^(?:pop|shift)$/.test(o);I.prototype[o]=function(){var C=arguments;if(v&&!this.__chain__){var k=this.value();return u.apply(nt(k)?k:[],C)}return this[p](function(P){return u.apply(nt(P)?P:[],C)})}}),Ri(xt.prototype,function(o,u){var p=I[u];if(p){var v=p.name+"";Gt.call(Co,v)||(Co[v]=[]),Co[v].push({name:u,func:p})}}),Co[Uc(e,_).name]=[{name:"wrapper",func:e}],xt.prototype.clone=uk,xt.prototype.reverse=ck,xt.prototype.value=fk,I.prototype.at=qB,I.prototype.chain=GB,I.prototype.commit=VB,I.prototype.next=KB,I.prototype.plant=HB,I.prototype.reverse=WB,I.prototype.toJSON=I.prototype.valueOf=I.prototype.value=YB,I.prototype.first=I.prototype.head,Pl&&(I.prototype[Pl]=jB),I},Da=VI();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Br._=Da,define(function(){return Da})):gs?((gs.exports=Da)._=Da,Nh._=Da):Br._=Da}).call(vl)});var Em=ue((mW,Xd)=>{var Jx,Zx,$x,eS,tS,rS,nS,iS,aS,zd,_m,sS,oS,lS,bl,uS,cS,fS,dS,hS,pS,gS,mS,Qd;(function(e){var t=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){e(r(t,r(n)))}):typeof Xd=="object"&&typeof Xd.exports=="object"?e(r(t,r(Xd.exports))):e(r(t));function r(n,i){return n!==t&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,s){return n[a]=i?i(a,s):s}}})(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])};Jx=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(n,i);function a(){this.constructor=n}n.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)},Zx=Object.assign||function(n){for(var i,a=1,s=arguments.length;a<s;a++){i=arguments[a];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},$x=function(n,i){var a={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&i.indexOf(s)<0&&(a[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(n);l<s.length;l++)i.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(n,s[l])&&(a[s[l]]=n[s[l]]);return a},eS=function(n,i,a,s){var l=arguments.length,c=l<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,a):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,i,a,s);else for(var d=n.length-1;d>=0;d--)(f=n[d])&&(c=(l<3?f(c):l>3?f(i,a,c):f(i,a))||c);return l>3&&c&&Object.defineProperty(i,a,c),c},tS=function(n,i){return function(a,s){i(a,s,n)}},rS=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},nS=function(n,i,a,s){function l(c){return c instanceof a?c:new a(function(f){f(c)})}return new(a||(a=Promise))(function(c,f){function d(y){try{g(s.next(y))}catch(m){f(m)}}function h(y){try{g(s.throw(y))}catch(m){f(m)}}function g(y){y.done?c(y.value):l(y.value).then(d,h)}g((s=s.apply(n,i||[])).next())})},iS=function(n,i){var a={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,l,c,f;return f={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function d(g){return function(y){return h([g,y])}}function h(g){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,l&&(c=g[0]&2?l.return:g[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,g[1])).done)return c;switch(l=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return a.label++,{value:g[1],done:!1};case 5:a.label++,l=g[1],g=[0];continue;case 7:g=a.ops.pop(),a.trys.pop();continue;default:if(c=a.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){a=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){a.label=g[1];break}if(g[0]===6&&a.label<c[1]){a.label=c[1],c=g;break}if(c&&a.label<c[2]){a.label=c[2],a.ops.push(g);break}c[2]&&a.ops.pop(),a.trys.pop();continue}g=i.call(n,a)}catch(y){g=[6,y],l=0}finally{s=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},aS=function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&Qd(i,n,a)},Qd=Object.create?function(n,i,a,s){s===void 0&&(s=a),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]},zd=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&n[i],s=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},_m=function(n,i){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var s=a.call(n),l,c=[],f;try{for(;(i===void 0||i-- >0)&&!(l=s.next()).done;)c.push(l.value)}catch(d){f={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(f)throw f.error}}return c},sS=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(_m(arguments[i]));return n},oS=function(){for(var n=0,i=0,a=arguments.length;i<a;i++)n+=arguments[i].length;for(var s=Array(n),l=0,i=0;i<a;i++)for(var c=arguments[i],f=0,d=c.length;f<d;f++,l++)s[l]=c[f];return s},lS=function(n,i){for(var a=0,s=i.length,l=n.length;a<s;a++,l++)n[l]=i[a];return n},bl=function(n){return this instanceof bl?(this.v=n,this):new bl(n)},uS=function(n,i,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=a.apply(n,i||[]),l,c=[];return l={},f("next"),f("throw"),f("return"),l[Symbol.asyncIterator]=function(){return this},l;function f(_){s[_]&&(l[_]=function(E){return new Promise(function(w,S){c.push([_,E,w,S])>1||d(_,E)})})}function d(_,E){try{h(s[_](E))}catch(w){m(c[0][3],w)}}function h(_){_.value instanceof bl?Promise.resolve(_.value.v).then(g,y):m(c[0][2],_)}function g(_){d("next",_)}function y(_){d("throw",_)}function m(_,E){_(E),c.shift(),c.length&&d(c[0][0],c[0][1])}},cS=function(n){var i,a;return i={},s("next"),s("throw",function(l){throw l}),s("return"),i[Symbol.iterator]=function(){return this},i;function s(l,c){i[l]=n[l]?function(f){return(a=!a)?{value:bl(n[l](f)),done:l==="return"}:c?c(f):f}:c}},fS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],a;return i?i.call(n):(n=typeof zd=="function"?zd(n):n[Symbol.iterator](),a={},s("next"),s("throw"),s("return"),a[Symbol.asyncIterator]=function(){return this},a);function s(c){a[c]=n[c]&&function(f){return new Promise(function(d,h){f=n[c](f),l(d,h,f.done,f.value)})}}function l(c,f,d,h){Promise.resolve(h).then(function(g){c({value:g,done:d})},f)}},dS=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var r=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};hS=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var a in n)a!=="default"&&Object.prototype.hasOwnProperty.call(n,a)&&Qd(i,n,a);return r(i,n),i},pS=function(n){return n&&n.__esModule?n:{default:n}},gS=function(n,i,a,s){if(a==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!s:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?s:a==="a"?s.call(n):s?s.value:i.get(n)},mS=function(n,i,a,s,l){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!l:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?l.call(n,a):l?l.value=a:i.set(n,a),a},e("__extends",Jx),e("__assign",Zx),e("__rest",$x),e("__decorate",eS),e("__param",tS),e("__metadata",rS),e("__awaiter",nS),e("__generator",iS),e("__exportStar",aS),e("__createBinding",Qd),e("__values",zd),e("__read",_m),e("__spread",sS),e("__spreadArrays",oS),e("__spreadArray",lS),e("__await",bl),e("__asyncGenerator",uS),e("__asyncDelegator",cS),e("__asyncValues",fS),e("__makeTemplateObject",dS),e("__importStar",hS),e("__importDefault",pS),e("__classPrivateFieldGet",gS),e("__classPrivateFieldSet",mS)})});var jS=ue((CY,nh)=>{var xS,SS,TS,AS,IS,kS,RS,BS,NS,rh,bm,DS,OS,xl,LS,PS,US,MS,FS,qS,GS,VS,KS;(function(e){var t=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){e(r(t,r(n)))}):typeof nh=="object"&&typeof nh.exports=="object"?e(r(t,r(nh.exports))):e(r(t));function r(n,i){return n!==t&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,s){return n[a]=i?i(a,s):s}}})(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])};xS=function(r,n){t(r,n);function i(){this.constructor=r}r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)},SS=Object.assign||function(r){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},TS=function(r,n){var i={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&n.indexOf(a)<0&&(i[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(r);s<a.length;s++)n.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(r,a[s])&&(i[a[s]]=r[a[s]]);return i},AS=function(r,n,i,a){var s=arguments.length,l=s<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,i):a,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,n,i,a);else for(var f=r.length-1;f>=0;f--)(c=r[f])&&(l=(s<3?c(l):s>3?c(n,i,l):c(n,i))||l);return s>3&&l&&Object.defineProperty(n,i,l),l},IS=function(r,n){return function(i,a){n(i,a,r)}},kS=function(r,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,n)},RS=function(r,n,i,a){function s(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(g){try{h(a.next(g))}catch(y){c(y)}}function d(g){try{h(a.throw(g))}catch(y){c(y)}}function h(g){g.done?l(g.value):s(g.value).then(f,d)}h((a=a.apply(r,n||[])).next())})},BS=function(r,n){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,s,l,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(h){return function(g){return d([h,g])}}function d(h){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,s&&(l=h[0]&2?s.return:h[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,h[1])).done)return l;switch(s=0,l&&(h=[h[0]&2,l.value]),h[0]){case 0:case 1:l=h;break;case 4:return i.label++,{value:h[1],done:!1};case 5:i.label++,s=h[1],h=[0];continue;case 7:h=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(h[0]===6||h[0]===2)){i=0;continue}if(h[0]===3&&(!l||h[1]>l[0]&&h[1]<l[3])){i.label=h[1];break}if(h[0]===6&&i.label<l[1]){i.label=l[1],l=h;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(h);break}l[2]&&i.ops.pop(),i.trys.pop();continue}h=n.call(r,i)}catch(g){h=[6,g],s=0}finally{a=l=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},KS=function(r,n,i,a){a===void 0&&(a=i),r[a]=n[i]},NS=function(r,n){for(var i in r)i!=="default"&&!n.hasOwnProperty(i)&&(n[i]=r[i])},rh=function(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],a=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},bm=function(r,n){var i=typeof Symbol=="function"&&r[Symbol.iterator];if(!i)return r;var a=i.call(r),s,l=[],c;try{for(;(n===void 0||n-- >0)&&!(s=a.next()).done;)l.push(s.value)}catch(f){c={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(c)throw c.error}}return l},DS=function(){for(var r=[],n=0;n<arguments.length;n++)r=r.concat(bm(arguments[n]));return r},OS=function(){for(var r=0,n=0,i=arguments.length;n<i;n++)r+=arguments[n].length;for(var a=Array(r),s=0,n=0;n<i;n++)for(var l=arguments[n],c=0,f=l.length;c<f;c++,s++)a[s]=l[c];return a},xl=function(r){return this instanceof xl?(this.v=r,this):new xl(r)},LS=function(r,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(r,n||[]),s,l=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(m){a[m]&&(s[m]=function(_){return new Promise(function(E,w){l.push([m,_,E,w])>1||f(m,_)})})}function f(m,_){try{d(a[m](_))}catch(E){y(l[0][3],E)}}function d(m){m.value instanceof xl?Promise.resolve(m.value.v).then(h,g):y(l[0][2],m)}function h(m){f("next",m)}function g(m){f("throw",m)}function y(m,_){m(_),l.shift(),l.length&&f(l[0][0],l[0][1])}},PS=function(r){var n,i;return n={},a("next"),a("throw",function(s){throw s}),a("return"),n[Symbol.iterator]=function(){return this},n;function a(s,l){n[s]=r[s]?function(c){return(i=!i)?{value:xl(r[s](c)),done:s==="return"}:l?l(c):c}:l}},US=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],i;return n?n.call(r):(r=typeof rh=="function"?rh(r):r[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(l){i[l]=r[l]&&function(c){return new Promise(function(f,d){c=r[l](c),s(f,d,c.done,c.value)})}}function s(l,c,f,d){Promise.resolve(d).then(function(h){l({value:h,done:f})},c)}},MS=function(r,n){return Object.defineProperty?Object.defineProperty(r,"raw",{value:n}):r.raw=n,r},FS=function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var i in r)Object.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n.default=r,n},qS=function(r){return r&&r.__esModule?r:{default:r}},GS=function(r,n){if(!n.has(r))throw new TypeError("attempted to get private field on non-instance");return n.get(r)},VS=function(r,n,i){if(!n.has(r))throw new TypeError("attempted to set private field on non-instance");return n.set(r,i),i},e("__extends",xS),e("__assign",SS),e("__rest",TS),e("__decorate",AS),e("__param",IS),e("__metadata",kS),e("__awaiter",RS),e("__generator",BS),e("__exportStar",NS),e("__createBinding",KS),e("__values",rh),e("__read",bm),e("__spread",DS),e("__spreadArrays",OS),e("__await",xl),e("__asyncGenerator",LS),e("__asyncDelegator",PS),e("__asyncValues",US),e("__makeTemplateObject",MS),e("__importStar",FS),e("__importDefault",qS),e("__classPrivateFieldGet",GS),e("__classPrivateFieldSet",VS)})});var MT=ue(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.isDate=us.isComparable=us.isIterable=void 0;us.isIterable=e=>!(e==null||e[Symbol.iterator]==null);us.isComparable=e=>{let t=Object.prototype.toString,r=e;return r.compare!=null&&t.call(r.compare).endsWith("Function]")};us.isDate=e=>Object.prototype.toString.call(e).endsWith("Date]")});var qT=ue(FT=>{"use strict";Object.defineProperty(FT,"__esModule",{value:!0})});var GT=ue(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});var YF=Em(),Im=MT(),zF=(e,t)=>e-t,QF=(e,t)=>Number(e-t),XF=(e,t)=>e.localeCompare(t),JF=(e,t)=>e.getTime()-t.getTime(),kl={number:zF,string:XF,Date:JF,bigInt:QF,none:()=>0},ZF=e=>{if(typeof e=="number")return kl.number;if(typeof e=="string")return kl.string;if(typeof e=="bigint")return kl.bigInt;if(Im.isDate(e))return kl.Date;if(Im.isComparable(e))return(t,r)=>t.compare(r);throw new Error("Cannot sort keys in this map. You have to specify compareFn if the type of key in this map is not number, string, or Date.")},uo=class extends Map{constructor(t,r){super();this.specifiedCompareFn=!1,this.isCompareFn=n=>typeof n=="function",this.compareFn=kl.none,this.sortedKeys=[],Im.isIterable(t)&&this._constructor(t,r),this.isCompareFn(t)&&this._constructor(null,t),t==null&&this._constructor(null,r)}get comparator(){return this.compareFn}compare(t,r){return Math.sign(this.compareFn(t,r))}_constructor(t,r){if(this.compareFn=r==null?kl.none:r,this.specifiedCompareFn=r!=null,t!=null)for(let n of t)this.set(...n)}static fromMap(t,r){let n=new uo(r);return n.setAll(t),n}duplicate(){return uo.fromMap(this,this.compareFn)}toMap(){let t=new Map,r=Array.from(super.entries());return r.sort((n,i)=>this.compareFn(n[0],i[0])),r.forEach(([n,i])=>{t.set(n,i)}),t}reverseKeys(){return[...this.sortedKeys].reverse().values()}get(t){let r=this.sortedKeys.find(n=>this.comparator(n,t)===0);if(r!=null)return super.get(r)}set(t,r){this.sortedKeys.length===0&&!this.specifiedCompareFn&&(this.compareFn=ZF(t),this.specifiedCompareFn=!0);let n=this.sortedKeys.find(i=>this.compareFn(i,t)===0);return n==null?(this.sortedKeys.push(t),super.set(t,r)):super.set(n,r),this.sortedKeys.sort(this.compareFn),this}setAll(t){return t.forEach((r,n)=>{this.set(n,r)}),this}delete(t){return super.delete(t)?(this.sortedKeys=this.sortedKeys.filter(r=>this.compare(r,t)!==0),!0):!1}clear(){super.clear(),this.sortedKeys=[]}keys(){return this.sortedKeys.values()}values(){return this.sortedKeys.map(t=>super.get(t)).values()}entries(){return this.toMap().entries()}firstEntry(){let t=this.firstKey();if(t==null)return;let r=this.get(t);return r===void 0?void 0:[t,r]}firstKey(){return this.sortedKeys[0]}lastEntry(){let t=this.lastKey();if(t==null)return;let r=this.get(t);return r===void 0?void 0:[t,r]}lastKey(){return[...this.sortedKeys].reverse()[0]}shiftEntry(){let t=this.firstEntry();if(t!=null)return this.delete(t[0]),t}popEntry(){let t=this.lastEntry();if(t!=null)return this.delete(t[0]),t}floorEntry(t){let r=this.floorKey(t);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}floorKey(t){return this.sortedKeys.filter(n=>this.compare(n,t)<=0).reverse()[0]}ceilingEntry(t){let r=this.ceilingKey(t);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}ceilingKey(t){return this.sortedKeys.filter(n=>this.compare(n,t)>=0)[0]}lowerEntry(t){let r=this.lowerKey(t);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}lowerKey(t){return this.sortedKeys.filter(n=>this.compare(n,t)<0).reverse()[0]}higherEntry(t){let r=this.higherKey(t);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}higherKey(t){return this.sortedKeys.filter(n=>this.compare(n,t)>0)[0]}splitLower(t,r=!0){let n=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],t)<0;return r?a||this.compare(i[0],t)===0:a});return new uo(n,this.compareFn)}splitHigher(t,r=!0){let n=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],t)>0;return r?a||this.compare(i[0],t)===0:a});return new uo(n,this.compareFn)}forEach(t,r){Array.from(this.entries()).forEach(([n,i])=>{t(i,n,this)},r)}};oh.default=uo;YF.__exportStar(qT(),oh)});nO(exports,{default:()=>kt});var Ol=mt(require("obsidian"));var Up=mt(require("obsidian")),Zc=new Map;function fr(e){let t=window.moment();Zc.has(e)?Zc.get(e).isBefore(t)&&(new Up.Notice(e),Zc.set(e,t.add(1,"minute"))):(new Up.Notice(e),Zc.set(e,t.add(1,"minute")))}var zt=mt(require("obsidian"));var $c=()=>{var e;return(e=window.localStorage.getItem("googleCalendarAccessToken"))!=null?e:""},ca=()=>{var e;return(e=window.localStorage.getItem("googleCalendarRefreshToken"))!=null?e:""},ef=()=>{var t;let e=(t=window.localStorage.getItem("googleCalendarExpirationTime"))!=null?t:"0";return parseInt(e,10)},xs=()=>{var e;return(e=window.localStorage.getItem("googleCalendarUserId"))!=null?e:""},qa=e=>{e!="undefined"&&window.localStorage.setItem("googleCalendarAccessToken",e)},tf=e=>{e!="undefined"&&window.localStorage.setItem("googleCalendarUserId",e)},Jl=e=>{e!="undefined"&&window.localStorage.setItem("googleCalendarRefreshToken",e)},Ga=e=>{isNaN(e)||window.localStorage.setItem("googleCalendarExpirationTime",e+"")};var Ks=mt(require("obsidian")),Xg=42813;function oM(){return!(!$c()||$c()==""||!ef()||isNaN(ef())||ef()<+new Date)}var lM=e=>M(void 0,null,function*(){let t={client_id:e.settings.googleClientId,client_secret:e.settings.googleClientSecret,grant_type:"refresh_token",refresh_token:ca()},r=yield(0,Ks.requestUrl)({method:"POST",url:"https://oauth2.googleapis.com/token",body:JSON.stringify(t)});if(r.status!=200)return!1;let n=yield r.json;return qa(n.access_token),Ga(+new Date+n.expires_in*1e3),!0}),cx=e=>M(void 0,null,function*(){let t={uid:xs()},r=yield(0,Ks.requestUrl)({url:`${e.settings.googleOAuthServer}/api/google/refresh`,method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(r.status!=200)return!1;let{tokenData:n}=yield r.json;return qa(n.access_token),Ga(+new Date+n.expires_in*1e3),!0});function Sn(){return M(this,null,function*(){let e=kt.getInstance();if(!jt())return"";let t=!1;return oM()==!1&&(ca()!=""||xs()!="")&&(e.settings.useCustomClient?(t=yield lM(e),t==!1&&(t=yield cx(e))):t=yield cx(e)),$c()})}function fx(){return M(this,null,function*(){let e=kt.getInstance();if(Ks.Platform.isDesktop){if(!dx())return;let{OAuth2Client:t}=Yb(),r=require("http"),n=ox(),i=require("url"),a=ux(),s=new t(e.settings.googleClientId,e.settings.googleClientSecret,`http://127.0.0.1:${Xg}/callback`),l=s.generateAuthUrl({scope:["https://www.googleapis.com/auth/calendar"],access_type:"offline",prompt:"consent"}),c=r.createServer((f,d)=>M(this,null,function*(){try{if(f.url.indexOf("/callback")>-1){let g=new i.URL(f.url,`http://localhost:${Xg}`).searchParams.get("code");d.end("Authentication successful! Please return to obsidian."),c.destroy();let y=yield s.getToken(g);Jl(y.tokens.refresh_token),qa(y.tokens.access_token),Ga(y.tokens.expiry_date),console.info("Tokens acquired."),e.settingsTab.display()}}catch(h){console.log("Auth failed")}})).listen(Xg,()=>M(this,null,function*(){(yield n(l,{wait:!1})).unref()}));a(c)}else new Ks.Notice("Can't use OAuth on this device")})}var hx=mt(require("obsidian"));var Jg=new Map,Zg=new Map;function px(){return M(this,null,function*(){var r,n;if(!jt())return;let e=yield(0,hx.requestUrl)({url:"https://www.googleapis.com/calendar/v3/colors",headers:{Authorization:"Bearer "+(yield Sn())}});if(e.status!==200){fr("Could not load Google Colors");return}let t=yield e.json;for(let i=1;;i++){let a=(r=t.calendar[i+""])==null?void 0:r.background;if(!a)break;Jg.set(i+"",a)}for(let i=1;;i++){let a=(n=t.event[i+""])==null?void 0:n.background;if(!a)break;Zg.set(i+"",a)}})}function Ru(e){return e.colorId&&Zg.has(e.colorId)?Zg.get(e.colorId):e.parent.colorId&&Jg.has(e.parent.colorId)?Jg.get(e.parent.colorId):"#a4bdfc"}var gx=mt(require("obsidian"));var $g=[];function mx(e,t){return t.filter(n=>e.settings.calendarBlackList.findIndex(a=>a[0]==n.id)==-1)}function dn(){return M(this,null,function*(){if(!jt())return[];let e=kt.getInstance();if($g.length)return mx(e,$g);yield px();let t=yield(0,gx.requestUrl)({url:"https://www.googleapis.com/calendar/v3/users/me/calendarList",headers:{Authorization:"Bearer "+(yield Sn())}});if(t.status!==200)return fr("Could not list Google Calendars"),[];let r=yield t.json;return $g=r.items,mx(e,r.items)})}var Ti=mt(require("obsidian"));var Mx=mt(require("obsidian"));var gr="top",Ir="bottom",br="right",vr="left",Ld="auto",ns=[gr,Ir,br,vr],_a="start",js="end",yx="clippingParents",Pd="viewport",hl="popper",vx="reference",em=ns.reduce(function(e,t){return e.concat([t+"-"+_a,t+"-"+js])},[]),Ud=[].concat(ns,[Ld]).reduce(function(e,t){return e.concat([t,t+"-"+_a,t+"-"+js])},[]),uM="beforeRead",cM="read",fM="afterRead",dM="beforeMain",hM="main",pM="afterMain",gM="beforeWrite",mM="write",yM="afterWrite",_x=[uM,cM,fM,dM,hM,pM,gM,mM,yM];function Mr(e){return e?(e.nodeName||"").toLowerCase():null}function dr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ri(e){var t=dr(e).Element;return e instanceof t||e instanceof Element}function kr(e){var t=dr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function pl(e){if(typeof ShadowRoot=="undefined")return!1;var t=dr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function vM(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},a=t.elements[r];!kr(a)||!Mr(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(s){var l=i[s];l===!1?a.removeAttribute(s):a.setAttribute(s,l===!0?"":l)}))})}function _M(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],a=t.attributes[n]||{},s=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),l=s.reduce(function(c,f){return c[f]="",c},{});!kr(i)||!Mr(i)||(Object.assign(i.style,l),Object.keys(a).forEach(function(c){i.removeAttribute(c)}))})}}var Ex={name:"applyStyles",enabled:!0,phase:"write",fn:vM,effect:_M,requires:["computeStyles"]};function Fr(e){return e.split("-")[0]}var bi=Math.max,Hs=Math.min,Ea=Math.round;function gl(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Bu(){return!/^((?!chrome|android).)*safari/i.test(gl())}function ni(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,a=1;t&&kr(e)&&(i=e.offsetWidth>0&&Ea(n.width)/e.offsetWidth||1,a=e.offsetHeight>0&&Ea(n.height)/e.offsetHeight||1);var s=ri(e)?dr(e):window,l=s.visualViewport,c=!Bu()&&r,f=(n.left+(c&&l?l.offsetLeft:0))/i,d=(n.top+(c&&l?l.offsetTop:0))/a,h=n.width/i,g=n.height/a;return{width:h,height:g,top:d,right:f+h,bottom:d+g,left:f,x:f,y:d}}function Ws(e){var t=ni(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Nu(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&pl(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function hn(e){return dr(e).getComputedStyle(e)}function tm(e){return["table","td","th"].indexOf(Mr(e))>=0}function Wr(e){return((ri(e)?e.ownerDocument:e.document)||window.document).documentElement}function wa(e){return Mr(e)==="html"?e:e.assignedSlot||e.parentNode||(pl(e)?e.host:null)||Wr(e)}function wx(e){return!kr(e)||hn(e).position==="fixed"?null:e.offsetParent}function EM(e){var t=/firefox/i.test(gl()),r=/Trident/i.test(gl());if(r&&kr(e)){var n=hn(e);if(n.position==="fixed")return null}var i=wa(e);for(pl(i)&&(i=i.host);kr(i)&&["html","body"].indexOf(Mr(i))<0;){var a=hn(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function xi(e){for(var t=dr(e),r=wx(e);r&&tm(r)&&hn(r).position==="static";)r=wx(r);return r&&(Mr(r)==="html"||Mr(r)==="body"&&hn(r).position==="static")?t:r||EM(e)||t}function Ys(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function zs(e,t,r){return bi(e,Hs(t,r))}function Cx(e,t,r){var n=zs(e,t,r);return n>r?r:n}function Du(){return{top:0,right:0,bottom:0,left:0}}function Ou(e){return Object.assign({},Du(),e)}function Lu(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var wM=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Ou(typeof t!="number"?t:Lu(t,ns))};function CM(e){var t,r=e.state,n=e.name,i=e.options,a=r.elements.arrow,s=r.modifiersData.popperOffsets,l=Fr(r.placement),c=Ys(l),f=[vr,br].indexOf(l)>=0,d=f?"height":"width";if(!(!a||!s)){var h=wM(i.padding,r),g=Ws(a),y=c==="y"?gr:vr,m=c==="y"?Ir:br,_=r.rects.reference[d]+r.rects.reference[c]-s[c]-r.rects.popper[d],E=s[c]-r.rects.reference[c],w=xi(a),S=w?c==="y"?w.clientHeight||0:w.clientWidth||0:0,R=_/2-E/2,B=h[y],O=S-g[d]-h[m],N=S/2-g[d]/2+R,ee=zs(B,N,O),q=c;r.modifiersData[n]=(t={},t[q]=ee,t.centerOffset=ee-N,t)}}function bM(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||!Nu(t.elements.popper,i)||(t.elements.arrow=i))}var bx={name:"arrow",enabled:!0,phase:"main",fn:CM,effect:bM,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ii(e){return e.split("-")[1]}var xM={top:"auto",right:"auto",bottom:"auto",left:"auto"};function SM(e){var t=e.x,r=e.y,n=window,i=n.devicePixelRatio||1;return{x:Ea(t*i)/i||0,y:Ea(r*i)/i||0}}function xx(e){var t,r=e.popper,n=e.popperRect,i=e.placement,a=e.variation,s=e.offsets,l=e.position,c=e.gpuAcceleration,f=e.adaptive,d=e.roundOffsets,h=e.isFixed,g=s.x,y=g===void 0?0:g,m=s.y,_=m===void 0?0:m,E=typeof d=="function"?d({x:y,y:_}):{x:y,y:_};y=E.x,_=E.y;var w=s.hasOwnProperty("x"),S=s.hasOwnProperty("y"),R=vr,B=gr,O=window;if(f){var N=xi(r),ee="clientHeight",q="clientWidth";if(N===dr(r)&&(N=Wr(r),hn(N).position!=="static"&&l==="absolute"&&(ee="scrollHeight",q="scrollWidth")),N=N,i===gr||(i===vr||i===br)&&a===js){B=Ir;var F=h&&N===O&&O.visualViewport?O.visualViewport.height:N[ee];_-=F-n.height,_*=c?1:-1}if(i===vr||(i===gr||i===Ir)&&a===js){R=br;var ce=h&&N===O&&O.visualViewport?O.visualViewport.width:N[q];y-=ce-n.width,y*=c?1:-1}}var se=Object.assign({position:l},f&&xM),ve=d===!0?SM({x:y,y:_}):{x:y,y:_};if(y=ve.x,_=ve.y,c){var Ie;return Object.assign({},se,(Ie={},Ie[B]=S?"0":"",Ie[R]=w?"0":"",Ie.transform=(O.devicePixelRatio||1)<=1?"translate("+y+"px, "+_+"px)":"translate3d("+y+"px, "+_+"px, 0)",Ie))}return Object.assign({},se,(t={},t[B]=S?_+"px":"",t[R]=w?y+"px":"",t.transform="",t))}function TM(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,a=r.adaptive,s=a===void 0?!0:a,l=r.roundOffsets,c=l===void 0?!0:l;if(!1)var f;var d={placement:Fr(t.placement),variation:ii(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,xx(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,xx(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var Sx={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:TM,data:{}};var Md={passive:!0};function AM(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,a=i===void 0?!0:i,s=n.resize,l=s===void 0?!0:s,c=dr(t.elements.popper),f=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&f.forEach(function(d){d.addEventListener("scroll",r.update,Md)}),l&&c.addEventListener("resize",r.update,Md),function(){a&&f.forEach(function(d){d.removeEventListener("scroll",r.update,Md)}),l&&c.removeEventListener("resize",r.update,Md)}}var Tx={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:AM,data:{}};var IM={left:"right",right:"left",bottom:"top",top:"bottom"};function ml(e){return e.replace(/left|right|bottom|top/g,function(t){return IM[t]})}var kM={start:"end",end:"start"};function Fd(e){return e.replace(/start|end/g,function(t){return kM[t]})}function Qs(e){var t=dr(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function Xs(e){return ni(Wr(e)).left+Qs(e).scrollLeft}function rm(e,t){var r=dr(e),n=Wr(e),i=r.visualViewport,a=n.clientWidth,s=n.clientHeight,l=0,c=0;if(i){a=i.width,s=i.height;var f=Bu();(f||!f&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:s,x:l+Xs(e),y:c}}function nm(e){var t,r=Wr(e),n=Qs(e),i=(t=e.ownerDocument)==null?void 0:t.body,a=bi(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=bi(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-n.scrollLeft+Xs(e),c=-n.scrollTop;return hn(i||r).direction==="rtl"&&(l+=bi(r.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:l,y:c}}function Js(e){var t=hn(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function qd(e){return["html","body","#document"].indexOf(Mr(e))>=0?e.ownerDocument.body:kr(e)&&Js(e)?e:qd(wa(e))}function is(e,t){var r;t===void 0&&(t=[]);var n=qd(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),a=dr(n),s=i?[a].concat(a.visualViewport||[],Js(n)?n:[]):n,l=t.concat(s);return i?l:l.concat(is(wa(s)))}function yl(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function RM(e,t){var r=ni(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function Ax(e,t,r){return t===Pd?yl(rm(e,r)):ri(t)?RM(t,r):yl(nm(Wr(e)))}function BM(e){var t=is(wa(e)),r=["absolute","fixed"].indexOf(hn(e).position)>=0,n=r&&kr(e)?xi(e):e;return ri(n)?t.filter(function(i){return ri(i)&&Nu(i,n)&&Mr(i)!=="body"}):[]}function im(e,t,r,n){var i=t==="clippingParents"?BM(e):[].concat(t),a=[].concat(i,[r]),s=a[0],l=a.reduce(function(c,f){var d=Ax(e,f,n);return c.top=bi(d.top,c.top),c.right=Hs(d.right,c.right),c.bottom=Hs(d.bottom,c.bottom),c.left=bi(d.left,c.left),c},Ax(e,s,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Pu(e){var t=e.reference,r=e.element,n=e.placement,i=n?Fr(n):null,a=n?ii(n):null,s=t.x+t.width/2-r.width/2,l=t.y+t.height/2-r.height/2,c;switch(i){case gr:c={x:s,y:t.y-r.height};break;case Ir:c={x:s,y:t.y+t.height};break;case br:c={x:t.x+t.width,y:l};break;case vr:c={x:t.x-r.width,y:l};break;default:c={x:t.x,y:t.y}}var f=i?Ys(i):null;if(f!=null){var d=f==="y"?"height":"width";switch(a){case _a:c[f]=c[f]-(t[d]/2-r[d]/2);break;case js:c[f]=c[f]+(t[d]/2-r[d]/2);break;default:}}return c}function Si(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,a=r.strategy,s=a===void 0?e.strategy:a,l=r.boundary,c=l===void 0?yx:l,f=r.rootBoundary,d=f===void 0?Pd:f,h=r.elementContext,g=h===void 0?hl:h,y=r.altBoundary,m=y===void 0?!1:y,_=r.padding,E=_===void 0?0:_,w=Ou(typeof E!="number"?E:Lu(E,ns)),S=g===hl?vx:hl,R=e.rects.popper,B=e.elements[m?S:g],O=im(ri(B)?B:B.contextElement||Wr(e.elements.popper),c,d,s),N=ni(e.elements.reference),ee=Pu({reference:N,element:R,strategy:"absolute",placement:i}),q=yl(Object.assign({},R,ee)),F=g===hl?q:N,ce={top:O.top-F.top+w.top,bottom:F.bottom-O.bottom+w.bottom,left:O.left-F.left+w.left,right:F.right-O.right+w.right},se=e.modifiersData.offset;if(g===hl&&se){var ve=se[i];Object.keys(ce).forEach(function(Ie){var Be=[br,Ir].indexOf(Ie)>=0?1:-1,Se=[gr,Ir].indexOf(Ie)>=0?"y":"x";ce[Ie]+=ve[Se]*Be})}return ce}function am(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,a=r.rootBoundary,s=r.padding,l=r.flipVariations,c=r.allowedAutoPlacements,f=c===void 0?Ud:c,d=ii(n),h=d?l?em:em.filter(function(m){return ii(m)===d}):ns,g=h.filter(function(m){return f.indexOf(m)>=0});g.length===0&&(g=h);var y=g.reduce(function(m,_){return m[_]=Si(e,{placement:_,boundary:i,rootBoundary:a,padding:s})[Fr(_)],m},{});return Object.keys(y).sort(function(m,_){return y[m]-y[_]})}function NM(e){if(Fr(e)===Ld)return[];var t=ml(e);return[Fd(e),t,Fd(t)]}function DM(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,l=s===void 0?!0:s,c=r.fallbackPlacements,f=r.padding,d=r.boundary,h=r.rootBoundary,g=r.altBoundary,y=r.flipVariations,m=y===void 0?!0:y,_=r.allowedAutoPlacements,E=t.options.placement,w=Fr(E),S=w===E,R=c||(S||!m?[ml(E)]:NM(E)),B=[E].concat(R).reduce(function(pt,tt){return pt.concat(Fr(tt)===Ld?am(t,{placement:tt,boundary:d,rootBoundary:h,padding:f,flipVariations:m,allowedAutoPlacements:_}):tt)},[]),O=t.rects.reference,N=t.rects.popper,ee=new Map,q=!0,F=B[0],ce=0;ce<B.length;ce++){var se=B[ce],ve=Fr(se),Ie=ii(se)===_a,Be=[gr,Ir].indexOf(ve)>=0,Se=Be?"width":"height",Te=Si(t,{placement:se,boundary:d,rootBoundary:h,altBoundary:g,padding:f}),_e=Be?Ie?br:vr:Ie?Ir:gr;O[Se]>N[Se]&&(_e=ml(_e));var Xe=ml(_e),Ve=[];if(a&&Ve.push(Te[ve]<=0),l&&Ve.push(Te[_e]<=0,Te[Xe]<=0),Ve.every(function(pt){return pt})){F=se,q=!1;break}ee.set(se,Ve)}if(q)for(var yt=m?3:1,ht=function(tt){var vt=B.find(function(Je){var we=ee.get(Je);if(we)return we.slice(0,tt).every(function(A){return A})});if(vt)return F=vt,"break"},ze=yt;ze>0;ze--){var fe=ht(ze);if(fe==="break")break}t.placement!==F&&(t.modifiersData[n]._skip=!0,t.placement=F,t.reset=!0)}}var Ix={name:"flip",enabled:!0,phase:"main",fn:DM,requiresIfExists:["offset"],data:{_skip:!1}};function kx(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function Rx(e){return[gr,br,Ir,vr].some(function(t){return e[t]>=0})}function OM(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,s=Si(t,{elementContext:"reference"}),l=Si(t,{altBoundary:!0}),c=kx(s,n),f=kx(l,i,a),d=Rx(c),h=Rx(f);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:f,isReferenceHidden:d,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}var Bx={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:OM};function LM(e,t,r){var n=Fr(e),i=[vr,gr].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,s=a[0],l=a[1];return s=s||0,l=(l||0)*i,[vr,br].indexOf(n)>=0?{x:l,y:s}:{x:s,y:l}}function PM(e){var t=e.state,r=e.options,n=e.name,i=r.offset,a=i===void 0?[0,0]:i,s=Ud.reduce(function(d,h){return d[h]=LM(h,t.rects,a),d},{}),l=s[t.placement],c=l.x,f=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=f),t.modifiersData[n]=s}var Nx={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:PM};function UM(e){var t=e.state,r=e.name;t.modifiersData[r]=Pu({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Dx={name:"popperOffsets",enabled:!0,phase:"read",fn:UM,data:{}};function sm(e){return e==="x"?"y":"x"}function MM(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,l=s===void 0?!1:s,c=r.boundary,f=r.rootBoundary,d=r.altBoundary,h=r.padding,g=r.tether,y=g===void 0?!0:g,m=r.tetherOffset,_=m===void 0?0:m,E=Si(t,{boundary:c,rootBoundary:f,padding:h,altBoundary:d}),w=Fr(t.placement),S=ii(t.placement),R=!S,B=Ys(w),O=sm(B),N=t.modifiersData.popperOffsets,ee=t.rects.reference,q=t.rects.popper,F=typeof _=="function"?_(Object.assign({},t.rects,{placement:t.placement})):_,ce=typeof F=="number"?{mainAxis:F,altAxis:F}:Object.assign({mainAxis:0,altAxis:0},F),se=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,ve={x:0,y:0};if(!!N){if(a){var Ie,Be=B==="y"?gr:vr,Se=B==="y"?Ir:br,Te=B==="y"?"height":"width",_e=N[B],Xe=_e+E[Be],Ve=_e-E[Se],yt=y?-q[Te]/2:0,ht=S===_a?ee[Te]:q[Te],ze=S===_a?-q[Te]:-ee[Te],fe=t.elements.arrow,pt=y&&fe?Ws(fe):{width:0,height:0},tt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Du(),vt=tt[Be],Je=tt[Se],we=zs(0,ee[Te],pt[Te]),A=R?ee[Te]/2-yt-we-vt-ce.mainAxis:ht-we-vt-ce.mainAxis,D=R?-ee[Te]/2+yt+we+Je+ce.mainAxis:ze+we+Je+ce.mainAxis,L=t.elements.arrow&&xi(t.elements.arrow),W=L?B==="y"?L.clientTop||0:L.clientLeft||0:0,V=(Ie=se==null?void 0:se[B])!=null?Ie:0,Q=_e+A-V-W,J=_e+D-V,H=zs(y?Hs(Xe,Q):Xe,_e,y?bi(Ve,J):Ve);N[B]=H,ve[B]=H-_e}if(l){var X,ne=B==="x"?gr:vr,Z=B==="x"?Ir:br,de=N[O],Ue=O==="y"?"height":"width",Fe=de+E[ne],ot=de-E[Z],Vt=[gr,vr].indexOf(w)!==-1,Kt=(X=se==null?void 0:se[O])!=null?X:0,rt=Vt?Fe:de-ee[Ue]-q[Ue]-Kt+ce.altAxis,At=Vt?de+ee[Ue]+q[Ue]-Kt-ce.altAxis:ot,ur=y&&Vt?Cx(rt,de,At):zs(y?rt:Fe,de,y?At:ot);N[O]=ur,ve[O]=ur-de}t.modifiersData[n]=ve}}var Ox={name:"preventOverflow",enabled:!0,phase:"main",fn:MM,requiresIfExists:["offset"]};function om(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function lm(e){return e===dr(e)||!kr(e)?Qs(e):om(e)}function FM(e){var t=e.getBoundingClientRect(),r=Ea(t.width)/e.offsetWidth||1,n=Ea(t.height)/e.offsetHeight||1;return r!==1||n!==1}function um(e,t,r){r===void 0&&(r=!1);var n=kr(t),i=kr(t)&&FM(t),a=Wr(t),s=ni(e,i,r),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!r)&&((Mr(t)!=="body"||Js(a))&&(l=lm(t)),kr(t)?(c=ni(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):a&&(c.x=Xs(a))),{x:s.left+l.scrollLeft-c.x,y:s.top+l.scrollTop-c.y,width:s.width,height:s.height}}function qM(e){var t=new Map,r=new Set,n=[];e.forEach(function(a){t.set(a.name,a)});function i(a){r.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(l){if(!r.has(l)){var c=t.get(l);c&&i(c)}}),n.push(a)}return e.forEach(function(a){r.has(a.name)||i(a)}),n}function cm(e){var t=qM(e);return _x.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function fm(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function dm(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var Lx={placement:"bottom",modifiers:[],strategy:"absolute"};function Px(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Ux(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,a=i===void 0?Lx:i;return function(l,c,f){f===void 0&&(f=a);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Lx,a),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},h=[],g=!1,y={state:d,setOptions:function(w){var S=typeof w=="function"?w(d.options):w;_(),d.options=Object.assign({},a,d.options,S),d.scrollParents={reference:ri(l)?is(l):l.contextElement?is(l.contextElement):[],popper:is(c)};var R=cm(dm([].concat(n,d.options.modifiers)));if(d.orderedModifiers=R.filter(function(se){return se.enabled}),!1){var B;if(getBasePlacement(d.options.placement)===auto)var O;var N,ee,q,F,ce}return m(),y.update()},forceUpdate:function(){if(!g){var w=d.elements,S=w.reference,R=w.popper;if(!!Px(S,R)){d.rects={reference:um(S,xi(R),d.options.strategy==="fixed"),popper:Ws(R)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(se){return d.modifiersData[se.name]=Object.assign({},se.data)});for(var B=0,O=0;O<d.orderedModifiers.length;O++){if(d.reset===!0){d.reset=!1,O=-1;continue}var N=d.orderedModifiers[O],ee=N.fn,q=N.options,F=q===void 0?{}:q,ce=N.name;typeof ee=="function"&&(d=ee({state:d,options:F,name:ce,instance:y})||d)}}}},update:fm(function(){return new Promise(function(E){y.forceUpdate(),E(d)})}),destroy:function(){_(),g=!0}};if(!Px(l,c))return y;y.setOptions(f).then(function(E){!g&&f.onFirstUpdate&&f.onFirstUpdate(E)});function m(){d.orderedModifiers.forEach(function(E){var w=E.name,S=E.options,R=S===void 0?{}:S,B=E.effect;if(typeof B=="function"){var O=B({state:d,name:w,instance:y,options:R}),N=function(){};h.push(O||N)}})}function _(){h.forEach(function(E){return E()}),h=[]}return y}}var GM=[Tx,Dx,Sx,Ex,Nx,Ix,Ox,bx,Bx],hm=Ux({defaultModifiers:GM});var VM=(e,t)=>(e%t+t)%t,Fx=class{constructor(t,r,n){this.owner=t,this.containerEl=r,r.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),r.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),n.register([],"ArrowUp",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem-1,!0),!1}),n.register([],"ArrowDown",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem+1,!0),!1}),n.register([],"Enter",i=>{if(!i.isComposing)return this.useSelectedItem(i),!1})}onSuggestionClick(t,r){t.preventDefault();let n=this.suggestions.indexOf(r);this.setSelectedItem(n,!1),this.useSelectedItem(t)}onSuggestionMouseover(t,r){let n=this.suggestions.indexOf(r);this.setSelectedItem(n,!1)}setSuggestions(t){this.containerEl.empty();let r=[];t.forEach(n=>{let i=this.containerEl.createDiv("suggestion-item");this.owner.renderSuggestion(n,i),r.push(i)}),this.values=t,this.suggestions=r,this.setSelectedItem(0,!1)}useSelectedItem(t){let r=this.values[this.selectedItem];r&&this.owner.selectSuggestion(r,t)}setSelectedItem(t,r){let n=VM(t,this.suggestions.length),i=this.suggestions[this.selectedItem],a=this.suggestions[n];i==null||i.removeClass("is-selected"),a==null||a.addClass("is-selected"),this.selectedItem=n,r&&a.scrollIntoView(!1)}},Uu=class{constructor(t){this.inputEl=t,this.scope=new Mx.Scope,this.suggestEl=createDiv("suggestion-container");let r=this.suggestEl.createDiv("suggestion");this.suggest=new Fx(this,r,this.scope),this.scope.register([],"Escape",this.close.bind(this)),this.inputEl.addEventListener("input",this.onInputChanged.bind(this)),this.inputEl.addEventListener("focus",this.onInputChanged.bind(this)),this.inputEl.addEventListener("blur",this.close.bind(this)),this.suggestEl.on("mousedown",".suggestion-container",n=>{n.preventDefault()})}onInputChanged(){let t=this.inputEl.value,r=this.getSuggestions(t);if(!r){this.close();return}r.length>0?(this.suggest.setSuggestions(r),this.open(app.dom.appContainerEl,this.inputEl)):this.close()}open(t,r){app.keymap.pushScope(this.scope),t.appendChild(this.suggestEl),this.popper=hm(r,this.suggestEl,{placement:"bottom-start",modifiers:[{name:"sameWidth",enabled:!0,fn:({state:n,instance:i})=>{let a=`${n.rects.reference.width}px`;n.styles.popper.width!==a&&(n.styles.popper.width=a,i.update())},phase:"beforeWrite",requires:["computeStyles"]}]})}close(){app.keymap.popScope(this.scope),this.suggest.setSuggestions([]),this.popper&&this.popper.destroy(),this.suggestEl.detach()}};function KM(e){e=(0,Ti.normalizePath)(e);let t=app.vault.getAbstractFileByPath(e);return!t||!(t instanceof Ti.TFolder)?null:t}function qx(e){let t=KM(e),r=[];return Ti.Vault.recurseChildren(t,n=>{n instanceof Ti.TFile&&r.push(n)}),r.sort((n,i)=>n.basename.localeCompare(i.basename)),r}var Gx;(function(r){r[r.TemplateFiles=0]="TemplateFiles",r[r.ScriptFiles=1]="ScriptFiles"})(Gx||(Gx={}));var Mu=class extends Uu{constructor(t,r){super(t);this.inputEl=t;this.plugin=r}getSuggestions(t){var s,l,c,f,d,h,g;let r=[];if(this.plugin.templaterPlugin){let y=(0,Ti.normalizePath)((c=(l=(s=this.plugin)==null?void 0:s.templaterPlugin)==null?void 0:l.settings)==null?void 0:c.templates_folder),m=qx(y);r=[...r,...m]}if(this.plugin.coreTemplatePlugin){let y=(0,Ti.normalizePath)((g=(h=(d=(f=this.plugin)==null?void 0:f.coreTemplatePlugin)==null?void 0:d.instance)==null?void 0:h.options)==null?void 0:g.folder),m=qx(y);r=[...r,...m]}if(!r)return[];let n=new Set(r),i=[],a=t.toLowerCase();return n.forEach(y=>{y instanceof Ti.TFile&&y.extension==="md"&&y.path.toLowerCase().contains(a)&&i.push(y)}),i}renderSuggestion(t,r){r.setText(t.path)}selectSuggestion(t){this.inputEl.value=t.path,this.inputEl.trigger("input"),this.close()}};var Vx=mt(require("obsidian"));var Fu=class extends Uu{getSuggestions(t){let r=app.vault.getAllLoadedFiles(),n=[],i=t.toLowerCase();return r.forEach(a=>{a instanceof Vx.TFolder&&a.path.toLowerCase().contains(i)&&n.push(a)}),n}renderSuggestion(t,r){r.setText(t.path)}selectSuggestion(t){this.inputEl.value=t.path,this.inputEl.trigger("input"),this.close()}};var pm=class extends zt.PluginSettingTab{constructor(t,r){super(t,r);this.plugin=r}display(){let{containerEl:t}=this,r=ca()||xs();t.empty(),t.createEl("h2",{text:"Settings for Google Calendar"}),t.createEl("h4",{text:"Please restart Obsidian to let changes take effect"}),new zt.Setting(t).setName("Use own authentication client").setDesc("Please create your own client.").addToggle(a=>a.setValue(this.plugin.settings.useCustomClient).onChange(s=>M(this,null,function*(){this.plugin.settings.useCustomClient=s,yield this.plugin.saveSettings(),this.display()}))),this.plugin.settings.useCustomClient?(new zt.Setting(t).setName("ClientId").setDesc("Google client id").setClass("SubSettings").addText(a=>a.setPlaceholder("Enter your client id").setValue(this.plugin.settings.googleClientId).onChange(s=>M(this,null,function*(){this.plugin.settings.googleClientId=s,yield this.plugin.saveSettings()}))),new zt.Setting(t).setName("ClientSecret").setDesc("Google client secret").setClass("SubSettings").addText(a=>a.setPlaceholder("Enter your client secret").setValue(this.plugin.settings.googleClientSecret).onChange(s=>M(this,null,function*(){this.plugin.settings.googleClientSecret=s,yield this.plugin.saveSettings()}))),zt.Platform.isMobileApp&&new zt.Setting(t).setName("Refresh Token").setDesc("Google Refresh Token from OAuth").setClass("SubSettings").addText(a=>a.setPlaceholder("Enter refresh token").setValue(this.plugin.settings.googleRefreshToken).onChange(s=>M(this,null,function*(){this.plugin.settings.googleRefreshToken=s,Jl(s)})))):new zt.Setting(t).setName("Serverurl").setDesc("The url to the server where the oauth takes place").setClass("SubSettings").addText(a=>{a.setValue(this.plugin.settings.googleOAuthServer).onChange(s=>M(this,null,function*(){this.plugin.settings.googleOAuthServer=s,yield this.plugin.saveSettings()}))}),new zt.Setting(t).setName("Login with google").addButton(a=>{a.setButtonText(r?"Logout":"Login").onClick(()=>{r?(Jl(""),tf(""),qa(""),Ga(0),this.hide(),this.display()):this.plugin.settings.useCustomClient?fx():window.open(`${this.plugin.settings.googleOAuthServer}/api/google`)})}),new zt.Setting(t).setName("Refresh Interval").setDesc("Time in seconds between refresh request from google server").addSlider(a=>{a.setValue(this.plugin.settings.refreshInterval),a.setLimits(10,360,1),a.setDynamicTooltip(),a.onChange(s=>M(this,null,function*(){this.plugin.settings.refreshInterval=s,yield this.plugin.saveSettings()}))}),new zt.Setting(t).setName("Default webview theme").addDropdown(a=>M(this,null,function*(){a.addOption("auto","Auto"),a.addOption("dark","Dark"),a.addOption("light","Light"),a.setValue(this.plugin.settings.webViewDefaultColorMode),a.onChange(s=>M(this,null,function*(){this.plugin.settings.webViewDefaultColorMode=s,yield this.plugin.saveSettings(),this.hide(),this.display()}))})),new zt.Setting(t).setName("Auto create Event Notes").setDesc("Will create new notes from a event if the description contains :obsidian:").addToggle(a=>{a.setValue(this.plugin.settings.autoCreateEventNotes),a.onChange(s=>M(this,null,function*(){this.plugin.settings.autoCreateEventNotes=s,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new zt.Setting(t).setName("Keep auto created Notes open").setDesc("When creating a new note should it stay open for direct editing").setClass("SubSettings").addToggle(a=>{a.setValue(this.plugin.settings.autoCreateEventKeepOpen),a.onChange(s=>M(this,null,function*(){this.plugin.settings.autoCreateEventKeepOpen=s,yield this.plugin.saveSettings(),this.hide(),this.display()}))});let n=new zt.Setting(t).setName("Import Start Offset").setDesc("Days in the past from events to import").setClass("SubSettings").addSlider(a=>{a.setValue(this.plugin.settings.importStartOffset),a.setLimits(0,7,1),a.setDynamicTooltip(),a.onChange(s=>M(this,null,function*(){a.showTooltip(),this.plugin.settings.importStartOffset=s,yield this.plugin.saveSettings()}))});new zt.Setting(t).setName("Import End Offset").setDesc("Days in the future from events to import").setClass("SubSettings").addSlider(a=>{a.setValue(this.plugin.settings.importEndOffset),a.setLimits(0,7,1),a.setDynamicTooltip(),a.onChange(s=>M(this,null,function*(){this.plugin.settings.importEndOffset=s,yield this.plugin.saveSettings()}))}),new zt.Setting(t).setName("Use defaults for note creation").setDesc("If active creating notes will be faster but less flexable").addToggle(a=>{a.setValue(this.plugin.settings.useDefaultTemplate),a.onChange(s=>M(this,null,function*(){this.plugin.settings.useDefaultTemplate=s,yield this.plugin.saveSettings(),this.display()}))}),this.plugin.settings.useDefaultTemplate&&(new zt.Setting(t).setName("Default Template").setDesc("Template to use at note creation").setClass("SubSettings").addSearch(a=>{new Mu(a.inputEl,this.plugin),a.setPlaceholder("Template").setValue(this.plugin.settings.defaultTemplate).onChange(s=>M(this,null,function*(){this.plugin.settings.defaultTemplate=s,yield this.plugin.saveSettings()})),a.containerEl.addClass("templater_search")}),new zt.Setting(t).setName("Default Folder").setDesc("Folder to save notes to after creation").setClass("SubSettings").addSearch(a=>{new Fu(a.inputEl),a.setPlaceholder("Example: folder1/folder2").setValue(this.plugin.settings.defaultFolder).onChange(s=>M(this,null,function*(){this.plugin.settings.defaultFolder=s,yield this.plugin.saveSettings()})),a.containerEl.addClass("templater_search")}));let i=this.plugin.settings.insertTemplates;if(i.length&&(new zt.Setting(t).setName("Saved Templates"),i.forEach(a=>{let s=new zt.Setting(t).setClass("SubSettings").setName(a.name).addButton(l=>{l.setButtonText("Remove"),l.onClick(()=>M(this,null,function*(){this.plugin.settings.insertTemplates.remove(a),s.settingEl.remove(),yield this.plugin.saveSettings(),this.hide(),this.display()}))})})),jt()){new zt.Setting(t).setName("Default Calendar").addDropdown(s=>M(this,null,function*(){s.addOption("Default","Select a calendar"),(yield dn()).forEach(c=>{s.addOption(c.id,c.summary)}),s.setValue(this.plugin.settings.defaultCalendar),s.onChange(c=>M(this,null,function*(){this.plugin.settings.defaultCalendar=c,yield this.plugin.saveSettings()}))})),t.createEl("h3","Calendar Blacklist");let a=this.plugin.settings.calendarBlackList;new zt.Setting(t).setName("Add Item to BlackList").addDropdown(s=>M(this,null,function*(){s.addOption("Default","Select Option to add"),(yield dn()).forEach(c=>{s.addOption(c.id+"_=_"+c.summary,c.summary)}),s.onChange(c=>M(this,null,function*(){let[f,d]=c.split("_=_");a.contains([f,d])||(this.plugin.settings.calendarBlackList=[...a,[f,d]],yield this.plugin.saveSettings());let h=new zt.Setting(t).setClass("SubSettings").setName(d).addButton(g=>{g.setButtonText("Remove"),g.onClick(()=>M(this,null,function*(){this.plugin.settings.calendarBlackList.remove([f,d]),h.settingEl.remove(),yield this.plugin.saveSettings()}))})}))})),a.forEach(s=>{let l=new zt.Setting(t).setClass("SubSettings").setName(s[1]).addButton(c=>{c.setButtonText("Remove"),c.onClick(()=>M(this,null,function*(){this.plugin.settings.calendarBlackList.remove(s),l.settingEl.remove(),yield this.plugin.saveSettings()}))})})}}};function dx(){let e=kt.getInstance();return e.settings.googleClientId==""||e.settings.googleClientSecret==""?(fr("Google Calendar missing settings"),!1):!0}function jt(){return(!ca()||ca()=="")&&(!xs()||xs()=="")?(fr("Google Calendar missing settings or not logged in"),!1):!0}var UT=mt(require("obsidian"));var Kx=mt(require("obsidian")),jx=mt(_l());var Gd=new Map;function Ai(){Gd.clear()}function or(){return M(this,arguments,function*({startDate:e,endDate:t,sort:r,exclude:n,include:i}={}){let a=kt.getInstance();e||(e=window.moment()),e=e.startOf("day"),t||(t=e.clone()),t=t.endOf("day");let s=yield dn();i&&i.length?s=s.filter(c=>i.contains(c.id)||i.contains(c.summary)):n&&n.length&&(s=s.filter(c=>!(n.contains(c.id)||n.contains(c.summary))));let l=[];for(let c=0;c<s.length;c++){let f=yield WM(a,s[c],e,t);l=[...l,...f]}return r&&(l=jx.default.orderBy(l,[c=>{var f;return new Date((f=c.start.date)!=null?f:c.start.dateTime)}],[r])),l})}function jM(e,t,r){return M(this,null,function*(){if(!jt())return[];let n,i=2500,a=[];do{let s=`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(e.id)}/events?`;s+=`maxResults=${i}`,s+="&futureevents=true",s+="&singleEvents=true",s+="&orderby=starttime",s+="&sortorder=ascending",s+=`&timeMin=${t}`,s+=`&timeMax=${r}`,n&&n.nextPageToken&&(s+=`&nextPageToken=${n.nextPageToken}`);let l=yield(0,Kx.requestUrl)({url:s,method:"GET",headers:{Authorization:"Bearer "+(yield Sn())}});if(l.status!==200){fr("Could not list Google Events");continue}n=yield l.json;let c=n.items.filter(f=>(f.parent=e,f.status!="cancelled"));a=[...a,...c]}while(n.items.length==i);return a})}function HM(e,t,r){let n=[];return e.forEach(i=>{if(!i.start.dateTime||!i.end.dateTime)return;let a=window.moment(i.end.dateTime),s=window.moment(i.start.dateTime);if(s.isSame(a,"day"))return;let l=[],c=a.endOf("day").diff(s.startOf("day"),"days")+1,f=i.summary,d=1;do i.summary=`${f} (Day ${d}/${c})`,i.eventType="multiDay",l=[...l,structuredClone(i)],d++,s=s.add(1,"days"),i.start.dateTime=s.format("YYYY-MM-DD HH:mm");while(!s.isAfter(a,"day"));l=l.filter(h=>{let g=window.moment(h.start.dateTime);return!(t&&g.isBefore(t,"day")||r&&g.isSameOrAfter(r,"day"))}),i.eventType="delete",n=[...n,...l]}),e=[...e,...n],e}function WM(e,t,r,n){return M(this,null,function*(){let i=r.toISOString(),a=n.toISOString(),s=JSON.stringify({start:i,end:a,calendar:t.id});if(Gd.has(s)){let{events:c,updated:f}=Gd.get(s);if(f.clone().add(e.settings.refreshInterval,"second").isAfter(window.moment()))return c}let l=yield jM(t,i,a);return l=HM(l,r,n),l=l.filter(c=>c.eventType!=="delete"),Gd.set(s,{events:l,updated:window.moment()}),l})}var PT=mt(require("obsidian"));var LT=mt(require("obsidian"));function bt(){}function gm(e){return e()}function Hx(){return Object.create(null)}function Yr(e){e.forEach(gm)}function Wx(e){return typeof e=="function"}function Tn(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}var Vd;function Gu(e,t){return Vd||(Vd=document.createElement("a")),Vd.href=t,e===Vd.href}function Yx(e){return Object.keys(e).length===0}function El(e){return e==null?"":e}var cW=typeof window!="undefined";var fW=new Set;var zx=!1;function YM(){zx=!0}function zM(){zx=!1}function re(e,t){e.appendChild(t)}function ai(e,t,r){let n=QM(e);if(!n.getElementById(t)){let i=ae("style");i.id=t,i.textContent=r,XM(n,i)}}function QM(e){if(!e)return document;let t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function XM(e,t){re(e.head||e,t)}function be(e,t,r){e.insertBefore(t,r||null)}function Ce(e){e.parentNode.removeChild(e)}function $r(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function ae(e){return document.createElement(e)}function $t(e){return document.createTextNode(e)}function Oe(){return $t(" ")}function si(){return $t("")}function Qe(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function te(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function Vu(e){return e===""?null:+e}function JM(e){return Array.from(e.childNodes)}function oi(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function pn(e,t){e.value=t==null?"":t}function et(e,t,r,n){r===null?e.style.removeProperty(t):e.style.setProperty(t,r,n?"important":"")}function Qi(e,t){for(let r=0;r<e.options.length;r+=1){let n=e.options[r];if(n.__value===t){n.selected=!0;return}}e.selectedIndex=-1}function wl(e){let t=e.querySelector(":checked")||e.options[0];return t&&t.__value}var dW=new Map;var Ku;function ju(e){Ku=e}function Qx(){if(!Ku)throw new Error("Function called outside component initialization");return Ku}function Zs(e){Qx().$$.on_mount.push(e)}function $s(e){Qx().$$.on_destroy.push(e)}var Hu=[];var An=[],Kd=[],mm=[],ZM=Promise.resolve(),ym=!1;function $M(){ym||(ym=!0,ZM.then(Xx))}function Ca(e){Kd.push(e)}function ba(e){mm.push(e)}var vm=new Set,jd=0;function Xx(){let e=Ku;do{for(;jd<Hu.length;){let t=Hu[jd];jd++,ju(t),eF(t.$$)}for(ju(null),Hu.length=0,jd=0;An.length;)An.pop()();for(let t=0;t<Kd.length;t+=1){let r=Kd[t];vm.has(r)||(vm.add(r),r())}Kd.length=0}while(Hu.length);for(;mm.length;)mm.pop()();ym=!1,vm.clear(),ju(e)}function eF(e){if(e.fragment!==null){e.update(),Yr(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ca)}}var Hd=new Set,eo;function Wd(){eo={r:0,c:[],p:eo}}function Yd(){eo.r||Yr(eo.c),eo=eo.p}function li(e,t){e&&e.i&&(Hd.delete(e),e.i(t))}function Ii(e,t,r,n){if(e&&e.o){if(Hd.has(e))return;Hd.add(e),eo.c.push(()=>{Hd.delete(e),n&&(r&&e.d(1),n())}),e.o(t)}else n&&n()}var hW=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;var pW=new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);function xa(e,t,r){let n=e.$$.props[t];n!==void 0&&(e.$$.bound[n]=r,r(e.$$.ctx[n]))}function Wu(e){e&&e.c()}function Cl(e,t,r,n){let{fragment:i,on_mount:a,on_destroy:s,after_update:l}=e.$$;i&&i.m(t,r),n||Ca(()=>{let c=a.map(gm).filter(Wx);s?s.push(...c):Yr(c),e.$$.on_mount=[]}),l.forEach(Ca)}function to(e,t){let r=e.$$;r.fragment!==null&&(Yr(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function tF(e,t){e.$$.dirty[0]===-1&&(Hu.push(e),$M(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function In(e,t,r,n,i,a,s,l=[-1]){let c=Ku;ju(e);let f=e.$$={fragment:null,ctx:null,props:a,update:bt,not_equal:i,bound:Hx(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:Hx(),dirty:l,skip_bound:!1,root:t.target||c.$$.root};s&&s(f.root);let d=!1;if(f.ctx=r?r(e,t.props||{},(h,g,...y)=>{let m=y.length?y[0]:g;return f.ctx&&i(f.ctx[h],f.ctx[h]=m)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](m),d&&tF(e,h)),g}):[],f.update(),d=!0,Yr(f.before_update),f.fragment=n?n(f.ctx):!1,t.target){if(t.hydrate){YM();let h=JM(t.target);f.fragment&&f.fragment.l(h),h.forEach(Ce)}else f.fragment&&f.fragment.c();t.intro&&li(e.$$.fragment),Cl(e,t.target,t.anchor,t.customElement),zM(),Xx()}ju(c)}var rF;typeof HTMLElement=="function"&&(rF=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(gm).filter(Wx);for(let t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(e,t,r){this[e]=r}disconnectedCallback(){Yr(this.$$.on_disconnect)}$destroy(){to(this,1),this.$destroy=bt}$on(e,t){let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{let n=r.indexOf(t);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!Yx(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});var gn=class{$destroy(){to(this,1),this.$destroy=bt}$on(t,r){let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!Yx(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}};var yS=mt(Em()),{__extends:yW,__assign:vW,__rest:_W,__decorate:EW,__param:wW,__metadata:CW,__awaiter:_r,__generator:bW,__exportStar:xW,__createBinding:SW,__values:TW,__read:AW,__spread:IW,__spreadArrays:kW,__spreadArray:RW,__await:BW,__asyncGenerator:NW,__asyncDelegator:DW,__asyncValues:OW,__makeTemplateObject:LW,__importStar:PW,__importDefault:UW,__classPrivateFieldGet:MW,__classPrivateFieldSet:FW}=yS.default;var vS=mt(require("obsidian"));function Jd(e,t=!1){return M(this,null,function*(){var i;if(!jt())return!1;let r=(i=e.recurringEventId)!=null?i:e.id;return t&&e.recurringEventId&&(r=e.id),(yield(0,vS.requestUrl)({url:`https://www.googleapis.com/calendar/v3/calendars/${e.parent.id}/events/${r}`,method:"DELETE",contentType:"application/json",headers:{Authorization:"Bearer "+(yield Sn())}})).status==204})}var _S=mt(require("obsidian"));function Zd(e,t=!1){return M(this,null,function*(){var s;if(!jt())return null;let r=(s=e.recurringEventId)!=null?s:e.id;t&&e.recurringEventId&&(r=e.id);let n=e.parent.id;delete e.parent;let i=yield(0,_S.requestUrl)({url:`https://www.googleapis.com/calendar/v3/calendars/${n}/events/${r}`,method:"PUT",contentType:"application/json",headers:{Authorization:"Bearer "+(yield Sn())},body:JSON.stringify(e)});return i.status!==200?(fr("Could not create Google Event"),null):yield i.json})}var ES=mt(require("obsidian"));function wS(e){return M(this,null,function*(){if(!jt())return null;let t=e.parent.id;e.start.timeZone=e.parent.timeZone,e.end.timeZone=e.parent.timeZone,delete e.parent;let r=yield(0,ES.requestUrl)({url:`https://www.googleapis.com/calendar/v3/calendars/${t}/events`,method:"POST",headers:{Authorization:"Bearer "+(yield Sn())},body:JSON.stringify(e)});return r.status!==200?(fr("Could not create Google Event"),null):yield r.json})}var ro=mt(require("obsidian"));var $d=mt(_l()),wm=e=>M(void 0,null,function*(){var s,l;if(!e.settings.autoCreateEventNotes||!jt())return;let t=Math.abs(e.settings.importStartOffset),r=Math.abs(e.settings.importEndOffset),n=window.moment().local().subtract(t,"day"),i=window.moment().local().add(r,"day"),a=yield or({startDate:n,endDate:i});for(let c=0;c<a.length;c++){let f=(l=(s=a[c].description)==null?void 0:s.match(/:(.*-)?obsidian-?(.*)?:/))!=null?l:[];f.length==3&&(yield no(a[c],f[1],f[2]))}}),nF=(e,t)=>{let r=/{{gEvent\.([^}>]*)}}/gm,n,i=[];do n=r.exec(t),i.push(n);while(n);return i.forEach(a=>{if(a){let s="";if(a[1]=="attendees"){let l=$d.default.get(e,a[1],"");for(let c=0;c<l.length;c++)l[c].displayName?s+=`- [[@${l[c].displayName}]]
`:s+=`- [[@${l[c].email}]]
`}else if(a[1]=="attachments"){let l=$d.default.get(e,a[1],"");for(let c=0;c<l.length;c++)l[c].title?s+=`- [${l[c].title}](${l[c].fileUrl})
`:s+=`- [${l[c].fileUrl}](${l[c].fileUrl})
`}else s=$d.default.get(e,a[1],"");s===Object(s)&&(s=JSON.stringify(s)),t=t.replace(a[0],s!=null?s:"")}}),t},no=(e,t,r)=>M(void 0,null,function*(){let n=kt.getInstance(),{vault:i}=app,{adapter:a}=i,s=app.fileManager.getNewFileParent("").path;t&&(t.endsWith("-")&&(t=t.slice(0,-1)),t="/"+t.split(/[/\\]/).join("/"),(yield a.exists(t))&&(s=t));let l=(0,ro.normalizePath)(`${s}/${e.summary}.md`);if(yield a.exists(l))return i.getAbstractFileByPath(l);let c=yield i.create(l,"");if(fr(`EventNote ${e.summary} created.`),!n.coreTemplatePlugin&&!n.templaterPlugin||!r)return i.getAbstractFileByPath(l);r.match(/.*\.md/)||(r=r+".md");let f={state:{mode:"source"},active:!0},d=yield app.workspace.getLeaf(!0);return yield d.setViewState({type:"MarkdownView"}),yield app.workspace.setActiveLeaf(d,!1,!0),yield d.openFile(c,f),n.templaterPlugin&&n.coreTemplatePlugin?(yield h(!0))||(yield h(!1))||fr("Template not compatable"):n.templaterPlugin?(yield h(!0))||fr("Template not compatable"):n.coreTemplatePlugin&&((yield h(!1))||fr("Template not compatable")),n.settings.autoCreateEventKeepOpen||d.detach(),i.getAbstractFileByPath(l);function h(g){return M(this,null,function*(){var B,O,N,ee,q;let y;g?y=(0,ro.normalizePath)((O=(B=n==null?void 0:n.templaterPlugin)==null?void 0:B.settings)==null?void 0:O.templates_folder):y=(0,ro.normalizePath)((q=(ee=(N=n==null?void 0:n.coreTemplatePlugin)==null?void 0:N.instance)==null?void 0:ee.options)==null?void 0:q.folder);let m;if((yield a.exists(r))?m=r:(m=`${y}/${r}`,y==="/"&&(m=r)),!(yield a.exists(m)))return fr(`Template: ${r} doesn't exit.`),!1;let _=i.getAbstractFileByPath(m);if(!(_ instanceof ro.TFile))return!1;let E=yield i.cachedRead(_),w=nF(e,E);if(g&&w.contains("{{")&&w.contains("}}"))return!1;if(!g&&w.contains("<%")&&w.contains("%>"))return!1;let S=_.path+".tmp";yield a.write(S,w);let R=app.vault.getAbstractFileByPath(S);if(!(R instanceof ro.TFile))return!1;try{return g?yield n.templaterPlugin.templater.append_template_to_active_file(R):yield n.coreTemplatePlugin.instance.insertTemplate(R),a.remove(S),!0}catch(F){return a.remove(S),!1}})}});var eh=["MO","TU","WE","TH","FR","SA","SU"],xr=function(){function e(t,r){if(r===0)throw new Error("Can't create weekday with n == 0");this.weekday=t,this.n=r}return e.fromStr=function(t){return new e(eh.indexOf(t))},e.prototype.nth=function(t){return this.n===t?this:new e(this.weekday,t)},e.prototype.equals=function(t){return this.weekday===t.weekday&&this.n===t.n},e.prototype.toString=function(){var t=eh[this.weekday];return this.n&&(t=(this.n>0?"+":"")+String(this.n)+t),t},e.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},e}();var er=function(e){return e!=null},Mn=function(e){return typeof e=="number"},Cm=function(e){return eh.indexOf(e)>=0},zr=Array.isArray,ui=function(e,t){t===void 0&&(t=e),arguments.length===1&&(t=e,e=0);for(var r=[],n=e;n<t;n++)r.push(n);return r};var Tt=function(e,t){var r=0,n=[];if(zr(e))for(;r<t;r++)n[r]=[].concat(e);else for(;r<t;r++)n[r]=e;return n},CS=function(e){return zr(e)?e:[e]};function io(e,t,r){r===void 0&&(r=" ");var n=String(e);return t=t>>0,n.length>t?String(n):(t=t-n.length,t>r.length&&(r+=Tt(r,t/r.length)),r.slice(0,t)+String(n))}var bS=function(e,t,r){var n=e.split(t);return r?n.slice(0,r).concat([n.slice(r).join(t)]):n},en=function(e,t){var r=e%t;return r*t<0?r+t:r},th=function(e,t){return{div:Math.floor(e/t),mod:en(e,t)}},Fn=function(e){return!er(e)||e.length===0},Er=function(e){return!Fn(e)},Rt=function(e,t){return Er(e)&&e.indexOf(t)!==-1};var as;(function(e){e.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],e.ONE_DAY=1e3*60*60*24,e.MAXYEAR=9999,e.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),e.PY_WEEKDAYS=[6,0,1,2,3,4,5],e.getYearDay=function(t){var r=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return Math.ceil((r.valueOf()-new Date(t.getUTCFullYear(),0,1).valueOf())/e.ONE_DAY)+1},e.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},e.isDate=function(t){return t instanceof Date},e.isValidDate=function(t){return e.isDate(t)&&!isNaN(t.getTime())},e.tzOffset=function(t){return t.getTimezoneOffset()*60*1e3},e.daysBetween=function(t,r){var n=t.getTime()-e.tzOffset(t),i=r.getTime()-e.tzOffset(r),a=n-i;return Math.round(a/e.ONE_DAY)},e.toOrdinal=function(t){return e.daysBetween(t,e.ORDINAL_BASE)},e.fromOrdinal=function(t){return new Date(e.ORDINAL_BASE.getTime()+t*e.ONE_DAY)},e.getMonthDays=function(t){var r=t.getUTCMonth();return r===1&&e.isLeapYear(t.getUTCFullYear())?29:e.MONTH_DAYS[r]},e.getWeekday=function(t){return e.PY_WEEKDAYS[t.getUTCDay()]},e.monthRange=function(t,r){var n=new Date(Date.UTC(t,r,1));return[e.getWeekday(n),e.getMonthDays(n)]},e.combine=function(t,r){return r=r||t,new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()))},e.clone=function(t){var r=new Date(t.getTime());return r},e.cloneDates=function(t){for(var r=[],n=0;n<t.length;n++)r.push(e.clone(t[n]));return r},e.sort=function(t){t.sort(function(r,n){return r.getTime()-n.getTime()})},e.timeToUntilString=function(t,r){r===void 0&&(r=!0);var n=new Date(t);return[io(n.getUTCFullYear().toString(),4,"0"),io(n.getUTCMonth()+1,2,"0"),io(n.getUTCDate(),2,"0"),"T",io(n.getUTCHours(),2,"0"),io(n.getUTCMinutes(),2,"0"),io(n.getUTCSeconds(),2,"0"),r?"Z":""].join("")},e.untilStringToDate=function(t){var r=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=r.exec(t);if(!n)throw new Error("Invalid UNTIL value: "+t);return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(as||(as={}));var Ye=as;var iF=function(){function e(t,r){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=t,this.args=r,t==="between"?(this.maxDate=r.inc?r.before:new Date(r.before.getTime()-1),this.minDate=r.inc?r.after:new Date(r.after.getTime()+1)):t==="before"?this.maxDate=r.inc?r.dt:new Date(r.dt.getTime()-1):t==="after"&&(this.minDate=r.inc?r.dt:new Date(r.dt.getTime()+1))}return e.prototype.accept=function(t){++this.total;var r=this.minDate&&t<this.minDate,n=this.maxDate&&t>this.maxDate;if(this.method==="between"){if(r)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return r?!0:(this.add(t),!1);return this.add(t)},e.prototype.add=function(t){return this._result.push(t),!0},e.prototype.getValue=function(){var t=this._result;switch(this.method){case"all":case"between":return t;case"before":case"after":default:return t.length?t[t.length-1]:null}},e.prototype.clone=function(){return new e(this.method,this.args)},e}(),Sa=iF;var HS=mt(jS()),{__extends:Sl,__assign:mn,__rest:bY,__decorate:xY,__param:SY,__metadata:TY,__awaiter:AY,__generator:IY,__exportStar:kY,__createBinding:RY,__values:BY,__read:NY,__spread:DY,__spreadArrays:ao,__await:OY,__asyncGenerator:LY,__asyncDelegator:PY,__asyncValues:UY,__makeTemplateObject:MY,__importStar:FY,__importDefault:qY,__classPrivateFieldGet:GY,__classPrivateFieldSet:VY}=HS.default;var aF=function(e){Sl(t,e);function t(r,n,i){var a=e.call(this,r,n)||this;return a.iterator=i,a}return t.prototype.add=function(r){return this.iterator(r,this._result.length)?(this._result.push(r),!0):!1},t}(Sa),xm=aF;var sF={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},so=sF;var WS=function(e,t){return e.indexOf(t)!==-1},oF=function(e){return e.toString()},lF=function(e,t,r){return t+" "+r+", "+e},uF=function(){function e(t,r,n,i){if(r===void 0&&(r=oF),n===void 0&&(n=so),i===void 0&&(i=lF),this.text=[],this.language=n||so,this.gettext=r,this.dateFormatter=i,this.rrule=t,this.options=t.options,this.origOptions=t.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),s=[].concat(this.options.bynmonthday);a.sort(function(d,h){return d-h}),s.sort(function(d,h){return h-d}),this.bymonthday=a.concat(s),this.bymonthday.length||(this.bymonthday=null)}if(er(this.origOptions.byweekday)){var l=zr(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],c=String(l);this.byweekday={allWeeks:l.filter(function(d){return!d.n}),someWeeks:l.filter(function(d){return Boolean(d.n)}),isWeekdays:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")===-1&&c.indexOf("SU")===-1,isEveryDay:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")!==-1&&c.indexOf("SU")!==-1};var f=function(d,h){return d.weekday-h.weekday};this.byweekday.allWeeks.sort(f),this.byweekday.someWeeks.sort(f),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return e.isFullyConvertible=function(t){var r=!0;if(!(t.options.freq in e.IMPLEMENTED)||t.origOptions.until&&t.origOptions.count)return!1;for(var n in t.origOptions){if(WS(["dtstart","wkst","freq"],n))return!0;if(!WS(e.IMPLEMENTED[t.options.freq],n))return!1}return r},e.prototype.isFullyConvertible=function(){return e.isFullyConvertible(this.rrule)},e.prototype.toString=function(){var t=this.gettext;if(!(this.options.freq in e.IMPLEMENTED))return t("RRule error: Unable to fully convert this rrule to text");if(this.text=[t("every")],this[Pe.FREQUENCIES[this.options.freq]](),this.options.until){this.add(t("until"));var r=this.options.until;this.add(this.dateFormatter(r.getUTCFullYear(),this.language.monthNames[r.getUTCMonth()],r.getUTCDate()))}else this.options.count&&this.add(t("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?t("times"):t("time"));return this.isFullyConvertible()||this.add(t("(~ approximate)")),this.text.join("")},e.prototype.HOURLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("hours"):t("hour"))},e.prototype.MINUTELY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("minutes"):t("minute"))},e.prototype.DAILY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(this.plural(this.options.interval)?t("days"):t("day")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},e.prototype.WEEKLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?t("weeks"):t("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(t("on")).add(t("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?t("days"):t("day")):(this.options.interval===1&&this.add(t("week")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},e.prototype.MONTHLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(t("months")),this.plural(this.options.interval)&&this.add(t("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("months"):t("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(t("on")).add(t("weekdays")):this.byweekday&&this._byweekday()},e.prototype.YEARLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(t("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("years"):t("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(t("on the")).add(this.list(this.options.byyearday,this.nth,t("and"))).add(t("day")),this.options.byweekno&&this.add(t("in")).add(this.plural(this.options.byweekno.length)?t("weeks"):t("week")).add(this.list(this.options.byweekno,void 0,t("and")))},e.prototype._bymonthday=function(){var t=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,t("or"))).add(t("the")).add(this.list(this.bymonthday,this.nth,t("or"))):this.add(t("on the")).add(this.list(this.bymonthday,this.nth,t("and")))},e.prototype._byweekday=function(){var t=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(t("and")),this.add(t("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,t("and"))))},e.prototype._byhour=function(){var t=this.gettext;this.add(t("at")).add(this.list(this.origOptions.byhour,void 0,t("and")))},e.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},e.prototype.nth=function(t){t=parseInt(t.toString(),10);var r,n,i=this.gettext;if(t===-1)return i("last");switch(n=Math.abs(t),n){case 1:case 21:case 31:r=n+i("st");break;case 2:case 22:r=n+i("nd");break;case 3:case 23:r=n+i("rd");break;default:r=n+i("th")}return t<0?r+" "+i("last"):r},e.prototype.monthtext=function(t){return this.language.monthNames[t-1]},e.prototype.weekdaytext=function(t){var r=Mn(t)?(t+1)%7:t.getJsWeekday();return(t.n?this.nth(t.n)+" ":"")+this.language.dayNames[r]},e.prototype.plural=function(t){return t%100!=1},e.prototype.add=function(t){return this.text.push(" "),this.text.push(t),this},e.prototype.list=function(t,r,n,i){i===void 0&&(i=","),zr(t)||(t=[t]);var a=function(c,f,d){for(var h="",g=0;g<c.length;g++)g!==0&&(g===c.length-1?h+=" "+d+" ":h+=f+" "),h+=c[g];return h};r=r||function(c){return c.toString()};var s=this,l=function(c){return r&&r.call(s,c)};return n?a(t.map(l),i,n):t.map(l).join(i+" ")},e}(),Xi=uF;var cF=function(){function e(t){this.done=!0,this.rules=t}return e.prototype.start=function(t){return this.text=t,this.done=!1,this.nextSymbol()},e.prototype.isDone=function(){return this.done&&this.symbol===null},e.prototype.nextSymbol=function(){var t,r,n=this;this.symbol=null,this.value=null;do{if(this.done)return!1;var i=void 0;t=null;for(var a in this.rules){i=this.rules[a];var s=i.exec(n.text);s&&(t===null||s[0].length>t[0].length)&&(t=s,r=a)}if(t!=null&&(this.text=this.text.substr(t[0].length),this.text===""&&(this.done=!0)),t==null){this.done=!0,this.symbol=null,this.value=null;return}}while(r==="SKIP");return this.symbol=r,this.value=t,!0},e.prototype.accept=function(t){if(this.symbol===t){if(this.value){var r=this.value;return this.nextSymbol(),r}return this.nextSymbol(),!0}return!1},e.prototype.acceptNumber=function(){return this.accept("number")},e.prototype.expect=function(t){if(this.accept(t))return!0;throw new Error("expected "+t+" but found "+this.symbol)},e}();function Yu(e,t){t===void 0&&(t=so);var r={},n=new cF(t.tokens);if(!n.start(e))return null;return i(),r;function i(){n.expect("every");var g=n.acceptNumber();if(g&&(r.interval=parseInt(g[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":r.freq=Pe.DAILY,n.nextSymbol()&&(s(),h());break;case"weekday(s)":r.freq=Pe.WEEKLY,r.byweekday=[Pe.MO,Pe.TU,Pe.WE,Pe.TH,Pe.FR],n.nextSymbol(),h();break;case"week(s)":r.freq=Pe.WEEKLY,n.nextSymbol()&&(a(),h());break;case"hour(s)":r.freq=Pe.HOURLY,n.nextSymbol()&&(a(),h());break;case"minute(s)":r.freq=Pe.MINUTELY,n.nextSymbol()&&(a(),h());break;case"month(s)":r.freq=Pe.MONTHLY,n.nextSymbol()&&(a(),h());break;case"year(s)":r.freq=Pe.YEARLY,n.nextSymbol()&&(a(),h());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":r.freq=Pe.WEEKLY;var y=n.symbol.substr(0,2).toUpperCase();if(r.byweekday=[Pe[y]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=c();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");r.byweekday.push(Pe[m]),n.nextSymbol()}d(),h();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(r.freq=Pe.YEARLY,r.bymonth=[l()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var _=l();if(!_)throw new Error("Unexpected symbol "+n.symbol+", expected month");r.bymonth.push(_),n.nextSymbol()}a(),h();break;default:throw new Error("Unknown symbol")}}function a(){var g=n.accept("on"),y=n.accept("the");if(!!(g||y))do{var m=f(),_=c(),E=l();if(m)_?(n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(Pe[_].nth(m))):(r.bymonthday||(r.bymonthday=[]),r.bymonthday.push(m),n.accept("day(s)"));else if(_)n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(Pe[_]);else if(n.symbol==="weekday(s)")n.nextSymbol(),r.byweekday||(r.byweekday=[Pe.MO,Pe.TU,Pe.WE,Pe.TH,Pe.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var w=n.acceptNumber();if(!w)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(r.byweekno=[parseInt(w[0],10)];n.accept("comma");){if(w=n.acceptNumber(),!w)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.byweekno.push(parseInt(w[0],10))}}else if(E)n.nextSymbol(),r.bymonth||(r.bymonth=[]),r.bymonth.push(E);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function s(){var g=n.accept("at");if(!!g)do{var y=n.acceptNumber();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(r.byhour=[parseInt(y[0],10)];n.accept("comma");){if(y=n.acceptNumber(),!y)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");r.byhour.push(parseInt(y[0],10))}}while(n.accept("comma")||n.accept("at"))}function l(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function c(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function f(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var g=parseInt(n.value[1],10);if(g<-366||g>366)throw new Error("Nth out of range: "+g);return n.nextSymbol(),n.accept("last")?-g:g;default:return!1}}function d(){n.accept("on"),n.accept("the");var g=f();if(!!g)for(r.bymonthday=[g],n.nextSymbol();n.accept("comma");){if(g=f(),!g)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.bymonthday.push(g),n.nextSymbol()}}function h(){if(n.symbol==="until"){var g=Date.parse(n.text);if(!g)throw new Error("Cannot parse until date:"+n.text);r.until=new Date(g)}else n.accept("for")&&(r.count=parseInt(n.value[0],10),n.expect("number"))}}var Ze;(function(e){e[e.YEARLY=0]="YEARLY",e[e.MONTHLY=1]="MONTHLY",e[e.WEEKLY=2]="WEEKLY",e[e.DAILY=3]="DAILY",e[e.HOURLY=4]="HOURLY",e[e.MINUTELY=5]="MINUTELY",e[e.SECONDLY=6]="SECONDLY"})(Ze||(Ze={}));function zu(e){return e<Ze.HOURLY}var YS=function(e,t){return t===void 0&&(t=so),new Pe(Yu(e,t)||void 0)},Tl=["count","until","interval","byweekday","bymonthday","bymonth"];Xi.IMPLEMENTED=[];Xi.IMPLEMENTED[Ze.HOURLY]=Tl;Xi.IMPLEMENTED[Ze.MINUTELY]=Tl;Xi.IMPLEMENTED[Ze.DAILY]=["byhour"].concat(Tl);Xi.IMPLEMENTED[Ze.WEEKLY]=Tl;Xi.IMPLEMENTED[Ze.MONTHLY]=Tl;Xi.IMPLEMENTED[Ze.YEARLY]=["byweekno","byyearday"].concat(Tl);var zS=function(e,t,r,n){return new Xi(e,t,r,n).toString()},QS=Xi.isFullyConvertible;var Al=function(){function e(t,r,n,i){this.hour=t,this.minute=r,this.second=n,this.millisecond=i||0}return e.prototype.getHours=function(){return this.hour},e.prototype.getMinutes=function(){return this.minute},e.prototype.getSeconds=function(){return this.second},e.prototype.getMilliseconds=function(){return this.millisecond},e.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},e}();var XS=function(e){Sl(t,e);function t(r,n,i,a,s,l,c){var f=e.call(this,a,s,l,c)||this;return f.year=r,f.month=n,f.day=i,f}return t.fromDate=function(r){return new this(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.valueOf()%1e3)},t.prototype.getWeekday=function(){return as.getWeekday(new Date(this.getTime()))},t.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},t.prototype.getDay=function(){return this.day},t.prototype.getMonth=function(){return this.month},t.prototype.getYear=function(){return this.year},t.prototype.addYears=function(r){this.year+=r},t.prototype.addMonths=function(r){if(this.month+=r,this.month>12){var n=Math.floor(this.month/12),i=en(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},t.prototype.addWeekly=function(r,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+r*7:this.day+=-(this.getWeekday()-n)+r*7,this.fixDay()},t.prototype.addDaily=function(r){this.day+=r,this.fixDay()},t.prototype.addHours=function(r,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/r)*r);;){this.hour+=r;var a=th(this.hour,24),s=a.div,l=a.mod;if(s&&(this.hour=l,this.addDaily(s)),Fn(i)||Rt(i,this.hour))break}},t.prototype.addMinutes=function(r,n,i,a){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/r)*r);;){this.minute+=r;var s=th(this.minute,60),l=s.div,c=s.mod;if(l&&(this.minute=c,this.addHours(l,!1,i)),(Fn(i)||Rt(i,this.hour))&&(Fn(a)||Rt(a,this.minute)))break}},t.prototype.addSeconds=function(r,n,i,a,s){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/r)*r);;){this.second+=r;var l=th(this.second,60),c=l.div,f=l.mod;if(c&&(this.second=f,this.addMinutes(c,!1,i,a)),(Fn(i)||Rt(i,this.hour))&&(Fn(a)||Rt(a,this.minute))&&(Fn(s)||Rt(s,this.second)))break}},t.prototype.fixDay=function(){if(!(this.day<=28)){var r=as.monthRange(this.year,this.month-1)[1];if(!(this.day<=r))for(;this.day>r;){if(this.day-=r,++this.month,this.month===13&&(this.month=1,++this.year,this.year>as.MAXYEAR))return;r=as.monthRange(this.year,this.month-1)[1]}}},t.prototype.add=function(r,n){var i=r.freq,a=r.interval,s=r.wkst,l=r.byhour,c=r.byminute,f=r.bysecond;switch(i){case Ze.YEARLY:return this.addYears(a);case Ze.MONTHLY:return this.addMonths(a);case Ze.WEEKLY:return this.addWeekly(a,s);case Ze.DAILY:return this.addDaily(a);case Ze.HOURLY:return this.addHours(a,n,l);case Ze.MINUTELY:return this.addMinutes(a,n,l,c);case Ze.SECONDLY:return this.addSeconds(a,n,l,c,f)}},t}(Al);function Sm(e){for(var t=[],r=Object.keys(e),n=0,i=r;n<i.length;n++){var a=i[n];Rt($S,a)||t.push(a),Ye.isDate(e[a])&&!Ye.isValidDate(e[a])&&t.push(a)}if(t.length)throw new Error("Invalid options: "+t.join(", "));return mn({},e)}function JS(e){var t=mn(mn({},Qu),Sm(e));if(er(t.byeaster)&&(t.freq=Pe.YEARLY),!(er(t.freq)&&Pe.FREQUENCIES[t.freq]))throw new Error("Invalid frequency: "+t.freq+" "+e.freq);if(t.dtstart||(t.dtstart=new Date(new Date().setMilliseconds(0))),er(t.wkst)?Mn(t.wkst)||(t.wkst=t.wkst.weekday):t.wkst=Pe.MO.weekday,er(t.bysetpos)){Mn(t.bysetpos)&&(t.bysetpos=[t.bysetpos]);for(var r=0;r<t.bysetpos.length;r++){var n=t.bysetpos[r];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(t.byweekno)||Er(t.byweekno)||Er(t.byyearday)||Boolean(t.bymonthday)||Er(t.bymonthday)||er(t.byweekday)||er(t.byeaster)))switch(t.freq){case Pe.YEARLY:t.bymonth||(t.bymonth=t.dtstart.getUTCMonth()+1),t.bymonthday=t.dtstart.getUTCDate();break;case Pe.MONTHLY:t.bymonthday=t.dtstart.getUTCDate();break;case Pe.WEEKLY:t.byweekday=[Ye.getWeekday(t.dtstart)];break}if(er(t.bymonth)&&!zr(t.bymonth)&&(t.bymonth=[t.bymonth]),er(t.byyearday)&&!zr(t.byyearday)&&Mn(t.byyearday)&&(t.byyearday=[t.byyearday]),!er(t.bymonthday))t.bymonthday=[],t.bynmonthday=[];else if(zr(t.bymonthday)){for(var i=[],a=[],r=0;r<t.bymonthday.length;r++){var n=t.bymonthday[r];n>0?i.push(n):n<0&&a.push(n)}t.bymonthday=i,t.bynmonthday=a}else t.bymonthday<0?(t.bynmonthday=[t.bymonthday],t.bymonthday=[]):(t.bynmonthday=[],t.bymonthday=[t.bymonthday]);if(er(t.byweekno)&&!zr(t.byweekno)&&(t.byweekno=[t.byweekno]),!er(t.byweekday))t.bynweekday=null;else if(Mn(t.byweekday))t.byweekday=[t.byweekday],t.bynweekday=null;else if(Cm(t.byweekday))t.byweekday=[xr.fromStr(t.byweekday).weekday],t.bynweekday=null;else if(t.byweekday instanceof xr)!t.byweekday.n||t.freq>Pe.MONTHLY?(t.byweekday=[t.byweekday.weekday],t.bynweekday=null):(t.bynweekday=[[t.byweekday.weekday,t.byweekday.n]],t.byweekday=null);else{for(var s=[],l=[],r=0;r<t.byweekday.length;r++){var c=t.byweekday[r];if(Mn(c)){s.push(c);continue}else if(Cm(c)){s.push(xr.fromStr(c).weekday);continue}!c.n||t.freq>Pe.MONTHLY?s.push(c.weekday):l.push([c.weekday,c.n])}t.byweekday=Er(s)?s:null,t.bynweekday=Er(l)?l:null}return er(t.byhour)?Mn(t.byhour)&&(t.byhour=[t.byhour]):t.byhour=t.freq<Pe.HOURLY?[t.dtstart.getUTCHours()]:null,er(t.byminute)?Mn(t.byminute)&&(t.byminute=[t.byminute]):t.byminute=t.freq<Pe.MINUTELY?[t.dtstart.getUTCMinutes()]:null,er(t.bysecond)?Mn(t.bysecond)&&(t.bysecond=[t.bysecond]):t.bysecond=t.freq<Pe.SECONDLY?[t.dtstart.getUTCSeconds()]:null,{parsedOptions:t}}function ZS(e){var t=e.dtstart.getTime()%1e3;if(!zu(e.freq))return[];var r=[];return e.byhour.forEach(function(n){e.byminute.forEach(function(i){e.bysecond.forEach(function(a){r.push(new Al(n,i,a,t))})})}),r}function Xu(e){var t=e.split(`
`).map(fF).filter(function(r){return r!==null});return mn(mn({},t[0]),t[1])}function Ju(e){var t={},r=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(e);if(!r)return t;var n=r[0],i=r[1],a=r[2];return i&&(t.tzid=i),t.dtstart=Ye.untilStringToDate(a),t}function fF(e){if(e=e.replace(/^\s+|\s+$/,""),!e.length)return null;var t=/^([A-Z]+?)[:;]/.exec(e.toUpperCase());if(!t)return eT(e);var r=t[0],n=t[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return eT(e);case"DTSTART":return Ju(e);default:throw new Error("Unsupported RFC prop "+n+" in "+e)}}function eT(e){var t=e.replace(/^RRULE:/i,""),r=Ju(t),n=e.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var a=i.split("="),s=a[0],l=a[1];switch(s.toUpperCase()){case"FREQ":r.freq=Ze[l.toUpperCase()];break;case"WKST":r.wkst=ci[l.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var c=dF(l),f=s.toLowerCase();r[f]=c;break;case"BYWEEKDAY":case"BYDAY":r.byweekday=hF(l);break;case"DTSTART":case"TZID":var d=Ju(e);r.tzid=d.tzid,r.dtstart=d.dtstart;break;case"UNTIL":r.until=Ye.untilStringToDate(l);break;case"BYEASTER":r.byeaster=Number(l);break;default:throw new Error("Unknown RRULE property '"+s+"'")}}),r}function dF(e){if(e.indexOf(",")!==-1){var t=e.split(",");return t.map(tT)}return tT(e)}function tT(e){return/^[+-]?\d+$/.test(e)?Number(e):e}function hF(e){var t=e.split(",");return t.map(function(r){if(r.length===2)return ci[r];var n=r.match(/^([+-]?\d{1,2})([A-Z]{2})$/),i=Number(n[1]),a=n[2],s=ci[a].weekday;return new xr(s,i)})}var oo=function(){function e(t,r){this.date=t,this.tzid=r}return Object.defineProperty(e.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!0,configurable:!0}),e.prototype.toString=function(){var t=Ye.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":"+t:";TZID="+this.tzid+":"+t},e.prototype.getTime=function(){return this.date.getTime()},e.prototype.rezonedDate=function(){var t;if(this.isUTC)return this.date;var r=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:r})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(t=this.tzid,t!=null?t:"UTC")})),a=i.getTime()-n.getTime();return new Date(this.date.getTime()-a)},e}();function Zu(e){for(var t=[],r="",n=Object.keys(e),i=Object.keys(Qu),a=0;a<n.length;a++)if(n[a]!=="tzid"&&!!Rt(i,n[a])){var s=n[a].toUpperCase(),l=e[n[a]],c="";if(!(!er(l)||zr(l)&&!l.length)){switch(s){case"FREQ":c=Pe.FREQUENCIES[e.freq];break;case"WKST":Mn(l)?c=new xr(l).toString():c=l.toString();break;case"BYWEEKDAY":s="BYDAY",c=CS(l).map(function(y){return y instanceof xr?y:zr(y)?new xr(y[0],y[1]):new xr(y)}).toString();break;case"DTSTART":r=pF(l,e.tzid);break;case"UNTIL":c=Ye.timeToUntilString(l,!e.tzid);break;default:if(zr(l)){for(var f=[],d=0;d<l.length;d++)f[d]=String(l[d]);c=f.toString()}else c=String(l)}c&&t.push([s,c])}}var h=t.map(function(y){var m=y[0],_=y[1];return m+"="+_.toString()}).join(";"),g="";return h!==""&&(g="RRULE:"+h),[r,g].filter(function(y){return!!y}).join(`
`)}function pF(e,t){return e?"DTSTART"+new oo(new Date(e),t).toString():""}function gF(e,t){return Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every(function(r,n){return r.getTime()===t[n].getTime()}):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():e===t}var rT=function(){function e(){this.all=!1,this.before=[],this.after=[],this.between=[]}return e.prototype._cacheAdd=function(t,r,n){r&&(r=r instanceof Date?Ye.clone(r):Ye.cloneDates(r)),t==="all"?this.all=r:(n._value=r,this[t].push(n))},e.prototype._cacheGet=function(t,r){var n=!1,i=r?Object.keys(r):[],a=function(d){for(var h=0;h<i.length;h++){var g=i[h];if(!gF(r[g],d[g]))return!0}return!1},s=this[t];if(t==="all")n=this.all;else if(zr(s))for(var l=0;l<s.length;l++){var c=s[l];if(!(i.length&&a(c))){n=c._value;break}}if(!n&&this.all){for(var f=new Sa(t,r),l=0;l<this.all.length&&f.accept(this.all[l]);l++);n=f.getValue(),this._cacheAdd(t,n,r)}return zr(n)?Ye.cloneDates(n):n instanceof Date?Ye.clone(n):n},e}();var nT=ao(Tt(1,31),Tt(2,28),Tt(3,31),Tt(4,30),Tt(5,31),Tt(6,30),Tt(7,31),Tt(8,31),Tt(9,30),Tt(10,31),Tt(11,30),Tt(12,31),Tt(1,7)),iT=ao(Tt(1,31),Tt(2,29),Tt(3,31),Tt(4,30),Tt(5,31),Tt(6,30),Tt(7,31),Tt(8,31),Tt(9,30),Tt(10,31),Tt(11,30),Tt(12,31),Tt(1,7)),mF=ui(1,29),yF=ui(1,30),ss=ui(1,31),tn=ui(1,32),aT=ao(tn,yF,tn,ss,tn,ss,tn,tn,ss,tn,ss,tn,tn.slice(0,7)),sT=ao(tn,mF,tn,ss,tn,ss,tn,tn,ss,tn,ss,tn,tn.slice(0,7)),vF=ui(-28,0),_F=ui(-29,0),os=ui(-30,0),rn=ui(-31,0),oT=ao(rn,_F,rn,os,rn,os,rn,rn,os,rn,os,rn,rn.slice(0,7)),lT=ao(rn,vF,rn,os,rn,os,rn,rn,os,rn,os,rn,rn.slice(0,7)),uT=[0,31,60,91,121,152,182,213,244,274,305,335,366],cT=[0,31,59,90,120,151,181,212,243,273,304,334,365],Tm=function(){for(var e=[],t=0;t<55;t++)e=e.concat(ui(7));return e}();function fT(e,t){var r=new Date(Date.UTC(e,0,1)),n=Ye.isLeapYear(e)?366:365,i=Ye.isLeapYear(e+1)?366:365,a=Ye.toOrdinal(r),s=Ye.getWeekday(r),l=mn(mn({yearlen:n,nextyearlen:i,yearordinal:a,yearweekday:s},EF(e)),{wnomask:null});if(Fn(t.byweekno))return l;l.wnomask=Tt(0,n+7);var c,f,d=c=en(7-s+t.wkst,7);d>=4?(d=0,f=l.yearlen+en(s-t.wkst,7)):f=n-d;for(var h=Math.floor(f/7),g=en(f,7),y=Math.floor(h+g/4),m=0;m<t.byweekno.length;m++){var _=t.byweekno[m];if(_<0&&(_+=y+1),_>0&&_<=y){var E=void 0;_>1?(E=d+(_-1)*7,d!==c&&(E-=7-c)):E=d;for(var w=0;w<7&&(l.wnomask[E]=1,E++,l.wdaymask[E]!==t.wkst);w++);}}if(Rt(t.byweekno,1)){var E=d+y*7;if(d!==c&&(E-=7-c),E<n)for(var m=0;m<7&&(l.wnomask[E]=1,E+=1,l.wdaymask[E]!==t.wkst);m++);}if(d){var S=void 0;if(Rt(t.byweekno,-1))S=-1;else{var R=Ye.getWeekday(new Date(Date.UTC(e-1,0,1))),B=en(7-R.valueOf()+t.wkst,7),O=Ye.isLeapYear(e-1)?366:365,N=void 0;B>=4?(B=0,N=O+en(R-t.wkst,7)):N=n-d,S=Math.floor(52+en(N,7)/4)}if(Rt(t.byweekno,S))for(var E=0;E<d;E++)l.wnomask[E]=1}return l}function EF(e){var t=Ye.isLeapYear(e)?366:365,r=new Date(Date.UTC(e,0,1)),n=Ye.getWeekday(r);return t===365?{mmask:nT,mdaymask:sT,nmdaymask:lT,wdaymask:Tm.slice(n),mrange:cT}:{mmask:iT,mdaymask:aT,nmdaymask:oT,wdaymask:Tm.slice(n),mrange:uT}}function dT(e,t,r,n,i,a){var s={lastyear:e,lastmonth:t,nwdaymask:[]},l=[];if(a.freq===Pe.YEARLY)if(Fn(a.bymonth))l=[[0,r]];else for(var c=0;c<a.bymonth.length;c++)t=a.bymonth[c],l.push(n.slice(t-1,t+1));else a.freq===Pe.MONTHLY&&(l=[n.slice(t-1,t+1)]);if(Fn(l))return s;s.nwdaymask=Tt(0,r);for(var c=0;c<l.length;c++)for(var f=l[c],d=f[0],h=f[1]-1,g=0;g<a.bynweekday.length;g++){var y=void 0,m=a.bynweekday[g],_=m[0],E=m[1];E<0?(y=h+(E+1)*7,y-=en(i[y]-_,7)):(y=d+(E-1)*7,y+=en(7-i[y]+_,7)),d<=y&&y<=h&&(s.nwdaymask[y]=1)}return s}function hT(e,t){t===void 0&&(t=0);var r=e%19,n=Math.floor(e/100),i=e%100,a=Math.floor(n/4),s=n%4,l=Math.floor((n+8)/25),c=Math.floor((n-l+1)/3),f=Math.floor(19*r+n-a-c+15)%30,d=Math.floor(i/4),h=i%4,g=Math.floor(32+2*s+2*d-f-h)%7,y=Math.floor((r+11*f+22*g)/451),m=Math.floor((f+g-7*y+114)/31),_=(f+g-7*y+114)%31+1,E=Date.UTC(e,m-1,_+t),w=Date.UTC(e,0,1);return[Math.ceil((E-w)/(1e3*60*60*24))]}var wF=function(){function e(t){this.options=t}return e.prototype.rebuild=function(t,r){var n=this.options;if(t!==this.lastyear&&(this.yearinfo=fT(t,n)),Er(n.bynweekday)&&(r!==this.lastmonth||t!==this.lastyear)){var i=this.yearinfo,a=i.yearlen,s=i.mrange,l=i.wdaymask;this.monthinfo=dT(t,r,a,s,l,n)}er(n.byeaster)&&(this.eastermask=hT(t,n.byeaster))},Object.defineProperty(e.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!0,configurable:!0}),e.prototype.ydayset=function(){return[ui(this.yearlen),0,this.yearlen]},e.prototype.mdayset=function(t,r,n){for(var i=this.mrange[r-1],a=this.mrange[r],s=Tt(null,this.yearlen),l=i;l<a;l++)s[l]=l;return[s,i,a]},e.prototype.wdayset=function(t,r,n){for(var i=Tt(null,this.yearlen+7),a=Ye.toOrdinal(new Date(Date.UTC(t,r-1,n)))-this.yearordinal,s=a,l=0;l<7&&(i[a]=a,++a,this.wdaymask[a]!==this.options.wkst);l++);return[i,s,a]},e.prototype.ddayset=function(t,r,n){var i=Tt(null,this.yearlen),a=Ye.toOrdinal(new Date(Date.UTC(t,r-1,n)))-this.yearordinal;return i[a]=a,[i,a,a+1]},e.prototype.htimeset=function(t,r,n,i){var a=this,s=[];return this.options.byminute.forEach(function(l){s=s.concat(a.mtimeset(t,l,n,i))}),Ye.sort(s),s},e.prototype.mtimeset=function(t,r,n,i){var a=this.options.bysecond.map(function(s){return new Al(t,r,s,i)});return Ye.sort(a),a},e.prototype.stimeset=function(t,r,n,i){return[new Al(t,r,n,i)]},e.prototype.getdayset=function(t){switch(t){case Ze.YEARLY:return this.ydayset.bind(this);case Ze.MONTHLY:return this.mdayset.bind(this);case Ze.WEEKLY:return this.wdayset.bind(this);case Ze.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},e.prototype.gettimeset=function(t){switch(t){case Ze.HOURLY:return this.htimeset.bind(this);case Ze.MINUTELY:return this.mtimeset.bind(this);case Ze.SECONDLY:return this.stimeset.bind(this)}},e}(),pT=wF;function gT(e,t,r,n,i,a){for(var s=[],l=0;l<e.length;l++){var c=void 0,f=void 0,d=e[l];d<0?(c=Math.floor(d/t.length),f=en(d,t.length)):(c=Math.floor((d-1)/t.length),f=en(d-1,t.length));for(var h=[],g=r;g<n;g++){var y=a[g];!er(y)||h.push(y)}var m=void 0;c<0?m=h.slice(c)[0]:m=h[c];var _=t[f],E=Ye.fromOrdinal(i.yearordinal+m),w=Ye.combine(E,_);Rt(s,w)||s.push(w)}return Ye.sort(s),s}function ih(e,t){var r=t.dtstart,n=t.freq,i=t.interval,a=t.until,s=t.bysetpos,l=t.count;if(l===0||i===0)return Ta(e);var c=XS.fromDate(r),f=new pT(t);f.rebuild(c.year,c.month);for(var d=xF(f,c,t);;){var h=f.getdayset(n)(c.year,c.month,c.day),g=h[0],y=h[1],m=h[2],_=bF(g,y,m,f,t);if(Er(s))for(var E=gT(s,d,y,m,f,g),w=0;w<E.length;w++){var S=E[w];if(a&&S>a)return Ta(e);if(S>=r){var R=mT(S,t);if(!e.accept(R)||l&&(--l,!l))return Ta(e)}}else for(var w=y;w<m;w++){var B=g[w];if(!!er(B))for(var O=Ye.fromOrdinal(f.yearordinal+B),N=0;N<d.length;N++){var ee=d[N],S=Ye.combine(O,ee);if(a&&S>a)return Ta(e);if(S>=r){var R=mT(S,t);if(!e.accept(R)||l&&(--l,!l))return Ta(e)}}}if(t.interval===0||(c.add(t,_),c.year>Ye.MAXYEAR))return Ta(e);zu(n)||(d=f.gettimeset(n)(c.hour,c.minute,c.second,0)),f.rebuild(c.year,c.month)}}function CF(e,t,r){var n=r.bymonth,i=r.byweekno,a=r.byweekday,s=r.byeaster,l=r.bymonthday,c=r.bynmonthday,f=r.byyearday;return Er(n)&&!Rt(n,e.mmask[t])||Er(i)&&!e.wnomask[t]||Er(a)&&!Rt(a,e.wdaymask[t])||Er(e.nwdaymask)&&!e.nwdaymask[t]||s!==null&&!Rt(e.eastermask,t)||(Er(l)||Er(c))&&!Rt(l,e.mdaymask[t])&&!Rt(c,e.nmdaymask[t])||Er(f)&&(t<e.yearlen&&!Rt(f,t+1)&&!Rt(f,-e.yearlen+t)||t>=e.yearlen&&!Rt(f,t+1-e.yearlen)&&!Rt(f,-e.nextyearlen+t-e.yearlen))}function mT(e,t){return new oo(e,t.tzid).rezonedDate()}function Ta(e){return e.getValue()}function bF(e,t,r,n,i){for(var a=!1,s=t;s<r;s++){var l=e[s];a=CF(n,l,i),a&&(e[l]=null)}return a}function xF(e,t,r){var n=r.freq,i=r.byhour,a=r.byminute,s=r.bysecond;return zu(n)?ZS(r):n>=Pe.HOURLY&&Er(i)&&!Rt(i,t.hour)||n>=Pe.MINUTELY&&Er(a)&&!Rt(a,t.minute)||n>=Pe.SECONDLY&&Er(s)&&!Rt(s,t.second)?[]:e.gettimeset(n)(t.hour,t.minute,t.second,t.millisecond)}var ci={MO:new xr(0),TU:new xr(1),WE:new xr(2),TH:new xr(3),FR:new xr(4),SA:new xr(5),SU:new xr(6)},Qu={freq:Ze.YEARLY,dtstart:null,interval:1,wkst:ci.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},$S=Object.keys(Qu),Pe=function(){function e(t,r){t===void 0&&(t={}),r===void 0&&(r=!1),this._cache=r?null:new rT,this.origOptions=Sm(t);var n=JS(t).parsedOptions;this.options=n}return e.parseText=function(t,r){return Yu(t,r)},e.fromText=function(t,r){return YS(t,r)},e.fromString=function(t){return new e(e.parseString(t)||void 0)},e.prototype._iter=function(t){return ih(t,this.options)},e.prototype._cacheGet=function(t,r){return this._cache?this._cache._cacheGet(t,r):!1},e.prototype._cacheAdd=function(t,r,n){if(!!this._cache)return this._cache._cacheAdd(t,r,n)},e.prototype.all=function(t){if(t)return this._iter(new xm("all",{},t));var r=this._cacheGet("all");return r===!1&&(r=this._iter(new Sa("all",{})),this._cacheAdd("all",r)),r},e.prototype.between=function(t,r,n,i){if(n===void 0&&(n=!1),!Ye.isValidDate(t)||!Ye.isValidDate(r))throw new Error("Invalid date passed in to RRule.between");var a={before:r,after:t,inc:n};if(i)return this._iter(new xm("between",a,i));var s=this._cacheGet("between",a);return s===!1&&(s=this._iter(new Sa("between",a)),this._cacheAdd("between",s,a)),s},e.prototype.before=function(t,r){if(r===void 0&&(r=!1),!Ye.isValidDate(t))throw new Error("Invalid date passed in to RRule.before");var n={dt:t,inc:r},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Sa("before",n)),this._cacheAdd("before",i,n)),i},e.prototype.after=function(t,r){if(r===void 0&&(r=!1),!Ye.isValidDate(t))throw new Error("Invalid date passed in to RRule.after");var n={dt:t,inc:r},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Sa("after",n)),this._cacheAdd("after",i,n)),i},e.prototype.count=function(){return this.all().length},e.prototype.toString=function(){return Zu(this.origOptions)},e.prototype.toText=function(t,r,n){return zS(this,t,r,n)},e.prototype.isFullyConvertibleToText=function(){return QS(this)},e.prototype.clone=function(){return new e(this.origOptions)},e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],e.YEARLY=Ze.YEARLY,e.MONTHLY=Ze.MONTHLY,e.WEEKLY=Ze.WEEKLY,e.DAILY=Ze.DAILY,e.HOURLY=Ze.HOURLY,e.MINUTELY=Ze.MINUTELY,e.SECONDLY=Ze.SECONDLY,e.MO=ci.MO,e.TU=ci.TU,e.WE=ci.WE,e.TH=ci.TH,e.FR=ci.FR,e.SA=ci.SA,e.SU=ci.SU,e.parseString=Xu,e.optionsToString=Zu,e}();function yT(e,t,r,n,i,a){var s={},l=e.accept;function c(g,y){r.forEach(function(m){m.between(g,y,!0).forEach(function(_){s[Number(_)]=!0})})}i.forEach(function(g){var y=new oo(g,a).rezonedDate();s[Number(y)]=!0}),e.accept=function(g){var y=Number(g);return isNaN(y)?l.call(this,g):!s[y]&&(c(new Date(y-1),new Date(y+1)),!s[y])?(s[y]=!0,l.call(this,g)):!0},e.method==="between"&&(c(e.args.after,e.args.before),e.accept=function(g){var y=Number(g);return s[y]?!0:(s[y]=!0,l.call(this,g))});for(var f=0;f<n.length;f++){var d=new oo(n[f],a).rezonedDate();if(!e.accept(new Date(d.getTime())))break}t.forEach(function(g){ih(e,g.options)});var h=e._result;switch(Ye.sort(h),e.method){case"all":case"between":return h;case"before":return h.length&&h[h.length-1]||null;case"after":default:return h.length&&h[0]||null}}var vT={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function SF(e,t){var r=[],n=[],i=[],a=[],s=Ju(e),l=s.dtstart,c=s.tzid,f=RF(e,t.unfold);return f.forEach(function(d){if(!!d){var h=kF(d),g=h.name,y=h.parms,m=h.value;switch(g.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: "+y.join(","));r.push(Xu(d));break;case"RDATE":var _=/RDATE(?:;TZID=([^:=]+))?/i.exec(d),E=_[0],w=_[1];w&&!c&&(c=w),n=n.concat(_T(m,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: "+y.join(","));i.push(Xu(m));break;case"EXDATE":a=a.concat(_T(m,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+g)}}}),{dtstart:l,tzid:c,rrulevals:r,rdatevals:n,exrulevals:i,exdatevals:a}}function TF(e,t){var r=SF(e,t),n=r.rrulevals,i=r.rdatevals,a=r.exrulevals,s=r.exdatevals,l=r.dtstart,c=r.tzid,f=t.cache===!1;if(t.compatible&&(t.forceset=!0,t.unfold=!0),t.forceset||n.length>1||i.length||a.length||s.length){var d=new $u(f);return d.dtstart(l),d.tzid(c||void 0),n.forEach(function(g){d.rrule(new Pe(Am(g,l,c),f))}),i.forEach(function(g){d.rdate(g)}),a.forEach(function(g){d.exrule(new Pe(Am(g,l,c),f))}),s.forEach(function(g){d.exdate(g)}),t.compatible&&t.dtstart&&d.rdate(l),d}var h=n[0]||{};return new Pe(Am(h,h.dtstart||t.dtstart||l,h.tzid||t.tzid||c),f)}function ah(e,t){return t===void 0&&(t={}),TF(e,AF(t))}function Am(e,t,r){return mn(mn({},e),{dtstart:t,tzid:r})}function AF(e){var t=[],r=Object.keys(e),n=Object.keys(vT);if(r.forEach(function(i){Rt(n,i)||t.push(i)}),t.length)throw new Error("Invalid options: "+t.join(", "));return mn(mn({},vT),e)}function IF(e){if(e.indexOf(":")===-1)return{name:"RRULE",value:e};var t=bS(e,":",1),r=t[0],n=t[1];return{name:r,value:n}}function kF(e){var t=IF(e),r=t.name,n=t.value,i=r.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function RF(e,t){if(t===void 0&&(t=!1),e=e&&e.trim(),!e)throw new Error("Invalid empty string");if(!t)return e.split(/\s/);for(var r=e.split(`
`),n=0;n<r.length;){var i=r[n]=r[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(r[n-1]+=i.slice(1),r.splice(n,1)):n+=1:r.splice(n,1)}return r}function BF(e){e.forEach(function(t){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(t))throw new Error("unsupported RDATE/EXDATE parm: "+t)})}function _T(e,t){return BF(t),e.split(",").map(function(r){return Ye.untilStringToDate(r)})}function ET(e){var t=this;return function(r){if(r!==void 0&&(t["_"+e]=r),t["_"+e]!==void 0)return t["_"+e];for(var n=0;n<t._rrule.length;n++){var i=t._rrule[n].origOptions[e];if(i)return i}}}var $u=function(e){Sl(t,e);function t(r){r===void 0&&(r=!1);var n=e.call(this,{},r)||this;return n.dtstart=ET.apply(n,["dtstart"]),n.tzid=ET.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return t.prototype._iter=function(r){return yT(r,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},t.prototype.rrule=function(r){wT(r,this._rrule)},t.prototype.exrule=function(r){wT(r,this._exrule)},t.prototype.rdate=function(r){CT(r,this._rdate)},t.prototype.exdate=function(r){CT(r,this._exdate)},t.prototype.rrules=function(){return this._rrule.map(function(r){return ah(r.toString())})},t.prototype.exrules=function(){return this._exrule.map(function(r){return ah(r.toString())})},t.prototype.rdates=function(){return this._rdate.map(function(r){return new Date(r.getTime())})},t.prototype.exdates=function(){return this._exdate.map(function(r){return new Date(r.getTime())})},t.prototype.valueOf=function(){var r=[];return!this._rrule.length&&this._dtstart&&(r=r.concat(Zu({dtstart:this._dtstart}))),this._rrule.forEach(function(n){r=r.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){r=r.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&r.push(bT("RDATE",this._rdate,this.tzid())),this._exdate.length&&r.push(bT("EXDATE",this._exdate,this.tzid())),r},t.prototype.toString=function(){return this.valueOf().join(`
`)},t.prototype.clone=function(){var r=new t(!!this._cache);return this._rrule.forEach(function(n){return r.rrule(n.clone())}),this._exrule.forEach(function(n){return r.exrule(n.clone())}),this._rdate.forEach(function(n){return r.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return r.exdate(new Date(n.getTime()))}),r},t}(Pe);function wT(e,t){if(!(e instanceof Pe))throw new TypeError(String(e)+" is not RRule instance");Rt(t.map(String),String(e))||t.push(e)}function CT(e,t){if(!(e instanceof Date))throw new TypeError(String(e)+" is not Date instance");Rt(t.map(Number),Number(e))||(t.push(e),Ye.sort(t))}function bT(e,t,r){var n=!r||r.toUpperCase()==="UTC",i=n?e+":":e+";TZID="+r+":",a=t.map(function(s){return Ye.timeToUntilString(s.valueOf(),n)}).join(",");return""+i+a}var Il=mt(require("obsidian"));var lo=class extends Il.Modal{constructor(t,r){super(window.app);this.template=null;this.folder=null;this.plugin=kt.getInstance();this.event=t,this.onSumbit=r}onOpen(){let{contentEl:t}=this;t.createEl("h1",{text:"You can now select a template to use"}),new Il.Setting(t).setName("Template").addSearch(r=>{new Mu(r.inputEl,this.plugin),r.setPlaceholder("Template").setValue("").onChange(n=>this.template=n),r.containerEl.addClass("templater_search")}),new Il.Setting(t).setName("Folder").addSearch(r=>{new Fu(r.inputEl),r.setPlaceholder("Example: folder1/folder2").setValue(app.vault.config.newFileFolderPath).onChange(n=>this.folder=n),r.containerEl.addClass("templater_search")}),new Il.Setting(t).setName("").addButton(r=>{r.setButtonText("Create Note"),r.onClick(n=>M(this,null,function*(){let i=yield no(this.event,this.folder,this.template);this.onSumbit(i),this.close()}))})}onClose(){let{contentEl:t}=this;t.empty()}};function NF(e){ai(e,"svelte-1wq45u1",".weekActive.svelte-1wq45u1.svelte-1wq45u1{background-color:rgb(61, 102, 214) !important}.weekInActive.svelte-1wq45u1.svelte-1wq45u1{background-color:#2a2a2a !important}.buttonRow.svelte-1wq45u1.svelte-1wq45u1{display:flex;flex-direction:row;align-items:center;justify-content:space-around;padding:5px}.summaryInput.svelte-1wq45u1.svelte-1wq45u1{border:none;border-bottom:2px solid;border-radius:0px;height:40px;font-size:35px;text-align:center}.disabled.svelte-1wq45u1.svelte-1wq45u1{opacity:0.2}label.svelte-1wq45u1.svelte-1wq45u1{margin-top:5px}.googleFullDayContainer.svelte-1wq45u1.svelte-1wq45u1{margin-top:10px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.googleEventButtonContainer.svelte-1wq45u1.svelte-1wq45u1{margin-top:10px;display:flex;flex-direction:column;justify-content:space-around}.googleEventButtonContainer.svelte-1wq45u1 button.svelte-1wq45u1{width:40%}")}function xT(e,t,r){let n=e.slice();return n[41]=t[r],n[42]=t,n[43]=r,n}function ST(e,t,r){let n=e.slice();return n[44]=t[r],n}function DF(e){let t,r,n,i,a,s,l=e[3],c=[];for(let f=0;f<l.length;f+=1)c[f]=TT(ST(e,l,f));return{c(){t=ae("label"),t.textContent="Calendar",r=Oe(),n=ae("select");for(let f=0;f<c.length;f+=1)c[f].c();te(t,"for","calendar"),te(t,"class","svelte-1wq45u1"),te(n,"name","calendar"),te(n,"class","dropdown"),n.disabled=i=e[0].id!==void 0},m(f,d){be(f,t,d),be(f,r,d),be(f,n,d);for(let h=0;h<c.length;h+=1)c[h].m(n,null);a||(s=Qe(n,"change",e[17]),a=!0)},p(f,d){if(d[0]&9){l=f[3];let h;for(h=0;h<l.length;h+=1){let g=ST(f,l,h);c[h]?c[h].p(g,d):(c[h]=TT(g),c[h].c(),c[h].m(n,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=l.length}d[0]&1&&i!==(i=f[0].id!==void 0)&&(n.disabled=i)},d(f){f&&Ce(t),f&&Ce(r),f&&Ce(n),$r(c,f),a=!1,s()}}}function OF(e){let t;return{c(){t=ae("span"),t.textContent="Loading"},m(r,n){be(r,t,n)},p:bt,d(r){r&&Ce(t)}}}function TT(e){let t,r=e[44].summary+"",n,i,a,s;return{c(){t=ae("option"),n=$t(r),te(t,"id",i=e[44].id),t.__value=a=e[44].id,t.value=t.__value,t.selected=s=e[44].id==e[0].parent.id},m(l,c){be(l,t,c),re(t,n)},p(l,c){c[0]&8&&r!==(r=l[44].summary+"")&&oi(n,r),c[0]&8&&i!==(i=l[44].id)&&te(t,"id",i),c[0]&8&&a!==(a=l[44].id)&&(t.__value=a,t.value=t.__value),c[0]&9&&s!==(s=l[44].id==l[0].parent.id)&&(t.selected=s)},d(l){l&&Ce(t)}}}function LF(e){let t,r,n,i,a,s,l,c,f,d;return{c(){t=ae("label"),t.textContent="Start Date",r=Oe(),n=ae("input"),i=Oe(),a=ae("label"),a.textContent="End Date",s=Oe(),l=ae("input"),te(t,"for","eventStartDate"),te(t,"class","svelte-1wq45u1"),te(n,"type","datetime-local"),te(n,"name","eventStartDate"),te(a,"for","eventEndDate"),te(a,"class","svelte-1wq45u1"),te(l,"type","datetime-local"),te(l,"name","eventEndDate"),te(l,"min",c=window.moment(e[1]).format("YYYY-MM-DDThh:mm"))},m(h,g){be(h,t,g),be(h,r,g),be(h,n,g),pn(n,e[1]),be(h,i,g),be(h,a,g),be(h,s,g),be(h,l,g),pn(l,e[2]),f||(d=[Qe(n,"input",e[30]),Qe(l,"input",e[31])],f=!0)},p(h,g){g[0]&2&&pn(n,h[1]),g[0]&2&&c!==(c=window.moment(h[1]).format("YYYY-MM-DDThh:mm"))&&te(l,"min",c),g[0]&4&&pn(l,h[2])},d(h){h&&Ce(t),h&&Ce(r),h&&Ce(n),h&&Ce(i),h&&Ce(a),h&&Ce(s),h&&Ce(l),f=!1,Yr(d)}}}function PF(e){let t,r,n,i,a;return{c(){t=ae("label"),t.textContent="Date",r=Oe(),n=ae("input"),te(t,"for","eventDate"),te(t,"class","svelte-1wq45u1"),te(n,"type","date"),te(n,"name","eventDate")},m(s,l){be(s,t,l),be(s,r,l),be(s,n,l),pn(n,e[12]),i||(a=Qe(n,"input",e[29]),i=!0)},p(s,l){l[0]&4096&&pn(n,s[12])},d(s){s&&Ce(t),s&&Ce(r),s&&Ce(n),i=!1,a()}}}function AT(e){let t,r,n,i,a,s,l,c,f=e[6]&&IT(e);return{c(){t=ae("div"),r=ae("label"),r.textContent="Reccuring",n=Oe(),i=ae("input"),a=Oe(),f&&f.c(),s=si(),te(r,"for","reaccuring"),te(r,"class","svelte-1wq45u1"),te(i,"type","checkbox"),te(i,"name","reaccuring"),te(t,"class","googleFullDayContainer svelte-1wq45u1")},m(d,h){be(d,t,h),re(t,r),re(t,n),re(t,i),i.checked=e[6],be(d,a,h),f&&f.m(d,h),be(d,s,h),l||(c=Qe(i,"change",e[32]),l=!0)},p(d,h){h[0]&64&&(i.checked=d[6]),d[6]?f?f.p(d,h):(f=IT(d),f.c(),f.m(s.parentNode,s)):f&&(f.d(1),f=null)},d(d){d&&Ce(t),d&&Ce(a),f&&f.d(d),d&&Ce(s),l=!1,c()}}}function IT(e){let t,r,n,i,a,s,l,c,f,d,h,g,y,m,_,E,w,S,R,B,O,N,ee,q,F,ce,se,ve,Ie;function Be(Xe,Ve){if(Xe[9]=="Until")return MF;if(Xe[9]=="For")return UF}let Se=Be(e,[-1,-1]),Te=Se&&Se(e),_e=e[7]===Ze.WEEKLY&&kT(e);return{c(){t=ae("div"),r=ae("span"),r.textContent="Repeat every",n=Oe(),i=ae("input"),a=Oe(),s=ae("select"),l=ae("option"),c=$t("Days"),d=ae("option"),h=$t("Weeks"),y=ae("option"),m=$t("Months"),E=ae("option"),w=$t("Years"),R=Oe(),B=ae("select"),O=ae("option"),O.textContent="Forever",N=ae("option"),N.textContent="Until",ee=ae("option"),ee.textContent="For",q=Oe(),Te&&Te.c(),F=Oe(),ce=ae("br"),se=Oe(),_e&&_e.c(),te(i,"type","number"),te(i,"name","recurringInterval"),te(i,"step","1"),te(i,"min","1"),et(i,"width","90px",!1),l.__value=f=Ze.DAILY,l.value=l.__value,te(d,"default",""),d.__value=g=Ze.WEEKLY,d.value=d.__value,y.__value=_=Ze.MONTHLY,y.value=y.__value,E.__value=S=Ze.YEARLY,E.value=E.__value,te(s,"class","dropdown"),e[7]===void 0&&Ca(()=>e[34].call(s)),te(O,"default",""),O.__value="Forever",O.value=O.__value,N.__value="Until",N.value=N.__value,ee.__value="For",ee.value=ee.__value,te(B,"class","dropdown"),e[9]===void 0&&Ca(()=>e[35].call(B))},m(Xe,Ve){be(Xe,t,Ve),re(t,r),re(t,n),re(t,i),pn(i,e[8]),re(t,a),re(t,s),re(s,l),re(l,c),re(s,d),re(d,h),re(s,y),re(y,m),re(s,E),re(E,w),Qi(s,e[7]),re(t,R),re(t,B),re(B,O),re(B,N),re(B,ee),Qi(B,e[9]),re(t,q),Te&&Te.m(t,null),re(t,F),re(t,ce),re(t,se),_e&&_e.m(t,null),ve||(Ie=[Qe(i,"input",e[33]),Qe(s,"change",e[34]),Qe(B,"change",e[35])],ve=!0)},p(Xe,Ve){Ve[0]&256&&Vu(i.value)!==Xe[8]&&pn(i,Xe[8]),Ve[0]&128&&Qi(s,Xe[7]),Ve[0]&512&&Qi(B,Xe[9]),Se===(Se=Be(Xe,Ve))&&Te?Te.p(Xe,Ve):(Te&&Te.d(1),Te=Se&&Se(Xe),Te&&(Te.c(),Te.m(t,F))),Xe[7]===Ze.WEEKLY?_e?_e.p(Xe,Ve):(_e=kT(Xe),_e.c(),_e.m(t,null)):_e&&(_e.d(1),_e=null)},d(Xe){Xe&&Ce(t),Te&&Te.d(),_e&&_e.d(),ve=!1,Yr(Ie)}}}function UF(e){let t,r,n,i,a;return{c(){t=ae("input"),r=Oe(),n=ae("span"),n.textContent="times",te(t,"type","number"),te(t,"name","recurringCount"),te(t,"step","1"),te(t,"min","1"),t.required=!0,et(t,"width","90px",!1)},m(s,l){be(s,t,l),pn(t,e[10]),be(s,r,l),be(s,n,l),i||(a=Qe(t,"input",e[37]),i=!0)},p(s,l){l[0]&1024&&Vu(t.value)!==s[10]&&pn(t,s[10])},d(s){s&&Ce(t),s&&Ce(r),s&&Ce(n),i=!1,a()}}}function MF(e){let t,r,n;return{c(){t=ae("input"),te(t,"type","date"),te(t,"name","recurringEndDate"),t.required=!0},m(i,a){be(i,t,a),pn(t,e[11]),r||(n=Qe(t,"input",e[36]),r=!0)},p(i,a){a[0]&2048&&pn(t,i[11])},d(i){i&&Ce(t),r=!1,n()}}}function kT(e){let t,r=e[14],n=[];for(let i=0;i<r.length;i+=1)n[i]=RT(xT(e,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=si()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);be(i,t,a)},p(i,a){if(a[0]&16384){r=i[14];let s;for(s=0;s<r.length;s+=1){let l=xT(i,r,s);n[s]?n[s].p(l,a):(n[s]=RT(l),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){$r(n,i),i&&Ce(t)}}}function RT(e){let t,r=e[41][0].toString()+"",n,i,a,s,l;function c(){return e[38](e[41],e[42],e[43])}return{c(){t=ae("button"),n=$t(r),i=Oe(),te(t,"class",a=""+(El(e[41][1]?"weekActive":"weekInActive")+" svelte-1wq45u1"))},m(f,d){be(f,t,d),re(t,n),re(t,i),s||(l=Qe(t,"click",c),s=!0)},p(f,d){e=f,d[0]&16384&&r!==(r=e[41][0].toString()+"")&&oi(n,r),d[0]&16384&&a!==(a=""+(El(e[41][1]?"weekActive":"weekInActive")+" svelte-1wq45u1"))&&te(t,"class",a)},d(f){f&&Ce(t),s=!1,l()}}}function FF(e){let t,r,n,i;return{c(){t=ae("div"),r=ae("button"),r.textContent="Create",te(r,"class","svelte-1wq45u1"),te(t,"class","buttonRow svelte-1wq45u1")},m(a,s){be(a,t,s),re(t,r),n||(i=Qe(r,"click",e[18]),n=!0)},p:bt,d(a){a&&Ce(t),n=!1,i()}}}function qF(e){let t,r,n,i,a,s,l,c,f,d,h;function g(R,B){return R[6]?VF:GF}let y=g(e,[-1,-1]),m=y(e);function _(R,B){return R[13]?jF:KF}let E=_(e,[-1,-1]),w=E(e),S=e[6]&&BT(e);return{c(){t=ae("div"),m.c(),r=Oe(),w.c(),n=Oe(),i=ae("div"),a=ae("button"),a.textContent="Update",s=Oe(),l=ae("button"),l.textContent="Delete",c=Oe(),S&&S.c(),f=si(),te(t,"class","buttonRow svelte-1wq45u1"),te(a,"class","svelte-1wq45u1"),te(l,"class","svelte-1wq45u1"),te(i,"class","buttonRow svelte-1wq45u1")},m(R,B){be(R,t,B),m.m(t,null),re(t,r),w.m(t,null),be(R,n,B),be(R,i,B),re(i,a),re(i,s),re(i,l),be(R,c,B),S&&S.m(R,B),be(R,f,B),d||(h=[Qe(a,"click",e[21]),Qe(l,"click",e[19])],d=!0)},p(R,B){y===(y=g(R,B))&&m?m.p(R,B):(m.d(1),m=y(R),m&&(m.c(),m.m(t,r))),E===(E=_(R,B))&&w?w.p(R,B):(w.d(1),w=E(R),w&&(w.c(),w.m(t,null))),R[6]?S?S.p(R,B):(S=BT(R),S.c(),S.m(f.parentNode,f)):S&&(S.d(1),S=null)},d(R){R&&Ce(t),m.d(),w.d(),R&&Ce(n),R&&Ce(i),R&&Ce(c),S&&S.d(R),R&&Ce(f),d=!1,Yr(h)}}}function GF(e){let t,r,n;return{c(){t=ae("button"),t.textContent="Show Single Event",te(t,"class","svelte-1wq45u1")},m(i,a){be(i,t,a),r||(n=Qe(t,"click",e[25]),r=!0)},p:bt,d(i){i&&Ce(t),r=!1,n()}}}function VF(e){let t,r,n;return{c(){t=ae("button"),t.textContent="Show Recurring Event",te(t,"class","svelte-1wq45u1")},m(i,a){be(i,t,a),r||(n=Qe(t,"click",e[25]),r=!0)},p:bt,d(i){i&&Ce(t),r=!1,n()}}}function KF(e){let t,r,n;return{c(){t=ae("button"),t.textContent="Create Event Note",te(t,"class","svelte-1wq45u1")},m(i,a){be(i,t,a),r||(n=Qe(t,"click",e[24]),r=!0)},p:bt,d(i){i&&Ce(t),r=!1,n()}}}function jF(e){let t,r,n;return{c(){t=ae("button"),t.textContent="Open Event Note",te(t,"class","svelte-1wq45u1")},m(i,a){be(i,t,a),r||(n=Qe(t,"click",e[23]),r=!0)},p:bt,d(i){i&&Ce(t),r=!1,n()}}}function BT(e){let t,r,n,i,a,s;return{c(){t=ae("div"),r=ae("button"),r.textContent="Update All",n=Oe(),i=ae("button"),i.textContent="Delete All",r.disabled=!0,te(r,"class","disabled svelte-1wq45u1"),te(i,"class","svelte-1wq45u1"),te(t,"class","buttonRow svelte-1wq45u1")},m(l,c){be(l,t,c),re(t,r),re(t,n),re(t,i),a||(s=[Qe(r,"click",e[22]),Qe(i,"click",e[20])],a=!0)},p:bt,d(l){l&&Ce(t),a=!1,Yr(s)}}}function HF(e){let t,r,n,i,a,s,l,c,f,d,h,g,y,m,_,E,w,S,R;function B(Be,Se){return Be[4]?OF:DF}let O=B(e,[-1,-1]),N=O(e);function ee(Be,Se){return Be[5]?PF:LF}let q=ee(e,[-1,-1]),F=q(e),ce=!e[0].id&&AT(e);function se(Be,Se){return Be[0].id?qF:FF}let ve=se(e,[-1,-1]),Ie=ve(e);return{c(){t=ae("div"),r=ae("input"),n=Oe(),i=ae("label"),i.textContent="Description",a=Oe(),s=ae("textarea"),c=Oe(),N.c(),f=Oe(),d=ae("div"),h=ae("label"),h.textContent="Full Day",g=Oe(),y=ae("input"),m=Oe(),F.c(),_=Oe(),ce&&ce.c(),E=Oe(),w=ae("div"),Ie.c(),te(r,"class","summaryInput svelte-1wq45u1"),te(r,"name","summary"),te(r,"type","text"),te(r,"placeholder","Summary"),te(i,"for","description"),te(i,"class","svelte-1wq45u1"),te(s,"name","description"),s.value=l=e[15](),te(h,"for","fullDay"),te(h,"class","svelte-1wq45u1"),te(y,"type","checkbox"),te(y,"name","fullDay"),te(d,"class","googleFullDayContainer svelte-1wq45u1"),te(w,"class","googleEventButtonContainer svelte-1wq45u1"),te(t,"class","googleEventDetails")},m(Be,Se){be(Be,t,Se),re(t,r),pn(r,e[0].summary),re(t,n),re(t,i),re(t,a),re(t,s),re(t,c),N.m(t,null),re(t,f),re(t,d),re(d,h),re(d,g),re(d,y),y.checked=e[5],re(t,m),F.m(t,null),re(t,_),ce&&ce.m(t,null),re(t,E),re(t,w),Ie.m(w,null),S||(R=[Qe(r,"input",e[27]),Qe(s,"change",e[16]),Qe(y,"change",e[28])],S=!0)},p(Be,Se){Se[0]&1&&r.value!==Be[0].summary&&pn(r,Be[0].summary),O===(O=B(Be,Se))&&N?N.p(Be,Se):(N.d(1),N=O(Be),N&&(N.c(),N.m(t,f))),Se[0]&32&&(y.checked=Be[5]),q===(q=ee(Be,Se))&&F?F.p(Be,Se):(F.d(1),F=q(Be),F&&(F.c(),F.m(t,_))),Be[0].id?ce&&(ce.d(1),ce=null):ce?ce.p(Be,Se):(ce=AT(Be),ce.c(),ce.m(t,E)),ve===(ve=se(Be,Se))&&Ie?Ie.p(Be,Se):(Ie.d(1),Ie=ve(Be),Ie&&(Ie.c(),Ie.m(w,null)))},i:bt,o:bt,d(Be){Be&&Ce(t),N.d(),F.d(),ce&&ce.d(),Ie.d(),S=!1,Yr(R)}}}function NT(){let e=15,t=1e3*60*e;return window.moment(new Date(Math.round(new Date().getTime()/t)*t))}function WF(e,t,r){let{event:n}=t,{closeFunction:i}=t,a,s=!0,l,c,f,d=1,h,g,y,m=kt.getInstance(),_,E,w,S=app.vault.getFiles().find(we=>we.basename==n.summary),R=[[Pe.MO,!0],[Pe.TU,!0],[Pe.WE,!0],[Pe.TH,!0],[Pe.FR,!0],[Pe.SA,!0],[Pe.SU,!0]];function B(we){return l?(we.start.date=window.moment(w).format("YYYY-MM-DD"),we.end.date=window.moment(w).format("YYYY-MM-DD"),delete we.start.dateTime,delete we.end.dateTime):(we.start.dateTime=window.moment(_).format(),we.end.dateTime=window.moment(E).format(),delete we.start.date,delete we.end.date),we}Zs(()=>_r(void 0,void 0,void 0,function*(){var we,A,D,L;if(r(3,a=yield dn()),r(4,s=!1),r(5,l=((we=n==null?void 0:n.start)===null||we===void 0?void 0:we.dateTime)==null&&((A=n==null?void 0:n.start)===null||A===void 0?void 0:A.date)!==void 0),r(6,c=(n==null?void 0:n.recurringEventId)!==void 0),n.id==null){r(0,n.summary=(D=n.summary)!==null&&D!==void 0?D:"",n),r(0,n.description=(L=n.description)!==null&&L!==void 0?L:"",n),r(0,n.parent=a.find(V=>V.id===m.settings.defaultCalendar),n),n.parent||r(0,n.parent=a[a.length-1],n),r(6,c=!1);let W=NT();r(1,_=W.format("YYYY-MM-DDTHH:mm")),r(2,E=W.add(1,"hour").format("YYYY-MM-DDTHH:mm")),r(12,w=W.format("YYYY-MM-DD")),n.start.date&&r(12,w=window.moment(n.start.date).format("YYYY-MM-DD")),n.start.dateTime&&n.end.dateTime&&(r(1,_=window.moment(n.start.dateTime).format("YYYY-MM-DDTHH:mm")),r(2,E=window.moment(n.end.dateTime).format("YYYY-MM-DDTHH:mm")))}else if(l){let W=NT();r(1,_=W.format("YYYY-MM-DDTHH:mm")),r(2,E=W.add(1,"hour").format("YYYY-MM-DDTHH:mm")),r(12,w=window.moment(n.start.date).format("YYYY-MM-DD"))}else r(1,_=window.moment(n.start.dateTime).format("YYYY-MM-DDTHH:mm")),r(2,E=window.moment(n.end.dateTime).format("YYYY-MM-DDTHH:mm")),r(12,w=window.moment().format("YYYY-MM-DD"))}));let O=()=>n.description?n.description.replace(/<\/?[^>]+(>|$)/g,""):"",N=we=>{we.target instanceof HTMLTextAreaElement&&r(0,n.description=we.target.value,n)},ee=we=>{let A=we.target;if(A instanceof HTMLSelectElement){let D=A.value;r(0,n.parent.id=D,n)}},q=()=>_r(void 0,void 0,void 0,function*(){if(c){let A=R.map(V=>{if(V[1])return V[0]});A=A.filter(V=>V!==void 0);let D=new $u,L={freq:f,interval:d};h==="For"?L.count=g:h==="Until"&&(L.until=new Date(y)),f===Pe.WEEKLY&&A.length&&(L.byweekday=A);let W=new Pe(L);D.rrule(W),r(0,n.recurrence=D.valueOf(),n)}(yield wS(B(n))).id&&i()}),F=we=>_r(void 0,void 0,void 0,function*(){let A=!1;n.recurringEventId?A=yield Jd(n,!0):A=yield Jd(n),A&&i()}),ce=()=>_r(void 0,void 0,void 0,function*(){(yield Jd(B(n)))&&i()}),se=()=>_r(void 0,void 0,void 0,function*(){let we=B(n),A;we.recurringEventId?A=yield Zd(we,!0):A=yield Zd(we),A.id&&i()}),ve=()=>_r(void 0,void 0,void 0,function*(){(yield Zd(B(n))).id&&i()}),Ie=()=>_r(void 0,void 0,void 0,function*(){app.workspace.getLeaf(!0).openFile(S),i()}),Be=()=>_r(void 0,void 0,void 0,function*(){new lo(n,we=>r(13,S=we)).open()}),Se=()=>{window.open(n.htmlLink)};function Te(){n.summary=this.value,r(0,n)}function _e(){l=this.checked,r(5,l)}function Xe(){w=this.value,r(12,w)}function Ve(){_=this.value,r(1,_)}function yt(){E=this.value,r(2,E),r(1,_)}function ht(){c=this.checked,r(6,c)}function ze(){d=Vu(this.value),r(8,d)}function fe(){f=wl(this),r(7,f)}function pt(){h=wl(this),r(9,h)}function tt(){y=this.value,r(11,y)}function vt(){g=Vu(this.value),r(10,g)}let Je=(we,A,D)=>{r(14,A[D][1]=!we[1],R)};return e.$$set=we=>{"event"in we&&r(0,n=we.event),"closeFunction"in we&&r(26,i=we.closeFunction)},e.$$.update=()=>{if(e.$$.dirty[0]&6){e:{let we=window.moment(_);window.moment(E).isBefore(we)&&r(2,E=we.add(1,"hour").format("YYYY-MM-DDTHH:mm"))}}},[n,_,E,a,s,l,c,f,d,h,g,y,w,S,R,O,N,ee,q,F,ce,se,ve,Ie,Be,Se,i,Te,_e,Xe,Ve,yt,ht,ze,fe,pt,tt,vt,Je]}var DT=class extends gn{constructor(t){super();In(this,t,WF,HF,Tn,{event:0,closeFunction:26},NF,[-1,-1])}},OT=DT;var fi=class extends LT.Modal{constructor(t,r){super(kt.getInstance().app);this.selectedEvent=t,r&&(this.closeFunction=r)}onOpen(){return M(this,null,function*(){let{contentEl:t}=this;new OT({target:t,props:{event:this.selectedEvent,closeFunction:()=>{this.closeFunction&&this.closeFunction(),this.close()}}})})}onClose(){let{contentEl:t}=this;t.empty()}};var ki=class extends PT.FuzzySuggestModal{constructor(t,r,n=window.moment(),i=!1,a){super(window.app);this.plugin=kt.getInstance();this.eventList=[...t],this.modalSelectMode=r,this.setPlaceholder(`${n.format("MM/DD/YYYY")} Arrow left/right to switch day`),this.emptyStateText="No events found enter to create a new one",this.eventsChanged=i,this.currentDate=n.clone(),a&&(this.closeFunction=a),this.inputEl.addEventListener("keydown",s=>M(this,null,function*(){let l=!1;!this.getSuggestions(this.inputEl.value).length&&s.key=="Enter"&&new fi({summary:this.inputEl.value,start:{date:n.format()},end:{}},()=>{this.eventsChanged=!0,this.close()}).open(),s.key=="ArrowRight"?(s.ctrlKey?this.currentDate=this.currentDate.add(1,"month"):s.shiftKey?this.currentDate=this.currentDate.add(1,"week"):this.currentDate=this.currentDate.add(1,"day"),l=!0):s.key=="ArrowLeft"&&(s.ctrlKey?this.currentDate=this.currentDate.subtract(1,"month"):s.shiftKey?this.currentDate=this.currentDate.subtract(1,"week"):this.currentDate=this.currentDate.subtract(1,"day"),l=!0),l&&(this.setPlaceholder("Loading"),this.eventList=yield or({startDate:this.currentDate}),this.inputEl.dispatchEvent(new Event("input")),this.setPlaceholder(`${this.currentDate.format("MM/DD/YYYY")} Arrow left and right to switch day`))}))}getItems(){return this.eventList}getItemText(t){return t.start.date?`${t.start.date}		 | ${t.summary}	`:`${window.moment(t.start.dateTime).format("YYYY-MM-DD HH:mm")}	 | ${t.summary}	`}onChooseItem(t){return M(this,null,function*(){this.modalSelectMode=="details"?(this.open(),new fi(t,()=>this.eventsChanged=!0).open()):this.modalSelectMode=="createNote"&&(this.plugin.settings.useDefaultTemplate?no(t,this.plugin.settings.defaultFolder,this.plugin.settings.defaultTemplate):new lo(t,()=>{}).open())})}onClose(){this.closeFunction&&this.eventsChanged&&this.closeFunction()}};var sh=class extends UT.FuzzySuggestModal{constructor(t){super(kt.getInstance().app);this.calendarList=t,this.setPlaceholder("Select a calendar to view it")}getItems(){return this.calendarList}getItemText(t){return`${t.summary}	`}onChooseItem(t){return M(this,null,function*(){let r=yield or({include:[t.id]});new ki(r,"details").open()})}};var ls;(function(i){i.web="web",i.month="month",i.day="day",i.schedule="schedule"})(ls||(ls={}));var bh=mt(require("obsidian"));var jT=mt(GT());function ec(e){return e.getHours()/24+e.getMinutes()/(60*24)}function VT(e,t){if(e.start.date||(e==null?void 0:e.eventType)=="multiDay")return 0;let r=ec(new Date(e.start.dateTime));return t*r}function KT(e,t){if(e.start.date||(e==null?void 0:e.eventType)=="multiDay")return 25;let r=ec(new Date(e.start.dateTime)),n=ec(new Date(e.end.dateTime));return t*(n-r)}var lh=()=>app.vault.config.theme?app.vault.config.theme=="obsidian"?"dark":"light":"dark";function $F(e){ai(e,"svelte-10n616",'.event.svelte-10n616{display:flex;padding:10px;padding-top:0;position:absolute;width:150px;left:40px;border-radius:5px;color:black;font-size:0.5em;box-shadow:3px 2px 8px 4px rgba(0,0,0,0.36);overflow:hidden}.hourLine.svelte-10n616::after{content:"";position:absolute;width:90%;left:25px;border-bottom:1px solid white}.hourText.svelte-10n616{display:block;font-family:"consolas"}.timeline.svelte-10n616,.hourText.svelte-10n616,.hourTextContainer.svelte-10n616{overflow:hidden}.timeDisplay.svelte-10n616{position:absolute;height:3px;background:red;overflow:visible}.timeline.svelte-10n616{position:relative;display:flex;flex-direction:row;overflow:visible}')}function HT(e,t,r){let n=e.slice();return n[15]=t[r],n[17]=r,n}function WT(e,t,r){let n=e.slice();return n[18]=t[r],n[17]=r,n}function YT(e,t,r){let n=e.slice();return n[18]=t[r],n[17]=r,n}function eq(e){let t,r,n,i,a=`-${e[1]/52}px`,s,l=window.moment().isSame(e[0],"day"),c,f=`${e[1]}px`,d=`${e[2]}px`,h={length:24},g=[];for(let S=0;S<h.length;S+=1)g[S]=zT(YT(e,h,S));let y={length:24},m=[];for(let S=0;S<y.length;S+=1)m[S]=QT(WT(e,y,S));let _=l&&XT(e),E=e[5],w=[];for(let S=0;S<E.length;S+=1)w[S]=JT(HT(e,E,S));return{c(){t=ae("div"),r=ae("div");for(let S=0;S<g.length;S+=1)g[S].c();n=Oe(),i=ae("div");for(let S=0;S<m.length;S+=1)m[S].c();s=Oe(),_&&_.c(),c=Oe();for(let S=0;S<w.length;S+=1)w[S].c();te(r,"class","hourLineContainer"),te(i,"class","hourTextContainer svelte-10n616"),et(i,"margin-top",a,!1),te(t,"class","timeline svelte-10n616"),et(t,"height",f,!1),et(t,"width",d,!1)},m(S,R){be(S,t,R),re(t,r);for(let B=0;B<g.length;B+=1)g[B].m(r,null);re(t,n),re(t,i);for(let B=0;B<m.length;B+=1)m[B].m(i,null);re(t,s),_&&_.m(t,null),re(t,c);for(let B=0;B<w.length;B+=1)w[B].m(t,null)},p(S,R){if(R&2){h={length:24};let B;for(B=0;B<h.length;B+=1){let O=YT(S,h,B);g[B]?g[B].p(O,R):(g[B]=zT(O),g[B].c(),g[B].m(r,null))}for(;B<g.length;B+=1)g[B].d(1);g.length=h.length}if(R&2){y={length:24};let B;for(B=0;B<y.length;B+=1){let O=WT(S,y,B);m[B]?m[B].p(O,R):(m[B]=QT(O),m[B].c(),m[B].m(i,null))}for(;B<m.length;B+=1)m[B].d(1);m.length=y.length}if(R&2&&a!==(a=`-${S[1]/52}px`)&&et(i,"margin-top",a,!1),R&1&&(l=window.moment().isSame(S[0],"day")),l?_?_.p(S,R):(_=XT(S),_.c(),_.m(t,c)):_&&(_.d(1),_=null),R&96){E=S[5];let B;for(B=0;B<E.length;B+=1){let O=HT(S,E,B);w[B]?w[B].p(O,R):(w[B]=JT(O),w[B].c(),w[B].m(t,null))}for(;B<w.length;B+=1)w[B].d(1);w.length=E.length}R&2&&f!==(f=`${S[1]}px`)&&et(t,"height",f,!1),R&4&&d!==(d=`${S[2]}px`)&&et(t,"width",d,!1)},d(S){S&&Ce(t),$r(g,S),$r(m,S),_&&_.d(),$r(w,S)}}}function tq(e){let t;return{c(){t=ae("p"),t.textContent="Loading"},m(r,n){be(r,t,n)},p:bt,d(r){r&&Ce(t)}}}function zT(e){let t,r=`${e[1]/24}px`;return{c(){t=ae("div"),te(t,"class","hourLine svelte-10n616"),et(t,"height",r,!1)},m(n,i){be(n,t,i)},p(n,i){i&2&&r!==(r=`${n[1]/24}px`)&&et(t,"height",r,!1)},d(n){n&&Ce(t)}}}function QT(e){let t,r,n=`${e[1]/24}px`,i=`${e[1]/50}px`;return{c(){t=ae("span"),r=$t(e[17]),te(t,"class","hourText svelte-10n616"),et(t,"height",n,!1),et(t,"font-size",i,!1)},m(a,s){be(a,t,s),re(t,r)},p(a,s){s&2&&n!==(n=`${a[1]/24}px`)&&et(t,"height",n,!1),s&2&&i!==(i=`${a[1]/50}px`)&&et(t,"font-size",i,!1)},d(a){a&&Ce(t)}}}function XT(e){let t,r=`${e[4]}px`,n=`${e[2]}px`;return{c(){t=ae("div"),te(t,"class","timeDisplay svelte-10n616"),et(t,"top",r,!1),et(t,"width",n,!1)},m(i,a){be(i,t,a)},p(i,a){a&16&&r!==(r=`${i[4]}px`)&&et(t,"top",r,!1),a&4&&n!==(n=`${i[2]}px`)&&et(t,"width",n,!1)},d(i){i&&Ce(t)}}}function JT(e){let t,r=e[15].event.summary+"",n,i,a=`${e[15].y}px`,s=`${e[15].x}px`,l=`${e[15].width}px`,c=`${e[15].height}px`,f,d;function h(...g){return e[10](e[15],...g)}return{c(){t=ae("div"),n=$t(r),te(t,"class","event svelte-10n616"),te(t,"id",i=e[15].event.id),et(t,"top",a,!1),et(t,"left",s,!1),et(t,"width",l,!1),et(t,"height",c,!1),et(t,"background",Ru(e[15].event),!1)},m(g,y){be(g,t,y),re(t,n),f||(d=Qe(t,"click",h),f=!0)},p(g,y){e=g,y&32&&r!==(r=e[15].event.summary+"")&&oi(n,r),y&32&&i!==(i=e[15].event.id)&&te(t,"id",i),y&32&&a!==(a=`${e[15].y}px`)&&et(t,"top",a,!1),y&32&&s!==(s=`${e[15].x}px`)&&et(t,"left",s,!1),y&32&&l!==(l=`${e[15].width}px`)&&et(t,"width",l,!1),y&32&&c!==(c=`${e[15].height}px`)&&et(t,"height",c,!1),y&32&&et(t,"background",Ru(e[15].event),!1)},d(g){g&&Ce(t),f=!1,d()}}}function rq(e){let t;function r(a,s){return a[3]?tq:eq}let n=r(e,-1),i=n(e);return{c(){i.c(),t=si()},m(a,s){i.m(a,s),be(a,t,s)},p(a,[s]){n===(n=r(a,s))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(t.parentNode,t)))},i:bt,o:bt,d(a){i.d(a),a&&Ce(t)}}}function nq(e,t,r){let{height:n=700}=t,{width:i=300}=t,{date:a=window.moment()}=t,{include:s}=t,{exclude:l}=t,c=!0,f=0,d=[],h=[],g,y=()=>_r(void 0,void 0,void 0,function*(){yield _();let S=ec(new Date);r(4,f=Math.floor(n*S))}),m=()=>{let S=new jT.default;d.forEach(O=>{let N=O.start.date||O.start.dateTime;S.has(N)?S.get(N).push(O):S.set(N,[O])});let R=0,B=null;for(let O of S.values()){if(O[0].start.dateTime){let N=window.moment(O[0].start.dateTime);B&&N.isBefore(B,"minutes")?R++:R=0,B=window.moment(O[0].end.dateTime)}O.forEach((N,ee)=>{let q=30+R*10,F=(i-q)/O.length;r(5,h=[...h,{event:N,x:q+F*ee,y:VT(N,n),width:F,height:KT(N,n),fullDay:N.start.date!=null}])})}},_=()=>_r(void 0,void 0,void 0,function*(){if(!a.isValid())return;let S=yield or({startDate:a,include:s,exclude:l});JSON.stringify(S)!=JSON.stringify(d)&&(d=S,r(5,h=[]),m()),r(3,c=!1)}),E=(S,R)=>{R.shiftKey?window.open(S.htmlLink):new fi(S,()=>{Ai(),r(0,a),r(9,g)}).open()};$s(()=>{clearInterval(g)});let w=(S,R)=>E(S.event,R);return e.$$set=S=>{"height"in S&&r(1,n=S.height),"width"in S&&r(2,i=S.width),"date"in S&&r(0,a=S.date),"include"in S&&r(7,s=S.include),"exclude"in S&&r(8,l=S.exclude)},e.$$.update=()=>{if(e.$$.dirty&513){e:r(0,a),r(9,g),g&&clearInterval(g),r(3,c=!0),r(9,g=setInterval(y,5e3)),y()}},[a,n,i,c,f,h,E,s,l,g,w]}var ZT=class extends gn{constructor(t){super();In(this,t,nq,rq,Tn,{height:1,width:2,date:0,include:7,exclude:8},$F)}},$T=ZT;function iq(e){ai(e,"svelte-169s007",".fixedSizeButton.svelte-169s007{text-align:center;padding:10px 5%;margin:0}.titleContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}.navigationContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:space-around;flex-wrap:wrap;padding-bottom:30px}")}function eA(e){let t,r,n,i,a,s=e[0].format("YYYY-MM-DD")+"",l,c,f,d,h,g,y,m,_,E,w,S,R,B;return{c(){t=ae("div"),r=ae("button"),r.textContent="+",n=Oe(),i=ae("h3"),a=$t("Google Calendar "),l=$t(s),c=Oe(),f=ae("div"),d=ae("button"),d.textContent="<<",h=Oe(),g=ae("button"),g.textContent="<",y=Oe(),m=ae("button"),m.textContent="Today",_=Oe(),E=ae("button"),E.textContent=">",w=Oe(),S=ae("button"),S.textContent=">>",te(r,"aria-label","Create Event"),te(t,"class","titleContainer svelte-169s007"),te(d,"class","fixedSizeButton svelte-169s007"),te(d,"aria-label","Back 1 week"),te(g,"class","fixedSizeButton svelte-169s007"),te(g,"aria-label","Back 1 day"),te(m,"class","fixedSizeButton svelte-169s007"),te(m,"aria-label","Jump to today"),te(E,"class","fixedSizeButton svelte-169s007"),te(E,"aria-label","Forward 1 day"),te(S,"class","fixedSizeButton svelte-169s007"),te(S,"aria-label","Forward 1 week"),te(f,"class","navigationContainer svelte-169s007")},m(O,N){be(O,t,N),re(t,r),re(t,n),re(t,i),re(i,a),re(i,l),be(O,c,N),be(O,f,N),re(f,d),re(f,h),re(f,g),re(f,y),re(f,m),re(f,_),re(f,E),re(f,w),re(f,S),R||(B=[Qe(r,"click",e[11]),Qe(d,"click",e[6]),Qe(g,"click",e[7]),Qe(m,"click",e[8]),Qe(E,"click",e[10]),Qe(S,"click",e[9])],R=!0)},p(O,N){N&1&&s!==(s=O[0].format("YYYY-MM-DD")+"")&&oi(l,s)},d(O){O&&Ce(t),O&&Ce(c),O&&Ce(f),R=!1,Yr(B)}}}function aq(e){let t,r,n,i,a,s=e[3]&&e[0]&&eA(e);function l(f){e[13](f)}let c={height:e[1],width:e[2],include:e[4],exclude:e[5]};return e[0]!==void 0&&(c.date=e[0]),n=new $T({props:c}),An.push(()=>xa(n,"date",l)),{c(){t=ae("div"),s&&s.c(),r=Oe(),Wu(n.$$.fragment),et(t,"padding-left","10px")},m(f,d){be(f,t,d),s&&s.m(t,null),re(t,r),Cl(n,t,null),a=!0},p(f,[d]){f[3]&&f[0]?s?s.p(f,d):(s=eA(f),s.c(),s.m(t,r)):s&&(s.d(1),s=null);let h={};d&2&&(h.height=f[1]),d&4&&(h.width=f[2]),d&16&&(h.include=f[4]),d&32&&(h.exclude=f[5]),!i&&d&1&&(i=!0,h.date=f[0],ba(()=>i=!1)),n.$set(h)},i(f){a||(li(n.$$.fragment,f),a=!0)},o(f){Ii(n.$$.fragment,f),a=!1},d(f){f&&Ce(t),s&&s.d(),to(n)}}}function sq(e,t,r){let{height:n=void 0}=t,{width:i=void 0}=t,{date:a=void 0}=t,{navigation:s=!1}=t,{include:l}=t,{exclude:c}=t,f=0,d=()=>r(12,f-=7),h=()=>r(12,f-=1),g=()=>r(12,f=0),y=()=>r(12,f+=7),m=()=>r(12,f+=1),_=w=>{new fi({start:{},end:{}},()=>{Ai(),r(0,a),r(3,s),r(12,f)}).open()};function E(w){a=w,r(0,a),r(3,s),r(12,f)}return e.$$set=w=>{"height"in w&&r(1,n=w.height),"width"in w&&r(2,i=w.width),"date"in w&&r(0,a=w.date),"navigation"in w&&r(3,s=w.navigation),"include"in w&&r(4,l=w.include),"exclude"in w&&r(5,c=w.exclude)},e.$$.update=()=>{if(e.$$.dirty&4105){e:r(0,a=s?window.moment().local().add(f,"days"):a)}},[a,n,i,s,l,c,d,h,g,y,m,_,f,E]}var tA=class extends gn{constructor(t){super();In(this,t,sq,aq,Tn,{height:1,width:2,date:0,navigation:3,include:4,exclude:5},iq)}},uh=tA;function oq(e){ai(e,"svelte-1ficnkj",".fullSize.svelte-1ficnkj,.content.svelte-1ficnkj,.box.svelte-1ficnkj{width:100%;height:100%;overflow:scoll !important}")}function lq(e){let t,r,n=`${e[0]}px`,i=`${e[1]}px`;return{c(){t=ae("webview"),Gu(t.src,r=e[3])||te(t,"src",r),te(t,"allowpopups",""),et(t,"width",n,!1),et(t,"height",i,!1)},m(a,s){be(a,t,s),e[7](t)},p(a,s){s&8&&!Gu(t.src,r=a[3])&&te(t,"src",r),s&1&&n!==(n=`${a[0]}px`)&&et(t,"width",n,!1),s&2&&i!==(i=`${a[1]}px`)&&et(t,"height",i,!1)},d(a){a&&Ce(t),e[7](null)}}}function uq(e){let t,r;return{c(){t=ae("webview"),Gu(t.src,r=e[3])||te(t,"src",r),te(t,"allowpopups",""),te(t,"class","fullSize svelte-1ficnkj")},m(n,i){be(n,t,i),e[6](t)},p(n,i){i&8&&!Gu(t.src,r=n[3])&&te(t,"src",r)},d(n){n&&Ce(t),e[6](null)}}}function cq(e){let t,r;function n(s,l){return s[0]==0?uq:lq}let i=n(e,-1),a=i(e);return{c(){t=ae("div"),r=ae("div"),a.c(),te(r,"class","content svelte-1ficnkj"),te(t,"class","box svelte-1ficnkj")},m(s,l){be(s,t,l),re(t,r),a.m(r,null)},p(s,[l]){i===(i=n(s,l))&&a?a.p(s,l):(a.d(1),a=i(s),a&&(a.c(),a.m(r,null)))},i:bt,o:bt,d(s){s&&Ce(t),a.d()}}}function fq(e,t,r){let n=kt.getInstance(),{date:i=window.moment()}=t,{width:a=0}=t,{height:s=0}=t,{theme:l=n.settings.webViewDefaultColorMode}=t,c,f="";i.isValid()?f=`https://calendar.google.com/calendar/u/0/r/day/${i.format("yyyy/M/D")}`:f="https://calendar.google.com/calendar/u/0/r/day/",Zs(()=>{l=="auto"&&r(4,l=lh()),l=="dark"&&c.addEventListener("dom-ready",()=>{c.insertCSS(`
                html {
                    filter: hue-rotate(180deg)invert(100)contrast(93%) !important;
                }
            
            `)})});function d(g){An[g?"unshift":"push"](()=>{c=g,r(2,c)})}function h(g){An[g?"unshift":"push"](()=>{c=g,r(2,c)})}return e.$$set=g=>{"date"in g&&r(5,i=g.date),"width"in g&&r(0,a=g.width),"height"in g&&r(1,s=g.height),"theme"in g&&r(4,l=g.theme)},[a,s,c,f,l,i,d,h]}var rA=class extends gn{constructor(t){super();In(this,t,fq,cq,Tn,{date:5,width:0,height:1,theme:4},oq)}},ch=rA;var aJ=mt(require("obsidian"));function qr(){}function tc(e,t){for(let r in t)e[r]=t[r];return e}function dq(e){return e&&typeof e=="object"&&typeof e.then=="function"}function nA(e){return e()}function iA(){return Object.create(null)}function cs(e){e.forEach(nA)}function Ji(e){return typeof e=="function"}function km(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function fh(e,t){return e!=e?t==t:e!==t}function hq(e){return Object.keys(e).length===0}function aA(e,t,r,n){if(e){let i=sA(e,t,r,n);return e[0](i)}}function sA(e,t,r,n){return e[1]&&n?tc(r.ctx.slice(),e[1](n(t))):r.ctx}function pq(e,t,r,n){if(e[2]&&n){let i=e[2](n(r));if(t.dirty===void 0)return i;if(typeof i=="object"){let a=[],s=Math.max(t.dirty.length,i.length);for(let l=0;l<s;l+=1)a[l]=t.dirty[l]|i[l];return a}return t.dirty|i}return t.dirty}function oA(e,t,r,n,i,a,s){let l=pq(t,n,i,a);if(l){let c=sA(t,r,n,s);e.p(c,l)}}function Rl(e){return e==null?"":e}function dt(e,t){e.appendChild(t)}function Gr(e,t,r){e.insertBefore(t,r||null)}function Rr(e){e.parentNode.removeChild(e)}function dh(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function qt(e){return document.createElement(e)}function Bl(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function co(e){return document.createTextNode(e)}function qn(){return co(" ")}function hh(){return co("")}function Aa(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function st(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function lA(e,t){let r=Object.getOwnPropertyDescriptors(e.__proto__);for(let n in t)t[n]==null?e.removeAttribute(n):n==="style"?e.style.cssText=t[n]:n==="__value"?e.value=e[n]=t[n]:r[n]&&r[n].set?e[n]=t[n]:st(e,n,t[n])}function gq(e){return Array.from(e.childNodes)}function rc(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function wr(e,t,r){e.classList[r?"add":"remove"](t)}var ph;function fs(e){ph=e}function mq(){if(!ph)throw new Error("Function called outside component initialization");return ph}var nc=[],uA=[],gh=[],cA=[],yq=Promise.resolve(),Rm=!1;function vq(){Rm||(Rm=!0,yq.then(Om))}function Bm(e){gh.push(e)}var Nm=!1,Dm=new Set;function Om(){if(!Nm){Nm=!0;do{for(let e=0;e<nc.length;e+=1){let t=nc[e];fs(t),_q(t.$$)}for(fs(null),nc.length=0;uA.length;)uA.pop()();for(let e=0;e<gh.length;e+=1){let t=gh[e];Dm.has(t)||(Dm.add(t),t())}gh.length=0}while(nc.length);for(;cA.length;)cA.pop()();Rm=!1,Nm=!1,Dm.clear()}}function _q(e){if(e.fragment!==null){e.update(),cs(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Bm)}}var mh=new Set,fo;function ho(){fo={r:0,c:[],p:fo}}function po(){fo.r||cs(fo.c),fo=fo.p}function Ht(e,t){e&&e.i&&(mh.delete(e),e.i(t))}function lr(e,t,r,n){if(e&&e.o){if(mh.has(e))return;mh.add(e),fo.c.push(()=>{mh.delete(e),n&&(r&&e.d(1),n())}),e.o(t)}}function fA(e,t){let r=t.token={};function n(i,a,s,l){if(t.token!==r)return;t.resolved=l;let c=t.ctx;s!==void 0&&(c=c.slice(),c[s]=l);let f=i&&(t.current=i)(c),d=!1;t.block&&(t.blocks?t.blocks.forEach((h,g)=>{g!==a&&h&&(ho(),lr(h,1,1,()=>{t.blocks[g]===h&&(t.blocks[g]=null)}),po())}):t.block.d(1),f.c(),Ht(f,1),f.m(t.mount(),t.anchor),d=!0),t.block=f,t.blocks&&(t.blocks[a]=f),d&&Om()}if(dq(e)){let i=mq();if(e.then(a=>{fs(i),n(t.then,1,t.value,a),fs(null)},a=>{if(fs(i),n(t.catch,2,t.error,a),fs(null),!t.hasCatch)throw a}),t.current!==t.pending)return n(t.pending,0),!0}else{if(t.current!==t.then)return n(t.then,1,t.value,e),!0;t.resolved=e}}function dA(e,t){lr(e,1,1,()=>{t.delete(e.key)})}function hA(e,t,r,n,i,a,s,l,c,f,d,h){let g=e.length,y=a.length,m=g,_={};for(;m--;)_[e[m].key]=m;let E=[],w=new Map,S=new Map;for(m=y;m--;){let N=h(i,a,m),ee=r(N),q=s.get(ee);q?n&&q.p(N,t):(q=f(ee,N),q.c()),w.set(ee,E[m]=q),ee in _&&S.set(ee,Math.abs(m-_[ee]))}let R=new Set,B=new Set;function O(N){Ht(N,1),N.m(l,d),s.set(N.key,N),d=N.first,y--}for(;g&&y;){let N=E[y-1],ee=e[g-1],q=N.key,F=ee.key;N===ee?(d=N.first,g--,y--):w.has(F)?!s.has(q)||R.has(q)?O(N):B.has(F)?g--:S.get(q)>S.get(F)?(B.add(q),O(N)):(R.add(F),g--):(c(ee,s),g--)}for(;g--;){let N=e[g];w.has(N.key)||c(N,s)}for(;y;)O(E[y-1]);return E}function yh(e,t){let r={},n={},i={$$scope:1},a=e.length;for(;a--;){let s=e[a],l=t[a];if(l){for(let c in s)c in l||(n[c]=1);for(let c in l)i[c]||(r[c]=l[c],i[c]=1);e[a]=l}else for(let c in s)i[c]=1}for(let s in n)s in r||(r[s]=void 0);return r}function Lm(e){return typeof e=="object"&&e!==null?e:{}}function Ia(e){e&&e.c()}function Zi(e,t,r,n){let{fragment:i,on_mount:a,on_destroy:s,after_update:l}=e.$$;i&&i.m(t,r),n||Bm(()=>{let c=a.map(nA).filter(Ji);s?s.push(...c):cs(c),e.$$.on_mount=[]}),l.forEach(Bm)}function $i(e,t){let r=e.$$;r.fragment!==null&&(cs(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function Eq(e,t){e.$$.dirty[0]===-1&&(nc.push(e),vq(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function go(e,t,r,n,i,a,s=[-1]){let l=ph;fs(e);let c=e.$$={fragment:null,ctx:null,props:a,update:qr,not_equal:i,bound:iA(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:iA(),dirty:s,skip_bound:!1},f=!1;if(c.ctx=r?r(e,t.props||{},(d,h,...g)=>{let y=g.length?g[0]:h;return c.ctx&&i(c.ctx[d],c.ctx[d]=y)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](y),f&&Eq(e,d)),h}):[],c.update(),f=!0,cs(c.before_update),c.fragment=n?n(c.ctx):!1,t.target){if(t.hydrate){let d=gq(t.target);c.fragment&&c.fragment.l(d),d.forEach(Rr)}else c.fragment&&c.fragment.c();t.intro&&Ht(e.$$.fragment),Zi(e,t.target,t.anchor,t.customElement),Om()}fs(l)}var ds=class{$destroy(){$i(this,1),this.$destroy=qr}$on(t,r){let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!hq(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}};function wq(e,t="day"){let r=e.clone().startOf(t).format();return`${t}-${r}`}var vh=wq;function Cq(){var e=qt("style");e.id="svelte-1widvzq-style",e.textContent=".dot.svelte-1widvzq,.hollow.svelte-1widvzq{display:inline-block;height:6px;width:6px;margin:0 1px}.filled.svelte-1widvzq{fill:var(--color-dot)}.active.filled.svelte-1widvzq{fill:var(--text-on-accent)}.hollow.svelte-1widvzq{fill:none;stroke:var(--color-dot)}.active.hollow.svelte-1widvzq{fill:none;stroke:var(--text-on-accent)}",dt(document.head,e)}function bq(e){let t,r,n;return{c(){t=Bl("svg"),r=Bl("circle"),st(r,"cx","3"),st(r,"cy","3"),st(r,"r","2"),st(t,"class",n=""+(Rl(`hollow ${e[0]}`)+" svelte-1widvzq")),st(t,"viewBox","0 0 6 6"),st(t,"xmlns","http://www.w3.org/2000/svg"),wr(t,"active",e[2])},m(i,a){Gr(i,t,a),dt(t,r)},p(i,a){a&1&&n!==(n=""+(Rl(`hollow ${i[0]}`)+" svelte-1widvzq"))&&st(t,"class",n),a&5&&wr(t,"active",i[2])},d(i){i&&Rr(t)}}}function xq(e){let t,r,n;return{c(){t=Bl("svg"),r=Bl("circle"),st(r,"cx","3"),st(r,"cy","3"),st(r,"r","2"),st(t,"class",n=""+(Rl(`dot filled ${e[0]}`)+" svelte-1widvzq")),st(t,"viewBox","0 0 6 6"),st(t,"xmlns","http://www.w3.org/2000/svg"),wr(t,"active",e[2])},m(i,a){Gr(i,t,a),dt(t,r)},p(i,a){a&1&&n!==(n=""+(Rl(`dot filled ${i[0]}`)+" svelte-1widvzq"))&&st(t,"class",n),a&5&&wr(t,"active",i[2])},d(i){i&&Rr(t)}}}function Sq(e){let t;function r(a,s){return a[1]?xq:bq}let n=r(e),i=n(e);return{c(){i.c(),t=hh()},m(a,s){i.m(a,s),Gr(a,t,s)},p(a,[s]){n===(n=r(a))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(t.parentNode,t)))},i:qr,o:qr,d(a){i.d(a),a&&Rr(t)}}}function Tq(e,t,r){let{className:n=""}=t,{isFilled:i}=t,{isActive:a}=t;return e.$$set=s=>{"className"in s&&r(0,n=s.className),"isFilled"in s&&r(1,i=s.isFilled),"isActive"in s&&r(2,a=s.isActive)},[n,i,a]}var Pm=class extends ds{constructor(t){super();document.getElementById("svelte-1widvzq-style")||Cq(),go(this,t,Tq,Sq,km,{className:0,isFilled:1,isActive:2})}},Aq=e=>({}),pA=e=>({metadata:null}),Iq=e=>({metadata:e&1}),gA=e=>({metadata:e[3]});function kq(e){let t,r=e[2].default,n=aA(r,e,e[1],pA);return{c(){n&&n.c()},m(i,a){n&&n.m(i,a),t=!0},p(i,a){n&&n.p&&a&2&&oA(n,r,i,i[1],a,Aq,pA)},i(i){t||(Ht(n,i),t=!0)},o(i){lr(n,i),t=!1},d(i){n&&n.d(i)}}}function Rq(e){let t,r,n,i={ctx:e,current:null,token:null,hasCatch:!1,pending:Dq,then:Nq,catch:Bq,value:3,blocks:[,,,]};return fA(r=e[0],i),{c(){t=hh(),i.block.c()},m(a,s){Gr(a,t,s),i.block.m(a,i.anchor=s),i.mount=()=>t.parentNode,i.anchor=t,n=!0},p(a,s){if(e=a,i.ctx=e,!(s&1&&r!==(r=e[0])&&fA(r,i))){let l=e.slice();l[3]=i.resolved,i.block.p(l,s)}},i(a){n||(Ht(i.block),n=!0)},o(a){for(let s=0;s<3;s+=1){let l=i.blocks[s];lr(l)}n=!1},d(a){a&&Rr(t),i.block.d(a),i.token=null,i=null}}}function Bq(e){return{c:qr,m:qr,p:qr,i:qr,o:qr,d:qr}}function Nq(e){let t,r=e[2].default,n=aA(r,e,e[1],gA);return{c(){n&&n.c()},m(i,a){n&&n.m(i,a),t=!0},p(i,a){n&&n.p&&a&3&&oA(n,r,i,i[1],a,Iq,gA)},i(i){t||(Ht(n,i),t=!0)},o(i){lr(n,i),t=!1},d(i){n&&n.d(i)}}}function Dq(e){return{c:qr,m:qr,p:qr,i:qr,o:qr,d:qr}}function Oq(e){let t,r,n,i,a=[Rq,kq],s=[];function l(c,f){return c[0]?0:1}return t=l(e),r=s[t]=a[t](e),{c(){r.c(),n=hh()},m(c,f){s[t].m(c,f),Gr(c,n,f),i=!0},p(c,[f]){let d=t;t=l(c),t===d?s[t].p(c,f):(ho(),lr(s[d],1,1,()=>{s[d]=null}),po(),r=s[t],r?r.p(c,f):(r=s[t]=a[t](c),r.c()),Ht(r,1),r.m(n.parentNode,n))},i(c){i||(Ht(r),i=!0)},o(c){lr(r),i=!1},d(c){s[t].d(c),c&&Rr(n)}}}function Lq(e,t,r){let{$$slots:n={},$$scope:i}=t,{metadata:a}=t;return e.$$set=s=>{"metadata"in s&&r(0,a=s.metadata),"$$scope"in s&&r(1,i=s.$$scope)},[a,i,n]}var Um=class extends ds{constructor(t){super();go(this,t,Lq,Oq,fh,{metadata:0})}};function Pq(){return navigator.appVersion.indexOf("Mac")!==-1}function _h(e){return Pq()?e.metaKey:e.ctrlKey}function Uq(...e){return window.moment.weekdaysShort(!0)}function mA(e){return e.isoWeekday()===6||e.isoWeekday()===7}function Mq(e){return e[0].weekday(0)}function Fq(e,...t){let r=window.moment().locale(),n=[],i,a=e.clone().locale(r).date(1),s=a.weekday(),l=a.clone().subtract(s,"days");for(let c=0;c<42;c++)c%7==0&&(i={days:[],weekNum:l.week()},n.push(i)),i.days.push(l),l=l.clone().add(1,"days");return n}function qq(){var e=qt("style");e.id="svelte-q3wqg9-style",e.textContent=".day.svelte-q3wqg9{background-color:var(--color-background-day);border-radius:4px;color:var(--color-text-day);cursor:pointer;font-size:0.8em;height:100%;padding:4px;position:relative;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.day.svelte-q3wqg9:hover{background-color:var(--interactive-hover)}.day.active.svelte-q3wqg9:hover{background-color:var(--interactive-accent-hover)}.adjacent-month.svelte-q3wqg9{opacity:0.25}.today.svelte-q3wqg9{color:var(--color-text-today)}.day.svelte-q3wqg9:active,.active.svelte-q3wqg9,.active.today.svelte-q3wqg9{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-q3wqg9{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",dt(document.head,e)}function yA(e,t,r){let n=e.slice();return n[11]=t[r],n}function vA(e){let t,r,n=[e[11]],i={};for(let a=0;a<n.length;a+=1)i=tc(i,n[a]);return t=new Pm({props:i}),{c(){Ia(t.$$.fragment)},m(a,s){Zi(t,a,s),r=!0},p(a,s){let l=s&128?yh(n,[Lm(a[11])]):{};t.$set(l)},i(a){r||(Ht(t.$$.fragment,a),r=!0)},o(a){lr(t.$$.fragment,a),r=!1},d(a){$i(t,a)}}}function Gq(e){let t,r=e[0].format("D")+"",n,i,a,s,l,c,f,d=e[7].dots,h=[];for(let _=0;_<d.length;_+=1)h[_]=vA(yA(e,d,_));let g=_=>lr(h[_],1,1,()=>{h[_]=null}),y=[{class:s=`day ${e[7].classes.join(" ")}`},e[7].dataAttributes||{}],m={};for(let _=0;_<y.length;_+=1)m=tc(m,y[_]);return{c(){t=qt("div"),n=co(r),i=qn(),a=qt("div");for(let _=0;_<h.length;_+=1)h[_].c();st(a,"class","dot-container svelte-q3wqg9"),lA(t,m),wr(t,"active",e[6]===vh(e[0],"day")),wr(t,"adjacent-month",!e[0].isSame(e[5],"month")),wr(t,"today",e[0].isSame(e[4],"day")),wr(t,"svelte-q3wqg9",!0)},m(_,E){Gr(_,t,E),dt(t,n),dt(t,i),dt(t,a);for(let w=0;w<h.length;w+=1)h[w].m(a,null);l=!0,c||(f=[Aa(t,"click",function(){Ji(e[2]&&e[8])&&(e[2]&&e[8]).apply(this,arguments)}),Aa(t,"contextmenu",function(){Ji(e[3]&&e[9])&&(e[3]&&e[9]).apply(this,arguments)}),Aa(t,"pointerover",function(){Ji(e[1]&&e[10])&&(e[1]&&e[10]).apply(this,arguments)})],c=!0)},p(_,E){if(e=_,(!l||E&1)&&r!==(r=e[0].format("D")+"")&&rc(n,r),E&128){d=e[7].dots;let w;for(w=0;w<d.length;w+=1){let S=yA(e,d,w);h[w]?(h[w].p(S,E),Ht(h[w],1)):(h[w]=vA(S),h[w].c(),Ht(h[w],1),h[w].m(a,null))}for(ho(),w=d.length;w<h.length;w+=1)g(w);po()}lA(t,m=yh(y,[(!l||E&128&&s!==(s=`day ${e[7].classes.join(" ")}`))&&{class:s},E&128&&(e[7].dataAttributes||{})])),wr(t,"active",e[6]===vh(e[0],"day")),wr(t,"adjacent-month",!e[0].isSame(e[5],"month")),wr(t,"today",e[0].isSame(e[4],"day")),wr(t,"svelte-q3wqg9",!0)},i(_){if(!l){for(let E=0;E<d.length;E+=1)Ht(h[E]);l=!0}},o(_){h=h.filter(Boolean);for(let E=0;E<h.length;E+=1)lr(h[E]);l=!1},d(_){_&&Rr(t),dh(h,_),c=!1,cs(f)}}}function Vq(e){let t,r,n;return r=new Um({props:{metadata:e[7],$$slots:{default:[Gq,({metadata:i})=>({7:i}),({metadata:i})=>i?128:0]},$$scope:{ctx:e}}}),{c(){t=qt("td"),Ia(r.$$.fragment)},m(i,a){Gr(i,t,a),Zi(r,t,null),n=!0},p(i,[a]){let s={};a&128&&(s.metadata=i[7]),a&16639&&(s.$$scope={dirty:a,ctx:i}),r.$set(s)},i(i){n||(Ht(r.$$.fragment,i),n=!0)},o(i){lr(r.$$.fragment,i),n=!1},d(i){i&&Rr(t),$i(r)}}}function Kq(e,t,r){let{date:n}=t,{metadata:i}=t,{onHover:a}=t,{onClick:s}=t,{onContextMenu:l}=t,{today:c}=t,{displayedMonth:f=null}=t,{selectedId:d=null}=t,h=m=>s(n,_h(m)),g=m=>l(n,m),y=m=>a(n,m.target,_h(m));return e.$$set=m=>{"date"in m&&r(0,n=m.date),"metadata"in m&&r(7,i=m.metadata),"onHover"in m&&r(1,a=m.onHover),"onClick"in m&&r(2,s=m.onClick),"onContextMenu"in m&&r(3,l=m.onContextMenu),"today"in m&&r(4,c=m.today),"displayedMonth"in m&&r(5,f=m.displayedMonth),"selectedId"in m&&r(6,d=m.selectedId)},[n,a,s,l,c,f,d,i,h,g,y]}var _A=class extends ds{constructor(t){super();document.getElementById("svelte-q3wqg9-style")||qq(),go(this,t,Kq,Vq,fh,{date:0,metadata:7,onHover:1,onClick:2,onContextMenu:3,today:4,displayedMonth:5,selectedId:6})}};function jq(){var e=qt("style");e.id="svelte-156w7na-style",e.textContent=".arrow.svelte-156w7na.svelte-156w7na{align-items:center;cursor:pointer;display:flex;justify-content:center;width:24px}.arrow.is-mobile.svelte-156w7na.svelte-156w7na{width:32px}.right.svelte-156w7na.svelte-156w7na{transform:rotate(180deg)}.arrow.svelte-156w7na svg.svelte-156w7na{color:var(--color-arrow);height:16px;width:16px}",dt(document.head,e)}function Hq(e){let t,r,n,i,a;return{c(){t=qt("div"),r=Bl("svg"),n=Bl("path"),st(n,"fill","currentColor"),st(n,"d","M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"),st(r,"focusable","false"),st(r,"role","img"),st(r,"xmlns","http://www.w3.org/2000/svg"),st(r,"viewBox","0 0 320 512"),st(r,"class","svelte-156w7na"),st(t,"class","arrow svelte-156w7na"),st(t,"aria-label",e[1]),wr(t,"is-mobile",e[3]),wr(t,"right",e[2]==="right")},m(s,l){Gr(s,t,l),dt(t,r),dt(r,n),i||(a=Aa(t,"click",function(){Ji(e[0])&&e[0].apply(this,arguments)}),i=!0)},p(s,[l]){e=s,l&2&&st(t,"aria-label",e[1]),l&4&&wr(t,"right",e[2]==="right")},i:qr,o:qr,d(s){s&&Rr(t),i=!1,a()}}}function Wq(e,t,r){let{onClick:n}=t,{tooltip:i}=t,{direction:a}=t,s=window.app.isMobile;return e.$$set=l=>{"onClick"in l&&r(0,n=l.onClick),"tooltip"in l&&r(1,i=l.tooltip),"direction"in l&&r(2,a=l.direction)},[n,i,a,s]}var Mm=class extends ds{constructor(t){super();document.getElementById("svelte-156w7na-style")||jq(),go(this,t,Wq,Hq,km,{onClick:0,tooltip:1,direction:2})}};function Yq(){var e=qt("style");e.id="svelte-1vwr9dd-style",e.textContent=".nav.svelte-1vwr9dd.svelte-1vwr9dd{align-items:center;display:flex;margin:0.6em 0 1em;padding:0 8px;width:100%}.nav.is-mobile.svelte-1vwr9dd.svelte-1vwr9dd{padding:0}.title.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--color-text-title);font-size:1.5em;margin:0}.is-mobile.svelte-1vwr9dd .title.svelte-1vwr9dd{font-size:1.3em}.month.svelte-1vwr9dd.svelte-1vwr9dd{font-weight:500;text-transform:capitalize}.year.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--interactive-accent)}.right-nav.svelte-1vwr9dd.svelte-1vwr9dd{display:flex;justify-content:center;margin-left:auto}.reset-button.svelte-1vwr9dd.svelte-1vwr9dd{cursor:pointer;border-radius:4px;color:var(--text-muted);font-size:0.7em;font-weight:600;letter-spacing:1px;margin:0 4px;padding:0px 4px;text-transform:uppercase}.is-mobile.svelte-1vwr9dd .reset-button.svelte-1vwr9dd{display:none}",dt(document.head,e)}function zq(e){let t,r,n,i=e[0].format("MMM")+"",a,s,l,c=e[0].format("YYYY")+"",f,d,h,g,y,m,_,E,w,S,R;return g=new Mm({props:{direction:"left",onClick:e[3],tooltip:"Previous Month"}}),E=new Mm({props:{direction:"right",onClick:e[2],tooltip:"Next Month"}}),{c(){t=qt("div"),r=qt("h3"),n=qt("span"),a=co(i),s=qn(),l=qt("span"),f=co(c),d=qn(),h=qt("div"),Ia(g.$$.fragment),y=qn(),m=qt("div"),m.textContent=`${e[4]}`,_=qn(),Ia(E.$$.fragment),st(n,"class","month svelte-1vwr9dd"),st(l,"class","year svelte-1vwr9dd"),st(r,"class","title svelte-1vwr9dd"),st(m,"class","reset-button svelte-1vwr9dd"),st(h,"class","right-nav svelte-1vwr9dd"),st(t,"class","nav svelte-1vwr9dd"),wr(t,"is-mobile",e[5])},m(B,O){Gr(B,t,O),dt(t,r),dt(r,n),dt(n,a),dt(r,s),dt(r,l),dt(l,f),dt(t,d),dt(t,h),Zi(g,h,null),dt(h,y),dt(h,m),dt(h,_),Zi(E,h,null),w=!0,S||(R=[Aa(r,"click",function(){Ji(e[1])&&e[1].apply(this,arguments)}),Aa(m,"click",function(){Ji(e[1])&&e[1].apply(this,arguments)})],S=!0)},p(B,[O]){e=B,(!w||O&1)&&i!==(i=e[0].format("MMM")+"")&&rc(a,i),(!w||O&1)&&c!==(c=e[0].format("YYYY")+"")&&rc(f,c);let N={};O&8&&(N.onClick=e[3]),g.$set(N);let ee={};O&4&&(ee.onClick=e[2]),E.$set(ee)},i(B){w||(Ht(g.$$.fragment,B),Ht(E.$$.fragment,B),w=!0)},o(B){lr(g.$$.fragment,B),lr(E.$$.fragment,B),w=!1},d(B){B&&Rr(t),$i(g),$i(E),S=!1,cs(R)}}}function Qq(e,t,r){let{displayedMonth:n}=t,{today:i}=t,{resetDisplayedMonth:a}=t,{incrementDisplayedMonth:s}=t,{decrementDisplayedMonth:l}=t,c=i.calendar().split(/\d|\s/)[0],f=window.app.isMobile;return e.$$set=d=>{"displayedMonth"in d&&r(0,n=d.displayedMonth),"today"in d&&r(6,i=d.today),"resetDisplayedMonth"in d&&r(1,a=d.resetDisplayedMonth),"incrementDisplayedMonth"in d&&r(2,s=d.incrementDisplayedMonth),"decrementDisplayedMonth"in d&&r(3,l=d.decrementDisplayedMonth)},[n,a,s,l,c,f,i]}var EA=class extends ds{constructor(t){super();document.getElementById("svelte-1vwr9dd-style")||Yq(),go(this,t,Qq,zq,km,{displayedMonth:0,today:6,resetDisplayedMonth:1,incrementDisplayedMonth:2,decrementDisplayedMonth:3})}};function Xq(){var e=qt("style");e.id="svelte-egt0yd-style",e.textContent="td.svelte-egt0yd{border-right:1px solid var(--background-modifier-border)}.week-num.svelte-egt0yd{background-color:var(--color-background-weeknum);border-radius:4px;color:var(--color-text-weeknum);cursor:pointer;font-size:0.65em;height:100%;padding:4px;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.week-num.svelte-egt0yd:hover{background-color:var(--interactive-hover)}.week-num.active.svelte-egt0yd:hover{background-color:var(--interactive-accent-hover)}.active.svelte-egt0yd{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-egt0yd{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",dt(document.head,e)}function wA(e,t,r){let n=e.slice();return n[11]=t[r],n}function CA(e){let t,r,n=[e[11]],i={};for(let a=0;a<n.length;a+=1)i=tc(i,n[a]);return t=new Pm({props:i}),{c(){Ia(t.$$.fragment)},m(a,s){Zi(t,a,s),r=!0},p(a,s){let l=s&64?yh(n,[Lm(a[11])]):{};t.$set(l)},i(a){r||(Ht(t.$$.fragment,a),r=!0)},o(a){lr(t.$$.fragment,a),r=!1},d(a){$i(t,a)}}}function Jq(e){let t,r,n,i,a,s,l,c,f=e[6].dots,d=[];for(let g=0;g<f.length;g+=1)d[g]=CA(wA(e,f,g));let h=g=>lr(d[g],1,1,()=>{d[g]=null});return{c(){t=qt("div"),r=co(e[0]),n=qn(),i=qt("div");for(let g=0;g<d.length;g+=1)d[g].c();st(i,"class","dot-container svelte-egt0yd"),st(t,"class",a=""+(Rl(`week-num ${e[6].classes.join(" ")}`)+" svelte-egt0yd")),wr(t,"active",e[5]===vh(e[1][0],"week"))},m(g,y){Gr(g,t,y),dt(t,r),dt(t,n),dt(t,i);for(let m=0;m<d.length;m+=1)d[m].m(i,null);s=!0,l||(c=[Aa(t,"click",function(){Ji(e[3]&&e[8])&&(e[3]&&e[8]).apply(this,arguments)}),Aa(t,"contextmenu",function(){Ji(e[4]&&e[9])&&(e[4]&&e[9]).apply(this,arguments)}),Aa(t,"pointerover",function(){Ji(e[2]&&e[10])&&(e[2]&&e[10]).apply(this,arguments)})],l=!0)},p(g,y){if(e=g,(!s||y&1)&&rc(r,e[0]),y&64){f=e[6].dots;let m;for(m=0;m<f.length;m+=1){let _=wA(e,f,m);d[m]?(d[m].p(_,y),Ht(d[m],1)):(d[m]=CA(_),d[m].c(),Ht(d[m],1),d[m].m(i,null))}for(ho(),m=f.length;m<d.length;m+=1)h(m);po()}(!s||y&64&&a!==(a=""+(Rl(`week-num ${e[6].classes.join(" ")}`)+" svelte-egt0yd")))&&st(t,"class",a),y&98&&wr(t,"active",e[5]===vh(e[1][0],"week"))},i(g){if(!s){for(let y=0;y<f.length;y+=1)Ht(d[y]);s=!0}},o(g){d=d.filter(Boolean);for(let y=0;y<d.length;y+=1)lr(d[y]);s=!1},d(g){g&&Rr(t),dh(d,g),l=!1,cs(c)}}}function Zq(e){let t,r,n;return r=new Um({props:{metadata:e[6],$$slots:{default:[Jq,({metadata:i})=>({6:i}),({metadata:i})=>i?64:0]},$$scope:{ctx:e}}}),{c(){t=qt("td"),Ia(r.$$.fragment),st(t,"class","svelte-egt0yd")},m(i,a){Gr(i,t,a),Zi(r,t,null),n=!0},p(i,[a]){let s={};a&64&&(s.metadata=i[6]),a&16639&&(s.$$scope={dirty:a,ctx:i}),r.$set(s)},i(i){n||(Ht(r.$$.fragment,i),n=!0)},o(i){lr(r.$$.fragment,i),n=!1},d(i){i&&Rr(t),$i(r)}}}function $q(e,t,r){let{weekNum:n}=t,{days:i}=t,{metadata:a}=t,{onHover:s}=t,{onClick:l}=t,{onContextMenu:c}=t,{selectedId:f=null}=t,d,h=m=>l(d,_h(m)),g=m=>c(i[0],m),y=m=>s(d,m.target,_h(m));return e.$$set=m=>{"weekNum"in m&&r(0,n=m.weekNum),"days"in m&&r(1,i=m.days),"metadata"in m&&r(6,a=m.metadata),"onHover"in m&&r(2,s=m.onHover),"onClick"in m&&r(3,l=m.onClick),"onContextMenu"in m&&r(4,c=m.onContextMenu),"selectedId"in m&&r(5,f=m.selectedId)},e.$$.update=()=>{e.$$.dirty&2&&r(7,d=Mq(i))},[n,i,s,l,c,f,a,d,h,g,y]}var bA=class extends ds{constructor(t){super();document.getElementById("svelte-egt0yd-style")||Xq(),go(this,t,$q,Zq,fh,{weekNum:0,days:1,metadata:6,onHover:2,onClick:3,onContextMenu:4,selectedId:5})}};function xA(e){return M(this,null,function*(){let t={dots:[],classes:[],dataAttributes:{}};return(yield Promise.all(e)).reduce((n,i)=>({classes:[...n.classes,...i.classes||[]],dataAttributes:Object.assign(n.dataAttributes,i.dataAttributes),dots:[...n.dots,...i.dots||[]]}),t)})}function SA(e,t,...r){return xA(e.map(n=>n.getDailyMetadata(t)))}function TA(e,t,...r){return xA(e.map(n=>n.getWeeklyMetadata(t)))}function eG(){var e=qt("style");e.id="svelte-pcimu8-style",e.textContent=".container.svelte-pcimu8{--color-background-heading:transparent;--color-background-day:transparent;--color-background-weeknum:transparent;--color-background-weekend:transparent;--color-dot:var(--text-muted);--color-arrow:var(--text-muted);--color-button:var(--text-muted);--color-text-title:var(--text-normal);--color-text-heading:var(--text-muted);--color-text-day:var(--text-normal);--color-text-today:var(--interactive-accent);--color-text-weeknum:var(--text-muted)}.container.svelte-pcimu8{padding:0 8px}.container.is-mobile.svelte-pcimu8{padding:0}th.svelte-pcimu8{text-align:center}.weekend.svelte-pcimu8{background-color:var(--color-background-weekend)}.calendar.svelte-pcimu8{border-collapse:collapse;width:100%}th.svelte-pcimu8{background-color:var(--color-background-heading);color:var(--color-text-heading);font-size:0.6em;letter-spacing:1px;padding:4px;text-transform:uppercase}",dt(document.head,e)}function AA(e,t,r){let n=e.slice();return n[18]=t[r],n}function IA(e,t,r){let n=e.slice();return n[21]=t[r],n}function kA(e,t,r){let n=e.slice();return n[24]=t[r],n}function RA(e,t,r){let n=e.slice();return n[27]=t[r],n}function BA(e){let t;return{c(){t=qt("col")},m(r,n){Gr(r,t,n)},d(r){r&&Rr(t)}}}function NA(e){let t;return{c(){t=qt("col"),st(t,"class","svelte-pcimu8"),wr(t,"weekend",mA(e[27]))},m(r,n){Gr(r,t,n)},p(r,n){n&16384&&wr(t,"weekend",mA(r[27]))},d(r){r&&Rr(t)}}}function DA(e){let t;return{c(){t=qt("th"),t.textContent="W",st(t,"class","svelte-pcimu8")},m(r,n){Gr(r,t,n)},d(r){r&&Rr(t)}}}function OA(e){let t,r=e[24]+"",n;return{c(){t=qt("th"),n=co(r),st(t,"class","svelte-pcimu8")},m(i,a){Gr(i,t,a),dt(t,n)},p(i,a){a&32768&&r!==(r=i[24]+"")&&rc(n,r)},d(i){i&&Rr(t)}}}function LA(e){let t,r,n=[e[18],{metadata:TA(e[8],e[18].days[0],e[10])},{onClick:e[7]},{onContextMenu:e[5]},{onHover:e[3]},{selectedId:e[9]}],i={};for(let a=0;a<n.length;a+=1)i=tc(i,n[a]);return t=new bA({props:i}),{c(){Ia(t.$$.fragment)},m(a,s){Zi(t,a,s),r=!0},p(a,s){let l=s&18344?yh(n,[s&16384&&Lm(a[18]),s&17664&&{metadata:TA(a[8],a[18].days[0],a[10])},s&128&&{onClick:a[7]},s&32&&{onContextMenu:a[5]},s&8&&{onHover:a[3]},s&512&&{selectedId:a[9]}]):{};t.$set(l)},i(a){r||(Ht(t.$$.fragment,a),r=!0)},o(a){lr(t.$$.fragment,a),r=!1},d(a){$i(t,a)}}}function PA(e,t){let r,n,i;return n=new _A({props:{date:t[21],today:t[10],displayedMonth:t[0],onClick:t[6],onContextMenu:t[4],onHover:t[2],metadata:SA(t[8],t[21],t[10]),selectedId:t[9]}}),{key:e,first:null,c(){r=hh(),Ia(n.$$.fragment),this.first=r},m(a,s){Gr(a,r,s),Zi(n,a,s),i=!0},p(a,s){t=a;let l={};s&16384&&(l.date=t[21]),s&1024&&(l.today=t[10]),s&1&&(l.displayedMonth=t[0]),s&64&&(l.onClick=t[6]),s&16&&(l.onContextMenu=t[4]),s&4&&(l.onHover=t[2]),s&17664&&(l.metadata=SA(t[8],t[21],t[10])),s&512&&(l.selectedId=t[9]),n.$set(l)},i(a){i||(Ht(n.$$.fragment,a),i=!0)},o(a){lr(n.$$.fragment,a),i=!1},d(a){a&&Rr(r),$i(n,a)}}}function UA(e,t){let r,n,i=[],a=new Map,s,l,c=t[1]&&LA(t),f=t[18].days,d=h=>h[21].format();for(let h=0;h<f.length;h+=1){let g=IA(t,f,h),y=d(g);a.set(y,i[h]=PA(y,g))}return{key:e,first:null,c(){r=qt("tr"),c&&c.c(),n=qn();for(let h=0;h<i.length;h+=1)i[h].c();s=qn(),this.first=r},m(h,g){Gr(h,r,g),c&&c.m(r,null),dt(r,n);for(let y=0;y<i.length;y+=1)i[y].m(r,null);dt(r,s),l=!0},p(h,g){t=h,t[1]?c?(c.p(t,g),g&2&&Ht(c,1)):(c=LA(t),c.c(),Ht(c,1),c.m(r,n)):c&&(ho(),lr(c,1,1,()=>{c=null}),po()),g&18261&&(f=t[18].days,ho(),i=hA(i,g,d,1,t,f,a,r,dA,PA,s,IA),po())},i(h){if(!l){Ht(c);for(let g=0;g<f.length;g+=1)Ht(i[g]);l=!0}},o(h){lr(c);for(let g=0;g<i.length;g+=1)lr(i[g]);l=!1},d(h){h&&Rr(r),c&&c.d();for(let g=0;g<i.length;g+=1)i[g].d()}}}function tG(e){let t,r,n,i,a,s,l,c,f,d,h,g,y=[],m=new Map,_;r=new EA({props:{today:e[10],displayedMonth:e[0],incrementDisplayedMonth:e[11],decrementDisplayedMonth:e[12],resetDisplayedMonth:e[13]}});let E=e[1]&&BA(),w=e[14][1].days,S=[];for(let q=0;q<w.length;q+=1)S[q]=NA(RA(e,w,q));let R=e[1]&&DA(),B=e[15],O=[];for(let q=0;q<B.length;q+=1)O[q]=OA(kA(e,B,q));let N=e[14],ee=q=>q[18].weekNum;for(let q=0;q<N.length;q+=1){let F=AA(e,N,q),ce=ee(F);m.set(ce,y[q]=UA(ce,F))}return{c(){t=qt("div"),Ia(r.$$.fragment),n=qn(),i=qt("table"),a=qt("colgroup"),E&&E.c(),s=qn();for(let q=0;q<S.length;q+=1)S[q].c();l=qn(),c=qt("thead"),f=qt("tr"),R&&R.c(),d=qn();for(let q=0;q<O.length;q+=1)O[q].c();h=qn(),g=qt("tbody");for(let q=0;q<y.length;q+=1)y[q].c();st(i,"class","calendar svelte-pcimu8"),st(t,"id","calendar-container"),st(t,"class","container svelte-pcimu8"),wr(t,"is-mobile",e[16])},m(q,F){Gr(q,t,F),Zi(r,t,null),dt(t,n),dt(t,i),dt(i,a),E&&E.m(a,null),dt(a,s);for(let ce=0;ce<S.length;ce+=1)S[ce].m(a,null);dt(i,l),dt(i,c),dt(c,f),R&&R.m(f,null),dt(f,d);for(let ce=0;ce<O.length;ce+=1)O[ce].m(f,null);dt(i,h),dt(i,g);for(let ce=0;ce<y.length;ce+=1)y[ce].m(g,null);_=!0},p(q,[F]){let ce={};if(F&1024&&(ce.today=q[10]),F&1&&(ce.displayedMonth=q[0]),r.$set(ce),q[1]?E||(E=BA(),E.c(),E.m(a,s)):E&&(E.d(1),E=null),F&16384){w=q[14][1].days;let se;for(se=0;se<w.length;se+=1){let ve=RA(q,w,se);S[se]?S[se].p(ve,F):(S[se]=NA(ve),S[se].c(),S[se].m(a,null))}for(;se<S.length;se+=1)S[se].d(1);S.length=w.length}if(q[1]?R||(R=DA(),R.c(),R.m(f,d)):R&&(R.d(1),R=null),F&32768){B=q[15];let se;for(se=0;se<B.length;se+=1){let ve=kA(q,B,se);O[se]?O[se].p(ve,F):(O[se]=OA(ve),O[se].c(),O[se].m(f,null))}for(;se<O.length;se+=1)O[se].d(1);O.length=B.length}F&18431&&(N=q[14],ho(),y=hA(y,F,ee,1,q,N,m,g,dA,UA,null,AA),po())},i(q){if(!_){Ht(r.$$.fragment,q);for(let F=0;F<N.length;F+=1)Ht(y[F]);_=!0}},o(q){lr(r.$$.fragment,q);for(let F=0;F<y.length;F+=1)lr(y[F]);_=!1},d(q){q&&Rr(t),$i(r),E&&E.d(),dh(S,q),R&&R.d(),dh(O,q);for(let F=0;F<y.length;F+=1)y[F].d()}}}function rG(e,t,r){let{localeData:n}=t,{showWeekNums:i=!1}=t,{onHoverDay:a}=t,{onHoverWeek:s}=t,{onContextMenuDay:l}=t,{onContextMenuWeek:c}=t,{onClickDay:f}=t,{onClickWeek:d}=t,{sources:h=[]}=t,{selectedId:g}=t,{today:y=window.moment()}=t,{displayedMonth:m=y}=t,_,E,w=window.app.isMobile;function S(){r(0,m=m.clone().add(1,"month"))}function R(){r(0,m=m.clone().subtract(1,"month"))}function B(){r(0,m=y.clone())}return e.$$set=O=>{"localeData"in O&&r(17,n=O.localeData),"showWeekNums"in O&&r(1,i=O.showWeekNums),"onHoverDay"in O&&r(2,a=O.onHoverDay),"onHoverWeek"in O&&r(3,s=O.onHoverWeek),"onContextMenuDay"in O&&r(4,l=O.onContextMenuDay),"onContextMenuWeek"in O&&r(5,c=O.onContextMenuWeek),"onClickDay"in O&&r(6,f=O.onClickDay),"onClickWeek"in O&&r(7,d=O.onClickWeek),"sources"in O&&r(8,h=O.sources),"selectedId"in O&&r(9,g=O.selectedId),"today"in O&&r(10,y=O.today),"displayedMonth"in O&&r(0,m=O.displayedMonth)},e.$$.update=()=>{e.$$.dirty&131073&&r(14,_=Fq(m,n)),e.$$.dirty&132096&&r(15,E=Uq(y,n))},[m,i,a,s,l,c,f,d,h,g,y,S,R,B,_,E,w,n]}var Eh=class extends ds{constructor(t){super();document.getElementById("svelte-pcimu8-style")||eG(),go(this,t,rG,tG,fh,{localeData:17,showWeekNums:1,onHoverDay:2,onHoverWeek:3,onContextMenuDay:4,onContextMenuWeek:5,onClickDay:6,onClickWeek:7,sources:8,selectedId:9,today:10,displayedMonth:0,incrementDisplayedMonth:11,decrementDisplayedMonth:12,resetDisplayedMonth:13})}get incrementDisplayedMonth(){return this.$$.ctx[11]}get decrementDisplayedMonth(){return this.$$.ctx[12]}get resetDisplayedMonth(){return this.$$.ctx[13]}};var Fm=mt(_l());function nG(e){let t,r,n,i=`${e[1]}px`,a=`${e[2]}px`,s,l=[sG,aG],c=[];function f(d,h){return d[3]?0:1}return r=f(e,-1),n=c[r]=l[r](e),{c(){t=ae("div"),n.c(),te(t,"class","calendarContainer"),et(t,"width",i,!1),et(t,"height",a,!1)},m(d,h){be(d,t,h),c[r].m(t,null),s=!0},p(d,h){let g=r;r=f(d,h),r===g?c[r].p(d,h):(Wd(),Ii(c[g],1,1,()=>{c[g]=null}),Yd(),n=c[r],n?n.p(d,h):(n=c[r]=l[r](d),n.c()),li(n,1),n.m(t,null)),h&2&&i!==(i=`${d[1]}px`)&&et(t,"width",i,!1),h&4&&a!==(a=`${d[2]}px`)&&et(t,"height",a,!1)},i(d){s||(li(n),s=!0)},o(d){Ii(n),s=!1},d(d){d&&Ce(t),c[r].d()}}}function iG(e){let t,r,n,i,a=[lG,oG],s=[];function l(c,f){return c[3]?0:1}return r=l(e,-1),n=s[r]=a[r](e),{c(){t=ae("div"),n.c(),te(t,"class","calendarContainer")},m(c,f){be(c,t,f),s[r].m(t,null),i=!0},p(c,f){let d=r;r=l(c,f),r===d?s[r].p(c,f):(Wd(),Ii(s[d],1,1,()=>{s[d]=null}),Yd(),n=s[r],n?n.p(c,f):(n=s[r]=a[r](c),n.c()),li(n,1),n.m(t,null))},i(c){i||(li(n),i=!0)},o(c){Ii(n),i=!1},d(c){c&&Ce(t),s[r].d()}}}function aG(e){let t,r,n,i,a,s;function l(h){e[13](h)}function c(h){e[14](h)}function f(h){e[15](h)}let d={showWeekNums:!1,onClickDay:e[6]};return e[4]!==void 0&&(d.sources=e[4]),e[0]!==void 0&&(d.displayedMonth=e[0]),e[5]!==void 0&&(d.today=e[5]),r=new Eh({props:d}),An.push(()=>xa(r,"sources",l)),An.push(()=>xa(r,"displayedMonth",c)),An.push(()=>xa(r,"today",f)),{c(){t=ae("div"),Wu(r.$$.fragment)},m(h,g){be(h,t,g),Cl(r,t,null),s=!0},p(h,g){let y={};!n&&g&16&&(n=!0,y.sources=h[4],ba(()=>n=!1)),!i&&g&1&&(i=!0,y.displayedMonth=h[0],ba(()=>i=!1)),!a&&g&32&&(a=!0,y.today=h[5],ba(()=>a=!1)),r.$set(y)},i(h){s||(li(r.$$.fragment,h),s=!0)},o(h){Ii(r.$$.fragment,h),s=!1},d(h){h&&Ce(t),to(r)}}}function sG(e){let t;return{c(){t=ae("p"),t.textContent="Loading..."},m(r,n){be(r,t,n)},p:bt,i:bt,o:bt,d(r){r&&Ce(t)}}}function oG(e){let t,r,n,i,a,s;function l(h){e[10](h)}function c(h){e[11](h)}function f(h){e[12](h)}let d={showWeekNums:!1,onClickDay:e[6]};return e[4]!==void 0&&(d.sources=e[4]),e[0]!==void 0&&(d.displayedMonth=e[0]),e[5]!==void 0&&(d.today=e[5]),r=new Eh({props:d}),An.push(()=>xa(r,"sources",l)),An.push(()=>xa(r,"displayedMonth",c)),An.push(()=>xa(r,"today",f)),{c(){t=ae("div"),Wu(r.$$.fragment)},m(h,g){be(h,t,g),Cl(r,t,null),s=!0},p(h,g){let y={};!n&&g&16&&(n=!0,y.sources=h[4],ba(()=>n=!1)),!i&&g&1&&(i=!0,y.displayedMonth=h[0],ba(()=>i=!1)),!a&&g&32&&(a=!0,y.today=h[5],ba(()=>a=!1)),r.$set(y)},i(h){s||(li(r.$$.fragment,h),s=!0)},o(h){Ii(r.$$.fragment,h),s=!1},d(h){h&&Ce(t),to(r)}}}function lG(e){let t;return{c(){t=ae("p"),t.textContent="Loading..."},m(r,n){be(r,t,n)},p:bt,i:bt,o:bt,d(r){r&&Ce(t)}}}function uG(e){let t,r,n,i,a=[iG,nG],s=[];function l(c,f){return c[1]==0||c[2]==0?0:1}return t=l(e,-1),r=s[t]=a[t](e),{c(){r.c(),n=si()},m(c,f){s[t].m(c,f),be(c,n,f),i=!0},p(c,[f]){let d=t;t=l(c,f),t===d?s[t].p(c,f):(Wd(),Ii(s[d],1,1,()=>{s[d]=null}),Yd(),r=s[t],r?r.p(c,f):(r=s[t]=a[t](c),r.c()),li(r,1),r.m(n.parentNode,n))},i(c){i||(li(r),i=!0)},o(c){Ii(r),i=!1},d(c){s[t].d(c),c&&Ce(n)}}}function cG(e,t,r){let{displayedMonth:n=window.moment()}=t,{width:i=0}=t,{height:a=0}=t,{include:s}=t,{exclude:l}=t,c,f,d=!0,h,g=window.moment();function y(N){return _r(this,void 0,void 0,function*(){r(5,g=window.moment());let ee=N.clone().startOf("month").subtract(6,"days"),q=N.clone().endOf("month").add(12,"days"),F=yield or({startDate:ee,endDate:q,include:s,exclude:l});if(Fm.default.isEqual(F,f))return;let ce=Fm.default.groupBy(F,ve=>{var Ie;return window.moment((Ie=ve.start.date)!==null&&Ie!==void 0?Ie:ve.start.dateTime).startOf("day").format()});f=F;let se={getDailyMetadata:ve=>_r(this,void 0,void 0,function*(){let Ie=ce[ve.startOf("day").format()];if(!Ie)return{dataAttributes:{amount:"0"},dots:[]};let Be=Array(Ie.length).fill({isFilled:!0,className:"googleCalendarDot",color:"#FFFFFF"});return{dataAttributes:{amount:Ie.length+""},dots:Be}})};r(3,d=!1),r(4,h=null),r(4,h=[se])})}let m=(N,ee)=>N.filter(q=>q.start.date?window.moment(q.start.date).isSame(ee,"day"):window.moment(q.start.dateTime).isSame(ee,"day")),_=(N,ee)=>{new ki(m(f,N),"details",N,!1,()=>{Ai(),r(0,n)}).open()};$s(()=>{clearInterval(c)});function E(N){h=N,r(4,h)}function w(N){n=N,r(0,n)}function S(N){g=N,r(5,g)}function R(N){h=N,r(4,h)}function B(N){n=N,r(0,n)}function O(N){g=N,r(5,g)}return e.$$set=N=>{"displayedMonth"in N&&r(0,n=N.displayedMonth),"width"in N&&r(1,i=N.width),"height"in N&&r(2,a=N.height),"include"in N&&r(7,s=N.include),"exclude"in N&&r(8,l=N.exclude)},e.$$.update=()=>{if(e.$$.dirty&513){e:c&&clearInterval(c),r(9,c=setInterval(()=>y(n),1e4)),y(n)}},[n,i,a,d,h,g,_,s,l,c,E,w,S,R,B,O]}var MA=class extends gn{constructor(t){super();In(this,t,cG,uG,Tn,{displayedMonth:0,width:1,height:2,include:7,exclude:8})}},wh=MA;function fG(e){ai(e,"svelte-1f1t9un",'.scheduleContainer.svelte-1f1t9un{padding:10px}.scheduleContent.svelte-1f1t9un{display:flex;flex-direction:column;align-items:flex-start;white-space:nowrap}.dayContainer.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;border-bottom:1px solid white;margin:2px 0px;padding:2px 0px;flex-wrap:wrap}.dateDisplay.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-end;width:105px;min-width:105px}.dayNumber.svelte-1f1t9un{border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;display:inline-block;font-weight:bold;line-height:40px;text-align:center;width:40px;min-width:40px;cursor:pointer}.today.svelte-1f1t9un{color:white;background:#4285f4;text-decoration:none}.dayText.svelte-1f1t9un{font-size:15px}.dayEvents.svelte-1f1t9un{display:flex;flex-direction:column;flex:1}.dayEvent.svelte-1f1t9un{display:flex;flex:1;flex-direction:row;align-items:center;padding:5px;border-radius:10px;cursor:pointer;flex-wrap:wrap}.dayEvent.svelte-1f1t9un:hover{background-color:rgba(128, 128, 128, 0.129)}.circleTime.svelte-1f1t9un{display:flex;flex-direction:row;width:220px;min-width:220px}.recurringCircleContainer.svelte-1f1t9un,.circleContainer.svelte-1f1t9un{position:relative;display:flex;width:30px;min-width:30px;height:30px;align-items:center;justify-content:center}.recurringCircleContainer.svelte-1f1t9un::after{content:"\u21BA";position:absolute;width:30px;height:30px;text-align:center;line-height:30px;font-size:30px;color:rgb(164, 164, 164);white-space:nowrap}.circle.svelte-1f1t9un{width:10px;min-width:10px;height:10px;border-radius:50%}.timeContainer.svelte-1f1t9un{width:150px;min-width:150px}.eventTitleContainer.svelte-1f1t9un{white-space:nowrap}')}function FA(e,t,r){let n=e.slice();return n[15]=t[r][0],n[1]=t[r][1],n}function qA(e,t,r){let n=e.slice();return n[18]=t[r],n}function dG(e){let t,r=[...e[2]],n=[];for(let i=0;i<r.length;i+=1)n[i]=VA(FA(e,r,i));return{c(){t=ae("div");for(let i=0;i<n.length;i+=1)n[i].c();te(t,"class","scheduleContent svelte-1f1t9un")},m(i,a){be(i,t,a);for(let s=0;s<n.length;s+=1)n[s].m(t,null)},p(i,a){if(a&124){r=[...i[2]];let s;for(s=0;s<r.length;s+=1){let l=FA(i,r,s);n[s]?n[s].p(l,a):(n[s]=VA(l),n[s].c(),n[s].m(t,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){i&&Ce(t),$r(n,i)}}}function hG(e){let t;return{c(){t=ae("span"),t.textContent="LOADING"},m(r,n){be(r,t,n)},p:bt,d(r){r&&Ce(t)}}}function GA(e){let t,r,n,i,a,s,l,c,f=e[3](e[18])+"",d,h,g,y,m=e[18].summary+"",_,E,w,S;function R(...B){return e[13](e[18],...B)}return{c(){t=ae("div"),r=ae("div"),n=ae("div"),i=ae("div"),s=Oe(),l=ae("div"),c=ae("span"),d=$t(f),h=Oe(),g=ae("div"),y=ae("span"),_=$t(m),E=Oe(),te(i,"class","circle svelte-1f1t9un"),et(i,"background",Ru(e[18]),!1),te(n,"class",a=""+(El(e[18].recurringEventId?"recurringCircleContainer":"circleContainer")+" svelte-1f1t9un")),te(l,"class","timeContainer svelte-1f1t9un"),te(r,"class","circleTime svelte-1f1t9un"),te(g,"class","eventTitleContainer svelte-1f1t9un"),te(t,"class","dayEvent svelte-1f1t9un")},m(B,O){be(B,t,O),re(t,r),re(r,n),re(n,i),re(r,s),re(r,l),re(l,c),re(c,d),re(t,h),re(t,g),re(g,y),re(y,_),re(t,E),w||(S=Qe(t,"click",R),w=!0)},p(B,O){e=B},d(B){B&&Ce(t),w=!1,S()}}}function VA(e){let t,r,n,i,a=e[15].slice(0,2)+"",s,l,c,f,d=e[15].slice(2)+"",h,g,y,m,_,E;function w(){return e[12](e[1])}let S=e[1],R=[];for(let B=0;B<S.length;B+=1)R[B]=GA(qA(e,S,B));return{c(){t=ae("div"),r=ae("div"),n=ae("div"),i=ae("span"),s=$t(a),c=Oe(),f=ae("span"),h=$t(d),g=Oe(),y=ae("div");for(let B=0;B<R.length;B+=1)R[B].c();m=Oe(),te(n,"class",l=""+(El(e[6](e[1][0])?"dayNumber today":"dayNumber")+" svelte-1f1t9un")),te(f,"class","dayText svelte-1f1t9un"),te(r,"class","dateDisplay svelte-1f1t9un"),te(y,"class","dayEvents svelte-1f1t9un"),te(t,"class","dayContainer svelte-1f1t9un")},m(B,O){be(B,t,O),re(t,r),re(r,n),re(n,i),re(i,s),re(r,c),re(r,f),re(f,h),re(t,g),re(t,y);for(let N=0;N<R.length;N+=1)R[N].m(y,null);re(t,m),_||(E=Qe(n,"click",w),_=!0)},p(B,O){if(e=B,O&28){S=e[1];let N;for(N=0;N<S.length;N+=1){let ee=qA(e,S,N);R[N]?R[N].p(ee,O):(R[N]=GA(ee),R[N].c(),R[N].m(y,null))}for(;N<R.length;N+=1)R[N].d(1);R.length=S.length}},d(B){B&&Ce(t),$r(R,B),_=!1,E()}}}function pG(e){let t;function r(a,s){return a[0]?hG:dG}let n=r(e,-1),i=n(e);return{c(){t=ae("div"),i.c(),te(t,"class","scheduleContainer svelte-1f1t9un")},m(a,s){be(a,t,s),i.m(t,null)},p(a,[s]){n===(n=r(a,s))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(t,null)))},i:bt,o:bt,d(a){a&&Ce(t),i.d()}}}function gG(e,t,r){let{timeSpan:n=7}=t,{date:i=window.moment()}=t,{include:a}=t,{exclude:s}=t,l,c=new Map,f=!1,d=[],h=()=>_r(void 0,void 0,void 0,function*(){let S=yield or({startDate:i,endDate:i.clone().add(n,"day"),sort:"asc",include:a,exclude:s});if(JSON.stringify(S)==JSON.stringify(d)){r(0,f=!1);return}c.clear(),r(1,d=S),d.forEach(R=>{let B=R.start.date?window.moment(R.start.date).format("DD MMM, ddd"):window.moment(R.start.dateTime).format("DD MMM, ddd");c.has(B)?c.get(B).push(R):c.set(B,[R])}),r(0,f=!1)}),g=S=>{if(S.start.date)return"All day";{let R=window.moment(S.start.dateTime).format("hh:mma"),B=window.moment(S.end.dateTime).format("hh:mma");return`${R}-${B}`}},y=(S,R)=>{R.shiftKey?window.open(S.htmlLink):new fi(S,()=>{Ai(),r(7,i),r(11,l)}).open()},m=S=>_r(void 0,void 0,void 0,function*(){let R=window.moment(S.start.date||S.start.dateTime),B=yield or({startDate:R});new ki(B,"details",R,!1,()=>{Ai(),r(7,i),r(11,l)}).open()}),_=S=>{let R=window.moment(S.start.date||S.start.dateTime);return window.moment().local().isSame(R,"day")};$s(()=>{clearInterval(l)});let E=S=>m(S[0]),w=(S,R)=>y(S,R);return e.$$set=S=>{"timeSpan"in S&&r(8,n=S.timeSpan),"date"in S&&r(7,i=S.date),"include"in S&&r(9,a=S.include),"exclude"in S&&r(10,s=S.exclude)},e.$$.update=()=>{if(e.$$.dirty&2176){e:r(7,i),r(11,l),l&&clearInterval(l),r(0,f=!0),r(11,l=setInterval(h,5e3)),h()}},[f,d,c,g,y,m,_,i,n,a,s,l,E,w]}var KA=class extends gn{constructor(t){super();In(this,t,gG,pG,Tn,{timeSpan:8,date:7,include:9,exclude:10},fG)}},Ch=KA;var jA=mt(require("obsidian")),Nl=class extends jA.MarkdownRenderChild{constructor(t,r,n){super(r);this.a=t,this.b=n}load(){this.comp=new this.a({target:this.containerEl,props:this.b})}unload(){this.comp.$destroy()}};function HA(e,t,r){return M(this,null,function*(){let{type:n,height:i,width:a,date:s,navigation:l,timespan:c,exclude:f,include:d,theme:h}=(0,bh.parseYaml)(e);n||(n=ls.day);let g=["YYYY-MM-DD","YYYY.MM.DD","YYYY/MM/DD","MM-DD-YYYY","MM.DD.YYYY","MM/DD/YYYY","DD-MM-YYYY","DD.MM.YYYY","DD/MM/YYYY"];if(s==null||s=="today"||s=="tomorrow"||s=="yesterday"||window.moment(s,g,!0).isValid()){let y;s==null?y=void 0:s=="today"?y=window.moment():s=="tomorrow"?y=window.moment().add(1,"day"):s=="yesterday"?y=window.moment().subtract(1,"day"):y=window.moment(s),t.style.padding="10px",n==ls.web?bh.Platform.isDesktopApp&&r.addChild(new Nl(ch,t,{height:i!=null?i:500,width:a!=null?a:500,date:y,theme:h!=null?h:"auto"})):n==ls.day?r.addChild(new Nl(uh,t,{height:i,width:a,date:y,navigation:l,include:d,exclude:f})):n==ls.month?r.addChild(new Nl(wh,t,{height:i,width:a,displayedMonth:y,include:d,exclude:f})):n==ls.schedule&&r.addChild(new Nl(Ch,t,{timeSpan:c,date:y,include:d,exclude:f}))}})}var WA=mt(require("obsidian"));var ic="google-calendar-view-day",qm=class extends WA.ItemView{constructor(t){super(t)}getViewType(){return ic}getDisplayText(){return"Timeline View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.timeline=new uh({target:this.contentEl,props:{navigation:!0}})})}onClose(){return M(this,null,function*(){this.timeline.$destroy()})}};var YA=mt(require("obsidian"));var ac="google-calendar-view-month",Gm=class extends YA.ItemView{constructor(t){super(t)}getViewType(){return ac}getDisplayText(){return"Calendar Month View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.calendar=new wh({target:this.contentEl,props:{}})})}onClose(){return M(this,null,function*(){this.calendar.$destroy()})}};var zA=mt(require("obsidian"));var sc="google-calendar-view-web",Vm=class extends zA.ItemView{constructor(t){super(t)}getViewType(){return sc}getDisplayText(){return"Calendar Web View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.calendar=new ch({target:this.contentEl})})}onClose(){return M(this,null,function*(){this.calendar.$destroy()})}};var QA=mt(require("obsidian"));var oc="google-calendar-view-schedule",Km=class extends QA.ItemView{constructor(t){super(t)}getViewType(){return oc}getDisplayText(){return"Schedule View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.calendar=new Ch({target:this.contentEl,props:{}})})}onClose(){return M(this,null,function*(){this.calendar.$destroy()})}};var XA=mt(require("obsidian")),jm=class extends XA.FuzzySuggestModal{constructor(t,r,n,i,a){super(kt.getInstance().app);this.eventList=t,this.setPlaceholder("Select an event to insert"),this.editor=r,this.start=n,this.end=i,this.word=a}getItems(){return this.eventList}getItemText(t){return`${t.summary}	`}onChooseItem(t){return M(this,null,function*(){let r=`[${t.summary}](${t.htmlLink}&cal=${t.parent.id})`;this.editor.replaceRange(r,this.start,this.end,this.word)})}};function JA(e){lc("@today",e)||lc("@tomorrow",e)||lc("@yesterday",e)||lc("@REGEX",e)||lc("@YYYY-MM-DD",e)}function lc(e,t){var s;let r=t.getCursor(),n=t.getCursor(),i="",a=window.moment();if(e==="@REGEX"){let l=t.getLine(r.line);if(l.length>50)return!1;let c=(s=l.match(/.*@([+,-])(\d+) /))!=null?s:[];if(c.length!=3||t.getCursor().ch!=c.index+c[0].length)return!1;if(n=on(Zr({},r),{ch:r.ch-c[1].length-c[2].length-1}),n.ch<0)return;i=t.getRange(n,r),c[1]=="+"?a=window.moment().add(c[2],"day"):a=window.moment().subtract(c[2],"day")}else if(e==="@YYYY-MM-DD"){if(n=on(Zr({},r),{ch:r.ch-e.length}),i=t.getRange(n,r),i.length!="@YYYY-MM-DD".length||!i.startsWith("@")||i.substring(1).length>100)return!1;let l=window.moment(i.substring(1));if(l.isValid())a=l;else return!1}else{if(n=on(Zr({},r),{ch:r.ch-e.length}),n.ch<0||t.getRange(n,r)!=e)return!1;switch(e){case"@today":a=window.moment();break;case"@tomorrow":a=window.moment().add(1,"day");break;case"@yesterday":a=window.moment().add(-1,"day");break;default:return!1}}return or({startDate:a}).then(l=>{new jm(l,t,n,r,i).open()}),!0}var ZA=mt(require("obsidian"));function xh(e,t){return M(this,null,function*(){if(!jt())return null;let r=yield(0,ZA.requestUrl)({url:`https://www.googleapis.com/calendar/v3/calendars/${t}/events/${e}`,headers:{Authorization:"Bearer "+(yield Sn())}});return r.status!==200?(fr("Could not get Google Event"),null):yield r.json})}var $A=mt(_l());function mG(e){return M(this,null,function*(){let t=/\[.*]\(https:\/\/www\.google\.com\/calendar\/event\?eid=(.*)&cal=(.*)\)/g,r,n=[];do r=t.exec(e),r&&n.push(r);while(r);return n.length?yield Promise.all(n.map(a=>M(this,null,function*(){if(a){let s=atob(a[1]).split(" ")[0];return yield xh(s,a[2])}}))):[]})}function e2(e){return M(this,null,function*(){let t=e.getCursor(),r=e.getValue(),n=/{{gEvent(\d?).(.*)}} /g,i,a=[];do i=n.exec(r),i&&a.push(i);while(i);if(!a.length)return;let s=yield mG(r);!s.length||a.forEach(l=>M(this,null,function*(){let c=l[1]?parseInt(l[1]):0,f=e.getCursor();if(f.ch-=3,e.getRange(f,e.getCursor())!="}} ")return!1;let d=$A.default.get(s[c],l[2],"");d===Object(d)&&(d=JSON.stringify(d)),r=r.replace(l[0],d!=null?d:""),e.setValue(r),t.ch+=d.length-l[0].length,e.setCursor(t)}))})}var t2=mt(require("obsidian"));var Dl=[".anyoneCanAddSelf",".attachments",".attachments[0]",".attachments[0]fileId",".attachments[0]fileUrl",".attachments[0]iconLink",".attachments[0]mimeType",".attachments[0]title",".attendees",".attendeesOmitted",".attendees[0]",".attendees[0].additionalGuests",".attendees[0].comment",".attendees[0].displayName",".attendees[0].email",".attendees[0].id",".attendees[0].optional",".attendees[0].organizer",".attendees[0].resource",".attendees[0].responseStatus",".attendees[0].self",".colorId",".conferenceData",".conferenceData.conferenceId",".conferenceData.conferenceSolution",".conferenceData.conferenceSolution.iconUri",".conferenceData.conferenceSolution.key",".conferenceData.conferenceSolution.key.type",".conferenceData.conferenceSolution.name",".conferenceData.createRequest",".conferenceData.createRequest.conferenceSolutionKey",".conferenceData.createRequest.conferenceSolutionKey.type",".conferenceData.createRequest.requestId",".conferenceData.createRequest.status",".conferenceData.createRequest.status.statusCode",".conferenceData.entryPoints",".conferenceData.entryPoints[0]",".conferenceData.entryPoints[0].accessCode",".conferenceData.entryPoints[0].entryPointType",".conferenceData.entryPoints[0].label",".conferenceData.entryPoints[0].meetingCode",".conferenceData.entryPoints[0].passcode",".conferenceData.entryPoints[0].password",".conferenceData.entryPoints[0].pin",".conferenceData.entryPoints[0].uri",".conferenceData.notes",".conferenceData.signature",".created",".creator",".creator.displayName",".creator.email",".creator.id",".creator.self",".description",".end",".end.date",".end.dateTime",".end.timeZone",".endTimeUnspecified",".etag",".eventType",".extendedProperties",".extendedProperties.private",".extendedProperties.shared",".gadget",".gadget.display",".gadget.height",".gadget.iconLink",".gadget.link",".gadget.preferences",".gadget.title",".gadget.type",".gadget.width",".guestsCanInviteOthers",".guestsCanModify",".guestsCanSeeOtherGuests",".hangoutLink",".htmlLink",".iCalUID",".id",".kind",".location",".locked",".organizer",".organizer.displayName",".organizer.email",".organizer.id",".organizer.self",".originalStartTime",".originalStartTime.date",".originalStartTime.dateTime",".originalStartTime.timeZone",".privateCopy",".parent",".parent.kind",".parent.id",".parent.summary",".parent.description",".parent.location",".parent.timeZone",".parent.conferenceProperties",".parent.conferenceProperties.allowedConferenceSolutionTypes",".recurrence",".recurrence[0]",".recurringEventId",".reminders",".reminders.overrides",".reminders.overrides[0]",".reminders.overrides[0].method",".reminders.overrides[0].minutes",".reminders.useDefault",".sequence",".source",".source.title",".source.url",".start",".start.date",".start.dateTime",".start.timeZone",".status",".summary",".transparency",".updated",".visibility"];var Hm=class extends t2.EditorSuggest{constructor(t){super(t)}onTrigger(t,r){let i=r.getLine(t.line).substring(0,t.ch).match(/{{gEvent(\d)?(\S+$)/);if(i){let a="{{gEvent".length;return i[1]&&a++,{end:t,start:{ch:i.index+a,line:t.line},query:i[2]}}}getSuggestions(t){return Dl.filter(r=>t.query===r.substring(0,t.query.length))}renderSuggestion(t,r){r.createEl("span",{text:t,cls:"suggestionText"})}selectSuggestion(t){if(!this.context)return;let{editor:r}=this.context;if(r.replaceRange(t,this.context.start,this.context.end),Dl.filter(i=>i.startsWith(`${t}.`)).length==0){let i=r.getCursor(),a=structuredClone(i);a.ch+=2,(r.getLine(a.line).length<a.ch||r.getRange(i,a)!="}}")&&r.replaceRange("}}",i),r.setCursor(a)}}};var m2=mt(require("obsidian"));var uc=mt(require("obsidian")),Wm=class extends uc.Modal{constructor(t,r){super(t);this.onSubmit=r}onOpen(){let{contentEl:t}=this;t.createEl("h1",{text:"Enter a name for the template"}),new uc.Setting(t).setName("Name").addText(r=>r.onChange(n=>{this.result=n})),new uc.Setting(t).addButton(r=>r.setButtonText("Save").setCta().onClick(()=>{this.close(),this.onSubmit(this.result)}))}onClose(){let{contentEl:t}=this;t.empty()}};function yG(e){ai(e,"svelte-6isfqn",".optionContainer.svelte-6isfqn{display:flex;flex-direction:column}.header.svelte-6isfqn{display:grid;grid-template-columns:[first] 30% auto [last] 30%}.center.svelte-6isfqn{text-align:center}.settingsContainer.svelte-6isfqn{display:flex;flex-direction:row;flex:1 1;gap:20px}.optionItem.svelte-6isfqn{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.input.svelte-6isfqn,.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{width:100%;display:flex;flex-direction:column}.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{padding-left:16px}button.svelte-6isfqn{align-self:center}")}function r2(e,t,r){let n=e.slice();return n[21]=t[r],n}function n2(e,t,r){let n=e.slice();return n[21]=t[r],n}function i2(e,t,r){let n=e.slice();return n[26]=t[r],n[27]=t,n[28]=r,n}function a2(e,t,r){let n=e.slice();return n[29]=t[r],n[30]=t,n[31]=r,n}function s2(e,t,r){let n=e.slice();return n[32]=t[r],n}function o2(e){let t,r=e[0].settings.insertTemplates,n=[];for(let i=0;i<r.length;i+=1)n[i]=l2(s2(e,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=si()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);be(i,t,a)},p(i,a){if(a[0]&1){r=i[0].settings.insertTemplates;let s;for(s=0;s<r.length;s+=1){let l=s2(i,r,s);n[s]?n[s].p(l,a):(n[s]=l2(l),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){$r(n,i),i&&Ce(t)}}}function l2(e){let t,r=e[32].name+"",n,i;return{c(){t=ae("option"),n=$t(r),t.__value=i=e[32].name,t.value=t.__value},m(a,s){be(a,t,s),re(t,n)},p(a,s){s[0]&1&&r!==(r=a[32].name+"")&&oi(n,r),s[0]&1&&i!==(i=a[32].name)&&(t.__value=i,t.value=t.__value)},d(a){a&&Ce(t)}}}function vG(e){let t;return{c(){t=ae("span"),t.textContent="Loading..."},m(r,n){be(r,t,n)},p:bt,d(r){r&&Ce(t)}}}function _G(e){let t,r=e[4],n=[];for(let i=0;i<r.length;i+=1)n[i]=u2(a2(e,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=si()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);be(i,t,a)},p(i,a){if(a[0]&144){r=i[4];let s;for(s=0;s<r.length;s+=1){let l=a2(i,r,s);n[s]?n[s].p(l,a):(n[s]=u2(l),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){$r(n,i),i&&Ce(t)}}}function u2(e){let t,r,n=e[29][0].summary+"",i,a,s,l,c,f,d,h;function g(){e[17].call(l,e[30],e[31])}return{c(){t=ae("div"),r=ae("label"),i=$t(n),s=Oe(),l=ae("input"),f=Oe(),te(r,"for",a=e[29][0].id),te(l,"type","checkbox"),te(l,"id",c=e[29][0].id),te(t,"class","optionItem svelte-6isfqn")},m(y,m){be(y,t,m),re(t,r),re(r,i),re(t,s),re(t,l),l.checked=e[29][1],re(t,f),d||(h=[Qe(l,"change",g),Qe(l,"change",e[7])],d=!0)},p(y,m){e=y,m[0]&16&&n!==(n=e[29][0].summary+"")&&oi(i,n),m[0]&16&&a!==(a=e[29][0].id)&&te(r,"for",a),m[0]&16&&c!==(c=e[29][0].id)&&te(l,"id",c),m[0]&16&&(l.checked=e[29][1])},d(y){y&&Ce(t),d=!1,Yr(h)}}}function EG(e){let t;return{c(){t=ae("span"),t.textContent="Loading..."},m(r,n){be(r,t,n)},p:bt,d(r){r&&Ce(t)}}}function wG(e){let t,r=e[3],n=[];for(let i=0;i<r.length;i+=1)n[i]=c2(i2(e,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=si()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);be(i,t,a)},p(i,a){if(a[0]&8){r=i[3];let s;for(s=0;s<r.length;s+=1){let l=i2(i,r,s);n[s]?n[s].p(l,a):(n[s]=c2(l),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){$r(n,i),i&&Ce(t)}}}function c2(e){let t,r,n=e[26][0].summary+"",i,a,s,l,c,f,d,h;function g(){e[18].call(l,e[27],e[28])}return{c(){t=ae("div"),r=ae("label"),i=$t(n),s=Oe(),l=ae("input"),f=Oe(),te(r,"for",a=e[26][0].id),te(l,"type","checkbox"),te(l,"id",c=e[26][0].id),te(t,"class","optionItem svelte-6isfqn")},m(y,m){be(y,t,m),re(t,r),re(r,i),re(t,s),re(t,l),l.checked=e[26][1],re(t,f),d||(h=Qe(l,"change",g),d=!0)},p(y,m){e=y,m[0]&8&&n!==(n=e[26][0].summary+"")&&oi(i,n),m[0]&8&&a!==(a=e[26][0].id)&&te(r,"for",a),m[0]&8&&c!==(c=e[26][0].id)&&te(l,"id",c),m[0]&8&&(l.checked=e[26][1])},d(y){y&&Ce(t),d=!1,h()}}}function f2(e){let t,r,n,i,a,s,l,c=Dl,f=[];for(let g=0;g<c.length;g+=1)f[g]=d2(n2(e,c,g));let d=e[5],h=[];for(let g=0;g<d.length;g+=1)h[g]=h2(r2(e,d,g));return{c(){t=ae("h4"),t.textContent="Table structure",r=Oe(),n=ae("select");for(let g=0;g<f.length;g+=1)f[g].c();i=Oe(),a=ae("div");for(let g=0;g<h.length;g+=1)h[g].c();te(n,"name","tableOptions"),te(n,"class","dropdown"),te(a,"class","optionList svelte-6isfqn")},m(g,y){be(g,t,y),be(g,r,y),be(g,n,y);for(let m=0;m<f.length;m+=1)f[m].m(n,null);be(g,i,y),be(g,a,y);for(let m=0;m<h.length;m+=1)h[m].m(a,null);s||(l=Qe(n,"change",e[8]),s=!0)},p(g,y){if(y&0){c=Dl;let m;for(m=0;m<c.length;m+=1){let _=n2(g,c,m);f[m]?f[m].p(_,y):(f[m]=d2(_),f[m].c(),f[m].m(n,null))}for(;m<f.length;m+=1)f[m].d(1);f.length=c.length}if(y[0]&544){d=g[5];let m;for(m=0;m<d.length;m+=1){let _=r2(g,d,m);h[m]?h[m].p(_,y):(h[m]=h2(_),h[m].c(),h[m].m(a,null))}for(;m<h.length;m+=1)h[m].d(1);h.length=d.length}},d(g){g&&Ce(t),g&&Ce(r),g&&Ce(n),$r(f,g),g&&Ce(i),g&&Ce(a),$r(h,g),s=!1,l()}}}function d2(e){let t,r=e[21]+"",n,i;return{c(){t=ae("option"),n=$t(r),t.__value=i=e[21],t.value=t.__value},m(a,s){be(a,t,s),re(t,n)},p:bt,d(a){a&&Ce(t)}}}function h2(e){let t,r,n=e[21]+"",i,a,s,l,c,f,d;function h(){return e[19](e[21])}return{c(){t=ae("div"),r=ae("span"),i=$t(n),a=Oe(),s=ae("input"),c=Oe(),te(s,"type","checkbox"),te(s,"id",l=e[21]),s.checked=!0,te(t,"class","optionItem svelte-6isfqn")},m(g,y){be(g,t,y),re(t,r),re(r,i),re(t,a),re(t,s),re(t,c),f||(d=Qe(s,"click",h),f=!0)},p(g,y){e=g,y[0]&32&&n!==(n=e[21]+"")&&oi(i,n),y[0]&32&&l!==(l=e[21])&&te(s,"id",l)},d(g){g&&Ce(t),f=!1,d()}}}function CG(e){let t,r,n,i,a,s,l,c,f,d,h,g,y,m,_,E,w,S,R,B,O,N,ee,q,F,ce,se,ve,Ie,Be,Se,Te,_e,Xe,Ve,yt,ht,ze=e[0].settings.insertTemplates.length&&o2(e);function fe(D,L){return D[4]?_G:vG}let pt=fe(e,[-1,-1]),tt=pt(e);function vt(D,L){return D[3]?wG:EG}let Je=vt(e,[-1,-1]),we=Je(e),A=e[2]=="table"&&f2(e);return{c(){t=ae("div"),r=ae("div"),n=ae("select"),i=ae("option"),i.textContent="None",ze&&ze.c(),a=Oe(),s=ae("h1"),s.textContent="Insert Options",l=Oe(),c=ae("button"),c.textContent="Save as template",f=Oe(),d=ae("hr"),h=Oe(),g=ae("div"),y=ae("div"),m=ae("label"),m.textContent="Insert type",_=Oe(),E=ae("select"),w=ae("option"),w.textContent="Bullet",S=ae("option"),S.textContent="Table",R=Oe(),B=ae("div"),O=ae("label"),O.textContent="Insert date",N=Oe(),ee=ae("input"),F=Oe(),ce=ae("h4"),ce.textContent="Calendars",se=Oe(),ve=ae("div"),tt.c(),Ie=Oe(),Be=ae("h4"),Be.textContent="Events",Se=Oe(),Te=ae("div"),we.c(),_e=Oe(),A&&A.c(),Xe=Oe(),Ve=ae("button"),Ve.textContent="Insert",i.__value="None",i.value=i.__value,te(n,"class","dropdown left"),e[1]===void 0&&Ca(()=>e[15].call(n)),te(s,"class","center svelte-6isfqn"),te(c,"class","right svelte-6isfqn"),te(r,"class","header svelte-6isfqn"),te(m,"for","insertType"),te(w,"default",""),w.__value="bullet",w.value=w.__value,S.__value="table",S.value=S.__value,te(E,"class","dropdown"),e[2]===void 0&&Ca(()=>e[16].call(E)),te(y,"class","input svelte-6isfqn"),te(O,"for","date"),te(ee,"type","date"),te(ee,"name","date"),te(ee,"id","date"),ee.value=q=window.moment().format("YYYY-MM-DD"),te(B,"class","input svelte-6isfqn"),te(g,"class","settingsContainer svelte-6isfqn"),te(ve,"class","calendarList svelte-6isfqn"),te(Te,"class","eventList svelte-6isfqn"),te(Ve,"class","svelte-6isfqn"),te(t,"class","optionContainer svelte-6isfqn")},m(D,L){be(D,t,L),re(t,r),re(r,n),re(n,i),ze&&ze.m(n,null),Qi(n,e[1]),re(r,a),re(r,s),re(r,l),re(r,c),re(t,f),re(t,d),re(t,h),re(t,g),re(g,y),re(y,m),re(y,_),re(y,E),re(E,w),re(E,S),Qi(E,e[2]),re(g,R),re(g,B),re(B,O),re(B,N),re(B,ee),re(t,F),re(t,ce),re(t,se),re(t,ve),tt.m(ve,null),re(t,Ie),re(t,Be),re(t,Se),re(t,Te),we.m(Te,null),re(t,_e),A&&A.m(t,null),re(t,Xe),re(t,Ve),yt||(ht=[Qe(n,"change",e[15]),Qe(n,"change",e[12]),Qe(c,"click",e[11]),Qe(E,"change",e[16]),Qe(ee,"change",e[10]),Qe(Ve,"click",e[6])],yt=!0)},p(D,L){D[0].settings.insertTemplates.length?ze?ze.p(D,L):(ze=o2(D),ze.c(),ze.m(n,null)):ze&&(ze.d(1),ze=null),L[0]&3&&Qi(n,D[1]),L[0]&4&&Qi(E,D[2]),pt===(pt=fe(D,L))&&tt?tt.p(D,L):(tt.d(1),tt=pt(D),tt&&(tt.c(),tt.m(ve,null))),Je===(Je=vt(D,L))&&we?we.p(D,L):(we.d(1),we=Je(D),we&&(we.c(),we.m(Te,null))),D[2]=="table"?A?A.p(D,L):(A=f2(D),A.c(),A.m(t,Xe)):A&&(A.d(1),A=null)},i:bt,o:bt,d(D){D&&Ce(t),ze&&ze.d(),tt.d(),we.d(),A&&A.d(),yt=!1,Yr(ht)}}}function bG(e,t,r){let{onSubmit:n}=t,{insertEventsModal:i}=t,a=kt.getInstance(),s,l,c,f,d=[".summary",".description"];Zs(()=>_r(void 0,void 0,void 0,function*(){let q=yield dn();r(4,f=q.map(ce=>[ce,!0]));let F=yield or();r(3,c=F.map(ce=>[ce,!0]))}));let h=()=>{let q=c.filter(F=>F[1]).map(F=>F[0]);n(l,q,d,i)},g=q=>{c.forEach(F=>{F[0].parent.id==q.target.id&&(F[1]=q.target.checked)}),r(3,c)},y=q=>{let F=q.target.value;F=="on"&&(F=q.target.id),d.contains(F)?d.remove(F):d.push(F),r(5,d)},m=q=>{d.contains(q)&&d.remove(q),r(5,d)},_=q=>_r(void 0,void 0,void 0,function*(){let F=yield dn();r(4,f=F.map(se=>[se,!0]));let ce=yield or({startDate:window.moment(q.target.value).local()});r(3,c=ce.map(se=>[se,!0])),r(3,c)}),E=()=>f.filter(q=>q[1]).map(q=>q[0].id),w=()=>{new Wm(app,q=>{let F={name:q,insertType:l,tableOptions:d,calendarList:E()};r(0,a.settings.insertTemplates=[...a.settings.insertTemplates,F],a),a.saveSettings(),fr("Added template")}).open()},S=q=>{let F=q.target.value;if(F=="None")return;let se=a.settings.insertTemplates.find(ve=>ve.name==F);!se||(r(2,l=se.insertType),r(5,d=se.tableOptions),f.forEach(ve=>ve[1]=se.calendarList.contains(ve[0].id)),c.forEach(ve=>ve[1]=se.calendarList.contains(ve[0].parent.id)),r(4,f),r(3,c))};function R(){s=wl(this),r(1,s),r(0,a)}function B(){l=wl(this),r(2,l)}function O(q,F){q[F][1]=this.checked,r(4,f)}function N(q,F){q[F][1]=this.checked,r(3,c)}let ee=q=>m(q);return e.$$set=q=>{"onSubmit"in q&&r(13,n=q.onSubmit),"insertEventsModal"in q&&r(14,i=q.insertEventsModal)},[a,s,l,c,f,d,h,g,y,m,_,w,S,n,i,R,B,O,N,ee]}var p2=class extends gn{constructor(t){super();In(this,t,bG,CG,Tn,{onSubmit:13,insertEventsModal:14},yG,[-1,-1])}},g2=p2;var y2=mt(_l()),Ym=class extends m2.Modal{constructor(t){super(kt.getInstance().app);this.editor=t}onOpen(){return M(this,null,function*(){let{contentEl:t}=this;new g2({target:t,props:{onSubmit:this.onSubmit,insertEventsModal:this}})})}onClose(){let{contentEl:t}=this;t.empty()}onSubmit(t,r,n,i){let a="",s="",l="";t=="bullet"?(r.forEach(c=>{l+=`
- ${`[${c.summary}](${c.htmlLink}&cal=${c.parent.id})`}`}),i.editor.replaceRange(l,i.editor.getCursor())):t=="table"&&(n.forEach(c=>{c=c.split(".").join(" ").toLocaleUpperCase(),a+=`| ${c} `,s+="| --- "}),a+=`|
`,s+=`|
`,r.forEach(c=>{n.forEach(f=>{let d=y2.default.get(c,f.substring(1),"");f==".summary"&&(d=`[${d}](${c.htmlLink}&cal=${c.parent.id})`),f.startsWith(".start")&&!f.contains("timeZone")&&(d=(c.start.date?window.moment(c.start.date):window.moment(c.start.dateTime)).format("YYYY-MM-DD HH:mm")),f.startsWith(".end")&&!f.contains("timeZone")&&(d=(c.start.date?window.moment(c.end.date):window.moment(c.end.dateTime)).format("YYYY-MM-DD HH:mm")),l+=`| ${d} `}),l+=`|
`}),i.editor.replaceRange(a+s+l,i.editor.getCursor())),i.close()}};var zm=class{constructor(){}make(){return{getCalendars:()=>dn(),getEvent:(t,r)=>xh(t,r),getEvents:t=>or(t)}}};var xG={googleClientId:"",googleClientSecret:"",googleRefreshToken:"",useCustomClient:!0,googleOAuthServer:"https://obsidian-google-calendar.vercel.app",refreshInterval:10,showNotice:!0,autoCreateEventNotes:!0,autoCreateEventKeepOpen:!1,importStartOffset:1,importEndOffset:1,defaultCalendar:"",calendarBlackList:[],insertTemplates:[],webViewDefaultColorMode:lh(),useDefaultTemplate:!1,defaultTemplate:"",defaultFolder:app.vault.config.newFileFolderPath},kt=class extends Ol.Plugin{constructor(){super(...arguments);this.initView=t=>M(this,null,function*(){this.app.workspace.getLeavesOfType(t).length===0&&(yield this.app.workspace.getRightLeaf(!1).setViewState({type:t})),this.app.workspace.revealLeaf(this.app.workspace.getLeavesOfType(t).first())});this.onLayoutReady=()=>{var n;let t=(n=this.app.internalPlugins)==null?void 0:n.plugins.templates;t&&t.enabled&&(this.coreTemplatePlugin=t);let r=this.app.plugins.plugins["templater-obsidian"];r&&r._loaded&&(this.templaterPlugin=r),wm(this)}}static getInstance(){return kt.instance}onload(){return M(this,null,function*(){kt.instance=this,this.api=new zm().make(),yield this.loadSettings(),this.app.workspace.onLayoutReady(this.onLayoutReady),this.registerMarkdownCodeBlockProcessor("gEvent",(t,r,n)=>HA(t,r,n)),this.registerEditorSuggest(new Hm(this.app)),this.registerView(ic,t=>new qm(t)),this.registerView(ac,t=>new Gm(t)),this.registerView(sc,t=>new Vm(t)),this.registerView(oc,t=>new Km(t)),this.registerEvent(this.app.workspace.on("editor-change",t=>{JA(t),e2(t)})),this.addCommand({id:"open-google-calendar-timline-view",name:"Open Google Calendar timeline view",callback:()=>this.initView(ic)}),this.addCommand({id:"open-google-calendar-month-view",name:"Open Google Calendar month view",callback:()=>this.initView(ac)}),this.addCommand({id:"open-google-calendar-web-view",name:"Open Google Calendar web view",callback:()=>this.initView(sc)}),this.addCommand({id:"open-google-calendar-schedule-view",name:"Open Google Calendar schedule view",callback:()=>this.initView(oc)}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:t=>{let r=jt();if(t)return r;!r||dn().then(n=>{new sh(n).open()})}}),this.addCommand({id:"create-google-calendar-event",name:"Create Google Calendar Event",checkCallback:t=>{let r=jt();if(t)return r;!r||new fi({start:{},end:{}},()=>{Ai()}).open()}}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:t=>{let r=jt();if(t)return r;!r||dn().then(n=>{new sh(n).open()})}}),this.addCommand({id:"list-google-events",name:"List Google Events",checkCallback:t=>{let r=jt();if(t)return r;!r||or().then(n=>{new ki(n,"details").open()})}}),this.addCommand({id:"google-calendar-trigger-auto-import",name:"Google Calendar Trigger Auto Import",checkCallback:t=>{let r=jt();if(t)return r;!r||wm(this)}}),this.addCommand({id:"google-calendar-create-event-note",name:"Create Event Note",checkCallback:t=>{let r=jt();if(t)return r;!r||or().then(n=>{new ki(n,"createNote").open()})}}),this.addCommand({id:"google-calendar-create-event-note-current-event",name:"Create Event Note for current event",checkCallback:t=>{let r=jt();if(t)return r;!r||or().then(n=>{let i=n.filter(a=>{if(a.start.date)return!1;let s=window.moment(a.start.dateTime),l=window.moment(a.end.dateTime),c=window.moment();return!(c.isBefore(s)||c.isAfter(l))});i.length==0&&(i=n.filter(a=>{if(a.start.date)return!1;let s=window.moment(a.start.dateTime).subtract(1,"hour"),l=window.moment(a.end.dateTime),c=window.moment();return!(c.isBefore(s)||c.isAfter(l))})),i.length==0&&(i=n.filter(a=>!!a.start.date)),i.length==1?this.settings.useDefaultTemplate&&this.settings.defaultFolder&&this.settings.defaultFolder?no(i[0],this.settings.defaultFolder,this.settings.defaultTemplate):new lo(i[0],()=>{}).open():new ki(i,"createNote").open()})}}),this.addCommand({id:"insert-google-event-codeblock",name:"Insert Google Event CodeBlock",editorCallback:t=>{t.replaceRange("```gEvent\ndate: "+window.moment().format("YYYY-MM-DD")+"\ntype: day\n```",t.getCursor())}}),this.addCommand({id:"insert-google-event-template",name:"Insert Google Event Template",editorCallback:t=>{t.replaceRange("{{gEvent.}}",t.getCursor());let r=t.getCursor();r.ch+="{{gEvent.".length,t.setCursor(r)}}),this.addCommand({id:"insert-google-events",name:"Insert Google events",editorCheckCallback:(t,r)=>{let n=jt();if(t)return n;!n||new Ym(r).open()}}),this.addCommand({id:"copy-google-calendar-refresh-token",name:"Copy Google Calendar Refresh Token to Clipboard",callback:()=>{let t=ca();if(t==null||t==""){new Ol.Notice("No Refresh Token. Please Login.");return}navigator.clipboard.writeText(t),new Ol.Notice("Token copied")}}),this.settingsTab=new pm(this.app,this),this.addSettingTab(this.settingsTab),this.registerObsidianProtocolHandler("googleLogin",t=>M(this,null,function*(){this.settings.useCustomClient||(tf(t.uid),qa(t.at),Ga(+new Date+36e5),new Ol.Notice("Login successfull!"),this.settingsTab.display())}))})}onunload(){this.app.workspace.detachLeavesOfType(ic),this.app.workspace.detachLeavesOfType(ac),this.app.workspace.detachLeavesOfType(sc),this.app.workspace.detachLeavesOfType(oc)}loadSettings(){return M(this,null,function*(){this.settings=Object.assign({},xG,yield this.loadData())})}saveSettings(){return M(this,null,function*(){yield this.saveData(this.settings)})}};
/*!
 * rrule.js - Library for working with recurrence rules for calendar dates.
 * https://github.com/jakubroztocil/rrule
 *
 * Copyright 2010, Jakub Roztocil and Lars Schoning
 * Licenced under the BSD licence.
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 * Based on:
 * python-dateutil - Extensions to the standard Python datetime module.
 * Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
 * Copyright (c) 2012 - Tomi Pievilinen <tomi.pievilainen@iki.fi>
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 */
/*!
* rrule.js - Library for working with recurrence rules for calendar dates.
* https://github.com/jakubroztocil/rrule
*
* Copyright 2010, Jakub Roztocil and Lars Schoning
* Licenced under the BSD licence.
* https://github.com/jakubroztocil/rrule/blob/master/LICENCE
*
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
